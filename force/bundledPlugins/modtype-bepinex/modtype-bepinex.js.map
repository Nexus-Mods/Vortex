{"version":3,"file":"index.js","mappings":";;;;;;;;;;AAAY;AACZ,UAAU,mBAAO,CAAC,qEAAiB;AACnC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,sBAAsB,GAAG,6BAA6B,GAAG,wBAAwB;AAC/F;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;;;;;;;;;;ACtBY;AACZ,UAAU,mBAAO,CAAC,qEAAiB;;AAEnC;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,sBAAsB,GAAG,6BAA6B,GAAG,wBAAwB;AACrG,oBAAoB,yBAAyB,GAAG,2BAA2B,GAAG,2BAA2B,GAAG,gCAAgC;AAC5I,cAAc,KAAK,GAAG,KAAK;AAC3B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;;;;;;;;;;ACvBY;AACZ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;;;;;;;;;;ACTY;AACZ,UAAU,mBAAO,CAAC,qEAAiB;;AAEnC;AACA;AACA,wBAAwB,MAAM;AAC9B;AACA;AACA;AACA,cAAc,yBAAyB,GAAG,2BAA2B,GAAG,2BAA2B,GAAG,gCAAgC;AACtI;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;;;;;;;;;;ACrBY;AACZ;AACA;AACA;AACA;AACA;;;;;;;;;;;ACLY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;;AAEN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC9HY;AACZ;AACA,iCAAiC,mBAAO,CAAC,6DAAa;AACtD,8BAA8B;;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;;AAExB,uBAAuB,mBAAO,CAAC,+EAAsB;AACrD,4BAA4B,mBAAO,CAAC,2FAA4B;AAChE,mBAAmB,mBAAO,CAAC,uEAAkB;AAC7C,mBAAmB,mBAAO,CAAC,uEAAkB;;AAE7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB;;AAEpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mCAAmC;AACnC,cAAc;AACd,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mCAAmC;AACnC,cAAc,aAAa;AAC3B,kBAAkB;AAClB,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc,mBAAmB;AACjC,qBAAqB;AACrB,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,wCAAwC,eAAe;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,gBAAgB,EAAE;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,cAAc,qBAAqB,qBAAqB;AACxD,gBAAgB,eAAe;AAC/B,mBAAmB,0BAA0B,MAAM;AACnD,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc,aAAa;AAC3B,iBAAiB,wBAAwB,MAAM;AAC/C,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR,6DAA6D,UAAU;AACvE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,6BAA6B,0CAA0C;AACvE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;;AAEA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA,QAAQ;AACR;;AAEA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oHAAoH,aAAa;AACjI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA,QAAQ;AACR;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,QAAQ;AACR;AACA;AACA,QAAQ;AACR;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA,QAAQ;AACR;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,QAAQ;AACR;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,QAAQ;AACR;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA,QAAQ;AACR;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6FAA6F,UAAU,MAAM,UAAU;AACvH;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACl2CY;AACZ;;AAEA,mBAAmB,mBAAO,CAAC,2EAAsB;AACjD,oBAAoB,mBAAO,CAAC,iFAAyB;;AAErD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;;;;;;;;;;AC7BY;AACZ;;AAEA;AACA;AACA;AACA;AACA,oBAAoB,aAAa,QAAQ,YAAY,QAAQ,QAAQ;;AAErE;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,2CAA2C;AACxF;AACA;AACA;AACA;AACA;AACA,yBAAyB,cAAc;AACvC;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AChCY;AACZ;;AAEA,eAAe,mBAAO,CAAC,sBAAQ;AAC/B,mBAAmB,mBAAO,CAAC,2EAAsB;;AAEjD;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;AC/EY;AACZ;;AAEA,mBAAmB,mBAAO,CAAC,2EAAsB;AACjD,oBAAoB,mBAAO,CAAC,iFAAyB;;AAErD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;;;;;;;;;;ACjBY;AACZ,2GAA6C;AAC7C,+GAAkD;AAClD,kHAAoD;AACpD,mIAA+D;;;;;;;;;;;ACJnD;AACZ;AACA,oBAAoB;;AAEpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iGAAiG,0BAA0B;AAC3H;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yCAAyC,EAAE;AAC3C;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA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","sources":["webpack://modtype-bepinex/./node_modules/@iarna/toml/lib/create-date.js","webpack://modtype-bepinex/./node_modules/@iarna/toml/lib/create-datetime-float.js","webpack://modtype-bepinex/./node_modules/@iarna/toml/lib/create-datetime.js","webpack://modtype-bepinex/./node_modules/@iarna/toml/lib/create-time.js","webpack://modtype-bepinex/./node_modules/@iarna/toml/lib/format-num.js","webpack://modtype-bepinex/./node_modules/@iarna/toml/lib/parser.js","webpack://modtype-bepinex/./node_modules/@iarna/toml/lib/toml-parser.js","webpack://modtype-bepinex/./node_modules/@iarna/toml/parse-async.js","webpack://modtype-bepinex/./node_modules/@iarna/toml/parse-pretty-error.js","webpack://modtype-bepinex/./node_modules/@iarna/toml/parse-stream.js","webpack://modtype-bepinex/./node_modules/@iarna/toml/parse-string.js","webpack://modtype-bepinex/./node_modules/@iarna/toml/parse.js","webpack://modtype-bepinex/./node_modules/@iarna/toml/stringify.js","webpack://modtype-bepinex/./node_modules/@iarna/toml/toml.js","webpack://modtype-bepinex/./src/AttribDashlet.tsx","webpack://modtype-bepinex/./src/bepInExDownloader.ts","webpack://modtype-bepinex/./src/common.ts","webpack://modtype-bepinex/./src/githubDownloader.ts","webpack://modtype-bepinex/./src/index.ts","webpack://modtype-bepinex/./src/installers.ts","webpack://modtype-bepinex/./src/types.ts","webpack://modtype-bepinex/./src/util.ts","webpack://modtype-bepinex/external commonjs2 \"bluebird\"","webpack://modtype-bepinex/external node-commonjs \"https\"","webpack://modtype-bepinex/external commonjs2 \"lodash\"","webpack://modtype-bepinex/external commonjs2 \"path\"","webpack://modtype-bepinex/external commonjs2 \"react\"","webpack://modtype-bepinex/external commonjs2 \"react-i18next\"","webpack://modtype-bepinex/external commonjs2 \"semver\"","webpack://modtype-bepinex/external node-commonjs \"stream\"","webpack://modtype-bepinex/external node-commonjs \"url\"","webpack://modtype-bepinex/external commonjs2 \"vortex-api\"","webpack://modtype-bepinex/external commonjs2 \"vortex-parse-ini\"","webpack://modtype-bepinex/webpack/bootstrap","webpack://modtype-bepinex/webpack/before-startup","webpack://modtype-bepinex/webpack/startup","webpack://modtype-bepinex/webpack/after-startup"],"sourcesContent":["'use strict'\nconst f = require('./format-num.js')\nconst DateTime = global.Date\n\nclass Date extends DateTime {\n  constructor (value) {\n    super(value)\n    this.isDate = true\n  }\n  toISOString () {\n    return `${this.getUTCFullYear()}-${f(2, this.getUTCMonth() + 1)}-${f(2, this.getUTCDate())}`\n  }\n}\n\nmodule.exports = value => {\n  const date = new Date(value)\n  /* istanbul ignore if */\n  if (isNaN(date)) {\n    throw new TypeError('Invalid Datetime')\n  } else {\n    return date\n  }\n}\n","'use strict'\nconst f = require('./format-num.js')\n\nclass FloatingDateTime extends Date {\n  constructor (value) {\n    super(value + 'Z')\n    this.isFloating = true\n  }\n  toISOString () {\n    const date = `${this.getUTCFullYear()}-${f(2, this.getUTCMonth() + 1)}-${f(2, this.getUTCDate())}`\n    const time = `${f(2, this.getUTCHours())}:${f(2, this.getUTCMinutes())}:${f(2, this.getUTCSeconds())}.${f(3, this.getUTCMilliseconds())}`\n    return `${date}T${time}`\n  }\n}\n\nmodule.exports = value => {\n  const date = new FloatingDateTime(value)\n  /* istanbul ignore if */\n  if (isNaN(date)) {\n    throw new TypeError('Invalid Datetime')\n  } else {\n    return date\n  }\n}\n","'use strict'\nmodule.exports = value => {\n  const date = new Date(value)\n  /* istanbul ignore if */\n  if (isNaN(date)) {\n    throw new TypeError('Invalid Datetime')\n  } else {\n    return date\n  }\n}\n","'use strict'\nconst f = require('./format-num.js')\n\nclass Time extends Date {\n  constructor (value) {\n    super(`0000-01-01T${value}Z`)\n    this.isTime = true\n  }\n  toISOString () {\n    return `${f(2, this.getUTCHours())}:${f(2, this.getUTCMinutes())}:${f(2, this.getUTCSeconds())}.${f(3, this.getUTCMilliseconds())}`\n  }\n}\n\nmodule.exports = value => {\n  const date = new Time(value)\n  /* istanbul ignore if */\n  if (isNaN(date)) {\n    throw new TypeError('Invalid Datetime')\n  } else {\n    return date\n  }\n}\n","'use strict'\nmodule.exports = (d, num) => {\n  num = String(num)\n  while (num.length < d) num = '0' + num\n  return num\n}\n","'use strict'\nconst ParserEND = 0x110000\nclass ParserError extends Error {\n  /* istanbul ignore next */\n  constructor (msg, filename, linenumber) {\n    super('[ParserError] ' + msg, filename, linenumber)\n    this.name = 'ParserError'\n    this.code = 'ParserError'\n    if (Error.captureStackTrace) Error.captureStackTrace(this, ParserError)\n  }\n}\nclass State {\n  constructor (parser) {\n    this.parser = parser\n    this.buf = ''\n    this.returned = null\n    this.result = null\n    this.resultTable = null\n    this.resultArr = null\n  }\n}\nclass Parser {\n  constructor () {\n    this.pos = 0\n    this.col = 0\n    this.line = 0\n    this.obj = {}\n    this.ctx = this.obj\n    this.stack = []\n    this._buf = ''\n    this.char = null\n    this.ii = 0\n    this.state = new State(this.parseStart)\n  }\n\n  parse (str) {\n    /* istanbul ignore next */\n    if (str.length === 0 || str.length == null) return\n\n    this._buf = String(str)\n    this.ii = -1\n    this.char = -1\n    let getNext\n    while (getNext === false || this.nextChar()) {\n      getNext = this.runOne()\n    }\n    this._buf = null\n  }\n  nextChar () {\n    if (this.char === 0x0A) {\n      ++this.line\n      this.col = -1\n    }\n    ++this.ii\n    this.char = this._buf.codePointAt(this.ii)\n    ++this.pos\n    ++this.col\n    return this.haveBuffer()\n  }\n  haveBuffer () {\n    return this.ii < this._buf.length\n  }\n  runOne () {\n    return this.state.parser.call(this, this.state.returned)\n  }\n  finish () {\n    this.char = ParserEND\n    let last\n    do {\n      last = this.state.parser\n      this.runOne()\n    } while (this.state.parser !== last)\n\n    this.ctx = null\n    this.state = null\n    this._buf = null\n\n    return this.obj\n  }\n  next (fn) {\n    /* istanbul ignore next */\n    if (typeof fn !== 'function') throw new ParserError('Tried to set state to non-existent state: ' + JSON.stringify(fn))\n    this.state.parser = fn\n  }\n  goto (fn) {\n    this.next(fn)\n    return this.runOne()\n  }\n  call (fn, returnWith) {\n    if (returnWith) this.next(returnWith)\n    this.stack.push(this.state)\n    this.state = new State(fn)\n  }\n  callNow (fn, returnWith) {\n    this.call(fn, returnWith)\n    return this.runOne()\n  }\n  return (value) {\n    /* istanbul ignore next */\n    if (this.stack.length === 0) throw this.error(new ParserError('Stack underflow'))\n    if (value === undefined) value = this.state.buf\n    this.state = this.stack.pop()\n    this.state.returned = value\n  }\n  returnNow (value) {\n    this.return(value)\n    return this.runOne()\n  }\n  consume () {\n    /* istanbul ignore next */\n    if (this.char === ParserEND) throw this.error(new ParserError('Unexpected end-of-buffer'))\n    this.state.buf += this._buf[this.ii]\n  }\n  error (err) {\n    err.line = this.line\n    err.col = this.col\n    err.pos = this.pos\n    return err\n  }\n  /* istanbul ignore next */\n  parseStart () {\n    throw new ParserError('Must declare a parseStart method')\n  }\n}\nParser.END = ParserEND\nParser.Error = ParserError\nmodule.exports = Parser\n","'use strict'\n/* eslint-disable no-new-wrappers, no-eval, camelcase, operator-linebreak */\nmodule.exports = makeParserClass(require('./parser.js'))\nmodule.exports.makeParserClass = makeParserClass\n\nclass TomlError extends Error {\n  constructor (msg) {\n    super(msg)\n    this.name = 'TomlError'\n    /* istanbul ignore next */\n    if (Error.captureStackTrace) Error.captureStackTrace(this, TomlError)\n    this.fromTOML = true\n    this.wrapped = null\n  }\n}\nTomlError.wrap = err => {\n  const terr = new TomlError(err.message)\n  terr.code = err.code\n  terr.wrapped = err\n  return terr\n}\nmodule.exports.TomlError = TomlError\n\nconst createDateTime = require('./create-datetime.js')\nconst createDateTimeFloat = require('./create-datetime-float.js')\nconst createDate = require('./create-date.js')\nconst createTime = require('./create-time.js')\n\nconst CTRL_I = 0x09\nconst CTRL_J = 0x0A\nconst CTRL_M = 0x0D\nconst CTRL_CHAR_BOUNDARY = 0x1F // the last non-character in the latin1 region of unicode, except DEL\nconst CHAR_SP = 0x20\nconst CHAR_QUOT = 0x22\nconst CHAR_NUM = 0x23\nconst CHAR_APOS = 0x27\nconst CHAR_PLUS = 0x2B\nconst CHAR_COMMA = 0x2C\nconst CHAR_HYPHEN = 0x2D\nconst CHAR_PERIOD = 0x2E\nconst CHAR_0 = 0x30\nconst CHAR_1 = 0x31\nconst CHAR_7 = 0x37\nconst CHAR_9 = 0x39\nconst CHAR_COLON = 0x3A\nconst CHAR_EQUALS = 0x3D\nconst CHAR_A = 0x41\nconst CHAR_E = 0x45\nconst CHAR_F = 0x46\nconst CHAR_T = 0x54\nconst CHAR_U = 0x55\nconst CHAR_Z = 0x5A\nconst CHAR_LOWBAR = 0x5F\nconst CHAR_a = 0x61\nconst CHAR_b = 0x62\nconst CHAR_e = 0x65\nconst CHAR_f = 0x66\nconst CHAR_i = 0x69\nconst CHAR_l = 0x6C\nconst CHAR_n = 0x6E\nconst CHAR_o = 0x6F\nconst CHAR_r = 0x72\nconst CHAR_s = 0x73\nconst CHAR_t = 0x74\nconst CHAR_u = 0x75\nconst CHAR_x = 0x78\nconst CHAR_z = 0x7A\nconst CHAR_LCUB = 0x7B\nconst CHAR_RCUB = 0x7D\nconst CHAR_LSQB = 0x5B\nconst CHAR_BSOL = 0x5C\nconst CHAR_RSQB = 0x5D\nconst CHAR_DEL = 0x7F\nconst SURROGATE_FIRST = 0xD800\nconst SURROGATE_LAST = 0xDFFF\n\nconst escapes = {\n  [CHAR_b]: '\\u0008',\n  [CHAR_t]: '\\u0009',\n  [CHAR_n]: '\\u000A',\n  [CHAR_f]: '\\u000C',\n  [CHAR_r]: '\\u000D',\n  [CHAR_QUOT]: '\\u0022',\n  [CHAR_BSOL]: '\\u005C'\n}\n\nfunction isDigit (cp) {\n  return cp >= CHAR_0 && cp <= CHAR_9\n}\nfunction isHexit (cp) {\n  return (cp >= CHAR_A && cp <= CHAR_F) || (cp >= CHAR_a && cp <= CHAR_f) || (cp >= CHAR_0 && cp <= CHAR_9)\n}\nfunction isBit (cp) {\n  return cp === CHAR_1 || cp === CHAR_0\n}\nfunction isOctit (cp) {\n  return (cp >= CHAR_0 && cp <= CHAR_7)\n}\nfunction isAlphaNumQuoteHyphen (cp) {\n  return (cp >= CHAR_A && cp <= CHAR_Z)\n      || (cp >= CHAR_a && cp <= CHAR_z)\n      || (cp >= CHAR_0 && cp <= CHAR_9)\n      || cp === CHAR_APOS\n      || cp === CHAR_QUOT\n      || cp === CHAR_LOWBAR\n      || cp === CHAR_HYPHEN\n}\nfunction isAlphaNumHyphen (cp) {\n  return (cp >= CHAR_A && cp <= CHAR_Z)\n      || (cp >= CHAR_a && cp <= CHAR_z)\n      || (cp >= CHAR_0 && cp <= CHAR_9)\n      || cp === CHAR_LOWBAR\n      || cp === CHAR_HYPHEN\n}\nconst _type = Symbol('type')\nconst _declared = Symbol('declared')\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty\nconst defineProperty = Object.defineProperty\nconst descriptor = {configurable: true, enumerable: true, writable: true, value: undefined}\n\nfunction hasKey (obj, key) {\n  if (hasOwnProperty.call(obj, key)) return true\n  if (key === '__proto__') defineProperty(obj, '__proto__', descriptor)\n  return false\n}\n\nconst INLINE_TABLE = Symbol('inline-table')\nfunction InlineTable () {\n  return Object.defineProperties({}, {\n    [_type]: {value: INLINE_TABLE}\n  })\n}\nfunction isInlineTable (obj) {\n  if (obj === null || typeof (obj) !== 'object') return false\n  return obj[_type] === INLINE_TABLE\n}\n\nconst TABLE = Symbol('table')\nfunction Table () {\n  return Object.defineProperties({}, {\n    [_type]: {value: TABLE},\n    [_declared]: {value: false, writable: true}\n  })\n}\nfunction isTable (obj) {\n  if (obj === null || typeof (obj) !== 'object') return false\n  return obj[_type] === TABLE\n}\n\nconst _contentType = Symbol('content-type')\nconst INLINE_LIST = Symbol('inline-list')\nfunction InlineList (type) {\n  return Object.defineProperties([], {\n    [_type]: {value: INLINE_LIST},\n    [_contentType]: {value: type}\n  })\n}\nfunction isInlineList (obj) {\n  if (obj === null || typeof (obj) !== 'object') return false\n  return obj[_type] === INLINE_LIST\n}\n\nconst LIST = Symbol('list')\nfunction List () {\n  return Object.defineProperties([], {\n    [_type]: {value: LIST}\n  })\n}\nfunction isList (obj) {\n  if (obj === null || typeof (obj) !== 'object') return false\n  return obj[_type] === LIST\n}\n\n// in an eval, to let bundlers not slurp in a util proxy\nlet _custom\ntry {\n  const utilInspect = eval(\"require('util').inspect\")\n  _custom = utilInspect.custom\n} catch (_) {\n  /* eval require not available in transpiled bundle */\n}\n/* istanbul ignore next */\nconst _inspect = _custom || 'inspect'\n\nclass BoxedBigInt {\n  constructor (value) {\n    try {\n      this.value = global.BigInt.asIntN(64, value)\n    } catch (_) {\n      /* istanbul ignore next */\n      this.value = null\n    }\n    Object.defineProperty(this, _type, {value: INTEGER})\n  }\n  isNaN () {\n    return this.value === null\n  }\n  /* istanbul ignore next */\n  toString () {\n    return String(this.value)\n  }\n  /* istanbul ignore next */\n  [_inspect] () {\n    return `[BigInt: ${this.toString()}]}`\n  }\n  valueOf () {\n    return this.value\n  }\n}\n\nconst INTEGER = Symbol('integer')\nfunction Integer (value) {\n  let num = Number(value)\n  // -0 is a float thing, not an int thing\n  if (Object.is(num, -0)) num = 0\n  /* istanbul ignore else */\n  if (global.BigInt && !Number.isSafeInteger(num)) {\n    return new BoxedBigInt(value)\n  } else {\n    /* istanbul ignore next */\n    return Object.defineProperties(new Number(num), {\n      isNaN: {value: function () { return isNaN(this) }},\n      [_type]: {value: INTEGER},\n      [_inspect]: {value: () => `[Integer: ${value}]`}\n    })\n  }\n}\nfunction isInteger (obj) {\n  if (obj === null || typeof (obj) !== 'object') return false\n  return obj[_type] === INTEGER\n}\n\nconst FLOAT = Symbol('float')\nfunction Float (value) {\n  /* istanbul ignore next */\n  return Object.defineProperties(new Number(value), {\n    [_type]: {value: FLOAT},\n    [_inspect]: {value: () => `[Float: ${value}]`}\n  })\n}\nfunction isFloat (obj) {\n  if (obj === null || typeof (obj) !== 'object') return false\n  return obj[_type] === FLOAT\n}\n\nfunction tomlType (value) {\n  const type = typeof value\n  if (type === 'object') {\n    /* istanbul ignore if */\n    if (value === null) return 'null'\n    if (value instanceof Date) return 'datetime'\n    /* istanbul ignore else */\n    if (_type in value) {\n      switch (value[_type]) {\n        case INLINE_TABLE: return 'inline-table'\n        case INLINE_LIST: return 'inline-list'\n        /* istanbul ignore next */\n        case TABLE: return 'table'\n        /* istanbul ignore next */\n        case LIST: return 'list'\n        case FLOAT: return 'float'\n        case INTEGER: return 'integer'\n      }\n    }\n  }\n  return type\n}\n\nfunction makeParserClass (Parser) {\n  class TOMLParser extends Parser {\n    constructor () {\n      super()\n      this.ctx = this.obj = Table()\n    }\n\n    /* MATCH HELPER */\n    atEndOfWord () {\n      return this.char === CHAR_NUM || this.char === CTRL_I || this.char === CHAR_SP || this.atEndOfLine()\n    }\n    atEndOfLine () {\n      return this.char === Parser.END || this.char === CTRL_J || this.char === CTRL_M\n    }\n\n    parseStart () {\n      if (this.char === Parser.END) {\n        return null\n      } else if (this.char === CHAR_LSQB) {\n        return this.call(this.parseTableOrList)\n      } else if (this.char === CHAR_NUM) {\n        return this.call(this.parseComment)\n      } else if (this.char === CTRL_J || this.char === CHAR_SP || this.char === CTRL_I || this.char === CTRL_M) {\n        return null\n      } else if (isAlphaNumQuoteHyphen(this.char)) {\n        return this.callNow(this.parseAssignStatement)\n      } else {\n        throw this.error(new TomlError(`Unknown character \"${this.char}\"`))\n      }\n    }\n\n    // HELPER, this strips any whitespace and comments to the end of the line\n    // then RETURNS. Last state in a production.\n    parseWhitespaceToEOL () {\n      if (this.char === CHAR_SP || this.char === CTRL_I || this.char === CTRL_M) {\n        return null\n      } else if (this.char === CHAR_NUM) {\n        return this.goto(this.parseComment)\n      } else if (this.char === Parser.END || this.char === CTRL_J) {\n        return this.return()\n      } else {\n        throw this.error(new TomlError('Unexpected character, expected only whitespace or comments till end of line'))\n      }\n    }\n\n    /* ASSIGNMENT: key = value */\n    parseAssignStatement () {\n      return this.callNow(this.parseAssign, this.recordAssignStatement)\n    }\n    recordAssignStatement (kv) {\n      let target = this.ctx\n      let finalKey = kv.key.pop()\n      for (let kw of kv.key) {\n        if (hasKey(target, kw) && (!isTable(target[kw]) || target[kw][_declared])) {\n          throw this.error(new TomlError(\"Can't redefine existing key\"))\n        }\n        target = target[kw] = target[kw] || Table()\n      }\n      if (hasKey(target, finalKey)) {\n        throw this.error(new TomlError(\"Can't redefine existing key\"))\n      }\n      // unbox our numbers\n      if (isInteger(kv.value) || isFloat(kv.value)) {\n        target[finalKey] = kv.value.valueOf()\n      } else {\n        target[finalKey] = kv.value\n      }\n      return this.goto(this.parseWhitespaceToEOL)\n    }\n\n    /* ASSSIGNMENT expression, key = value possibly inside an inline table */\n    parseAssign () {\n      return this.callNow(this.parseKeyword, this.recordAssignKeyword)\n    }\n    recordAssignKeyword (key) {\n      if (this.state.resultTable) {\n        this.state.resultTable.push(key)\n      } else {\n        this.state.resultTable = [key]\n      }\n      return this.goto(this.parseAssignKeywordPreDot)\n    }\n    parseAssignKeywordPreDot () {\n      if (this.char === CHAR_PERIOD) {\n        return this.next(this.parseAssignKeywordPostDot)\n      } else if (this.char !== CHAR_SP && this.char !== CTRL_I) {\n        return this.goto(this.parseAssignEqual)\n      }\n    }\n    parseAssignKeywordPostDot () {\n      if (this.char !== CHAR_SP && this.char !== CTRL_I) {\n        return this.callNow(this.parseKeyword, this.recordAssignKeyword)\n      }\n    }\n\n    parseAssignEqual () {\n      if (this.char === CHAR_EQUALS) {\n        return this.next(this.parseAssignPreValue)\n      } else {\n        throw this.error(new TomlError('Invalid character, expected \"=\"'))\n      }\n    }\n    parseAssignPreValue () {\n      if (this.char === CHAR_SP || this.char === CTRL_I) {\n        return null\n      } else {\n        return this.callNow(this.parseValue, this.recordAssignValue)\n      }\n    }\n    recordAssignValue (value) {\n      return this.returnNow({key: this.state.resultTable, value: value})\n    }\n\n    /* COMMENTS: #...eol */\n    parseComment () {\n      do {\n        if (this.char === Parser.END || this.char === CTRL_J) {\n          return this.return()\n        }\n      } while (this.nextChar())\n    }\n\n    /* TABLES AND LISTS, [foo] and [[foo]] */\n    parseTableOrList () {\n      if (this.char === CHAR_LSQB) {\n        this.next(this.parseList)\n      } else {\n        return this.goto(this.parseTable)\n      }\n    }\n\n    /* TABLE [foo.bar.baz] */\n    parseTable () {\n      this.ctx = this.obj\n      return this.goto(this.parseTableNext)\n    }\n    parseTableNext () {\n      if (this.char === CHAR_SP || this.char === CTRL_I) {\n        return null\n      } else {\n        return this.callNow(this.parseKeyword, this.parseTableMore)\n      }\n    }\n    parseTableMore (keyword) {\n      if (this.char === CHAR_SP || this.char === CTRL_I) {\n        return null\n      } else if (this.char === CHAR_RSQB) {\n        if (hasKey(this.ctx, keyword) && (!isTable(this.ctx[keyword]) || this.ctx[keyword][_declared])) {\n          throw this.error(new TomlError(\"Can't redefine existing key\"))\n        } else {\n          this.ctx = this.ctx[keyword] = this.ctx[keyword] || Table()\n          this.ctx[_declared] = true\n        }\n        return this.next(this.parseWhitespaceToEOL)\n      } else if (this.char === CHAR_PERIOD) {\n        if (!hasKey(this.ctx, keyword)) {\n          this.ctx = this.ctx[keyword] = Table()\n        } else if (isTable(this.ctx[keyword])) {\n          this.ctx = this.ctx[keyword]\n        } else if (isList(this.ctx[keyword])) {\n          this.ctx = this.ctx[keyword][this.ctx[keyword].length - 1]\n        } else {\n          throw this.error(new TomlError(\"Can't redefine existing key\"))\n        }\n        return this.next(this.parseTableNext)\n      } else {\n        throw this.error(new TomlError('Unexpected character, expected whitespace, . or ]'))\n      }\n    }\n\n    /* LIST [[a.b.c]] */\n    parseList () {\n      this.ctx = this.obj\n      return this.goto(this.parseListNext)\n    }\n    parseListNext () {\n      if (this.char === CHAR_SP || this.char === CTRL_I) {\n        return null\n      } else {\n        return this.callNow(this.parseKeyword, this.parseListMore)\n      }\n    }\n    parseListMore (keyword) {\n      if (this.char === CHAR_SP || this.char === CTRL_I) {\n        return null\n      } else if (this.char === CHAR_RSQB) {\n        if (!hasKey(this.ctx, keyword)) {\n          this.ctx[keyword] = List()\n        }\n        if (isInlineList(this.ctx[keyword])) {\n          throw this.error(new TomlError(\"Can't extend an inline array\"))\n        } else if (isList(this.ctx[keyword])) {\n          const next = Table()\n          this.ctx[keyword].push(next)\n          this.ctx = next\n        } else {\n          throw this.error(new TomlError(\"Can't redefine an existing key\"))\n        }\n        return this.next(this.parseListEnd)\n      } else if (this.char === CHAR_PERIOD) {\n        if (!hasKey(this.ctx, keyword)) {\n          this.ctx = this.ctx[keyword] = Table()\n        } else if (isInlineList(this.ctx[keyword])) {\n          throw this.error(new TomlError(\"Can't extend an inline array\"))\n        } else if (isInlineTable(this.ctx[keyword])) {\n          throw this.error(new TomlError(\"Can't extend an inline table\"))\n        } else if (isList(this.ctx[keyword])) {\n          this.ctx = this.ctx[keyword][this.ctx[keyword].length - 1]\n        } else if (isTable(this.ctx[keyword])) {\n          this.ctx = this.ctx[keyword]\n        } else {\n          throw this.error(new TomlError(\"Can't redefine an existing key\"))\n        }\n        return this.next(this.parseListNext)\n      } else {\n        throw this.error(new TomlError('Unexpected character, expected whitespace, . or ]'))\n      }\n    }\n    parseListEnd (keyword) {\n      if (this.char === CHAR_RSQB) {\n        return this.next(this.parseWhitespaceToEOL)\n      } else {\n        throw this.error(new TomlError('Unexpected character, expected whitespace, . or ]'))\n      }\n    }\n\n    /* VALUE string, number, boolean, inline list, inline object */\n    parseValue () {\n      if (this.char === Parser.END) {\n        throw this.error(new TomlError('Key without value'))\n      } else if (this.char === CHAR_QUOT) {\n        return this.next(this.parseDoubleString)\n      } if (this.char === CHAR_APOS) {\n        return this.next(this.parseSingleString)\n      } else if (this.char === CHAR_HYPHEN || this.char === CHAR_PLUS) {\n        return this.goto(this.parseNumberSign)\n      } else if (this.char === CHAR_i) {\n        return this.next(this.parseInf)\n      } else if (this.char === CHAR_n) {\n        return this.next(this.parseNan)\n      } else if (isDigit(this.char)) {\n        return this.goto(this.parseNumberOrDateTime)\n      } else if (this.char === CHAR_t || this.char === CHAR_f) {\n        return this.goto(this.parseBoolean)\n      } else if (this.char === CHAR_LSQB) {\n        return this.call(this.parseInlineList, this.recordValue)\n      } else if (this.char === CHAR_LCUB) {\n        return this.call(this.parseInlineTable, this.recordValue)\n      } else {\n        throw this.error(new TomlError('Unexpected character, expecting string, number, datetime, boolean, inline array or inline table'))\n      }\n    }\n    recordValue (value) {\n      return this.returnNow(value)\n    }\n\n    parseInf () {\n      if (this.char === CHAR_n) {\n        return this.next(this.parseInf2)\n      } else {\n        throw this.error(new TomlError('Unexpected character, expected \"inf\", \"+inf\" or \"-inf\"'))\n      }\n    }\n    parseInf2 () {\n      if (this.char === CHAR_f) {\n        if (this.state.buf === '-') {\n          return this.return(-Infinity)\n        } else {\n          return this.return(Infinity)\n        }\n      } else {\n        throw this.error(new TomlError('Unexpected character, expected \"inf\", \"+inf\" or \"-inf\"'))\n      }\n    }\n\n    parseNan () {\n      if (this.char === CHAR_a) {\n        return this.next(this.parseNan2)\n      } else {\n        throw this.error(new TomlError('Unexpected character, expected \"nan\"'))\n      }\n    }\n    parseNan2 () {\n      if (this.char === CHAR_n) {\n        return this.return(NaN)\n      } else {\n        throw this.error(new TomlError('Unexpected character, expected \"nan\"'))\n      }\n    }\n\n    /* KEYS, barewords or basic, literal, or dotted */\n    parseKeyword () {\n      if (this.char === CHAR_QUOT) {\n        return this.next(this.parseBasicString)\n      } else if (this.char === CHAR_APOS) {\n        return this.next(this.parseLiteralString)\n      } else {\n        return this.goto(this.parseBareKey)\n      }\n    }\n\n    /* KEYS: barewords */\n    parseBareKey () {\n      do {\n        if (this.char === Parser.END) {\n          throw this.error(new TomlError('Key ended without value'))\n        } else if (isAlphaNumHyphen(this.char)) {\n          this.consume()\n        } else if (this.state.buf.length === 0) {\n          throw this.error(new TomlError('Empty bare keys are not allowed'))\n        } else {\n          return this.returnNow()\n        }\n      } while (this.nextChar())\n    }\n\n    /* STRINGS, single quoted (literal) */\n    parseSingleString () {\n      if (this.char === CHAR_APOS) {\n        return this.next(this.parseLiteralMultiStringMaybe)\n      } else {\n        return this.goto(this.parseLiteralString)\n      }\n    }\n    parseLiteralString () {\n      do {\n        if (this.char === CHAR_APOS) {\n          return this.return()\n        } else if (this.atEndOfLine()) {\n          throw this.error(new TomlError('Unterminated string'))\n        } else if (this.char === CHAR_DEL || (this.char <= CTRL_CHAR_BOUNDARY && this.char !== CTRL_I)) {\n          throw this.errorControlCharInString()\n        } else {\n          this.consume()\n        }\n      } while (this.nextChar())\n    }\n    parseLiteralMultiStringMaybe () {\n      if (this.char === CHAR_APOS) {\n        return this.next(this.parseLiteralMultiString)\n      } else {\n        return this.returnNow()\n      }\n    }\n    parseLiteralMultiString () {\n      if (this.char === CTRL_M) {\n        return null\n      } else if (this.char === CTRL_J) {\n        return this.next(this.parseLiteralMultiStringContent)\n      } else {\n        return this.goto(this.parseLiteralMultiStringContent)\n      }\n    }\n    parseLiteralMultiStringContent () {\n      do {\n        if (this.char === CHAR_APOS) {\n          return this.next(this.parseLiteralMultiEnd)\n        } else if (this.char === Parser.END) {\n          throw this.error(new TomlError('Unterminated multi-line string'))\n        } else if (this.char === CHAR_DEL || (this.char <= CTRL_CHAR_BOUNDARY && this.char !== CTRL_I && this.char !== CTRL_J && this.char !== CTRL_M)) {\n          throw this.errorControlCharInString()\n        } else {\n          this.consume()\n        }\n      } while (this.nextChar())\n    }\n    parseLiteralMultiEnd () {\n      if (this.char === CHAR_APOS) {\n        return this.next(this.parseLiteralMultiEnd2)\n      } else {\n        this.state.buf += \"'\"\n        return this.goto(this.parseLiteralMultiStringContent)\n      }\n    }\n    parseLiteralMultiEnd2 () {\n      if (this.char === CHAR_APOS) {\n        return this.return()\n      } else {\n        this.state.buf += \"''\"\n        return this.goto(this.parseLiteralMultiStringContent)\n      }\n    }\n\n    /* STRINGS double quoted */\n    parseDoubleString () {\n      if (this.char === CHAR_QUOT) {\n        return this.next(this.parseMultiStringMaybe)\n      } else {\n        return this.goto(this.parseBasicString)\n      }\n    }\n    parseBasicString () {\n      do {\n        if (this.char === CHAR_BSOL) {\n          return this.call(this.parseEscape, this.recordEscapeReplacement)\n        } else if (this.char === CHAR_QUOT) {\n          return this.return()\n        } else if (this.atEndOfLine()) {\n          throw this.error(new TomlError('Unterminated string'))\n        } else if (this.char === CHAR_DEL || (this.char <= CTRL_CHAR_BOUNDARY && this.char !== CTRL_I)) {\n          throw this.errorControlCharInString()\n        } else {\n          this.consume()\n        }\n      } while (this.nextChar())\n    }\n    recordEscapeReplacement (replacement) {\n      this.state.buf += replacement\n      return this.goto(this.parseBasicString)\n    }\n    parseMultiStringMaybe () {\n      if (this.char === CHAR_QUOT) {\n        return this.next(this.parseMultiString)\n      } else {\n        return this.returnNow()\n      }\n    }\n    parseMultiString () {\n      if (this.char === CTRL_M) {\n        return null\n      } else if (this.char === CTRL_J) {\n        return this.next(this.parseMultiStringContent)\n      } else {\n        return this.goto(this.parseMultiStringContent)\n      }\n    }\n    parseMultiStringContent () {\n      do {\n        if (this.char === CHAR_BSOL) {\n          return this.call(this.parseMultiEscape, this.recordMultiEscapeReplacement)\n        } else if (this.char === CHAR_QUOT) {\n          return this.next(this.parseMultiEnd)\n        } else if (this.char === Parser.END) {\n          throw this.error(new TomlError('Unterminated multi-line string'))\n        } else if (this.char === CHAR_DEL || (this.char <= CTRL_CHAR_BOUNDARY && this.char !== CTRL_I && this.char !== CTRL_J && this.char !== CTRL_M)) {\n          throw this.errorControlCharInString()\n        } else {\n          this.consume()\n        }\n      } while (this.nextChar())\n    }\n    errorControlCharInString () {\n      let displayCode = '\\\\u00'\n      if (this.char < 16) {\n        displayCode += '0'\n      }\n      displayCode += this.char.toString(16)\n\n      return this.error(new TomlError(`Control characters (codes < 0x1f and 0x7f) are not allowed in strings, use ${displayCode} instead`))\n    }\n    recordMultiEscapeReplacement (replacement) {\n      this.state.buf += replacement\n      return this.goto(this.parseMultiStringContent)\n    }\n    parseMultiEnd () {\n      if (this.char === CHAR_QUOT) {\n        return this.next(this.parseMultiEnd2)\n      } else {\n        this.state.buf += '\"'\n        return this.goto(this.parseMultiStringContent)\n      }\n    }\n    parseMultiEnd2 () {\n      if (this.char === CHAR_QUOT) {\n        return this.return()\n      } else {\n        this.state.buf += '\"\"'\n        return this.goto(this.parseMultiStringContent)\n      }\n    }\n    parseMultiEscape () {\n      if (this.char === CTRL_M || this.char === CTRL_J) {\n        return this.next(this.parseMultiTrim)\n      } else if (this.char === CHAR_SP || this.char === CTRL_I) {\n        return this.next(this.parsePreMultiTrim)\n      } else {\n        return this.goto(this.parseEscape)\n      }\n    }\n    parsePreMultiTrim () {\n      if (this.char === CHAR_SP || this.char === CTRL_I) {\n        return null\n      } else if (this.char === CTRL_M || this.char === CTRL_J) {\n        return this.next(this.parseMultiTrim)\n      } else {\n        throw this.error(new TomlError(\"Can't escape whitespace\"))\n      }\n    }\n    parseMultiTrim () {\n      // explicitly whitespace here, END should follow the same path as chars\n      if (this.char === CTRL_J || this.char === CHAR_SP || this.char === CTRL_I || this.char === CTRL_M) {\n        return null\n      } else {\n        return this.returnNow()\n      }\n    }\n    parseEscape () {\n      if (this.char in escapes) {\n        return this.return(escapes[this.char])\n      } else if (this.char === CHAR_u) {\n        return this.call(this.parseSmallUnicode, this.parseUnicodeReturn)\n      } else if (this.char === CHAR_U) {\n        return this.call(this.parseLargeUnicode, this.parseUnicodeReturn)\n      } else {\n        throw this.error(new TomlError('Unknown escape character: ' + this.char))\n      }\n    }\n    parseUnicodeReturn (char) {\n      try {\n        const codePoint = parseInt(char, 16)\n        if (codePoint >= SURROGATE_FIRST && codePoint <= SURROGATE_LAST) {\n          throw this.error(new TomlError('Invalid unicode, character in range 0xD800 - 0xDFFF is reserved'))\n        }\n        return this.returnNow(String.fromCodePoint(codePoint))\n      } catch (err) {\n        throw this.error(TomlError.wrap(err))\n      }\n    }\n    parseSmallUnicode () {\n      if (!isHexit(this.char)) {\n        throw this.error(new TomlError('Invalid character in unicode sequence, expected hex'))\n      } else {\n        this.consume()\n        if (this.state.buf.length >= 4) return this.return()\n      }\n    }\n    parseLargeUnicode () {\n      if (!isHexit(this.char)) {\n        throw this.error(new TomlError('Invalid character in unicode sequence, expected hex'))\n      } else {\n        this.consume()\n        if (this.state.buf.length >= 8) return this.return()\n      }\n    }\n\n    /* NUMBERS */\n    parseNumberSign () {\n      this.consume()\n      return this.next(this.parseMaybeSignedInfOrNan)\n    }\n    parseMaybeSignedInfOrNan () {\n      if (this.char === CHAR_i) {\n        return this.next(this.parseInf)\n      } else if (this.char === CHAR_n) {\n        return this.next(this.parseNan)\n      } else {\n        return this.callNow(this.parseNoUnder, this.parseNumberIntegerStart)\n      }\n    }\n    parseNumberIntegerStart () {\n      if (this.char === CHAR_0) {\n        this.consume()\n        return this.next(this.parseNumberIntegerExponentOrDecimal)\n      } else {\n        return this.goto(this.parseNumberInteger)\n      }\n    }\n    parseNumberIntegerExponentOrDecimal () {\n      if (this.char === CHAR_PERIOD) {\n        this.consume()\n        return this.call(this.parseNoUnder, this.parseNumberFloat)\n      } else if (this.char === CHAR_E || this.char === CHAR_e) {\n        this.consume()\n        return this.next(this.parseNumberExponentSign)\n      } else {\n        return this.returnNow(Integer(this.state.buf))\n      }\n    }\n    parseNumberInteger () {\n      if (isDigit(this.char)) {\n        this.consume()\n      } else if (this.char === CHAR_LOWBAR) {\n        return this.call(this.parseNoUnder)\n      } else if (this.char === CHAR_E || this.char === CHAR_e) {\n        this.consume()\n        return this.next(this.parseNumberExponentSign)\n      } else if (this.char === CHAR_PERIOD) {\n        this.consume()\n        return this.call(this.parseNoUnder, this.parseNumberFloat)\n      } else {\n        const result = Integer(this.state.buf)\n        /* istanbul ignore if */\n        if (result.isNaN()) {\n          throw this.error(new TomlError('Invalid number'))\n        } else {\n          return this.returnNow(result)\n        }\n      }\n    }\n    parseNoUnder () {\n      if (this.char === CHAR_LOWBAR || this.char === CHAR_PERIOD || this.char === CHAR_E || this.char === CHAR_e) {\n        throw this.error(new TomlError('Unexpected character, expected digit'))\n      } else if (this.atEndOfWord()) {\n        throw this.error(new TomlError('Incomplete number'))\n      }\n      return this.returnNow()\n    }\n    parseNoUnderHexOctBinLiteral () {\n      if (this.char === CHAR_LOWBAR || this.char === CHAR_PERIOD) {\n        throw this.error(new TomlError('Unexpected character, expected digit'))\n      } else if (this.atEndOfWord()) {\n        throw this.error(new TomlError('Incomplete number'))\n      }\n      return this.returnNow()\n    }\n    parseNumberFloat () {\n      if (this.char === CHAR_LOWBAR) {\n        return this.call(this.parseNoUnder, this.parseNumberFloat)\n      } else if (isDigit(this.char)) {\n        this.consume()\n      } else if (this.char === CHAR_E || this.char === CHAR_e) {\n        this.consume()\n        return this.next(this.parseNumberExponentSign)\n      } else {\n        return this.returnNow(Float(this.state.buf))\n      }\n    }\n    parseNumberExponentSign () {\n      if (isDigit(this.char)) {\n        return this.goto(this.parseNumberExponent)\n      } else if (this.char === CHAR_HYPHEN || this.char === CHAR_PLUS) {\n        this.consume()\n        this.call(this.parseNoUnder, this.parseNumberExponent)\n      } else {\n        throw this.error(new TomlError('Unexpected character, expected -, + or digit'))\n      }\n    }\n    parseNumberExponent () {\n      if (isDigit(this.char)) {\n        this.consume()\n      } else if (this.char === CHAR_LOWBAR) {\n        return this.call(this.parseNoUnder)\n      } else {\n        return this.returnNow(Float(this.state.buf))\n      }\n    }\n\n    /* NUMBERS or DATETIMES  */\n    parseNumberOrDateTime () {\n      if (this.char === CHAR_0) {\n        this.consume()\n        return this.next(this.parseNumberBaseOrDateTime)\n      } else {\n        return this.goto(this.parseNumberOrDateTimeOnly)\n      }\n    }\n    parseNumberOrDateTimeOnly () {\n      // note, if two zeros are in a row then it MUST be a date\n      if (this.char === CHAR_LOWBAR) {\n        return this.call(this.parseNoUnder, this.parseNumberInteger)\n      } else if (isDigit(this.char)) {\n        this.consume()\n        if (this.state.buf.length > 4) this.next(this.parseNumberInteger)\n      } else if (this.char === CHAR_E || this.char === CHAR_e) {\n        this.consume()\n        return this.next(this.parseNumberExponentSign)\n      } else if (this.char === CHAR_PERIOD) {\n        this.consume()\n        return this.call(this.parseNoUnder, this.parseNumberFloat)\n      } else if (this.char === CHAR_HYPHEN) {\n        return this.goto(this.parseDateTime)\n      } else if (this.char === CHAR_COLON) {\n        return this.goto(this.parseOnlyTimeHour)\n      } else {\n        return this.returnNow(Integer(this.state.buf))\n      }\n    }\n    parseDateTimeOnly () {\n      if (this.state.buf.length < 4) {\n        if (isDigit(this.char)) {\n          return this.consume()\n        } else if (this.char === CHAR_COLON) {\n          return this.goto(this.parseOnlyTimeHour)\n        } else {\n          throw this.error(new TomlError('Expected digit while parsing year part of a date'))\n        }\n      } else {\n        if (this.char === CHAR_HYPHEN) {\n          return this.goto(this.parseDateTime)\n        } else {\n          throw this.error(new TomlError('Expected hyphen (-) while parsing year part of date'))\n        }\n      }\n    }\n    parseNumberBaseOrDateTime () {\n      if (this.char === CHAR_b) {\n        this.consume()\n        return this.call(this.parseNoUnderHexOctBinLiteral, this.parseIntegerBin)\n      } else if (this.char === CHAR_o) {\n        this.consume()\n        return this.call(this.parseNoUnderHexOctBinLiteral, this.parseIntegerOct)\n      } else if (this.char === CHAR_x) {\n        this.consume()\n        return this.call(this.parseNoUnderHexOctBinLiteral, this.parseIntegerHex)\n      } else if (this.char === CHAR_PERIOD) {\n        return this.goto(this.parseNumberInteger)\n      } else if (isDigit(this.char)) {\n        return this.goto(this.parseDateTimeOnly)\n      } else {\n        return this.returnNow(Integer(this.state.buf))\n      }\n    }\n    parseIntegerHex () {\n      if (isHexit(this.char)) {\n        this.consume()\n      } else if (this.char === CHAR_LOWBAR) {\n        return this.call(this.parseNoUnderHexOctBinLiteral)\n      } else {\n        const result = Integer(this.state.buf)\n        /* istanbul ignore if */\n        if (result.isNaN()) {\n          throw this.error(new TomlError('Invalid number'))\n        } else {\n          return this.returnNow(result)\n        }\n      }\n    }\n    parseIntegerOct () {\n      if (isOctit(this.char)) {\n        this.consume()\n      } else if (this.char === CHAR_LOWBAR) {\n        return this.call(this.parseNoUnderHexOctBinLiteral)\n      } else {\n        const result = Integer(this.state.buf)\n        /* istanbul ignore if */\n        if (result.isNaN()) {\n          throw this.error(new TomlError('Invalid number'))\n        } else {\n          return this.returnNow(result)\n        }\n      }\n    }\n    parseIntegerBin () {\n      if (isBit(this.char)) {\n        this.consume()\n      } else if (this.char === CHAR_LOWBAR) {\n        return this.call(this.parseNoUnderHexOctBinLiteral)\n      } else {\n        const result = Integer(this.state.buf)\n        /* istanbul ignore if */\n        if (result.isNaN()) {\n          throw this.error(new TomlError('Invalid number'))\n        } else {\n          return this.returnNow(result)\n        }\n      }\n    }\n\n    /* DATETIME */\n    parseDateTime () {\n      // we enter here having just consumed the year and about to consume the hyphen\n      if (this.state.buf.length < 4) {\n        throw this.error(new TomlError('Years less than 1000 must be zero padded to four characters'))\n      }\n      this.state.result = this.state.buf\n      this.state.buf = ''\n      return this.next(this.parseDateMonth)\n    }\n    parseDateMonth () {\n      if (this.char === CHAR_HYPHEN) {\n        if (this.state.buf.length < 2) {\n          throw this.error(new TomlError('Months less than 10 must be zero padded to two characters'))\n        }\n        this.state.result += '-' + this.state.buf\n        this.state.buf = ''\n        return this.next(this.parseDateDay)\n      } else if (isDigit(this.char)) {\n        this.consume()\n      } else {\n        throw this.error(new TomlError('Incomplete datetime'))\n      }\n    }\n    parseDateDay () {\n      if (this.char === CHAR_T || this.char === CHAR_SP) {\n        if (this.state.buf.length < 2) {\n          throw this.error(new TomlError('Days less than 10 must be zero padded to two characters'))\n        }\n        this.state.result += '-' + this.state.buf\n        this.state.buf = ''\n        return this.next(this.parseStartTimeHour)\n      } else if (this.atEndOfWord()) {\n        return this.returnNow(createDate(this.state.result + '-' + this.state.buf))\n      } else if (isDigit(this.char)) {\n        this.consume()\n      } else {\n        throw this.error(new TomlError('Incomplete datetime'))\n      }\n    }\n    parseStartTimeHour () {\n      if (this.atEndOfWord()) {\n        return this.returnNow(createDate(this.state.result))\n      } else {\n        return this.goto(this.parseTimeHour)\n      }\n    }\n    parseTimeHour () {\n      if (this.char === CHAR_COLON) {\n        if (this.state.buf.length < 2) {\n          throw this.error(new TomlError('Hours less than 10 must be zero padded to two characters'))\n        }\n        this.state.result += 'T' + this.state.buf\n        this.state.buf = ''\n        return this.next(this.parseTimeMin)\n      } else if (isDigit(this.char)) {\n        this.consume()\n      } else {\n        throw this.error(new TomlError('Incomplete datetime'))\n      }\n    }\n    parseTimeMin () {\n      if (this.state.buf.length < 2 && isDigit(this.char)) {\n        this.consume()\n      } else if (this.state.buf.length === 2 && this.char === CHAR_COLON) {\n        this.state.result += ':' + this.state.buf\n        this.state.buf = ''\n        return this.next(this.parseTimeSec)\n      } else {\n        throw this.error(new TomlError('Incomplete datetime'))\n      }\n    }\n    parseTimeSec () {\n      if (isDigit(this.char)) {\n        this.consume()\n        if (this.state.buf.length === 2) {\n          this.state.result += ':' + this.state.buf\n          this.state.buf = ''\n          return this.next(this.parseTimeZoneOrFraction)\n        }\n      } else {\n        throw this.error(new TomlError('Incomplete datetime'))\n      }\n    }\n\n    parseOnlyTimeHour () {\n      /* istanbul ignore else */\n      if (this.char === CHAR_COLON) {\n        if (this.state.buf.length < 2) {\n          throw this.error(new TomlError('Hours less than 10 must be zero padded to two characters'))\n        }\n        this.state.result = this.state.buf\n        this.state.buf = ''\n        return this.next(this.parseOnlyTimeMin)\n      } else {\n        throw this.error(new TomlError('Incomplete time'))\n      }\n    }\n    parseOnlyTimeMin () {\n      if (this.state.buf.length < 2 && isDigit(this.char)) {\n        this.consume()\n      } else if (this.state.buf.length === 2 && this.char === CHAR_COLON) {\n        this.state.result += ':' + this.state.buf\n        this.state.buf = ''\n        return this.next(this.parseOnlyTimeSec)\n      } else {\n        throw this.error(new TomlError('Incomplete time'))\n      }\n    }\n    parseOnlyTimeSec () {\n      if (isDigit(this.char)) {\n        this.consume()\n        if (this.state.buf.length === 2) {\n          return this.next(this.parseOnlyTimeFractionMaybe)\n        }\n      } else {\n        throw this.error(new TomlError('Incomplete time'))\n      }\n    }\n    parseOnlyTimeFractionMaybe () {\n      this.state.result += ':' + this.state.buf\n      if (this.char === CHAR_PERIOD) {\n        this.state.buf = ''\n        this.next(this.parseOnlyTimeFraction)\n      } else {\n        return this.return(createTime(this.state.result))\n      }\n    }\n    parseOnlyTimeFraction () {\n      if (isDigit(this.char)) {\n        this.consume()\n      } else if (this.atEndOfWord()) {\n        if (this.state.buf.length === 0) throw this.error(new TomlError('Expected digit in milliseconds'))\n        return this.returnNow(createTime(this.state.result + '.' + this.state.buf))\n      } else {\n        throw this.error(new TomlError('Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z'))\n      }\n    }\n\n    parseTimeZoneOrFraction () {\n      if (this.char === CHAR_PERIOD) {\n        this.consume()\n        this.next(this.parseDateTimeFraction)\n      } else if (this.char === CHAR_HYPHEN || this.char === CHAR_PLUS) {\n        this.consume()\n        this.next(this.parseTimeZoneHour)\n      } else if (this.char === CHAR_Z) {\n        this.consume()\n        return this.return(createDateTime(this.state.result + this.state.buf))\n      } else if (this.atEndOfWord()) {\n        return this.returnNow(createDateTimeFloat(this.state.result + this.state.buf))\n      } else {\n        throw this.error(new TomlError('Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z'))\n      }\n    }\n    parseDateTimeFraction () {\n      if (isDigit(this.char)) {\n        this.consume()\n      } else if (this.state.buf.length === 1) {\n        throw this.error(new TomlError('Expected digit in milliseconds'))\n      } else if (this.char === CHAR_HYPHEN || this.char === CHAR_PLUS) {\n        this.consume()\n        this.next(this.parseTimeZoneHour)\n      } else if (this.char === CHAR_Z) {\n        this.consume()\n        return this.return(createDateTime(this.state.result + this.state.buf))\n      } else if (this.atEndOfWord()) {\n        return this.returnNow(createDateTimeFloat(this.state.result + this.state.buf))\n      } else {\n        throw this.error(new TomlError('Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z'))\n      }\n    }\n    parseTimeZoneHour () {\n      if (isDigit(this.char)) {\n        this.consume()\n        // FIXME: No more regexps\n        if (/\\d\\d$/.test(this.state.buf)) return this.next(this.parseTimeZoneSep)\n      } else {\n        throw this.error(new TomlError('Unexpected character in datetime, expected digit'))\n      }\n    }\n    parseTimeZoneSep () {\n      if (this.char === CHAR_COLON) {\n        this.consume()\n        this.next(this.parseTimeZoneMin)\n      } else {\n        throw this.error(new TomlError('Unexpected character in datetime, expected colon'))\n      }\n    }\n    parseTimeZoneMin () {\n      if (isDigit(this.char)) {\n        this.consume()\n        if (/\\d\\d$/.test(this.state.buf)) return this.return(createDateTime(this.state.result + this.state.buf))\n      } else {\n        throw this.error(new TomlError('Unexpected character in datetime, expected digit'))\n      }\n    }\n\n    /* BOOLEAN */\n    parseBoolean () {\n      /* istanbul ignore else */\n      if (this.char === CHAR_t) {\n        this.consume()\n        return this.next(this.parseTrue_r)\n      } else if (this.char === CHAR_f) {\n        this.consume()\n        return this.next(this.parseFalse_a)\n      }\n    }\n    parseTrue_r () {\n      if (this.char === CHAR_r) {\n        this.consume()\n        return this.next(this.parseTrue_u)\n      } else {\n        throw this.error(new TomlError('Invalid boolean, expected true or false'))\n      }\n    }\n    parseTrue_u () {\n      if (this.char === CHAR_u) {\n        this.consume()\n        return this.next(this.parseTrue_e)\n      } else {\n        throw this.error(new TomlError('Invalid boolean, expected true or false'))\n      }\n    }\n    parseTrue_e () {\n      if (this.char === CHAR_e) {\n        return this.return(true)\n      } else {\n        throw this.error(new TomlError('Invalid boolean, expected true or false'))\n      }\n    }\n\n    parseFalse_a () {\n      if (this.char === CHAR_a) {\n        this.consume()\n        return this.next(this.parseFalse_l)\n      } else {\n        throw this.error(new TomlError('Invalid boolean, expected true or false'))\n      }\n    }\n\n    parseFalse_l () {\n      if (this.char === CHAR_l) {\n        this.consume()\n        return this.next(this.parseFalse_s)\n      } else {\n        throw this.error(new TomlError('Invalid boolean, expected true or false'))\n      }\n    }\n\n    parseFalse_s () {\n      if (this.char === CHAR_s) {\n        this.consume()\n        return this.next(this.parseFalse_e)\n      } else {\n        throw this.error(new TomlError('Invalid boolean, expected true or false'))\n      }\n    }\n\n    parseFalse_e () {\n      if (this.char === CHAR_e) {\n        return this.return(false)\n      } else {\n        throw this.error(new TomlError('Invalid boolean, expected true or false'))\n      }\n    }\n\n    /* INLINE LISTS */\n    parseInlineList () {\n      if (this.char === CHAR_SP || this.char === CTRL_I || this.char === CTRL_M || this.char === CTRL_J) {\n        return null\n      } else if (this.char === Parser.END) {\n        throw this.error(new TomlError('Unterminated inline array'))\n      } else if (this.char === CHAR_NUM) {\n        return this.call(this.parseComment)\n      } else if (this.char === CHAR_RSQB) {\n        return this.return(this.state.resultArr || InlineList())\n      } else {\n        return this.callNow(this.parseValue, this.recordInlineListValue)\n      }\n    }\n    recordInlineListValue (value) {\n      if (this.state.resultArr) {\n        const listType = this.state.resultArr[_contentType]\n        const valueType = tomlType(value)\n        if (listType !== valueType) {\n          throw this.error(new TomlError(`Inline lists must be a single type, not a mix of ${listType} and ${valueType}`))\n        }\n      } else {\n        this.state.resultArr = InlineList(tomlType(value))\n      }\n      if (isFloat(value) || isInteger(value)) {\n        // unbox now that we've verified they're ok\n        this.state.resultArr.push(value.valueOf())\n      } else {\n        this.state.resultArr.push(value)\n      }\n      return this.goto(this.parseInlineListNext)\n    }\n    parseInlineListNext () {\n      if (this.char === CHAR_SP || this.char === CTRL_I || this.char === CTRL_M || this.char === CTRL_J) {\n        return null\n      } else if (this.char === CHAR_NUM) {\n        return this.call(this.parseComment)\n      } else if (this.char === CHAR_COMMA) {\n        return this.next(this.parseInlineList)\n      } else if (this.char === CHAR_RSQB) {\n        return this.goto(this.parseInlineList)\n      } else {\n        throw this.error(new TomlError('Invalid character, expected whitespace, comma (,) or close bracket (])'))\n      }\n    }\n\n    /* INLINE TABLE */\n    parseInlineTable () {\n      if (this.char === CHAR_SP || this.char === CTRL_I) {\n        return null\n      } else if (this.char === Parser.END || this.char === CHAR_NUM || this.char === CTRL_J || this.char === CTRL_M) {\n        throw this.error(new TomlError('Unterminated inline array'))\n      } else if (this.char === CHAR_RCUB) {\n        return this.return(this.state.resultTable || InlineTable())\n      } else {\n        if (!this.state.resultTable) this.state.resultTable = InlineTable()\n        return this.callNow(this.parseAssign, this.recordInlineTableValue)\n      }\n    }\n    recordInlineTableValue (kv) {\n      let target = this.state.resultTable\n      let finalKey = kv.key.pop()\n      for (let kw of kv.key) {\n        if (hasKey(target, kw) && (!isTable(target[kw]) || target[kw][_declared])) {\n          throw this.error(new TomlError(\"Can't redefine existing key\"))\n        }\n        target = target[kw] = target[kw] || Table()\n      }\n      if (hasKey(target, finalKey)) {\n        throw this.error(new TomlError(\"Can't redefine existing key\"))\n      }\n      if (isInteger(kv.value) || isFloat(kv.value)) {\n        target[finalKey] = kv.value.valueOf()\n      } else {\n        target[finalKey] = kv.value\n      }\n      return this.goto(this.parseInlineTableNext)\n    }\n    parseInlineTableNext () {\n      if (this.char === CHAR_SP || this.char === CTRL_I) {\n        return null\n      } else if (this.char === Parser.END || this.char === CHAR_NUM || this.char === CTRL_J || this.char === CTRL_M) {\n        throw this.error(new TomlError('Unterminated inline array'))\n      } else if (this.char === CHAR_COMMA) {\n        return this.next(this.parseInlineTable)\n      } else if (this.char === CHAR_RCUB) {\n        return this.goto(this.parseInlineTable)\n      } else {\n        throw this.error(new TomlError('Invalid character, expected whitespace, comma (,) or close bracket (])'))\n      }\n    }\n  }\n  return TOMLParser\n}\n","'use strict'\nmodule.exports = parseAsync\n\nconst TOMLParser = require('./lib/toml-parser.js')\nconst prettyError = require('./parse-pretty-error.js')\n\nfunction parseAsync (str, opts) {\n  if (!opts) opts = {}\n  const index = 0\n  const blocksize = opts.blocksize || 40960\n  const parser = new TOMLParser()\n  return new Promise((resolve, reject) => {\n    setImmediate(parseAsyncNext, index, blocksize, resolve, reject)\n  })\n  function parseAsyncNext (index, blocksize, resolve, reject) {\n    if (index >= str.length) {\n      try {\n        return resolve(parser.finish())\n      } catch (err) {\n        return reject(prettyError(err, str))\n      }\n    }\n    try {\n      parser.parse(str.slice(index, index + blocksize))\n      setImmediate(parseAsyncNext, index + blocksize, blocksize, resolve, reject)\n    } catch (err) {\n      reject(prettyError(err, str))\n    }\n  }\n}\n","'use strict'\nmodule.exports = prettyError\n\nfunction prettyError (err, buf) {\n  /* istanbul ignore if */\n  if (err.pos == null || err.line == null) return err\n  let msg = err.message\n  msg += ` at row ${err.line + 1}, col ${err.col + 1}, pos ${err.pos}:\\n`\n\n  /* istanbul ignore else */\n  if (buf && buf.split) {\n    const lines = buf.split(/\\n/)\n    const lineNumWidth = String(Math.min(lines.length, err.line + 3)).length\n    let linePadding = ' '\n    while (linePadding.length < lineNumWidth) linePadding += ' '\n    for (let ii = Math.max(0, err.line - 1); ii < Math.min(lines.length, err.line + 2); ++ii) {\n      let lineNum = String(ii + 1)\n      if (lineNum.length < lineNumWidth) lineNum = ' ' + lineNum\n      if (err.line === ii) {\n        msg += lineNum + '> ' + lines[ii] + '\\n'\n        msg += linePadding + '  '\n        for (let hh = 0; hh < err.col; ++hh) {\n          msg += ' '\n        }\n        msg += '^\\n'\n      } else {\n        msg += lineNum + ': ' + lines[ii] + '\\n'\n      }\n    }\n  }\n  err.message = msg + '\\n'\n  return err\n}\n","'use strict'\nmodule.exports = parseStream\n\nconst stream = require('stream')\nconst TOMLParser = require('./lib/toml-parser.js')\n\nfunction parseStream (stm) {\n  if (stm) {\n    return parseReadable(stm)\n  } else {\n    return parseTransform(stm)\n  }\n}\n\nfunction parseReadable (stm) {\n  const parser = new TOMLParser()\n  stm.setEncoding('utf8')\n  return new Promise((resolve, reject) => {\n    let readable\n    let ended = false\n    let errored = false\n    function finish () {\n      ended = true\n      if (readable) return\n      try {\n        resolve(parser.finish())\n      } catch (err) {\n        reject(err)\n      }\n    }\n    function error (err) {\n      errored = true\n      reject(err)\n    }\n    stm.once('end', finish)\n    stm.once('error', error)\n    readNext()\n\n    function readNext () {\n      readable = true\n      let data\n      while ((data = stm.read()) !== null) {\n        try {\n          parser.parse(data)\n        } catch (err) {\n          return error(err)\n        }\n      }\n      readable = false\n      /* istanbul ignore if */\n      if (ended) return finish()\n      /* istanbul ignore if */\n      if (errored) return\n      stm.once('readable', readNext)\n    }\n  })\n}\n\nfunction parseTransform () {\n  const parser = new TOMLParser()\n  return new stream.Transform({\n    objectMode: true,\n    transform (chunk, encoding, cb) {\n      try {\n        parser.parse(chunk.toString(encoding))\n      } catch (err) {\n        this.emit('error', err)\n      }\n      cb()\n    },\n    flush (cb) {\n      try {\n        this.push(parser.finish())\n      } catch (err) {\n        this.emit('error', err)\n      }\n      cb()\n    }\n  })\n}\n","'use strict'\nmodule.exports = parseString\n\nconst TOMLParser = require('./lib/toml-parser.js')\nconst prettyError = require('./parse-pretty-error.js')\n\nfunction parseString (str) {\n  if (global.Buffer && global.Buffer.isBuffer(str)) {\n    str = str.toString('utf8')\n  }\n  const parser = new TOMLParser()\n  try {\n    parser.parse(str)\n    return parser.finish()\n  } catch (err) {\n    throw prettyError(err, str)\n  }\n}\n","'use strict'\nmodule.exports = require('./parse-string.js')\nmodule.exports.async = require('./parse-async.js')\nmodule.exports.stream = require('./parse-stream.js')\nmodule.exports.prettyError = require('./parse-pretty-error.js')\n","'use strict'\nmodule.exports = stringify\nmodule.exports.value = stringifyInline\n\nfunction stringify (obj) {\n  if (obj === null) throw typeError('null')\n  if (obj === void (0)) throw typeError('undefined')\n  if (typeof obj !== 'object') throw typeError(typeof obj)\n\n  if (typeof obj.toJSON === 'function') obj = obj.toJSON()\n  if (obj == null) return null\n  const type = tomlType(obj)\n  if (type !== 'table') throw typeError(type)\n  return stringifyObject('', '', obj)\n}\n\nfunction typeError (type) {\n  return new Error('Can only stringify objects, not ' + type)\n}\n\nfunction arrayOneTypeError () {\n  return new Error(\"Array values can't have mixed types\")\n}\n\nfunction getInlineKeys (obj) {\n  return Object.keys(obj).filter(key => isInline(obj[key]))\n}\nfunction getComplexKeys (obj) {\n  return Object.keys(obj).filter(key => !isInline(obj[key]))\n}\n\nfunction toJSON (obj) {\n  let nobj = Array.isArray(obj) ? [] : Object.prototype.hasOwnProperty.call(obj, '__proto__') ? {['__proto__']: undefined} : {}\n  for (let prop of Object.keys(obj)) {\n    if (obj[prop] && typeof obj[prop].toJSON === 'function' && !('toISOString' in obj[prop])) {\n      nobj[prop] = obj[prop].toJSON()\n    } else {\n      nobj[prop] = obj[prop]\n    }\n  }\n  return nobj\n}\n\nfunction stringifyObject (prefix, indent, obj) {\n  obj = toJSON(obj)\n  var inlineKeys\n  var complexKeys\n  inlineKeys = getInlineKeys(obj)\n  complexKeys = getComplexKeys(obj)\n  var result = []\n  var inlineIndent = indent || ''\n  inlineKeys.forEach(key => {\n    var type = tomlType(obj[key])\n    if (type !== 'undefined' && type !== 'null') {\n      result.push(inlineIndent + stringifyKey(key) + ' = ' + stringifyAnyInline(obj[key], true))\n    }\n  })\n  if (result.length > 0) result.push('')\n  var complexIndent = prefix && inlineKeys.length > 0 ? indent + '  ' : ''\n  complexKeys.forEach(key => {\n    result.push(stringifyComplex(prefix, complexIndent, key, obj[key]))\n  })\n  return result.join('\\n')\n}\n\nfunction isInline (value) {\n  switch (tomlType(value)) {\n    case 'undefined':\n    case 'null':\n    case 'integer':\n    case 'nan':\n    case 'float':\n    case 'boolean':\n    case 'string':\n    case 'datetime':\n      return true\n    case 'array':\n      return value.length === 0 || tomlType(value[0]) !== 'table'\n    case 'table':\n      return Object.keys(value).length === 0\n    /* istanbul ignore next */\n    default:\n      return false\n  }\n}\n\nfunction tomlType (value) {\n  if (value === undefined) {\n    return 'undefined'\n  } else if (value === null) {\n    return 'null'\n  /* eslint-disable valid-typeof */\n  } else if (typeof value === 'bigint' || (Number.isInteger(value) && !Object.is(value, -0))) {\n    return 'integer'\n  } else if (typeof value === 'number') {\n    return 'float'\n  } else if (typeof value === 'boolean') {\n    return 'boolean'\n  } else if (typeof value === 'string') {\n    return 'string'\n  } else if ('toISOString' in value) {\n    return isNaN(value) ? 'undefined' : 'datetime'\n  } else if (Array.isArray(value)) {\n    return 'array'\n  } else {\n    return 'table'\n  }\n}\n\nfunction stringifyKey (key) {\n  var keyStr = String(key)\n  if (/^[-A-Za-z0-9_]+$/.test(keyStr)) {\n    return keyStr\n  } else {\n    return stringifyBasicString(keyStr)\n  }\n}\n\nfunction stringifyBasicString (str) {\n  return '\"' + escapeString(str).replace(/\"/g, '\\\\\"') + '\"'\n}\n\nfunction stringifyLiteralString (str) {\n  return \"'\" + str + \"'\"\n}\n\nfunction numpad (num, str) {\n  while (str.length < num) str = '0' + str\n  return str\n}\n\nfunction escapeString (str) {\n  return str.replace(/\\\\/g, '\\\\\\\\')\n    .replace(/[\\b]/g, '\\\\b')\n    .replace(/\\t/g, '\\\\t')\n    .replace(/\\n/g, '\\\\n')\n    .replace(/\\f/g, '\\\\f')\n    .replace(/\\r/g, '\\\\r')\n    /* eslint-disable no-control-regex */\n    .replace(/([\\u0000-\\u001f\\u007f])/, c => '\\\\u' + numpad(4, c.codePointAt(0).toString(16)))\n    /* eslint-enable no-control-regex */\n}\n\nfunction stringifyMultilineString (str) {\n  let escaped = str.split(/\\n/).map(str => {\n    return escapeString(str).replace(/\"(?=\"\")/g, '\\\\\"')\n  }).join('\\n')\n  if (escaped.slice(-1) === '\"') escaped += '\\\\\\n'\n  return '\"\"\"\\n' + escaped + '\"\"\"'\n}\n\nfunction stringifyAnyInline (value, multilineOk) {\n  let type = tomlType(value)\n  if (type === 'string') {\n    if (multilineOk && /\\n/.test(value)) {\n      type = 'string-multiline'\n    } else if (!/[\\b\\t\\n\\f\\r']/.test(value) && /\"/.test(value)) {\n      type = 'string-literal'\n    }\n  }\n  return stringifyInline(value, type)\n}\n\nfunction stringifyInline (value, type) {\n  /* istanbul ignore if */\n  if (!type) type = tomlType(value)\n  switch (type) {\n    case 'string-multiline':\n      return stringifyMultilineString(value)\n    case 'string':\n      return stringifyBasicString(value)\n    case 'string-literal':\n      return stringifyLiteralString(value)\n    case 'integer':\n      return stringifyInteger(value)\n    case 'float':\n      return stringifyFloat(value)\n    case 'boolean':\n      return stringifyBoolean(value)\n    case 'datetime':\n      return stringifyDatetime(value)\n    case 'array':\n      return stringifyInlineArray(value.filter(_ => tomlType(_) !== 'null' && tomlType(_) !== 'undefined' && tomlType(_) !== 'nan'))\n    case 'table':\n      return stringifyInlineTable(value)\n    /* istanbul ignore next */\n    default:\n      throw typeError(type)\n  }\n}\n\nfunction stringifyInteger (value) {\n  /* eslint-disable security/detect-unsafe-regex */\n  return String(value).replace(/\\B(?=(\\d{3})+(?!\\d))/g, '_')\n}\n\nfunction stringifyFloat (value) {\n  if (value === Infinity) {\n    return 'inf'\n  } else if (value === -Infinity) {\n    return '-inf'\n  } else if (Object.is(value, NaN)) {\n    return 'nan'\n  } else if (Object.is(value, -0)) {\n    return '-0.0'\n  }\n  var chunks = String(value).split('.')\n  var int = chunks[0]\n  var dec = chunks[1] || 0\n  return stringifyInteger(int) + '.' + dec\n}\n\nfunction stringifyBoolean (value) {\n  return String(value)\n}\n\nfunction stringifyDatetime (value) {\n  return value.toISOString()\n}\n\nfunction isNumber (type) {\n  return type === 'float' || type === 'integer'\n}\nfunction arrayType (values) {\n  var contentType = tomlType(values[0])\n  if (values.every(_ => tomlType(_) === contentType)) return contentType\n  // mixed integer/float, emit as floats\n  if (values.every(_ => isNumber(tomlType(_)))) return 'float'\n  return 'mixed'\n}\nfunction validateArray (values) {\n  const type = arrayType(values)\n  if (type === 'mixed') {\n    throw arrayOneTypeError()\n  }\n  return type\n}\n\nfunction stringifyInlineArray (values) {\n  values = toJSON(values)\n  const type = validateArray(values)\n  var result = '['\n  var stringified = values.map(_ => stringifyInline(_, type))\n  if (stringified.join(', ').length > 60 || /\\n/.test(stringified)) {\n    result += '\\n  ' + stringified.join(',\\n  ') + '\\n'\n  } else {\n    result += ' ' + stringified.join(', ') + (stringified.length > 0 ? ' ' : '')\n  }\n  return result + ']'\n}\n\nfunction stringifyInlineTable (value) {\n  value = toJSON(value)\n  var result = []\n  Object.keys(value).forEach(key => {\n    result.push(stringifyKey(key) + ' = ' + stringifyAnyInline(value[key], false))\n  })\n  return '{ ' + result.join(', ') + (result.length > 0 ? ' ' : '') + '}'\n}\n\nfunction stringifyComplex (prefix, indent, key, value) {\n  var valueType = tomlType(value)\n  /* istanbul ignore else */\n  if (valueType === 'array') {\n    return stringifyArrayOfTables(prefix, indent, key, value)\n  } else if (valueType === 'table') {\n    return stringifyComplexTable(prefix, indent, key, value)\n  } else {\n    throw typeError(valueType)\n  }\n}\n\nfunction stringifyArrayOfTables (prefix, indent, key, values) {\n  values = toJSON(values)\n  validateArray(values)\n  var firstValueType = tomlType(values[0])\n  /* istanbul ignore if */\n  if (firstValueType !== 'table') throw typeError(firstValueType)\n  var fullKey = prefix + stringifyKey(key)\n  var result = ''\n  values.forEach(table => {\n    if (result.length > 0) result += '\\n'\n    result += indent + '[[' + fullKey + ']]\\n'\n    result += stringifyObject(fullKey + '.', indent, table)\n  })\n  return result\n}\n\nfunction stringifyComplexTable (prefix, indent, key, value) {\n  var fullKey = prefix + stringifyKey(key)\n  var result = ''\n  if (getInlineKeys(value).length > 0) {\n    result += indent + '[' + fullKey + ']\\n'\n  }\n  return result + stringifyObject(fullKey + '.', indent, value)\n}\n","'use strict'\nexports.parse = require('./parse.js')\nexports.stringify = require('./stringify.js')\n","import * as React from 'react';\nimport { withTranslation } from 'react-i18next';\nimport { Dashlet, PureComponentEx, util } from 'vortex-api';\n\nconst DOWNLOAD_PAGE = 'https://github.com/BepInEx/BepInEx';\n\n// TODO: pull this list from github directly rather than maintain this array manually.\nconst contributors = [\n  'ghorsington', 'ManlyMarco', 'usagirei', 'js6pak', 'keelhauled',\n  'notfood', 'exdownloader', 'Therzok', 'xoxfaby', 'TheLounger',\n];\n\nclass BepInExAttribDashlet extends PureComponentEx<{}, {}> {\n  public render() {\n    const { t } = this.props;\n    return (\n      <Dashlet\n        title={t('Support for this game is made possible using the Bepis Injector Extensible tool (BepInEx)')}\n        className='dashlet-bepinex'\n      >\n        <div>\n          {t('Special thanks to {{author}} for developing this tool, and all its contributors: {{nl}}\"{{contributors}}\"',\n          { replace: { author: 'Bepis', nl: '\\n', contributors: contributors.join(', ') }})}\n        </div>\n        <div>\n          {t('BepInEx lives here: ')}\n          <a onClick={this.openPage}>{DOWNLOAD_PAGE}</a>\n        </div>\n      </Dashlet>\n    );\n  }\n\n  private openPage = () => {\n    (util as any).opn(DOWNLOAD_PAGE).catch(err => null);\n  }\n}\n\nexport default withTranslation(['common', 'bepinex-modtype'])\n  (BepInExAttribDashlet as any) as React.ComponentClass<{}>;\n","/* eslint-disable max-lines-per-function */\nimport path from 'path';\nimport semver from 'semver';\nimport { actions, fs, log, selectors, types, util } from 'vortex-api';\n\nimport { getDownload, getSupportMap, NEXUS, MODTYPE_BIX_INJECTOR } from './common';\nimport { IBepInExGameConfig, INexusDownloadInfo, NotPremiumError } from './types';\n\nimport { checkForUpdates, downloadFromGithub } from './githubDownloader';\n\nfunction genDownloadProps(api: types.IExtensionApi, archiveName: string) {\n  const state = api.getState();\n  const downloads: { [dlId: string]: types.IDownload } = util.getSafe(state, ['persistent', 'downloads', 'files'], {});\n  const downloadId = Object.keys(downloads).find(dId => downloads[dId].localPath === archiveName);\n  return { downloads, downloadId, state };\n}\n\nfunction updateSupportedGames(api: types.IExtensionApi, downloadInfo: INexusDownloadInfo) {\n  const { downloadId, downloads } = genDownloadProps(api, downloadInfo.archiveName);\n  if (downloadId === undefined) {\n    throw new util.NotFound(`bepinex download is missing: ${downloadInfo.archiveName}`);\n  }\n\n  const currentlySupported = downloads[downloadId].game;\n  const supportedGames = new Set<string>(currentlySupported.concat(Object.keys(getSupportMap())));\n  api.store.dispatch(actions.setCompatibleGames(downloadId, Array.from(supportedGames)));\n}\n\nasync function install(api: types.IExtensionApi,\n                       downloadInfo: INexusDownloadInfo,\n                       downloadId: string,\n                       force?: boolean): Promise<string> {\n  const state = api.getState();\n  if (downloadInfo.allowAutoInstall) {\n    const mods: { [modId: string]: types.IMod } =\n      util.getSafe(state, ['persistent', 'mods', downloadInfo.gameId], {});\n    const isInjectorInstalled = (force) ? false : Object.keys(mods).find(id =>\n      mods[id].type === MODTYPE_BIX_INJECTOR) !== undefined;\n    if (!isInjectorInstalled) {\n      return new Promise<string>((resolve, reject) => {\n        api.events.emit('start-install-download', downloadId, true, (err, modId) => {\n          return (err) ? reject(err) : resolve(modId);\n        });\n      });\n    } else {\n      return Promise.resolve(undefined);\n    }\n  }\n}\n\nasync function download(api: types.IExtensionApi,\n                        downloadInfo: INexusDownloadInfo, force?: boolean) {\n  const { domainId, modId, fileId, archiveName, allowAutoInstall } = downloadInfo;\n  const state = api.getState();\n  if (!util.getSafe(state, ['persistent', 'nexus', 'userInfo', 'isPremium'], false)) {\n    return Promise.reject(new NotPremiumError());\n  }\n\n  const downloadId = genDownloadProps(api, archiveName).downloadId;\n  if (downloadId !== undefined) {\n    try {\n      updateSupportedGames(api, downloadInfo);\n      return install(api, downloadInfo, downloadId, force);\n    } catch (err) {\n      return Promise.reject(err);\n    }\n  }\n\n  return api.emitAndAwait('nexus-download',\n    domainId, modId, fileId, archiveName, allowAutoInstall)\n    .then(() => {\n      const { downloadId } = genDownloadProps(api, downloadInfo.archiveName);\n      try {\n        updateSupportedGames(api, downloadInfo);\n        return install(api, downloadInfo, downloadId, force);\n      } catch (err) {\n        return Promise.reject(err);\n      }\n    })\n    .catch(err => {\n      if (err instanceof util.UserCanceled) {\n        log('info', 'user canceled download of BepInEx');\n      } else {\n        log('error', 'failed to download from NexusMods.com',\n          JSON.stringify(downloadInfo, undefined, 2));\n        err['attachLogOnReport'] = true;\n        api.showErrorNotification('Failed to download BepInEx dependency', err);\n      }\n    });\n}\n\nexport async function ensureBepInExPack(api: types.IExtensionApi,\n                                        gameMode?: string,\n                                        force?: boolean,\n                                        isUpdate?: boolean) {\n  const state = api.getState();\n  const gameId = (gameMode === undefined)\n    ? selectors.activeGameId(state)\n    : gameMode;\n  const profileId = selectors.lastActiveProfileForGame(state, gameId);\n  const gameConf: IBepInExGameConfig = getSupportMap()[gameId];\n  if (gameConf === undefined || !gameConf.autoDownloadBepInEx) {\n    return;\n  }\n\n  const mods: { [modId: string]: types.IMod } =\n    util.getSafe(state, ['persistent', 'mods', gameId], {});\n  const injectorModIds = Object.keys(mods).filter(id => mods[id]?.type === MODTYPE_BIX_INJECTOR);\n  if (gameConf.bepinexVersion !== undefined && gameConf.forceGithubDownload !== true) {\n    const hasRequiredVersion = injectorModIds.reduce((prev, iter) => {\n      let version: string = mods[iter]?.attributes?.version ?? '0.0.0';\n      if (version.length > 6) {\n        // Ugly hack but people are pointlessly adding 0s to the end of the version.\n        //  AFAICT the only reason they do this is for the sake of configuration\n        //  changes which we don't need.\n        version = version.slice(0, 6);\n      }\n      const modVersion = semver.coerce(version)?.raw || '0.0.0';\n      if (modVersion === gameConf.bepinexVersion) {\n        prev = true;\n      }\n      return prev;\n    }, false);\n    if (!hasRequiredVersion) {\n      force = true;\n    }\n  } else if (gameConf.forceGithubDownload === true && isUpdate) {\n    const latest = injectorModIds.reduce((prev, iter) => {\n      let version: string = mods[iter]?.attributes?.version ?? '0.0.0';\n      try {\n        const coerced = semver.coerce(mods[iter]?.attributes?.version);\n        version = coerced.raw || '0.0.0';\n      } catch (err) {\n        version = '0.0.0';\n      }\n      if (semver.gt(version, prev)) {\n        prev = version;\n      }\n      return prev;\n    }, '0.0.0');\n    try {\n      await checkForUpdates(api, gameConf, latest);\n    } catch (err) {\n      api.showErrorNotification('Failed to update BepInEx', err);\n    }\n    return;\n  }\n\n  const isInjectorInstalled = (!force)\n    ? Object.keys(mods).find(id => mods[id].type === MODTYPE_BIX_INJECTOR) !== undefined\n    : false;\n\n  if (isInjectorInstalled) {\n    // We have a mod installed with the injector modType, do nothing.\n    return;\n  }\n\n  let downloadRes;\n  if (gameConf.customPackDownloader !== undefined) {\n    try {\n      downloadRes = await gameConf.customPackDownloader(util.getVortexPath('temp'));\n      if (downloadRes as INexusDownloadInfo !== undefined) {\n        await download(api, (downloadRes as INexusDownloadInfo), force);\n      } else if (typeof(downloadRes) === 'string') {\n        if (!path.isAbsolute(downloadRes)) {\n          log('error', 'failed to download custom pack', 'expected absolute path');\n        }\n        const downloadsPath = selectors.downloadPathForGame(state, gameId);\n        await fs.copyAsync(downloadRes, path.join(downloadsPath, path.basename(downloadRes)));\n      } else {\n        log('error', 'failed to download custom pack', { downloadRes });\n        return;\n      }\n    } catch (err) {\n      if (err instanceof NotPremiumError) {\n        const downloadInfo = downloadRes as INexusDownloadInfo;\n        const url = path.join(NEXUS, downloadInfo.domainId, 'mods', downloadInfo.modId)\n          + `?tab=files&file_id=${downloadRes.fileId}&nmm=1`;\n        util.opn(url)\n          .catch(err2 => api.showErrorNotification('Failed to download custom pack', err2,\n            { allowReport: false }));\n      }\n      log('error', 'failed to download custom pack', err);\n      return;\n    }\n  } else if (gameConf.forceGithubDownload !== true) {\n    const defaultDownload = getDownload(gameConf);\n    try {\n      if (!!gameConf.bepinexVersion && gameConf.bepinexVersion !== defaultDownload.version) {\n        // Go to Github instead!\n        throw new util.ProcessCanceled('BepInEx version mismatch');\n      }\n      await download(api, defaultDownload, force);\n    } catch (err) {\n      await downloadFromGithub(api, gameConf);\n    }\n  } else {\n    try {\n      await downloadFromGithub(api, gameConf);\n    } catch (err) {\n      return Promise.reject(err);\n    }\n  }\n}\n\nexport async function raiseConsentDialog(api: types.IExtensionApi, gameConf: IBepInExGameConfig) {\n  const t = api.translate;\n  const replace = {\n    game: gameConf.gameId,\n    bl: '[br][/br][br][/br]',\n  };\n  return api.showDialog('info', 'BepInEx Required', {\n    bbcode: t('The {{game}} game extension requires a widely used 3rd party assembly '\n    + 'patching/injection library called Bepis Injector Extensible (BepInEx).{{bl}}'\n    + 'Vortex can walk you through the download/installation process; once complete, BepInEx '\n    + 'will be available in your mods page to enable/disable just like any other regular mod. '\n    + 'Depending on the modding pattern of {{game}}, BepInEx may be a hard requirement '\n    + 'for mods to function in-game, in which case you MUST have the library enabled and deployed '\n    + 'at all times for the mods to work!{{bl}}'\n    + 'To remove the library, simply disable the mod entry for BepInEx.'\n    , { replace }),\n  }, [\n    { label: 'Close' },\n    {\n      label: 'Download BepInEx',\n      default: true,\n    },\n  ]);\n}\n\n// async function downloadFromGithub(api: types.IExtensionApi, dlInfo: INexusDownloadInfoExt) {\n//   const t = api.translate;\n//   const replace = {\n//     archiveName: dlInfo.archiveName,\n//   };\n//   const instructions = t('Once you allow Vortex to browse to GitHub - '\n//     + 'Please scroll down and click on \"{{archiveName}}\"', { replace });\n//   return new Promise((resolve, reject) => {\n//     api.emitAndAwait('browse-for-download', dlInfo.githubUrl, instructions)\n//       .then((result: string[]) => {\n//         if (!result || !result.length) {\n//           // If the user clicks outside the window without downloading.\n//           return reject(new util.UserCanceled());\n//         }\n//         if (!result[0].includes(dlInfo.archiveName)) {\n//           return reject(new util.ProcessCanceled('Selected wrong download'));\n//         }\n//         api.events.emit('start-download', [result[0]], {}, undefined,\n//           (error, id) => {\n//             if (error !== null) {\n//               return reject(error);\n//             }\n//             api.events.emit('start-install-download', id, true, (err, modId) => {\n//               if (err) {\n//                 // Error notification gets reported by the event listener\n//                 log('error', 'Error installing download', err);\n//               }\n//               return resolve(undefined);\n//             });\n//           }, 'never');\n//       });\n//   })\n//   .catch(err => {\n//     if (err instanceof util.UserCanceled) {\n//       return Promise.resolve();\n//     } else {\n//       return downloadFromGithub(api, dlInfo);\n//     }\n//   });\n// }\n","import path from 'path';\nimport { IBIXPackageResolver, IAvailableDownloads,\n  IBepInExGameConfig, INexusDownloadInfoExt } from './types';\nimport { util } from 'vortex-api';\n\nimport semver from 'semver';\n// Platform detection utilities\nconst isWindows = () => isWindows();\nconst isMacOS = () => isMacOS();\nconst isLinux = () => isLinux();\nconst platformSwitch = <T>(cases: { windows?: T; macos?: T; linux?: T; default?: T }): T => {\n  if (isWindows() && cases.windows !== undefined) return cases.windows;\n  if (isMacOS() && cases.macos !== undefined) return cases.macos;\n  if (isLinux() && cases.linux !== undefined) return cases.linux;\n  return cases.default;\n};\n\nexport const NEXUS = 'www.nexusmods.com';\nexport const DOORSTOPPER_HOOK = 'winhttp.dll';\nexport const DOORSTOPPER_CONFIG = 'doorstop_config.ini';\nexport const BEPINEX_CONFIG_FILE = 'BepInEx.cfg';\nexport const BEPINEX_CONFIG_REL_PATH = path.join('BepInEx', 'config', BEPINEX_CONFIG_FILE);\nexport const DOORSTOP_FILES: string[] = [DOORSTOPPER_CONFIG, DOORSTOPPER_HOOK];\nexport const INJECTOR_FILES: string[] = [\n  '0Harmony.dll', '0Harmony.xml', '0Harmony20.dll', 'BepInEx.dll', 'BepInEx.Core.dll',\n  'BepInEx.Preloader.Core.dll', 'BepInEx.Preloader.Unity.dll', 'BepInEx.Harmony.dll',\n  'BepInEx.Harmony.xml', 'BepInEx.Preloader.dll', 'BepInEx.Preloader.xml',\n  'BepInEx.xml', 'HarmonyXInterop.dll', 'Mono.Cecil.dll', 'Mono.Cecil.Mdb.dll',\n  'Mono.Cecil.Pdb.dll', 'Mono.Cecil.Rocks.dll', 'MonoMod.RuntimeDetour.dll',\n  'MonoMod.RuntimeDetour.xml', 'MonoMod.Utils.dll', 'MonoMod.Utils.xml',\n];\n\nexport const MODTYPE_BIX_INJECTOR = 'bepinex-injector'\n\nconst DEFAULT_VERSION = '5.4.22';\nconst NEW_FILE_FORMAT_VERSION = '6.0.0';\nconst GAME_SUPPORT: { [gameId: string]: IBepInExGameConfig } = {};\nexport const getSupportMap = () => GAME_SUPPORT;\nexport const resolveBixPackage = (gameConf: IBepInExGameConfig): IBIXPackageResolver => {\n  // Depending on the game config's github parameters this will generate a regexp\n  //  that will match the download link for the BepInEx package.\n  const { architecture, bepinexVersion, bepinexCoercedVersion, unityBuild } = gameConf;\n  const arch = architecture !== undefined ? architecture : 'x64';\n  const version = bepinexCoercedVersion !== undefined ? bepinexCoercedVersion : DEFAULT_VERSION;\n  const platform = semver.gte(version.replace(/-.*$/igm, ''), '5.4.23') ? isWindows() ? 'win_' : 'linux_' : '';\n  const unity = (unityBuild !== undefined)\n    ? semver.gte(version, NEW_FILE_FORMAT_VERSION) ? `${unityBuild}_` : ''\n    : semver.gte(version, NEW_FILE_FORMAT_VERSION) ? 'unitymono_' : '';\n  const regex = `BepInEx_${platform}${unity}${arch}_${bepinexVersion}.*[.zip|.7z]`;\n  return {\n    rgx: new RegExp(regex, 'i'),\n    version,\n    architecture: arch,\n    unityBuild,\n  };\n}\n\nexport const addGameSupport = (gameConf: IBepInExGameConfig) => {\n  if ((gameConf.unityBuild === 'unityil2cpp')\n   && (gameConf.bepinexVersion !== undefined)\n   && (semver.lt(gameConf.bepinexVersion, '6.0.0'))) {\n    throw new Error('IL2CPP builds require BepInEx 6.0.0 or above');\n  } else {\n    if (gameConf.unityBuild === 'unityil2cpp' && gameConf.bepinexVersion === undefined) {\n      gameConf.bepinexVersion = '6.0.0';\n    } else {\n      if (gameConf.bepinexVersion == null) {\n        gameConf.bepinexVersion = DEFAULT_VERSION;\n      }\n    }\n    gameConf.bepinexCoercedVersion = util.semverCoerce(gameConf.bepinexVersion).version;\n    GAME_SUPPORT[gameConf.gameId] = gameConf;\n  }\n};\n\nconst AVAILABLE: IAvailableDownloads = {\n  '5.4.10x64': {\n    architecture: 'x64',\n    domainId: 'site',\n    version: '5.4.10',\n    modId: '115',\n    fileId: '1023',\n    archiveName: 'BepInEx_x64_5.4.10.0.zip',\n    allowAutoInstall: true,\n    githubUrl: 'https://github.com/BepInEx/BepInEx/releases/tag/v5.4.10',\n  },\n  '5.4.13x64': {\n    architecture: 'x64',\n    domainId: 'site',\n    version: '5.4.13',\n    modId: '115',\n    fileId: '1137',\n    archiveName: 'BepInEx_x64_5.4.13.0.zip',\n    allowAutoInstall: true,\n    githubUrl: 'https://github.com/BepInEx/BepInEx/releases/tag/v5.4.13',\n  },\n  '5.4.15x64': {\n    architecture: 'x64',\n    domainId: 'site',\n    version: '5.4.15',\n    modId: '115',\n    fileId: '1175',\n    archiveName: 'BepInEx_x64_5.4.15.0.zip',\n    allowAutoInstall: true,\n    githubUrl: 'https://github.com/BepInEx/BepInEx/releases/tag/v5.4.15',\n  },\n  '5.4.17x64': {\n    architecture: 'x64',\n    domainId: 'site',\n    version: '5.4.17',\n    modId: '115',\n    fileId: '1273',\n    archiveName: 'BepInEx_x64_5.4.17.0.zip',\n    allowAutoInstall: true,\n    githubUrl: 'https://github.com/BepInEx/BepInEx/releases/tag/v5.4.17',\n  },\n  '5.4.22x86': {\n    architecture: 'x86',\n    domainId: 'site',\n    version: '5.4.22',\n    modId: '115',\n    fileId: '2528',\n    archiveName: 'BepInEx_x86_5.4.22.0.zip',\n    allowAutoInstall: true,\n    githubUrl: 'https://github.com/BepInEx/BepInEx/releases/tag/v5.4.22',\n  },\n  '5.4.22x64': {\n    architecture: 'x64',\n    domainId: 'site',\n    version: '5.4.22',\n    modId: '115',\n    fileId: '2526',\n    archiveName: 'BepInEx_x64_5.4.22.0.zip',\n    allowAutoInstall: true,\n    githubUrl: 'https://github.com/BepInEx/BepInEx/releases/tag/v5.4.22',\n  },\n};\n\nconst getLatestVersion = (arch: string): string => {\n  const versions = Object.values(AVAILABLE);\n  const latestVersion = versions.reduce((prev, iter) => {\n    if (semver.gt(iter.version, prev)) {\n      prev = iter.version;\n    }\n    return prev;\n  }, DEFAULT_VERSION);\n  return `${latestVersion}${arch}`;\n};\n\nexport const getDownload = (gameConf: IBepInExGameConfig): INexusDownloadInfoExt => {\n  const arch = !!gameConf.architecture ? gameConf.architecture : 'x64';\n  const versionKey = `${gameConf.bepinexVersion}${arch}`;\n  const download: INexusDownloadInfoExt = ((gameConf.bepinexVersion !== undefined)\n        && Object.keys(AVAILABLE).includes(versionKey))\n    ? AVAILABLE[versionKey] : AVAILABLE[getLatestVersion(arch)];\n  return {\n    ...download,\n    gameId: gameConf.gameId,\n  };\n};\n","/* eslint-disable */\nimport * as https from 'https';\nimport * as _ from 'lodash';\nimport * as semver from 'semver';\nimport * as url from 'url';\n\nimport { IBepInExGameConfig, IGithubRelease } from './types';\n\nimport { raiseConsentDialog } from './bepInExDownloader';\n\nimport { IncomingHttpHeaders, IncomingMessage } from 'http';\nimport { log, types, util } from 'vortex-api';\nimport { resolveBixPackage } from './common';\n\nconst GITHUB_URL = 'https://api.github.com/repos/BepInEx/BepInEx';\nconst BIX_LANDING = 'https://github.com/BepInEx/BepInEx';\nconst BIX_RELEASES = 'https://github.com/BepInEx/BepInEx/releases';\n\nfunction query(baseUrl: string, request: string): Promise<IGithubRelease[]> {\n  return new Promise((resolve, reject) => {\n    const getRequest = getRequestOptions(`${baseUrl}/${request}`);\n    https.get(getRequest, (res: IncomingMessage) => {\n      res.setEncoding('utf-8');\n      const msgHeaders: IncomingHttpHeaders = res.headers;\n      const callsRemaining = parseInt(util.getSafe(msgHeaders, ['x-ratelimit-remaining'], '0'), 10);\n      if ((res.statusCode === 403) && (callsRemaining === 0)) {\n        const resetDate = parseInt(util.getSafe(msgHeaders, ['x-ratelimit-reset'], '0'), 10);\n        log('info', 'GitHub rate limit exceeded',\n          { reset_at: (new Date(resetDate)).toString() });\n        return reject(new util.ProcessCanceled('GitHub rate limit exceeded'));\n      }\n\n      let output: string = '';\n      res\n        .on('data', data => output += data)\n        .on('end', () => {\n          try {\n            return resolve(JSON.parse(output));\n          } catch (parseErr) {\n            return reject(parseErr);\n          }\n        });\n    })\n      .on('error', err => {\n        return reject(err);\n      })\n      .end();\n  });\n}\n\nfunction getRequestOptions(link: string) {\n  const relUrl = url.parse(link);\n  return ({\n    ..._.pick(relUrl, ['port', 'hostname', 'path']),\n    headers: {\n      'User-Agent': 'Vortex',\n    },\n  });\n}\n\nasync function downloadConsent(api: types.IExtensionApi,\n                               gameConf: IBepInExGameConfig): Promise<void> {\n  return raiseConsentDialog(api, gameConf)\n    .then(result => (result.action === 'Close')\n      ? Promise.reject(new util.UserCanceled())\n      : Promise.resolve());\n}\n\nasync function notifyUpdate(api: types.IExtensionApi,\n                            latest: string,\n                            current: string): Promise<void> {\n  const t = api.translate;\n  return new Promise((resolve, reject) => {\n    api.sendNotification({\n      type: 'info',\n      id: `bix-update`,\n      noDismiss: true,\n      allowSuppress: true,\n      title: 'Update for {{name}}',\n      message: 'Latest: {{latest}}, Installed: {{current}}',\n      replace: {\n        latest,\n        current,\n      },\n      actions: [\n        {\n          title: 'More', action: (dismiss: () => void) => {\n            api.showDialog('info', '{{name}} Update', {\n              text: 'Vortex has detected a newer version of {{name}} ({{latest}}) available to download from {{website}}. You currently have version {{current}} installed.'\n                + '\\nVortex can download and attempt to install the new update for you.',\n              parameters: {\n                name: 'BepInEx',\n                website: BIX_LANDING,\n                latest,\n                current,\n              },\n            }, [\n              {\n                label: 'Download',\n                action: () => {\n                  resolve();\n                  dismiss();\n                },\n              },\n            ]);\n          },\n        },\n        {\n          title: 'Dismiss',\n          action: (dismiss) => {\n            resolve();\n            dismiss();\n          },\n        },\n      ],\n    });\n  });\n}\n\nexport async function getLatestReleases(currentVersion: string, constraint: string): Promise<IGithubRelease[]> {\n  if (GITHUB_URL) {\n    return query(GITHUB_URL, 'releases')\n      .then((releases) => {\n        if (!Array.isArray(releases)) {\n          return Promise.reject(new util.DataInvalid('expected array of github releases'));\n        }\n        const current = releases\n          .filter(rel => {\n            const tagName = util.getSafe(rel, ['tag_name'], '5.4.22');\n            let version;\n            try {\n              version = semver.valid(util.semverCoerce(tagName))\n            } catch (e) {\n              return false;\n            }\n            return !currentVersion || (version !== currentVersion && semver.satisfies(version, constraint));\n          })\n          .sort((lhs, rhs) =>\n            semver.compare(\n              util.semverCoerce(rhs.tag_name.slice(1)),\n              util.semverCoerce((lhs.tag_name.slice(1)))\n            ));\n        return Promise.resolve(current);\n      });\n  }\n}\n\nasync function startDownload(api: types.IExtensionApi,\n                             gameConf: IBepInExGameConfig,\n                             downloadLink: string) {\n  const { gameId } = gameConf;\n  // tslint:disable-next-line: no-shadowed-variable - why is this even required ?\n  const redirectionURL = await new Promise((resolve, reject) => {\n    https.request(getRequestOptions(downloadLink), res => {\n      return resolve(res.headers['location']);\n    })\n      .on('error', err => reject(err))\n      .end();\n  });\n  const dlInfo = {\n    game: gameId,\n    name: 'BepInEx',\n  };\n\n  api.events.emit('start-download', [redirectionURL], dlInfo, undefined,\n    (error, id) => {\n      if (error !== null) {\n        if ((error.name === 'AlreadyDownloaded')\n          && (error.downloadId !== undefined)) {\n          id = error.downloadId;\n        } else {\n          api.showErrorNotification('Download failed', error, { allowReport: false });\n          return Promise.resolve();\n        }\n      }\n      if (api.getState().settings.automation?.['install'] === true) {\n        return Promise.resolve();\n      }\n      api.events.emit('start-install-download', id, true, (err, modId) => {\n        if (err !== null) {\n          api.showErrorNotification('Failed to install BepInEx', err, { allowReport: false });\n        }\n        return Promise.resolve();\n      });\n    }, 'ask');\n}\n\nasync function resolveDownloadLink(gameConf: IBepInExGameConfig, currentReleases: any[]) {\n  const { rgx, version } = resolveBixPackage(gameConf);\n  let assetLink: string | undefined;\n  const matchingRelease = currentReleases.find((release) => {\n    // The slice removes the 'v' prefix\n    const tagVer = util.semverCoerce(release.tag_name.slice(1)).raw.replace(/-.*/igm, '');\n    // Take out the pre-release stuff - while resolving the download link, it's safe\n    //  to assume that the releases are checked from newest to oldest, thus the constraint\n    //  will be satisfied at the first match of major.minor.patch - which is the latest version\n    //  of this release.\n    const constraint = `${gameConf.bepinexCoercedVersion.replace(/-.*/igm, '')}`;\n    if (semver.gt(tagVer, constraint)) {\n    // You'd think that semver.satisfies would work here. It doesn't.\n    //  So we're resorting to filtering out the higher versions first (6.0.0, etc)\n    // if (!semver.satisfies(tagVer, constraint, { includePrerelease: true })) {\n      return false;\n    } else if (semver.gte(tagVer, constraint)) {\n      const matches = release.assets.filter(asset => rgx.test(asset.name));\n      if (matches.length > 0) {\n        assetLink = matches[0].browser_download_url;\n        return true;\n      }\n    }\n  });\n  if (matchingRelease === undefined) {\n    return Promise.reject(new util.DataInvalid('Failed to find matching BepInEx archive'));\n  }\n  const downloadLink = assetLink || matchingRelease.assets[0].browser_download_url;\n  return (downloadLink === undefined)\n    ? Promise.reject(new util.DataInvalid('Failed to resolve browser download url'))\n    : Promise.resolve({ version: matchingRelease.tag_name.slice(1), downloadLink });\n}\n\nexport async function checkForUpdates(api: types.IExtensionApi,\n                                      gameConf: IBepInExGameConfig,\n                                      currentVersion: string): Promise<string> {\n  return getLatestReleases(currentVersion, `^${gameConf.bepinexVersion}`)\n    .then(async currentReleases => {\n      if (currentReleases?.[0] === undefined) {\n        // We failed to check for updates - that's unfortunate but shouldn't\n        //  be reported to the user as it will just confuse them.\n        log('error', 'Unable to update BepInEx', 'Failed to find any releases');\n        return Promise.resolve(currentVersion);\n      }\n      const { version, downloadLink } = await resolveDownloadLink(gameConf, currentReleases);\n      if (semver.valid(version) === null) {\n        return Promise.resolve(currentVersion);\n      } else {\n        if (semver.gt(version, currentVersion)) {\n          return notifyUpdate(api, version, currentVersion)\n            .then(() => startDownload(api, gameConf, downloadLink))\n            .then(() => Promise.resolve(version));\n        } else {\n          return Promise.resolve(currentVersion);\n        }\n      }\n    }).catch(err => {\n      const suppressibleError = [util.DataInvalid, util.UserCanceled, util.ProcessCanceled].reduce((a, c) => a || err instanceof c, false);\n      if (suppressibleError) {\n        log('debug', 'Unable to update BepInEx', err.message);\n        return Promise.resolve(currentVersion);\n      }\n\n      api.showErrorNotification('Unable to update BepInEx', err, { allowReport: false });\n      util.opn(BIX_RELEASES).catch(() => null);\n      return Promise.resolve(currentVersion);\n    });\n}\n\nexport async function downloadFromGithub(api: types.IExtensionApi,\n                                         gameConf: IBepInExGameConfig): Promise<void> {\n  return getLatestReleases(undefined, `^${gameConf.bepinexVersion}`)\n    .then(async currentReleases => {\n      const { version, downloadLink } = await resolveDownloadLink(gameConf, currentReleases);\n      return downloadConsent(api, gameConf)\n        .then(() => startDownload(api, gameConf, downloadLink));\n    })\n    .catch(err => {\n      const suppressibleError = [util.UserCanceled, util.ProcessCanceled].reduce((a, c) => a || err instanceof c, false);\n      if (!suppressibleError) {\n        api.showErrorNotification('Unable to download/install BepInEx - do it manually', err, { allowReport: false });\n        util.opn(BIX_RELEASES).catch(() => null);\n      }\n      return Promise.resolve();\n    });\n}\n","/* eslint-disable */\nimport * as path from 'path';\nimport { actions, log, selectors, types, util } from 'vortex-api';\n\nimport AttribDashlet from './AttribDashlet';\n\nimport { ensureBepInExPack } from './bepInExDownloader';\nimport { addGameSupport, getDownload, getSupportMap, MODTYPE_BIX_INJECTOR } from './common';\nimport { installInjector, installRootMod,\n  testSupportedBepInExInjector, testSupportedRootMod } from './installers';\nimport { IBepInExGameConfig, INexusDownloadInfo, NotPremiumError } from './types';\nimport { createDirectories, dismissNotifications, toBlue } from './util';\n\nfunction showAttrib(state: types.IState) {\n  const gameMode = selectors.activeGameId(state);\n  return getSupportMap()[gameMode] !== undefined;\n}\n\nfunction isSupported(gameId: string) {\n  const isGameSupported = !['valheim'].includes(gameId);\n  const isRegistered = getSupportMap()[gameId] !== undefined;\n  return isGameSupported && isRegistered;\n}\n\nasync function onCheckModVersion(api: types.IExtensionApi,\n                                 gameId: string,\n                                 mods: { [modId: string]: types.IMod }) {\n  const gameConf = getSupportMap()[gameId];\n  if (gameConf === undefined) {\n    return;\n  }\n  let state = api.getState();\n  const profileId = selectors.lastActiveProfileForGame(state, gameId);\n  if (profileId === undefined) {\n    return;\n  }\n  const profile = selectors.profileById(state, profileId);\n  if (profile === undefined) {\n    return;\n  }\n  const injectorModIds = Object.keys(mods).filter(id => mods[id]?.type === MODTYPE_BIX_INJECTOR);\n  const enabledId = injectorModIds.find(id => util.getSafe(profile,\n    ['modState', id, 'enabled'], false));\n\n  if (enabledId === undefined) {\n    // There are no enabled injector mods or potentially no injector mods\n    //  at all - nothing to update.\n    return;\n  }\n\n  const injectorMod = mods[enabledId];\n  if (injectorMod === undefined) {\n    // There's some type of data mismatch/corruption. We can't\n    //  find the mod entry for the injector mod so there's nothing we\n    //  can update.\n    return;\n  }\n\n  if (gameConf.bepinexVersion && gameConf.bepinexVersion === injectorMod.attributes?.version) {\n    // If a specific bepinex version is specified, and the injector mod already has that version.\n    //  We do not want to update it! BIX updates will break mods.\n    return;\n  }\n  const forceUpdate = (dwnl?: INexusDownloadInfo) => ensureBepInExPack(api, gameId, true)\n    .catch(err => {\n      return (err instanceof NotPremiumError)\n        ? Promise.resolve()\n        : api.showErrorNotification('Failed to update BepInEx', err);\n    })\n    .finally(() => {\n      if (dwnl === undefined) {\n        return Promise.resolve();\n      }\n      state = api.getState();\n      const newMods: { [modId: string]: types.IMod } =\n        util.getSafe(state, ['persistent', 'mods', gameId], undefined);\n      const newInjector = Object.keys(newMods)\n        .find(id => newMods[id].attributes?.fileId === dwnl.fileId);\n      const batched = [\n        actions.setModEnabled(profile.id, enabledId, false),\n        actions.setModEnabled(profile.id, newInjector, true)\n      ];\n      util.batchDispatch(api.store, batched);\n    });\n\n  if (gameConf.customPackDownloader !== undefined) {\n    const res = await gameConf.customPackDownloader(util.getVortexPath('temp'));\n    if (typeof(res) === 'string') {\n      if (path.basename(res, path.extname(res)) !== injectorMod.id) {\n        return forceUpdate();\n      }\n    } else if ((res as INexusDownloadInfo) !== undefined) {\n      const nexDownload = res as INexusDownloadInfo;\n      if (nexDownload.fileId !== injectorMod.attributes?.fileId) {\n        return forceUpdate(nexDownload);\n      }\n    }\n  } else if (gameConf.forceGithubDownload !== true) {\n    const download = getDownload(gameConf);\n    if (injectorMod.attributes?.fileId !== +download.fileId) {\n      return forceUpdate(download);\n    }\n  } else {\n    await ensureBepInExPack(api, gameConf.gameId, false, true);\n  }\n}\n\nfunction init(context: types.IExtensionContext) {\n  const getPath = (game: types.IGame): string => {\n    const state: types.IState = context.api.getState();\n    const gameConf: IBepInExGameConfig = getSupportMap()[game.id];\n    const discovery = state.settings.gameMode.discovered[game.id];\n    if (gameConf !== undefined && discovery?.path !== undefined) {\n      return (gameConf.installRelPath !== undefined)\n        ? path.join(discovery.path, gameConf.installRelPath)\n        : discovery.path;\n    } else {\n      return undefined;\n    }\n  };\n\n  const genTestProps = (gameId?: string) => {\n    const state = context.api.getState();\n    const activeGameId = (gameId === undefined)\n      ? selectors.activeGameId(state)\n      : gameId;\n    const gameConf = getSupportMap()[activeGameId];\n    const game: types.IGameStored = selectors.gameById(state, activeGameId);\n    return { gameConf, game };\n  };\n\n  // A dummy modType test for modTypes we do not want to assign automatically.\n  const modTypeTest = toBlue(() => Promise.resolve(false));\n\n  // Regular DLL plugin modType test\n  const pluginModTypeTest = (async (instructions: types.IInstruction[]) => {\n    const copyInstructions = instructions.filter(instr => (instr.type === 'copy')\n      && path.extname(path.basename(instr.destination)));\n\n    return (copyInstructions.find(instr =>\n      path.extname(instr.destination) === '.dll') !== undefined);\n  });\n\n  const rootModTypeTest = (async (instructions: types.IInstruction[]) => {\n    const bixRootFolders: string[] = ['plugins', 'patchers', 'config'];\n    const isRootSegment = (seg: string) => (seg !== undefined)\n      ? bixRootFolders.includes(seg.toLowerCase())\n      : false;\n    const copyInstructions = instructions.filter(instr => (instr.type === 'copy')\n      && path.extname(path.basename(instr.destination)));\n\n    for (const instr of copyInstructions) {\n      const segments = instr.destination.split(path.sep);\n      const rootSeg = segments.find(isRootSegment);\n      if (rootSeg && segments.indexOf(rootSeg) === 0) {\n        // The instructions have an expected root segment\n        //  right at the root of the mod's installation folder,\n        //  this is a root mod.\n        return true;\n      }\n    }\n\n    return false;\n  });\n\n  context.registerDashlet('BepInEx Support', 1, 2, 250, AttribDashlet,\n    showAttrib, () => ({}), undefined);\n\n  context.registerAPI('bepinexAddGame', (bepinexConf: IBepInExGameConfig,\n                                         callback?: (err: Error) => void) => {\n    if ((bepinexConf !== undefined) || ((bepinexConf as IBepInExGameConfig) === undefined)) {\n      addGameSupport(bepinexConf);\n    } else {\n      callback?.(new util.DataInvalid('failed to register bepinex game, invalid object received'));\n    }\n  }, { minArguments: 1 });\n\n  // This modType is assigned by the BepInEx injector installer.\n  context.registerModType(MODTYPE_BIX_INJECTOR, 10, isSupported, getPath, modTypeTest, {\n    mergeMods: true,\n    name: 'Bepis Injector Extensible',\n  });\n\n  // There's currently no reliable way to differentiate BepInEx plugins from patchers,\n  //  apart from the mod's description specifying where to deploy the mod. Unlike regular\n  //  plugins, patchers should only be used in special cases, which is why\n  //  we don't want this to be assigned by default.\n  context.registerModType('bepinex-patcher', 11, isSupported,\n    (game: types.IGame) => path.join(getPath(game), 'BepInEx', 'patchers'),\n    modTypeTest, {\n    mergeMods: true,\n    name: 'BepInEx (patchers)',\n  });\n\n  // Assigned to any mod that contains the plugins, patchers, config directories\n  context.registerModType('bepinex-root', 12, isSupported,\n  (game: types.IGame) => path.join(getPath(game), 'BepInEx'), toBlue(rootModTypeTest), {\n    mergeMods: true,\n    name: 'BepInEx (root)',\n  });\n\n  context.registerModType('bepinex-plugin', 13, isSupported,\n    (game: types.IGame) => path.join(getPath(game), 'BepInEx', 'plugins'),\n    toBlue(pluginModTypeTest), {\n    mergeMods: true,\n    name: 'BepInEx (plugins)',\n  });\n\n  // Most of our extension development tutorials suggest that extension authors\n  //  should use priority 25 for their installers. Given that this is an API\n  //  functionality, we should ensure that our installers are run before any\n  //  extension installers.\n  //  TODO: Make sure this is documented in the API docs.\n  context.registerInstaller('bepis-injector-extensible', 10,\n    toBlue(testSupportedBepInExInjector),\n    toBlue(installInjector));\n\n  context.registerInstaller('bepinex-root', 10,\n    toBlue(testSupportedRootMod),\n    toBlue(installRootMod));\n\n  context.registerTest('bepinex-config-test', 'gamemode-activated',\n    toBlue(() => {\n      const { game, gameConf } = genTestProps();\n      return (gameConf?.validateBepInExConfiguration !== undefined)\n        ? gameConf.validateBepInExConfiguration(getPath(game as any))\n        : Promise.resolve(undefined);\n    }));\n\n  context.registerTest('doorstop-config-test', 'gamemode-activated',\n    toBlue(() => {\n      const { game, gameConf } = genTestProps();\n      return (gameConf?.doorstopConfig?.validateDoorStopConfig !== undefined)\n        ? gameConf.doorstopConfig.validateDoorStopConfig(getPath(game as any))\n        : Promise.resolve(undefined);\n    }));\n\n  context.once(() => {\n    context.api.events.on('did-install-mod', async (gameId, archiveId, modId) => {\n      const gameConf = getSupportMap()[gameId];\n      if (gameConf === undefined) {\n        return;\n      }\n      const state = context.api.getState();\n      const mod: types.IMod = util.getSafe(state, ['persistent', 'mods', gameId, modId], undefined);\n      if (mod?.type !== MODTYPE_BIX_INJECTOR) {\n        return;\n      }\n      const metaDataDetails: types.ILookupDetails = {\n        gameId: 'site',\n        fileName: mod.attributes?.fileName,\n        fileMD5: mod.attributes?.fileMD5,\n        fileSize: mod.attributes?.fileSize,\n      }\n      context.api.lookupModMeta(metaDataDetails, true).then(meta => {\n        const profileId = selectors.lastActiveProfileForGame(state, gameId);\n        const batched = [\n          actions.setModEnabled(profileId, modId, true),\n        ];\n        if (meta.length > 0 && !!meta[0].value?.details) {\n          batched.push(actions.setDownloadModInfo(archiveId, 'nexus.modInfo', meta[0].value) as any);\n          batched.push(actions.setModAttribute(gameId, modId, 'version', meta[0].value.fileVersion) as any);\n          batched.push(actions.setModAttribute(gameId, modId, 'modId', meta[0].value.details.modId) as any);\n          batched.push(actions.setModAttribute(gameId, modId, 'fileId', meta[0].value.details.fileId) as any);\n          // batched.push(actions.setModAttributes(gameId, modId, meta[0].value) as any);\n        } else if (!!gameConf.bepinexVersion && !mod?.attributes?.version) {\n          batched.push(actions.setModAttribute(gameId, modId, 'version', gameConf.bepinexVersion) as any);\n        } else {\n          batched.push(actions.setModAttribute(gameId, modId, 'version', '0.0.0') as any);\n        }\n        util.batchDispatch(context.api.store, batched);\n      });\n    });\n    context.api.events.on('profile-will-change', () => {\n      const state = context.api.getState();\n      const oldProfileId = util.getSafe(state, ['settings', 'profiles', 'activeProfileId'], undefined);\n      const profile = selectors.profileById(state, oldProfileId);\n      const gameConf = getSupportMap()[profile?.gameId];\n      if (!!gameConf) {\n        dismissNotifications(context.api, oldProfileId);\n      }\n    });\n    context.api.events.on('gamemode-activated', async (gameMode: string) => {\n      const t = context.api.translate;\n      if (!isSupported(gameMode)) {\n        return;\n      }\n\n      const { gameConf } = genTestProps(gameMode);\n\n      try {\n        await createDirectories(context.api, gameConf);\n      } catch (err) {\n        log('error', 'failed to create BepInEx directories', err);\n        return;\n      }\n      const replace = {\n        game: util.getGame(gameMode)?.name || gameMode,\n        bl: '[br][/br][br][/br]',\n        bixUrl: '[url=https://github.com/BepInEx/BepInEx/releases]BepInEx Release[/url]',\n      };\n      const dialogContents = (gameConf.autoDownloadBepInEx)\n        ? t('The \"{{game}}\" game extension requires a widely used 3rd party assembly '\n          + 'patching/injection library called Bepis Injector Extensible (BepInEx).{{bl}}'\n          + 'Vortex has downloaded and installed this library automatically for you, and is currently '\n          + 'available in your mods page to enable/disable just like any other regular mod. '\n          + 'Depending on the modding pattern of \"{{game}}\", BepInEx may be a hard requirement '\n          + 'for mods to function in-game in which case you MUST have the library enabled and deployed '\n          + 'at all times for the mods to work!{{bl}}'\n          + 'To remove the library, simply disable the mod entry for BepInEx.'\n          , { replace })\n        : t('The \"{{game}}\" game extension requires a widely used 3rd party assembly '\n          + 'patching/injection library called Bepis Injector Extensible (BepInEx).{{bl}}'\n          + 'BepInEx may be a hard requirement for some mods to function in-game in which case you should '\n          + 'manually download and install the latest {{bixUrl}} in order for the mods to work!{{bl}}'\n          + 'Choose the \"BepInEx_x64_...zip\" variant - you can then drag and drop it inside the mods page\\'s '\n          + '\"Drop area\" to have Vortex install it as any other mod.{{bl}}'\n          + 'If you installed the BepInEx package through Vortex, don\\'t forget to enable it and click \"Deploy Mods\", '\n          + 'for the package to be linked to your game\\'s directory.'\n          , { replace });\n\n      return ensureBepInExPack(context.api)\n        .then(() => context.api.sendNotification({\n          id: 'bepis_injector' + gameMode,\n          type: 'info',\n          allowSuppress: true,\n          message: 'The {{game}} extension uses BepInEx',\n          actions: [\n            {\n              title: 'More',\n              action: () => context.api.showDialog('info', 'Bepis Injector Extensible', {\n                bbcode: dialogContents,\n              }, [ { label: 'Close' } ]),\n            },\n          ],\n          replace,\n        }))\n        .catch(err => {\n          return (err instanceof NotPremiumError)\n            ? Promise.resolve()\n            : context.api.showErrorNotification('Failed to download/install BepInEx', err);\n        }).finally(() => {\n          const state = context.api.getState();\n          const mods: { [modId: string]: types.IMod } = util.getSafe(state, ['persistent', 'mods', gameMode], {});\n          const hasInjectorMod = Object.values(mods).some(mod => mod?.type === MODTYPE_BIX_INJECTOR);\n          if (hasInjectorMod) {\n            dismissNotifications(context.api, selectors.lastActiveProfileForGame(context.api.getState(), gameMode));\n          }\n        });\n    });\n\n    context.api.onAsync('will-deploy', async (profileId: string) => {\n      const state = context.api.getState();\n      const activeProfile: types.IProfile = selectors.activeProfile(state);\n      const profile = selectors.profileById(state, profileId);\n      if (profile?.gameId === undefined || profile.gameId !== activeProfile?.gameId) {\n        return;\n      }\n\n      if (!isSupported(profile.gameId)) {\n        return;\n      }\n      return ensureBepInExPack(context.api, profile.gameId)\n      .catch(err => {\n        return (err instanceof NotPremiumError)\n          ? Promise.resolve()\n          : context.api.showErrorNotification('Failed to download/install BepInEx', err);\n      });\n    });\n\n    context.api.events.on('check-mods-version',\n      (gameId: string, mods: { [modId: string]: types.IMod }) =>\n        onCheckModVersion(context.api, gameId, mods));\n  });\n\n  return true;\n}\n\nexport default init;\n","/* eslint-disable */\nimport path from 'path';\nimport Parser, { IniFile, WinapiFormat } from 'vortex-parse-ini';\nimport { BEPINEX_CONFIG_REL_PATH, DOORSTOPPER_CONFIG, DOORSTOPPER_HOOK, getSupportMap, INJECTOR_FILES, MODTYPE_BIX_INJECTOR } from './common';\nimport { IBepInExGameConfig, IDoorstopConfig, UnityDoorstopType } from './types';\nimport { resolveBepInExConfiguration } from './util';\n\nimport { types } from 'vortex-api';\n\nfunction makeCopy(source: string, gameConfig: IBepInExGameConfig,\n                  alternativeFileName?: string, idx: number = -1): types.IInstruction {\n  let filePath = (alternativeFileName !== undefined)\n    ? source.replace(path.basename(source), alternativeFileName)\n    : source;\n  \n  let destination = (gameConfig.installRelPath !== undefined)\n    ? path.join(gameConfig.installRelPath, filePath)\n    : filePath;\n\n  const segments = source.split(path.sep);\n  if (idx && idx !== -1 && idx < segments.length) {\n    destination = segments.slice(idx).join(path.sep);\n  }\n  return {\n    type: 'copy',\n    source,\n    destination,\n  };\n}\n\n/**\n * Below function is only relevant for BIX versions 5.4.22 or lower.\n */\nasync function applyDoorStopConfig(config: IDoorstopConfig, filePath: string) {\n  const parser = new Parser(new WinapiFormat());\n  const iniData: IniFile<any> = await parser.read(filePath);\n  iniData.data['UnityDoorstop']['enabled'] = true;\n  iniData.data['UnityDoorstop']['targetAssembly'] = config.targetAssembly !== undefined\n    ? config.targetAssembly : 'BepInEx\\\\core\\\\BepInEx.Preloader.dll';\n  iniData.data['UnityDoorstop']['redirectOutputLog'] = config.redirectOutputLog !== undefined\n    ? config.redirectOutputLog : false;\n  iniData.data['UnityDoorstop']['ignoreDisableSwitch'] = config.ignoreDisableSwitch !== undefined\n    ? config.ignoreDisableSwitch : true;\n  iniData.data['UnityDoorstop']['dllSearchPathOverride'] = config.dllOverrideRelPath !== undefined\n    ? config.dllOverrideRelPath : '';\n  return parser.write(filePath, iniData);\n}\n\nconst MINIMUM_INJECTOR_MATCHES = 8;\nexport async function testSupportedBepInExInjector(files: string[], gameId: string)\n  : Promise<types.ISupportedResult> {\n  if (getSupportMap()[gameId] === undefined) {\n    return { supported: false, requiredFiles: [] };\n  }\n\n  const filesMatched = files.filter(file =>\n    INJECTOR_FILES.map(f => f.toLowerCase()).includes(path.basename(file).toLowerCase()));\n  return Promise.resolve({\n    supported: (filesMatched.length > MINIMUM_INJECTOR_MATCHES),\n    requiredFiles: [],\n  });\n}\n\nexport async function installInjector(files: string[],\n                                      destinationPath: string,\n                                      gameId: string): Promise<types.IInstallResult> {\n  const gameConfig = getSupportMap()[gameId];\n  const idx = (() => {\n    const bixFile = files.find(file => {\n      const segments = file.split(path.sep);\n      return segments.includes('BepInEx');\n    });\n    if (!bixFile) {\n      return -1;\n    }\n    return bixFile.split(path.sep).indexOf('BepInEx');\n  })();\n  const doorStopConfig = gameConfig.doorstopConfig;\n  const doorstopType: UnityDoorstopType = doorStopConfig?.doorstopType !== undefined\n    ? doorStopConfig.doorstopType : 'default';\n  const modTypeInstruction: types.IInstruction = {\n    type: 'setmodtype',\n    value: MODTYPE_BIX_INJECTOR,\n  };\n  const attribInstr: types.IInstruction = {\n    type: 'attribute',\n    key: 'customFileName',\n    value: 'Bepis Injector Extensible',\n  };\n  /**\n   * The doorstopper format changed in 5.4.23 and in 6.x.x pre-release\n   *  versions. Rather than constantly changing our code to match any\n   *  their configuration changes, we might as well leave the default values in.\n   */\n  // if (doorStopConfig !== undefined) {\n  //   try {\n  //     const configFilePath = files.find(file => path.basename(file) === DOORSTOPPER_CONFIG);\n  //     if (configFilePath !== undefined) {\n  //       // This BIX package uses UnityDoorstop - attempt to modify the configuration.\n  //       await applyDoorStopConfig(doorStopConfig, path.join(destinationPath, configFilePath));\n  //     }\n  //   } catch (err) {\n  //     return Promise.reject(err);\n  //   }\n  // }\n\n  const configData = await resolveBepInExConfiguration(gameId);\n  const configInstr: types.IInstruction = {\n    type: 'generatefile',\n    data: configData,\n    destination: BEPINEX_CONFIG_REL_PATH,\n  };\n\n  const instructions: types.IInstruction[] = files.reduce((accum, file) => {\n    if (!path.extname(file) || file.endsWith(path.sep)) {\n      return accum;\n    }\n    if ((doorstopType !== 'default') && path.basename(file).toLowerCase() === DOORSTOPPER_HOOK) {\n      switch (doorstopType) {\n        case 'unity3': {\n          accum.push(makeCopy(file, gameConfig, 'version.dll', idx));\n          break;\n        }\n        case 'none': {\n          return accum;\n        }\n      }\n    } else {\n      accum.push(makeCopy(file, gameConfig, undefined, idx));\n    }\n    return accum;\n  }, [modTypeInstruction, attribInstr, configInstr]);\n\n  return Promise.resolve({ instructions });\n}\n\nconst ROOT_DIRS = ['plugins', 'config', 'patchers'];\nexport async function testSupportedRootMod(files: string[],\n                                           gameId: string): Promise<types.ISupportedResult> {\n  if (getSupportMap()[gameId] === undefined) {\n    return { supported: false, requiredFiles: [] };\n  }\n\n  const filtered = files.filter(file => {\n    // We expect the root mod to have the same directory structure as BepInEx's\n    //  root directory, which means that the very first segments should have a\n    //  patchers, plugins or config directory.\n    const segments = file.split(path.sep);\n    return ROOT_DIRS.includes(segments[0]);\n  });\n\n  return { supported: filtered.length > 0, requiredFiles: [] };\n}\n\nexport async function installRootMod(files: string[],\n                                     destinationPath: string,\n                                     gameId: string): Promise<types.IInstallResult> {\n  const gameConfig = getSupportMap()[gameId];\n  const modTypeInstruction: types.IInstruction = {\n    type: 'setmodtype',\n    value: 'bepinex-root',\n  };\n  const instructions: types.IInstruction[] = files\n    .filter(file => !file.endsWith(path.sep))\n    .map(file => makeCopy(file, gameConfig));\n  instructions.push(modTypeInstruction);\n  return Promise.resolve({ instructions });\n}\n","import { types } from 'vortex-api';\n\nexport type UnityDoorstopType = 'none' | 'default' | 'unity3';\n\nexport class NotPremiumError extends Error {\n  constructor() {\n    super('User is not premium');\n    this.name = 'NotPremiumError';\n  }\n}\n\nexport interface IDoorstopConfig {\n  // Depending on the game's modding pattern, the doorstop assembly\n  //  can be installed as winhttp.dll, version.dll or not at all; winhttp.dll\n  //  will generally work for all Unity games, but version.dll appears to be\n  //  more functional when used with unity3 games.\n  doorstopType: UnityDoorstopType;\n\n  // Relative/Absolute path to the target assembly, by default this will be set\n  //  to BepInEx's preloader.\n  targetAssembly?: string;\n\n  // Will ignore the DOORSTOP_DISABLE environment variable if set to true.\n  ignoreDisableSwitch?: boolean;\n\n  // This refers to the game's unity log; if set to true the log will be redirected\n  //  to the folder where the doorstop assembly is located ../output_log.txt\n  redirectOutputLog?: boolean;\n\n  // Relative path to the game's mono/unity dependencies. This is useful\n  //  if the game's assemblies are optimised/have functionality stripped.\n  dllOverrideRelPath?: string;\n\n  // Some game extensions may want to validate the doorstop's configuration\n  //  or assembly version, etc. This test will be kicked off on extension activation.\n  validateDoorStopConfig?: (doorStopAssemblyPath: string) => Promise<types.ITestResult>;\n}\n\nexport interface IGithubAsset {\n  name: string;\n  browser_download_url: string;\n}\n\nexport interface IGithubRelease {\n  tag_name: string;\n  assets: IGithubAsset[];\n}\n\nexport type BepInExArchitecture = 'x86' | 'x64' | 'unix';\nexport type BepInExUnityBuild = 'unitymono' | 'unityil2cpp';\nexport interface IBIXPackageResolver {\n  rgx: RegExp;\n  version: string; // Semver\n  architecture: BepInExArchitecture;\n  unityBuild?: BepInExUnityBuild;\n}\n\nexport interface IBepInExGameConfig {\n  // Nexus Mods GameId.\n  gameId: string;\n\n  // We're able to auto download the BepInEx package\n  autoDownloadBepInEx: boolean;\n\n  // Whether Vortex should bypass Nexus Mods by default and try\n  //  to download from Github directly - this property works in unison\n  //  with the below \"bepinexVersion\" property when attempting to resolve\n  //  which BIX version to use. If \"bepinexVersion\" isn't defined - the\n  //  downloader will always attempt to update to the latest available release\n  //  on Github.\n  forceGithubDownload?: boolean;\n\n  // The architecture of the game we're modding.\n  architecture?: BepInExArchitecture;\n\n  // The unity build of the BepInEx package (mono or il2cpp).\n  //  Please note that using il2cpp will force this extension to resolve\n  //  to 6.0.0 =< versions.\n  unityBuild?: BepInExUnityBuild;\n\n  // The required BepInEx version to use with this game\n  //  (USE SEMANTIC VERSIONING i.e. '5.4.10'). This should only be\n  //  used if/when the latest available version does not function correctly\n  //  with the game. Note that if specified, Vortex will ALWAYS ensure that this\n  //  version is downloaded and installed).\n  //  IMPORTANT - The Nexus Mods website does _not_ host all BepInEx\n  //  versions and only a select few are available to automatically download,\n  //  available versions can be seen here:\n  //  https://github.com/Nexus-Mods/extension-modtype-bepinex/blob/main/src/common.ts\n  //\n  // If the required version is not available, please use the customPackDownloader\n  //  functor (optional property - see below) to download and have Vortex install it\n  //  as a mod.\n  bepinexVersion?: string;\n\n  // Used internally to store the coerced version of this BepInEx pack.\n  bepinexCoercedVersion?: string;\n\n  // The game extension can have its own BepInEx configuration object defined\n  //  this will be used to generate the BepInEx configuration file when installing\n  //  the package. See the documentation for available parameters\n  //  https://docs.bepinex.dev/articles/user_guide/configuration.html\n  //\n  // IMPORTANT - \".cfg\" files use the TOML format, please ensure that the object\n  //  you provide is valid TOML.\n  // ALTERNATIVELY - You can provide a BepInEx.cfg file alongside your extension\n  //  and it will be used instead of the object. (The object has priority though!)\n  bepinexConfigObject?: any;\n\n  // Relative path to the game's root directory where\n  //  the game extension requires the BepInEx folder to be\n  //  deployed to. Generally this should never have to be used\n  //  as long as the game executable is located at the game's root path.\n  installRelPath?: string;\n\n  // Gives the game extension the ability to configure the Unity Doorstop mechanism.\n  //  Default values are used if this property is not defined.\n  doorstopConfig?: IDoorstopConfig;\n\n  // The game extension can have its own downloader code defined if the default\n  //  BepInEx package is not compatible with the game. This functor expects\n  //  the extension to return the path to the archive (7z, rar, zip) containing\n  //  the BepInEx package; OR the NexusMods file details required to download the pack\n  //  from the website. The vortexTempDirPath property will provide the user\n  //  with a suggested location where the archive should/could be created without\n  //  fearing permissions related issues (hopefully)\n  customPackDownloader?: (vortexTempDirPath: string) => Promise<string | INexusDownloadInfo>;\n\n  // Allows the game extension to validate the bepinex configuration/installation\n  //  and inform the user if something is off. This test will be kicked off on\n  //  extension activation.\n  validateBepInExConfiguration?: (bepinexPath: string) => Promise<types.ITestResult>;\n}\n\nexport interface INexusDownloadInfoExt extends INexusDownloadInfo {\n  githubUrl: string;\n}\nexport interface INexusDownloadInfo {\n  // Refers to the domain of the package which is usually just a gameId unless 'site'\n  //  is used instead.\n  domainId: string;\n\n  // The game we're downloading the file for - used to install the BepInEx package\n  //  as soon as we finish downloading it (when auto installation is enabled)\n  gameId?: string;\n\n  // The mod's version, this can usually be \"guessed\" using the file's name.\n  version: string;\n\n  // x86 or x64\n  architecture: BepInExArchitecture;\n\n  // The numerical id of the mod.\n  modId: string;\n\n  // The id of the specific file we want to download.\n  fileId: string;\n\n  // The name of the archive including its extension (i.e. '.zip', '.7z', etc).\n  archiveName: string;\n\n  // Whether we're ok to have the download automatically install when download\n  //  completes.\n  allowAutoInstall?: boolean;\n}\n\nexport interface IAvailableDownloads { [version: string]: INexusDownloadInfoExt; }\n","/* eslint-disable */\nimport Bluebird from 'bluebird';\nimport path from 'path';\nimport TOML from '@iarna/toml';\nimport { fs, selectors, types, util } from 'vortex-api';\n\nimport { BEPINEX_CONFIG_FILE, getSupportMap } from './common'\nimport { IBepInExGameConfig } from './types';\n\n// We _should_ just export this from vortex-api, but I guess it's not wise to make it\n//  easy for users since we want to move away from bluebird in the future ?\nexport function toBlue<T>(func: (...args: any[]) => Promise<T>): (...args: any[]) => Bluebird<T> {\n  return (...args: any[]) => Bluebird.resolve(func(...args));\n}\n\nexport async function createDirectories(api: types.IExtensionApi, config: IBepInExGameConfig) {\n  const state = api.getState();\n  const modTypes: { [typeId: string]: string } = selectors.modPathsForGame(state, config.gameId);\n  for (const id of Object.keys(modTypes)) {\n    await fs.ensureDirWritableAsync(modTypes[id]);\n  }\n}\n\nexport async function resolveBepInExConfiguration(gameId: string)\n  : Promise<Buffer> {\n  const gameConfig = getSupportMap()[gameId];\n  const game = util.getGame(gameId);\n  try {\n    if (!!gameConfig.bepinexConfigObject) {\n      return Buffer.from(TOML.stringify(gameConfig.bepinexConfigObject), 'utf8');\n    }\n    const configExists = await fs.statAsync(path.join(game.extensionPath, BEPINEX_CONFIG_FILE)).then(() => true).catch(() => false);\n    if (configExists) {\n      return fs.readFileAsync(path.join(game.extensionPath, BEPINEX_CONFIG_FILE), 'utf8');\n    }\n  } catch (err) {\n    // no-op\n  }\n\n  // If we don't have a config file at this point, we will use the default one.\n  return await fs.readFileAsync(path.join(__dirname, 'BepInEx.cfg'), 'utf8');\n}\n\nexport function dismissNotifications(api: types.IExtensionApi, profileId: string) {\n  const profile = selectors.profileById(api.getState(), profileId)\n  api.dismissNotification('bix-update');\n  api.dismissNotification('bepis_injector' + profile.gameId);\n}","module.exports = require(\"bluebird\");","module.exports = require(\"https\");","module.exports = require(\"lodash\");","module.exports = require(\"path\");","module.exports = require(\"react\");","module.exports = require(\"react-i18next\");","module.exports = require(\"semver\");","module.exports = require(\"stream\");","module.exports = require(\"url\");","module.exports = require(\"vortex-api\");","module.exports = require(\"vortex-parse-ini\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/index.ts\");\n",""],"names":[],"sourceRoot":""}