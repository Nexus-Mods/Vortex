{"version":3,"file":"index.js","mappings":";;;;;;;;;;;;;;AAAA;AACA;AACA;AACA,WAAW,sBAAsB;AACjC;AACA,aAAa;AACb;AACO;AACP;AACA;AACA;AACA;;;;;;;;;;;;ACXa;AACb,WAAW,mBAAO,CAAC,cAAI;AACvB,QAAQ,YAAY,EAAE,mBAAO,CAAC,kBAAM;AACpC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA,mBAAmB;;;;;;;;;;;;;;;;;AC9BnB;AACA;AACA;AACA,cAAc,SAAS;AACvB;AACA,cAAc,SAAS;AACvB;AACA;;AAEA;AACA,aAAa,SAAS;AACtB;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa;AACb;AACA;AACO;AACP,aAAa,eAAe;AAC5B;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,sBAAsB;AACjC;AACA,WAAW,SAAS;AACpB;AACA,aAAa;AACb;AACA;AACO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,IAA2B;AAChC;AACA,IAAI,KAAK;AAAA,EAQN;AACH,GAAG;AACH,oBAAoB;AACpB;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA,eAAe,UAAU;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,YAAY,UAAU;AACtB,YAAY,UAAU;AACtB;AACA,mBAAmB,UAAU;AAC7B;AACA;AACA,YAAY,SAAS;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,MAAM;AACvC;AACA;;AAEA;AACA;AACA,OAAO,MAAM;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,8CAA8C,MAAM;AACpD;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ,oBAAoB;AACpB;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;AClHD;;AAEA;AACA;AACA;;AAEA,kBAAkB;AAClB,YAAY;AACZ,YAAY;AACZ,iBAAiB;AACjB,eAAe;AACf,eAAe;AACf;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,4CAA4C;;AAEvD;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA,iBAAiB,mBAAO,CAAC,oDAAU;;AAEnC,OAAO,YAAY;;AAEnB;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;;;;;;;;;;AC9QA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,mBAAO,CAAC,sCAAI;AACpC;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY,eAAe;AAC3B;AACA;AACA;AACA;;AAEA,kBAAkB,sBAAsB;AACxC;AACA,cAAc;AACd;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uCAAuC;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,QAAQ;AACpB,YAAY,QAAQ;AACpB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB,MAAM;AACN;AACA;AACA;AACA,KAAK,6BAA6B;AAClC;AACA;AACA;AACA;AACA,KAAK;AACL,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;;;;;;;;;;;;;;;ACnSA;;AAEA;;AAEA;;AAEA;AACA,WAAW,QAAQ;AACnB,aAAa;AACb;AACO;AACP,6CAA6C;AAC7C;AACA;;AAEA;AACA;AACA,gCAAgC,iCAAiC;AACjE;AACA,qDAAqD;AACrD;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACnCA;;AAEA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnFA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,QAAQ;AACR;AACA;AACA,MAAM;;;AAGN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK,GAAG;;AAER;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA,0CAA0C;;AAE1C;AACA,4EAA4E,6DAA6D;AACzI;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;;AAGA;AACA;AACA,UAAU;AACV;AACA;;AAEA;;AAEA;AACA;AACA;AACA,UAAU;AACV;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;AACH;AACA;;AAEA,oBAAoB,kBAAkB;AACtC;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,SAAS,6BAA6B;AACtC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,QAAQ;AACR;AACA;;AAEA,iCAAiC;;AAEjC;AACA;AACA;AACA,MAAM;AACN;AACA,iCAAiC;AACjC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB,wBAAwB;AACxB,wBAAwB;AACxB,wBAAwB;AACxB,wBAAwB;AACxB,wBAAwB;AACxB,wBAAwB;AACxB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,gDAAgD,eAAe;;AAE/D,kBAAkB,uBAAuB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,mDAAmD;;AAEnD;AACA;AACA,IAAI;;;AAGJ,kBAAkB,6BAA6B;AAC/C;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,0BAA0B,EAAE;AAC5B;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA,kBAAkB,sBAAsB;AACxC;;AAEA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,yCAAyC,SAAS;;AAElD;AACA;;AAEA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,cAAc,kBAAkB;AAChC;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,gBAAgB,gBAAgB;AAChC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,gBAAgB,uBAAuB;AACvC;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB;;AAEtB;AACA,6BAA6B;;AAE7B;AACA;AACA,QAAQ;;;AAGR;;AAEA;AACA;AACA;;AAEA;AACA,MAAM;AACN;;;AAGA;AACA,4BAA4B;;AAE5B;;AAEA;AACA;;AAEA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,IAAI;AACJ;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,WAAW,oBAAoB;AAC/B;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,MAAM;;;AAGN;AACA;AACA;;AAEA;AACA;AACA,MAAM;;;AAGN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;;;AAGA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA,oBAAoB,uBAAuB;AAC3C;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,IAAI;;;AAGJ,kBAAkB,kBAAkB;AACpC;AACA;AACA;AACA;AACA;;AAEA,WAAW,2BAA2B;AACtC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;;;AAGA;AACA,IAAI;;;AAGJ;;AAEA,mBAAmB,mBAAmB;AACtC;AACA;;AAEA;;AAEA,oBAAoB,wBAAwB;AAC5C;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,QAAQ;AACR;;AAEA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA,mBAAmB,uBAAuB;AAC1C;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG,GAAG;;AAEN;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAQ;;;AAGR;AACA;AACA,OAAO,KAAK;;;AAGZ;AACA;AACA,QAAQ;AACR;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,uEAAuE;AACvE;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,kBAAkB,iBAAiB;AACnC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,kBAAkB,uBAAuB;AACzC,8BAA8B;AAC9B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,kBAAkB;AACpC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,oCAAoC;;AAEpC;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;;AAEA;AACA;AACA,MAAM;AACN;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,MAAM;AACN;;AAEA;;AAEA;AACA;AACA,IAAI;AACJ;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,yCAAyC;;AAEzC;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0CAA0C;;AAE1C;AACA;AACA;;AAEA;AACA;AACA,kBAAkB;AAClB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA,kBAAkB,WAAW;AAC7B;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,yCAAyC,sBAAsB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA,KAAK;AACL,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,oBAAoB;AACtC;;AAEA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,kBAAkB,oBAAoB;AACtC;;AAEA;AACA;AACA,MAAM;AACN;AACA;;AAEA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,4BAA4B;AAC5B,2BAA2B;AAC3B,2BAA2B;AAC3B,6BAA6B;AAC7B;AACA;;AAEwT;;;;;;;;;;;;AClqD3S;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAoB;;AAEpB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAQ,YAAY;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;;AAEA;AACA,4BAA4B,iDAAiD;;AAE7E;AACA,OAAO;AACP,4BAA4B,4BAA4B;AACxD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;ACpHA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACO;AACP,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;ACxBA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,mEAAmE;AACnE,0BAA0B;;AAE1B;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,YAAY;AACZ,YAAY;AACZ,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB,QAAQ;AACxB,gBAAgB,QAAQ;AACxB,gBAAgB,kBAAkB;AAClC;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,UAAU;AACvB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd,cAAc;AACd;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,cAAc;AACd,cAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;AACA;AACA;;;;;;;;;;;ACpQA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACVe;AACf;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;ACPa;;AAEb;AACA;AACA,IAAI,mDAAmD,mBAAmB;AAC1E;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAQ,gBAAgB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,gBAAgB,KAAK;AACrB,iBAAiB,MAAM;AACvB,6BAA6B,MAAM;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iEAAe,CAAC,EAAC;;;;;;;;;;;;;;;;;AC7GjB;AACA,aAAa,sBAAsB;AACnC,aAAa,yBAAyB;AACtC,aAAa,4BAA4B;AACzC;;AAEA;AACA,aAAa,gBAAgB;AAC7B;AACA;AACA;AACA,WAAW,2BAA2B;AACtC;AACA,aAAa;AACb;AACA;;AAEsC;;AAEtC,cAAc;;AAEd;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA,aAAa;AACb;AACA;AACO;AACP,aAAa,4BAA4B;AACzC;;AAEA;AACA;AACA;;AAEA,EAAE,uDAAK;AACP;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA,aAAa,eAAe;AAC5B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,2BAA2B;AACtC,aAAa;AACb;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/DA;AACA,aAAa,yCAAyC;AACtD,aAAa,sCAAsC;AACnD,aAAa,6CAA6C;AAC1D,aAAa,sCAAsC;AACnD,aAAa,gDAAgD;AAC7D,aAAa,sCAAsC;AACnD;AACA,aAAa,wBAAwB;AACrC,aAAa,uBAAuB;AACpC;AACA,aAAa,iCAAiC;AAC9C,aAAa,uCAAuC;AACpD,aAAa,yBAAyB;AACtC,aAAa,uBAAuB;AACpC,aAAa,4BAA4B;AACzC,aAAa,sBAAsB;AACnC,aAAa,4BAA4B;AACzC,aAAa,0BAA0B;AACvC,aAAa,yBAAyB;AACtC,aAAa,sBAAsB;AACnC,aAAa,uBAAuB;AACpC,aAAa,gCAAgC;AAC7C,aAAa,4BAA4B;AACzC,aAAa,sBAAsB;AACnC,aAAa,+BAA+B;AAC5C,aAAa,sBAAsB;AACnC,aAAa,0BAA0B;AACvC,aAAa,2BAA2B;AACxC,aAAa,sBAAsB;AACnC,aAAa,wBAAwB;AACrC,aAAa,sBAAsB;AACnC,aAAa,+BAA+B;AAC5C,aAAa,+BAA+B;AAC5C,aAAa,mCAAmC;AAChD;;AAEA;AACA,aAAa,gBAAgB;AAC7B,aAAa,4BAA4B;AACzC;AACA,aAAa,0CAA0C,qDAAqD;AAC5G;;AAEA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B;AACA,WAAW,OAAO;AAClB;AACA,aAAa;AACb;AACA;AACA,aAAa,wBAAwB;AACrC;AACA;AACA;AACA;AACA;AACA,WAAW,wCAAwC;AACnD;AACA,WAAW,mBAAmB;AAC9B;AACA,WAAW,OAAO;AAClB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,WAAW,wCAAwC;AACnD;AACA,WAAW,OAAO;AAClB;AACA,WAAW,OAAO;AAClB;AACA,aAAa;AACb;AACA;AACA,aAAa,mCAAmC;AAChD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc,eAAe;AAC7B;AACA,cAAc,SAAS;AACvB;AACA,cAAc,SAAS;AACvB;AACA,cAAc,kBAAkB;AAChC;AACA;AACA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA,cAAc,wBAAwB;AACtC;AACA,cAAc,mBAAmB;AACjC;AACA,cAAc,+DAA+D;AAC7E;AACA,cAAc,6EAA6E;AAC3F;AACA,cAAc,gCAAgC;AAC9C;AACA,cAAc,kCAAkC;AAChD;AACA,cAAc,qGAAqG;AACnH;AACA,cAAc,qEAAqE;AACnF;AACA,cAAc,mCAAmC;AACjD;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA,cAAc,wDAAwD;AACtE;AACA;AACA,aAAa,oCAAoC;AACjD;AACA;;AAEA;AACA;AACA;;AAEuC;AACM;AACD;AACU;AACE;AACyC;AACxC;AACc;AACnB;AACQ;AACR;AAC0B;AACf;;AAE/D,cAAc;;AAEd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,uCAAuC;AACtD,eAAe,4BAA4B;AAC3C,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,QAAQ,yEAAW;AACnB,UAAU,6DAAK,2BAA2B,uEAAU;AACpD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,4BAA4B;AACvC;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kCAAkC;;AAElC,aAAa,aAAa;AAC1B;;AAEA;;AAEA;AACA;AACA;AACA,aAAa,cAAc;AAC3B;AACA,eAAe;AACf;AACA;AACA;AACA,eAAe,MAAM;AACrB,gBAAgB;AAChB,eAAe,wCAAwC;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,eAAe;AAC9B;AACA;;AAEA;AACA;AACA;AACA;AACA,kCAAkC,kEAAK;AACvC,kCAAkC,kEAAK;AACvC;AACA;AACA;AACA,UAAU;AACV;AACA,UAAU,+CAAM;AAChB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa,gDAAgD;AAC7D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,aAAa,cAAc;AAC3B,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA,eAAe,mBAAmB;AAClC;AACA,eAAe,oBAAoB;AACnC;AACA,eAAe,oBAAoB;AACnC;AACA,eAAe,qBAAqB;AACpC;;AAEA;AACA;;AAEA;AACA,0BAA0B,kEAAK;AAC/B,0BAA0B,kEAAK;AAC/B,0BAA0B,kEAAK;AAC/B;AACA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA,QAAQ,2BAA2B,kEAAK;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAQ;AACR,0BAA0B,kEAAK;AAC/B,0BAA0B,kEAAK;AAC/B,0BAA0B,kEAAK;AAC/B,0BAA0B,kEAAK;AAC/B,0BAA0B,kEAAK;AAC/B;AACA;AACA,QAAQ;AACR;AACA;;AAEA;AACA;AACA;AACA,4BAA4B,kEAAK;AACjC;AACA;AACA,6BAA6B,kEAAK;AAClC,8BAA8B,kEAAK;AACnC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,oCAAoC,kEAAK;AACzC,oCAAoC,kEAAK;AACzC;AACA;;AAEA;AACA,4CAA4C,kEAAK;AACjD;AACA;;AAEA,kCAAkC,kEAAK;AACvC;AACA,cAAc;AACd,oCAAoC,kEAAK;AACzC,oCAAoC,kEAAK;AACzC,oCAAoC,kEAAK;AACzC,oCAAoC,kEAAK;AACzC,oCAAoC,kEAAK;AACzC;AACA;AACA,cAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,8BAA8B,kEAAK;AACnC;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,mBAAmB;AACnC;AACA,aAAa,KAAK;AAClB;AACA,aAAa,kBAAkB;AAC/B;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,mBAAmB;AACnC;AACA,aAAa,KAAK;AAClB;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,wBAAwB;AACrC;AACA,aAAa,QAAQ;AACrB;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA,cAAc;AACd,eAAe,OAAO;AACtB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ,eAAe;AACf;AACA;AACA,qBAAqB,+BAA+B;AACpD;;AAEA;AACA,gBAAgB,MAAM;AACtB;AACA,YAAY;AACZ;AACA,aAAa,MAAM;AACnB;AACA,aAAa,OAAO;AACpB;AACA,aAAa,0BAA0B;AACvC;AACA,eAAe;AACf;AACA;AACA;AACA;AACA,IAAI,+CAAM;AACV,IAAI,+CAAM;AACV;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA,cAAc;AACd,eAAe,OAAO;AACtB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA,aAAa,OAAO;AACpB;AACA,aAAa,yBAAyB;AACtC;AACA,eAAe;AACf;AACA;AACA;AACA;AACA,IAAI,+CAAM;AACV;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU,iFAAiB,EAAE,mCAAmC;AAChE;AACA;AACA,MAAM;AACN;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA,IAAI,8CAAM;AACV,IAAI,+CAAM;AACV;AACA;AACA;;AAEA;AACA,YAAY;AACZ,eAAe;AACf;AACA;AACA,WAAW,8DAAQ;AACnB;;AAEA;AACA;AACA;;AAEA;AACA,YAAY;AACZ,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ,YAAY;AACZ;AACA;AACA;AACA;AACA,MAAM,+CAAM;AACZ,MAAM,+CAAM;AACZ;AACA;AACA,QAAQ,yEAAS;AACjB;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ,YAAY;AACZ;AACA;AACA;AACA;AACA,IAAI,+CAAM;AACV,IAAI,+CAAM;AACV;AACA;;AAEA;AACA,YAAY;AACZ,YAAY;AACZ;AACA;AACA;AACA;AACA,IAAI,+CAAM;AACV,IAAI,+CAAM;AACV;AACA;;AAEA;AACA,YAAY;AACZ,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ,YAAY;AACZ;AACA;AACA;AACA;AACA,IAAI,+CAAM;AACV,IAAI,+CAAM;;AAEV;AACA;AACA;;AAEA;AACA,YAAY;AACZ,YAAY;AACZ;AACA;AACA;AACA;AACA,IAAI,+CAAM;AACV,IAAI,+CAAM;;AAEV;AACA;;AAEA;AACA,YAAY;AACZ,YAAY;AACZ;AACA;AACA;AACA;AACA,IAAI,+CAAM;AACV,IAAI,+CAAM;;AAEV;AACA,sBAAsB,wFAAmB;AACz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CxB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA,iCAAiC,gDAAC;AAClC;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,gDAAC;AACpB;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;;AAEA;AACA;AACA,iBAAiB,gDAAC;AAClB;;AAEA;AACA;;AAEA;AACA,WAAW,MAAM;AACjB,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,WAAW,UAAU;AACrB,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACnHA;AACA,aAAa,sBAAsB;AACnC,aAAa,wBAAwB;AACrC,aAAa,2BAA2B;AACxC,aAAa,+BAA+B;AAC5C;;AAE+B;AACG;;AAElC;AACA,UAAU;AACV,WAAW,MAAM;AACjB,aAAa;AACb;AACO;AACP,aAAa,YAAY;AACzB;AACA;AACA,gBAAgB,iDAAG;AACnB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,8BAA8B,8CAAI;AAClC;;;;;;;;;;;;;;;;;AC3CA;AACA,aAAa,2BAA2B;AACxC,aAAa,+BAA+B;AAC5C;;AAEkC;;AAElC;AACA,UAAU;AACV,WAAW,WAAW;AACtB;AACO;AACP,sBAAsB,iDAAG;AACzB;;;;;;;;;;;;;;;;;;;ACbA;AACA,aAAa,sBAAsB;AACnC,aAAa,+BAA+B;AAC5C;;AAE+B;AACG;AACH;;AAE/B;AACA,UAAU;AACV,WAAW,MAAM;AACjB;AACO;AACP;AACA,yBAAyB,gDAAC,SAAS,8CAAI,CAAC,iDAAG;AAC3C;;;;;;;;;;;;;;;;;AChBA;AACA,aAAa,wBAAwB;AACrC,aAAa,+BAA+B;AAC5C;;AAEkC;;AAElC;AACA,UAAU;AACV,WAAW,QAAQ;AACnB;AACO;AACP,2BAA2B,iDAAG;AAC9B;;;;;;;;;;;;;;;;;;;ACbA;AACA,aAAa,uBAAuB;AACpC,aAAa,2BAA2B;AACxC,aAAa,wBAAwB;AACrC,aAAa,+BAA+B;AAC5C,aAAa,+BAA+B;AAC5C;;AAEwD;AACzB;AACG;;AAElC;AACA,UAAU;AACV,WAAW,OAAO;AAClB;AACO;AACP;AACA;AACA;AACA,aAAa,iBAAiB;AAC9B;;AAEA;AACA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;;AAEA;AACA;AACA,gCAAgC,kBAAkB,SAAS,iDAAG;AAC9D;;AAEA,yCAAyC,8CAAI;AAC7C;;AAEA;AACA;AACA;AACA,IAAI,8CAAI;AACR,sCAAsC,8CAAI;AAC1C;AACA;AACA;AACA,uBAAuB,+DAAU;AACjC,qBAAqB,6DAAQ;AAC7B,eAAe;AACf;AACA,cAAc,8CAAI;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACzDA;AACA,aAAa,sBAAsB;AACnC,aAAa,+BAA+B;AAC5C;;AAE+B;;AAE/B;AACA,UAAU;AACV,WAAW,MAAM;AACjB;AACO;AACP;AACA;AACA,IAAI,gDAAC;AACL;AACA;;;;;;;;;;;;;;;;AChBA;AACA,aAAa,+BAA+B;AAC5C,aAAa,wBAAwB;AACrC,aAAa,+BAA+B;AAC5C;;AAEA;AACA,UAAU;AACV,WAAW,eAAe;AAC1B,aAAa;AACb;AACO;AACP;AACA;;;;;;;;;;;;;;;;;;;;;;;;ACbA;AACA,aAAa,iEAAiE;AAC9E,aAAa,+DAA+D;AAC5E,aAAa,wBAAwB;AACrC,aAAa,4BAA4B;AACzC,aAAa,oCAAoC;AACjD,aAAa,2BAA2B;AACxC,aAAa,qBAAqB;AAClC,aAAa,wBAAwB;AACrC,aAAa,wBAAwB;AACrC,aAAa,qBAAqB;AAClC,aAAa,+BAA+B;AAC5C,aAAa,4CAA4C;AACzD;AACA;AACA,cAAc,QAAQ;AACtB,cAAc,YAAY;AAC1B,cAAc,iBAAiB;AAC/B;AACA,aAAa,+CAA+C;AAC5D;AACA,aAAa,aAAa,cAAc;AACxC;AACA;AACA,WAAW,GAAG;AACd,WAAW,KAAK;AAChB,WAAW,aAAa;AACxB,aAAa,wCAAwC;AACrD;AACA;AACA,WAAW,uCAAuC;AAClD,WAAW,QAAQ;AACnB,WAAW,YAAY;AACvB,WAAW,kBAAkB;AAC7B,aAAa;AACb;AACA;AACA,WAAW,uCAAuC;AAClD,WAAW,QAAQ;AACnB,WAAW,kBAAkB;AAC7B,aAAa;AACb;AACA;AACA,cAAc,SAAS;AACvB,cAAc,yCAAyC;AACvD,cAAc,qCAAqC;AACnD,cAAc,gBAAgB;AAC9B,cAAc,UAAU;AACxB,cAAc,SAAS;AACvB,cAAc,6EAA6E;AAC3F,cAAc,gBAAgB;AAC9B;AACA;AACA,cAAc,SAAS;AACvB,cAAc,UAAU;AACxB,cAAc,gBAAgB;AAC9B,cAAc,SAAS;AACvB;AACA,aAAa,0BAA0B;AACvC,aAAa,6CAA6C;AAC1D;;AAE+B;AACO;AACkB;AACV;AACI;AACjB;AACC;AACU;;AAE5C,cAAc;;AAEd;AACA;AACA,WAAW,WAAW;AACtB,WAAW,SAAS;AACpB,aAAa,GAAG;AAChB;AACA;AACA;AACA;AACA,aAAa,qCAAqC;AAClD;;AAEA;AACA,iBAAiB,mEAAW;AAC5B;AACA,aAAa,gBAAgB;AAC7B;AACA;AACA,gBAAgB,GAAG,wDAAQ;AAC3B;AACA;;AAEA,EAAE,wDAAK;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,aAAa,8BAA8B;AAC3C,aAAa,SAAS;AACtB,eAAe;AACf;AACA;AACA;AACA;AACA,iBAAiB,MAAM;AACvB;;AAEA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;;AAEA;AACA;;AAEA;AACA,4BAA4B;AAC5B;;AAEA;AACA;AACA;AACA;;AAEA;AACA,2CAA2C;;AAE3C,WAAW,+DAAS;AACpB,0BAA0B,OAAO,+DAAU,YAAY,6DAAQ;AAC/D;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,WAAW,WAAW;AACtB,WAAW,SAAS;AACpB,aAAa,yBAAyB;AACtC;AACO;AACP;AACA,eAAe,iDAAG;AAClB,eAAe,kDAAM;;AAErB;AACA;AACA;AACA;AACA,uBAAuB,gDAAC;AACxB;;AAEA,gCAAgC,8BAA8B;AAC9D;;;;;;;;;;;;;;;;;;AClMA;AACA,aAAa,+BAA+B;AAC5C,aAAa,gCAAgC;AAC7C,aAAa,8BAA8B;AAC3C,aAAa,8BAA8B;AAC3C;;AAE+B;AACE;;AAEjC;AACA;AACA;AACA,UAAU;AACV,WAAW,8BAA8B;AACzC,aAAa;AACb;AACO;AACP;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA,WAAW,gDAAC;AACZ;;AAEA,mBAAmB,iDAAG;AACtB;;AAEA;AACA;AACA,IAAI;AACJ,qBAAqB,gDAAC;AACtB;;AAEA;;AAEA;AACA;AACA,IAAI;AACJ,kBAAkB,gDAAC;AACnB;;AAEA;AACA;;;;;;;;;;;;;;;;;;ACjDA;AACA,aAAa,iEAAiE;AAC9E,aAAa,wBAAwB;AACrC,aAAa,8BAA8B;AAC3C,aAAa,8BAA8B;AAC3C;;AAE+B;;AAE/B,cAAc;;AAEd;AACA;AACA,UAAU;AACV,WAAW,WAAW;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,gDAAC;AAC5B;;AAEA;AACA;;AAEA;AACA,UAAU;AACV,WAAW,WAAW;AACtB;AACO;AACP;AACA,aAAa,SAAS;AACtB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;;AAEA;AACA;;AAEA;AACA,UAAU;AACV,WAAW,WAAW;AACtB;AACA;AACA;AACA,+BAA+B,iCAAiC;AAChE;;AAEA;AACA,WAAW,GAAG;AACd,WAAW,WAAW;AACtB;AACO;AACP,aAAa,iBAAiB;AAC9B;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;AC3GA;AACA,aAAa,8BAA8B;AAC3C;;AAE+B;;AAE/B;AACA;AACA;AACA;AACA,WAAW,iBAAiB;AAC5B,WAAW,SAAS;AACpB,aAAa;AACb;AACO;AACP,aAAa,iBAAiB;AAC9B;AACA;;AAEA;AACA,gBAAgB,gDAAC;AACjB;;AAEA;AACA,2BAA2B,gDAAC;AAC5B;AACA;;AAEA;AACA,gBAAgB,gDAAC;AACjB;;AAEA;AACA;;;;;;;;;;;;;;;;ACjCA;AACA,aAAa,8CAA8C;AAC3D;AACA;AACA;AACA,cAAc,4BAA4B;AAC1C;AACA,cAAc,4BAA4B;AAC1C;AACA;;AAEA,WAAW,SAAS;AACpB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA,WAAW,4BAA4B;AACvC;AACA,aAAa;AACb;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA,WAAW,SAAS;AACpB;AACA,WAAW,SAAS;AACpB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B;AACA,WAAW,SAAS;AACpB;AACA,WAAW,SAAS;AACpB;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa,eAAe;AAC5B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC1Ga;;;AAGb;;;AAGA;AACA;AACA;AACA;AACA;AACA,eAAe;;AAEf;;AAEA,cAAc,SAAS;AACvB;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA,cAAc,oBAAoB;AAClC;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,iCAAiC,OAAO;AACxC;;AAEA;AACA,qBAAqB,EAAE;AACvB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,0BAA0B;AAC1B;;;AAGA;;;;;;;;;;;;;;;;ACjGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,sBAAsB;AAC1C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEiC;;;;;;;;;;;;;;;;;;;;;;;AClDjC;AACA,aAAa,qCAAqC;AAClD,aAAa,0CAA0C;AACvD,aAAa,sCAAsC;AACnD,aAAa,sCAAsC;AACnD,aAAa,yCAAyC;AACtD,aAAa,sCAAsC;AACnD,aAAa,sCAAsC;AACnD,aAAa,gDAAgD;AAC7D,aAAa,0CAA0C;AACvD;;AAEmD;AACgB;AACd;AACD;AACQ;AACR;AACb;;AAEvC,WAAW,WAAW;AACf;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA,aAAa,OAAO;AACpB;AACA,aAAa,OAAO;AACpB;AACA,aAAa,OAAO;AACpB;AACA,aAAa,OAAO;AACpB;AACA,aAAa,QAAQ;AACrB;AACA,aAAa,cAAc;AAC3B;AACA,aAAa,QAAQ;AACrB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,wCAAwC;AACxC,sCAAsC;AACtC;AACA;;AAEA;AACA,4BAA4B,iEAAK,kBAAkB,iEAAK;AACxD;AACA,iCAAiC;AACjC;AACA;AACA,4BAA4B,iEAAK,kBAAkB,iEAAK;AACxD,mCAAmC;AACnC;AACA;AACA;AACA,4BAA4B,iEAAK,cAAc,iEAAK;AACpD,mCAAmC;AACnC,iCAAiC;AACjC;AACA;AACA,4BAA4B,iEAAK,UAAU,iEAAK;AAChD,mCAAmC;AACnC,iCAAiC;AACjC;;AAEA,gDAAgD;AAChD,mDAAmD;;AAEnD;;AAEA;AACA;AACA,yBAAyB,4DAAI;AAC7B;AACA;AACA;AACA;;AAEA;AACA,uBAAuB,4DAAI;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAU,+CAAM;AAChB;AACA;AACA;;AAEA;AACA,uBAAuB,4DAAI;AAC3B;AACA,YAAY,sEAAU;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA,uBAAuB,4DAAI;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB,4DAAI;AAC7B;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA,UAAU,8DAAM;;AAEhB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;AACA;AACA,iBAAiB,oFAAiB;;AAElC,aAAa,mBAAmB;AAChC;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,IAAI,+CAAM;AACV,eAAe,iEAAK,sBAAsB,iEAAK;AAC/C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,kBAAkB,oFAAiB;;AAEnC;AACA,IAAI,+CAAM;;AAEV;AACA;AACA,iBAAiB,yEAAS;AAC1B;AACA;AACA;AACA,kBAAkB,yEAAS;AAC3B;;AAEA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;ACtSA;AACA,aAAa,0CAA0C;AACvD,aAAa,sCAAsC;AACnD,aAAa,gDAAgD;AAC7D,aAAa,0CAA0C;AACvD;;AAOiC;AACmB;AACQ;AACR;AACb;;AAEvC,WAAW,WAAW;AACf,kBAAkB;;AAEzB;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,IAAI,+CAAM,UAAU,iEAAK;AACzB,kBAAkB,iEAAK;AACvB,kBAAkB,iEAAK;AACvB;AACA,iBAAiB,iEAAK;AACtB,kBAAkB,iEAAK;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,QAAQ,oEAAU;AAClB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,MAAM,2EAAiB;AACvB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAgB,iEAAK;AACrB,iBAAiB,iEAAK;AACtB,iBAAiB,iEAAK;AACtB,QAAQ,2EAAiB;AACzB,eAAe,yEAAS;AACxB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB,mBAAmB,iEAAK;AACxB,oBAAoB,iEAAK;AACzB;AACA,mBAAmB,iEAAK;AACxB,mBAAmB,iEAAK;AACxB;AACA;;AAEA;AACA;AACA,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,MAAM,sEAAY;AAClB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;;AAEA,QAAQ,oEAAU;AAClB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,WAAW,2EAAiB;AAC5B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;AACA;;AAEA,iBAAiB,iEAAK;AACtB;AACA,mBAAmB,iEAAK,0BAA0B,iEAAK;AACvD,oBAAoB,iEAAK;AACzB;AACA,mBAAmB,iEAAK;AACxB,mBAAmB,iEAAK;AACxB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,gBAAgB,iEAAK,SAAS,2EAAiB;AAC/C,eAAe,yEAAS;AACxB;AACA,4BAA4B,iEAAK;AACjC;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACvQA;AACA,aAAa,0CAA0C;AACvD,aAAa,sCAAsC;AACnD,aAAa,gDAAgD;AAC7D,aAAa,0CAA0C;AACvD;;AAEoD;AACsB;AACtB;AACA;;AAEpD,WAAW,WAAW;AACf,mBAAmB;;AAE1B;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,WAAW,uEAAa;AACxB,QAAQ,qEAAY,iBAAiB,iEAAK;AAC1C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,oBAAoB,iEAAK,QAAQ,4EAAkB;AACnD;AACA;;;;;;;;;;;;;;;;;;;;;;AC3DA;AACA,aAAa,0CAA0C;AACvD,aAAa,uCAAuC;AACpD,aAAa,sCAAsC;AACnD,aAAa,gDAAgD;AAC7D,aAAa,0CAA0C;AACvD;;AAEoD;AACE;AACF;AACQ;AACR;AACb;;AAEvC,WAAW,WAAW;AACf;AACP;AACA;AACA,iBAAiB,yCAAyC;AAC1D;AACA;;AAEA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;;AAEA,MAAM,+CAAM;;AAEZ;AACA,sBAAsB,iEAAK,cAAc,iBAAiB;AAC1D;AACA;;AAEA,oBAAoB,iEAAK;AACzB,oBAAoB,iEAAK;AACzB;AACA,mBAAmB,iEAAK;AACxB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,QAAQ,uEAAa;AACrB,oBAAoB,iEAAK;AACzB;AACA,mBAAmB,iEAAK;AACxB,mBAAmB,iEAAK;AACxB;AACA;;AAEA,iBAAiB,iEAAK;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,QAAQ,uEAAa;AACrB;AACA,MAAM,8CAAM;AACZ;AACA;AACA;;AAEA,aAAa,qEAAY;AACzB;AACA;AACA,QAAQ,iEAAK;AACb;AACA;AACA,YAAY,yEAAS;AACrB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA,WAAW,QAAQ;AACnB;AACA,eAAe,iEAAK;AACpB;;;;;;;;;;;;;;;;;;;;AC/JA;AACA,aAAa,0CAA0C;AACvD,aAAa,sCAAsC;AACnD,aAAa,gDAAgD;AAC7D,aAAa,0CAA0C;AACvD;;AAEyD;AACL;AACA;AACb;;AAEvC,WAAW,WAAW;AACf;AACP;AACA;AACA;;AAEA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,IAAI,+CAAM,UAAU,iEAAK;AACzB,kBAAkB,iEAAK;AACvB,kBAAkB,iEAAK;AACvB;AACA,iBAAiB,iEAAK;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,QAAQ,0EAAgB;AACxB,oBAAoB,iEAAK;AACzB;AACA,mBAAmB,iEAAK;AACxB,mBAAmB,iEAAK;AACxB;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;AClEA;AACA,aAAa,qCAAqC;AAClD,aAAa,0CAA0C;AACvD,aAAa,sCAAsC;AACnD,aAAa,gDAAgD;AAC7D,aAAa,0CAA0C;AACvD;;AAE8E;AAK7C;AACmB;AACQ;AACR;AACb;;AAEvC,WAAW,WAAW;AACf;AACP;AACA;AACA;;AAEA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA,aAAa,yBAAyB;AACtC;;AAEA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA,gBAAgB;AAChB;AACA,eAAe;AACf;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,IAAI,+CAAM,UAAU,iEAAK;AACzB,kBAAkB,iEAAK;AACvB,kBAAkB,iEAAK;AACvB;AACA,iBAAiB,iEAAK;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK,QAAQ,4EAAkB;AAChD,mBAAmB,iEAAK;AACxB,mBAAmB,iEAAK;AACxB;AACA;;AAEA,iBAAiB,iEAAK;AACtB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,IAAI,8CAAM,CAAC,4EAAkB;AAC7B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,IAAI,8CAAM,CAAC,4EAAkB;AAC7B,kBAAkB,iEAAK;AACvB;AACA,iBAAiB,iEAAK;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,gCAAgC,uEAAa;AAC7C,QAAQ,qEAAY;AACpB;AACA;AACA,UAAU,iEAAK;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK,QAAQ,4EAAkB;AAChD;AACA;;AAEA,kBAAkB,iEAAK;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK,QAAQ,4EAAkB;AAChD,mBAAmB,iEAAK;AACxB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;;AAEA;AACA,YAAY;AACZ,YAAY;AACZ;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,MAAM,+CAAM,CAAC,4EAAkB;AAC/B,oBAAoB,iEAAK;AACzB;AACA,mBAAmB,iEAAK;AACxB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,MAAM,8CAAM;AACZ;AACA;AACA;;AAEA;AACA,oBAAoB,iEAAK;AACzB,aAAa,uEAAa;AAC1B,UAAU,qEAAY;AACtB;AACA;AACA,YAAY,iEAAK;AACjB;AACA;AACA,gBAAgB,yEAAS;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,sBAAsB,iEAAK;AAC3B;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB,iEAAK;AAC1B,eAAe,uEAAa;AAC5B,YAAY,qEAAY,8BAA8B,iEAAK;AAC3D;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,mBAAmB,iEAAK,QAAQ,4EAAkB;AAClD,qBAAqB,iEAAK;AAC1B;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;;AAEA,IAAI,8CAAM,CAAC,4EAAkB;AAC7B,kBAAkB,iEAAK;AACvB;AACA,iBAAiB,iEAAK;AACtB;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;AC9fA;AACA,aAAa,0CAA0C;AACvD,aAAa,sCAAsC;AACnD,aAAa,gDAAgD;AAC7D,aAAa,0CAA0C;AACvD;;AAEoD;AACsB;AACtB;AACQ;AACR;AACb;;AAEvC,WAAW,WAAW;AACf;AACP;AACA;AACA;;AAEA,WAAW,WAAW;AACtB,sBAAsB;;AAEtB;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,IAAI,+CAAM,CAAC,uEAAa;AACxB,kBAAkB,iEAAK;AACvB;AACA;AACA,WAAW,qEAAY;AACvB;AACA;AACA,MAAM,iEAAK;AACX,MAAM,yEAAS;AACf;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,uBAAuB,iEAAK;AAC5B,sDAAsD,yEAAS;AAC/D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;;AAEA,QAAQ,4EAAkB;AAC1B;AACA;;AAEA,kBAAkB,iEAAK;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK,QAAQ,4EAAkB;AAChD,mBAAmB,iEAAK;AACxB;AACA;;AAEA;AACA;AACA;;AAEA,aAAa,OAAO;AACpB;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAQ,4EAAkB;AAC1B,oBAAoB,iEAAK;AACzB;AACA,mBAAmB,iEAAK;AACxB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,qEAAY;AACvB;AACA;AACA,MAAM,iEAAK;AACX,MAAM,yEAAS;AACf;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,uBAAuB,iEAAK;AAC5B,sDAAsD,yEAAS;AAC/D;AACA,QAAQ,4EAAkB;AAC1B;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACvMA;AACA,aAAa,0CAA0C;AACvD,aAAa,yCAAyC;AACtD,aAAa,yCAAyC;AACtD,aAAa,sCAAsC;AACnD,aAAa,sCAAsC;AACnD,aAAa,gDAAgD;AAC7D,aAAa,0CAA0C;AACvD;;AAE2D;AACP;AACA;AACb;;AAEvC,WAAW,WAAW;AACf;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,UAAU;AACrB;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA,aAAa,oBAAoB;AACjC;;AAEA;AACA;AACA,wCAAwC,iEAAK;AAC7C;AACA,uCAAuC,iEAAK;AAC5C;AACA;AACA;;AAEA;AACA;AACA,oCAAoC,iEAAK;AACzC;AACA,yCAAyC,iEAAK;AAC9C,wCAAwC,iEAAK;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kCAAkC,iEAAK;AACvC;AACA;AACA;AACA,MAAM;AACN;AACA,gCAAgC,iEAAK;AACrC;AACA,8BAA8B,iEAAK;;AAEnC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa,iEAAK;AAClB,oDAAoD,iEAAK;AACzD;AACA;;AAEA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA,aAAa,OAAO;AACpB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,IAAI,+CAAM,UAAU,iEAAK;AACzB,IAAI,+CAAM;AACV,kBAAkB,iEAAK;AACvB,kBAAkB,iEAAK;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;AACA;;AAEA,iBAAiB,iEAAK;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,iEAAK;AACtB,4BAA4B,iEAAK;AACjC;AACA;AACA;;AAEA,QAAQ,4EAAkB;AAC1B,oBAAoB,iEAAK;AACzB;AACA,mBAAmB,iEAAK;AACxB;AACA;;AAEA;AACA,kBAAkB,iEAAK;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,MAAM,4EAAkB;AACxB;AACA,mBAAmB,iEAAK;AACxB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,iEAAK;AACxB,mBAAmB,iEAAK;AACxB;AACA;;AAEA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;AC7PA;AACA,aAAa,0CAA0C;AACvD,aAAa,yCAAyC;AACtD,aAAa,sCAAsC;AACnD,aAAa,sCAAsC;AACnD,aAAa,gDAAgD;AAC7D,aAAa,0CAA0C;AACvD;;AAEoD;AACO;AACL;AACF;AACQ;AACR;AACb;;AAEvC;AACA;AACA,UAAU;AACV;AACO,iBAAiB;;AAExB,WAAW,WAAW;AACtB,+BAA+B;;AAE/B;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,EAAE,wEAAW;AACb;AACA;;AAEA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA,aAAa,mBAAmB;AAChC;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,IAAI,+CAAM;AACV,eAAe,iEAAK,SAAS,4EAAkB;AAC/C;AACA;;AAEA,kBAAkB,iEAAK;AACvB,6BAA6B,iEAAK;AAClC,mBAAmB,yEAAS;AAC5B,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;;AAEA;AACA;AACA,QAAQ,4EAAkB;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB,iBAAiB,iEAAK;AACtB;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,IAAI,8CAAM,CAAC,4EAAkB;AAC7B;AACA,iBAAiB,iEAAK;AACtB,IAAI,+CAAM;AACV,kCAAkC,iEAAK;AACvC,mBAAmB,yEAAS;AAC5B;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,IAAI,+CAAM,CAAC,4EAAkB;AAC7B,iBAAiB,iEAAK;AACtB,kBAAkB,iEAAK;AACvB;AACA,iBAAiB,iEAAK;AACtB,WAAW,qEAAY,oBAAoB,iEAAK;AAChD;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK,QAAQ,4EAAkB;AAChD;AACA;;AAEA;AACA,IAAI,8CAAM;AACV;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,uBAAuB,iEAAK;AAC5B,sDAAsD,yEAAS;AAC/D;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;ACtLA;AACA,aAAa,0CAA0C;AACvD,aAAa,sCAAsC;AACnD,aAAa,gDAAgD;AAC7D,aAAa,0CAA0C;AACvD;;AAEgE;AACZ;AACA;AACA;AACU;AAK7B;AACsC;AACnB;AACA;AACb;;AAEvC,WAAW,WAAW;AACf,oBAAoB;;AAE3B,WAAW,WAAW;AACtB,qBAAqB;;AAErB;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;AACA,aAAa,QAAQ;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA,kBAAkB,iEAAK;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,IAAI,8CAAM,UAAU,iEAAK;AACzB,WAAW,iEAAY;AACvB;AACA;AACA;AACA;AACA;AACA,MAAM,iEAAK;AACX,MAAM,iEAAK;AACX,MAAM,iEAAK;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,wFAAmB;AACpC;AACA;;AAEA,iBAAiB,iEAAK;AACtB,oBAAoB,iEAAK;AACzB;AACA,mBAAmB,iEAAK;AACxB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,WAAW,mFAAyB;AACpC,QAAQ,+EAAiB;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,WAAW,iFAAkB;AAC7B;AACA;AACA;AACA;AACA,MAAM,iEAAK;AACX,MAAM,iEAAK;AACX,MAAM,iEAAK;AACX,MAAM,iEAAK;AACX,MAAM,iEAAK;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,WAAW,uEAAa;AACxB,QAAQ,qEAAY,2BAA2B,iEAAK;AACpD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK,QAAQ,4EAAkB;AAChD,mBAAmB,iEAAK;;AAExB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,WAAW,mFAAyB;AACpC,QAAQ,+EAAiB;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,WAAW,qEAAY;AACvB;AACA;AACA;AACA,MAAM,iEAAK;AACX,MAAM,iEAAK;AACX,MAAM,iEAAK;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,WAAW,uEAAa;AACxB,QAAQ,qEAAY;AACpB;AACA;AACA,UAAU,iEAAK;AACf;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,oBAAoB,iEAAK,QAAQ,4EAAkB;AACnD;AACA;;;;;;;;;;;;;;;;;;;;ACnSA;AACA,aAAa,0CAA0C;AACvD,aAAa,sCAAsC;AACnD,aAAa,gDAAgD;AAC7D,aAAa,0CAA0C;AACvD;;AAE2D;AACP;AACA;AACb;;AAEvC,WAAW,WAAW;AACf;AACP;AACA;AACA;;AAEA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,IAAI,+CAAM,UAAU,iEAAK;AACzB,kBAAkB,iEAAK;AACvB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,QAAQ,4EAAkB;AAC1B,mBAAmB,iEAAK;AACxB;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;AC9DA;AACA,aAAa,0CAA0C;AACvD,aAAa,yCAAyC;AACtD,aAAa,sCAAsC;AACnD,aAAa,sCAAsC;AACnD,aAAa,gDAAgD;AAC7D,aAAa,0CAA0C;AACvD;;AAEoD;AAKnB;AACY;AACO;AACQ;AACR;AACb;;AAEvC,WAAW,WAAW;AACf;AACP;AACA;AACA;AACA;;AAEA,WAAW,UAAU;AACrB;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA,aAAa,OAAO;AACpB;;AAEA;AACA,uCAAuC,iEAAK;AAC5C;AACA;;AAEA;AACA;AACA;AACA,mCAAmC,iEAAK;AACxC;AACA;AACA;;AAEA;AACA,mCAAmC,iEAAK;AACxC;AACA;AACA,2CAA2C,iEAAK;AAChD;AACA;AACA;;AAEA;AACA;AACA,YAAY,iEAAK;AACjB;AACA;AACA;AACA;AACA,YAAY,iEAAK;AACjB;AACA;AACA,mBAAmB,yEAAS;AAC5B;;AAEA,IAAI,+DAAM;AACV;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,kBAAkB,iEAAK;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,IAAI,8CAAM,UAAU,iEAAK;AACzB,kBAAkB,iEAAK;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,eAAe,iEAAK;AACpB,eAAe,yEAAS;AACxB;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,iEAAK,QAAQ,mFAAyB;AACvD,mBAAmB,iEAAK;AACxB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB,oBAAoB,iEAAK;AACzB;AACA;;AAEA,iBAAiB,iEAAK,QAAQ,4EAAkB;AAChD,mBAAmB,iEAAK;AACxB;AACA;AACA;AACA;AACA;;AAEA,QAAQ,uEAAa;AACrB,aAAa,qEAAY,mBAAmB,iEAAK;AACjD;;AAEA;AACA;AACA,kBAAkB,iEAAK;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;;AAEA,iBAAiB,iEAAK;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,MAAM,mFAAyB;AAC/B;AACA,mBAAmB,iEAAK;AACxB;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;ACvOA;AACA,aAAa,qCAAqC;AAClD,aAAa,0CAA0C;AACvD,aAAa,yCAAyC;AACtD,aAAa,sCAAsC;AACnD,aAAa,gDAAgD;AAC7D,aAAa,0CAA0C;AACvD;;AAQiC;AACwC;AACrB;AACQ;AACR;AACb;AACE;;AAEzC,WAAW,WAAW;AACf;AACP;AACA;AACA;AACA;AACA;;AAEA,WAAW,WAAW;AACtB,yBAAyB;AACzB;AACA;AACA;AACA;;AAEA,WAAW,UAAU;AACrB;AACA;;AAEA;AACA;AACA;AACA,gCAAgC,iEAAK;AACrC;AACA;AACA;AACA;;AAEA,iDAAiD,iEAAK;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA,aAAa,SAAS;AACtB;AACA,aAAa,QAAQ;AACrB;AACA,aAAa,QAAQ;AACrB;AACA,aAAa,MAAM;AACnB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,IAAI,8CAAM,UAAU,iEAAK;AACzB,kBAAkB,iEAAK;AACvB,kBAAkB,iEAAK;AACvB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;;AAEA,iBAAiB,iEAAK;AACtB;AACA;AACA;AACA;;AAEA,iBAAiB,iEAAK;AACtB;AACA,eAAe,yEAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,QAAQ,oEAAU;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA,eAAe,yEAAS;AACxB;AACA;;AAEA,iBAAiB,iEAAK;AACtB;AACA,eAAe,yEAAS;AACxB;AACA;AACA;;AAEA;AACA,QAAQ,oEAAU;AAClB;AACA,eAAe,yEAAS;AACxB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,kBAAkB,yEAAS;;AAE3B;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,QAAQ,oEAAU;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,MAAM,mFAAyB;AAC/B;AACA,6BAA6B,iEAAK;AAClC;;AAEA,mCAAmC,sEAAY;AAC/C,iBAAiB,yEAAS;AAC1B;AACA;AACA;AACA;;AAEA,UAAU,wEAAc;AACxB,iBAAiB,yEAAS;;AAE1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,eAAe,yEAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,iEAAK,SAAS,2EAAiB;AAChD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,QAAQ,uEAAa;AACrB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;;AAEA;AACA,iBAAiB,iEAAK,mBAAmB,iEAAK,eAAe,oEAAU;AACvE;AACA;AACA;;AAEA,QAAQ,uEAAa;AACrB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,MAAM,2EAAiB;AACvB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;;AAEA,QAAQ,uEAAa;AACrB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB;AACA;AACA;;AAEA,iBAAiB,iEAAK,2BAA2B,iEAAK;AACtD;AACA;AACA;AACA;;AAEA,QAAQ,uEAAa;AACrB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,iEAAK,QAAQ,4EAAkB;AAChD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,MAAM,mFAAyB;AAC/B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,MAAM,uEAAa;AACnB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK,QAAQ,4EAAkB;AAChD;AACA;AACA;AACA;;AAEA,QAAQ,uEAAa;AACrB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK,oBAAoB,yEAAS;AACnD;AACA;AACA;;AAEA,iBAAiB,iEAAK,wBAAwB,yEAAS;AACvD;AACA;AACA;;AAEA,iBAAiB,iEAAK,2BAA2B,yEAAS;AAC1D;AACA;AACA;;AAEA,iBAAiB,iEAAK,4BAA4B,yEAAS;AAC3D;AACA;AACA;;AAEA,iBAAiB,iEAAK,kCAAkC,yEAAS;AACjE;AACA;AACA;;AAEA;AACA,MAAM,4EAAkB;AACxB,kBAAkB,yEAAS,yBAAyB,yEAAS;AAC7D;AACA,mBAAmB,iEAAK;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,iEAAK,QAAQ,4EAAkB;AAChD,mBAAmB,iEAAK;AACxB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,IAAI,8CAAM,CAAC,4EAAkB;AAC7B,kBAAkB,iEAAK;AACvB;AACA,iBAAiB,iEAAK;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK,QAAQ,4EAAkB;AAChD;AACA;;AAEA,kBAAkB,iEAAK;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;;AAEA,UAAU,sEAAY;AACtB;AACA;AACA;;AAEA;AACA;;AAEA,QAAQ,oEAAU,0BAA0B,yEAAS;AACrD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;;AAEA;AACA,iBAAiB,iEAAK,oBAAoB,yEAAS;AACnD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK,QAAQ,4EAAkB;AAChD,mBAAmB,iEAAK;AACxB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,QAAQ,4EAAkB;AAC1B,oBAAoB,iEAAK;AACzB;AACA,mBAAmB,iEAAK;AACxB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,IAAI,+CAAM,CAAC,4EAAkB;AAC7B,kBAAkB,iEAAK;AACvB;AACA,iBAAiB,iEAAK;AACtB,2BAA2B,qDAAS;AACpC;AACA;;;;;;;;;;;;;;;;;;;;;;ACz9BA;AACA,aAAa,qCAAqC;AAClD,aAAa,0CAA0C;AACvD,aAAa,sCAAsC;AACnD,aAAa,gDAAgD;AAC7D,aAAa,0CAA0C;AACvD;;AAEoD;AAOnB;AACmB;AACQ;AACR;AACb;;AAEvC,WAAW,WAAW;AACf,kBAAkB;;AAEzB;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;AACA,aAAa,+BAA+B;AAC5C;AACA,aAAa,QAAQ;AACrB;AACA,aAAa,OAAO;AACpB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,IAAI,+CAAM,UAAU,iEAAK;AACzB,kBAAkB,iEAAK;AACvB,kBAAkB,iEAAK;AACvB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;;AAEA,iBAAiB,iEAAK;AACtB;AACA;AACA;;AAEA,iBAAiB,iEAAK;AACtB;AACA;AACA;;AAEA;AACA,QAAQ,oEAAU;AAClB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;;AAEA,iBAAiB,iEAAK;AACtB;AACA;AACA;AACA;;AAEA,QAAQ,oEAAU;AAClB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;;AAEA,iBAAiB,iEAAK;AACtB;AACA;AACA;;AAEA,QAAQ,4EAAkB;AAC1B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,oBAAoB,iEAAK;AACzB;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,kBAAkB,yEAAS;;AAE3B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;;AAEA,iBAAiB,iEAAK;AACtB;AACA;AACA;;AAEA,QAAQ,4EAAkB;AAC1B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;;AAEA,iBAAiB,iEAAK;AACtB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK,iBAAiB,iEAAK;AAC5C;AACA;;AAEA,QAAQ,4EAAkB;AAC1B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;;AAEA,iBAAiB,iEAAK;AACtB;AACA;AACA;;AAEA,QAAQ,4EAAkB;AAC1B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,oBAAoB,iEAAK;AACzB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,QAAQ,oEAAU;AAClB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,iBAAiB,iEAAK,SAAS,2EAAiB;AAChD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,QAAQ,4EAAkB;AAC1B;AACA;AACA;;AAEA,QAAQ,uEAAa;AACrB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,iBAAiB,iEAAK,SAAS,2EAAiB;AAChD;AACA;AACA;;AAEA;AACA,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,MAAM,mFAAyB;AAC/B;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;;AAEA;AACA,iBAAiB,iEAAK,mBAAmB,iEAAK,eAAe,oEAAU;AACvE;AACA;AACA;;AAEA,QAAQ,4EAAkB;AAC1B;AACA;AACA;;AAEA,QAAQ,uEAAa;AACrB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,MAAM,2EAAiB;AACvB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;;AAEA,QAAQ,4EAAkB;AAC1B;AACA;AACA;;AAEA,QAAQ,uEAAa;AACrB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB;AACA;AACA;;AAEA,iBAAiB,iEAAK,2BAA2B,iEAAK;AACtD;AACA;AACA;AACA;;AAEA,QAAQ,4EAAkB;AAC1B;AACA;AACA;;AAEA,QAAQ,uEAAa;AACrB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,iEAAK;AACtB;AACA;;AAEA,QAAQ,4EAAkB;AAC1B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB;AACA;AACA;;AAEA;AACA,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,MAAM,mFAAyB;AAC/B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,MAAM,mFAAyB;AAC/B;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA,mBAAmB,iEAAK;AACxB,mBAAmB,iEAAK;AACxB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,IAAI,8CAAM;AACV,IAAI,+CAAM,CAAC,4EAAkB;AAC7B,iBAAiB,iEAAK;AACtB,kBAAkB,iEAAK;AACvB;AACA,iBAAiB,iEAAK;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,IAAI,8CAAM;AACV;AACA;AACA;AACA,WAAW,uEAAa;AACxB,QAAQ,qEAAY;AACpB;AACA;AACA,UAAU,iEAAK;AACf;AACA;AACA,cAAc,yEAAS;AACvB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,kBAAkB,iEAAK;AACvB;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7wBA;AACA,aAAa,0CAA0C;AACvD,aAAa,sCAAsC;AACnD,aAAa,yCAAyC;AACtD,aAAa,sCAAsC;AACnD,aAAa,sCAAsC;AACnD,aAAa,gDAAgD;AAC7D,aAAa,0CAA0C;AACvD;;AAEgE;AACZ;AACA;AACU;AACI;AACf;AACoB;AAClB;AACD;AACQ;AACR;AACb;;AAEvC,WAAW,WAAW;AACf;AACP;AACA;AACA;AACA;AACA;;AAEA,WAAW,WAAW;AACtB,2BAA2B;AAC3B,WAAW,WAAW;AACtB,gCAAgC;AAChC,WAAW,WAAW;AACtB,qCAAqC;;AAErC,WAAW,UAAU;AACrB;AACA;;AAEA;AACA;;AAEA;AACA,qBAAqB,kEAAK;AAC1B,qBAAqB,kEAAK;AAC1B,qBAAqB,kEAAK;AAC1B;AACA;AACA,8CAA8C,kEAAK;AACnD,mBAAmB,kEAAK;AACxB;AACA;AACA;;AAEA;AACA;;AAEA,WAAW,UAAU;AACrB;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA,aAAa,oBAAoB;AACjC;AACA,aAAa,oBAAoB;AACjC;AACA,aAAa,cAAc;AAC3B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,kEAAK;AAC5B,wBAAwB,kEAAK;AAC7B;AACA;AACA;;AAEA;AACA;AACA,yDAAyD,kEAAK;AAC9D;AACA;AACA,MAAM;AACN;AACA;AACA,wBAAwB,kEAAK,8BAA8B,kEAAK;AAChE;AACA;AACA;;AAEA,2BAA2B,kEAAK;AAChC;AACA;AACA;AACA;AACA,MAAM,wBAAwB,kEAAK;AACnC;AACA;AACA;;AAEA,EAAE,+CAAM;AACR,EAAE,gDAAM;;AAER;AACA,mCAAmC,kEAAK,aAAa,kEAAK,QAAQ,kEAAK;AACvE,2BAA2B;AAC3B,yBAAyB;AACzB;;AAEA;AACA,UAAU,kEAAK;AACf,2BAA2B;AAC3B,yBAAyB;AACzB;;AAEA;AACA,UAAU,kEAAK;AACf,2BAA2B;AAC3B,yBAAyB;AACzB;;AAEA;AACA;AACA;AACA;;AAEA;AACA,UAAU,4DAAI;;AAEd;AACA,UAAU,4DAAI;;AAEd;AACA,EAAE,gDAAM;AACR;AACA;AACA;AACA;AACA,UAAU,4DAAI;AACd;AACA,IAAI,sEAAU;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAU,4DAAI;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAU,4DAAI;;AAEd;AACA,UAAU,4DAAI;;AAEd,EAAE,+DAAM;;AAER;AACA;;AAEA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA,aAAa,SAAS;AACtB;;AAEA;AACA;AACA;AACA,sCAAsC,kEAAK;AAC3C,uCAAuC,kEAAK;AAC5C;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,IAAI,gDAAM,UAAU,iEAAK;;AAEzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM,wFAAmB;AACzB,6BAA6B,uCAAuC;AACpE;AACA;AACA,kBAAkB,kEAAK;AACvB,kBAAkB,kEAAK;AACvB;AACA,iBAAiB,kEAAK;AACtB,iBAAiB,kEAAK;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,IAAI,gDAAM,UAAU,iEAAK;AACzB,kBAAkB,kEAAK;AACvB,kBAAkB,kEAAK;AACvB;AACA,iBAAiB,kEAAK;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,WAAW,mFAAyB;AACpC,QAAQ,+EAAiB;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;;AAEA,WAAW,iFAAkB;AAC7B;AACA;AACA;AACA,MAAM,kEAAK;AACX,MAAM,kEAAK;AACX,MAAM,kEAAK;AACX,MAAM,kEAAK;AACX,MAAM,kEAAK;AACX,MAAM,yEAAS;AACf;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,WAAW,mFAAyB;AACpC,QAAQ,+EAAiB;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB;AACA,aAAa,qEAAY;AACzB;AACA;AACA;AACA,QAAQ,kEAAK;AACb,QAAQ,kEAAK;AACb,QAAQ,kEAAK;AACb;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,WAAW,mFAAyB;AACpC,QAAQ,+EAAiB;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB,oBAAoB,kEAAK;AACzB;AACA,mBAAmB,kEAAK;AACxB,mBAAmB,kEAAK;AACxB;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,IAAI,gDAAM,UAAU,iEAAK;AACzB,WAAW,iEAAY;AACvB;AACA;AACA;AACA;AACA,MAAM,kEAAK;AACX,MAAM,kEAAK;AACX,MAAM,kEAAK;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,MAAM,wFAAmB;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,IAAI,gDAAM,UAAU,iEAAK;AACzB,kBAAkB,kEAAK;AACvB,kBAAkB,kEAAK;AACvB;AACA,iBAAiB,kEAAK;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,iBAAiB,iEAAK;AACtB,oBAAoB,kEAAK;AACzB;AACA,mBAAmB,kEAAK;AACxB,mBAAmB,kEAAK;AACxB;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACpoBA;AACA,aAAa,0CAA0C;AACvD,aAAa,sCAAsC;AACnD,aAAa,gDAAgD;AAC7D,aAAa,0CAA0C;AACvD;;AAEoD;AACA;AACb;AACA;;AAEvC,WAAW,WAAW;AACf;AACP;AACA;AACA,cAAc,mDAAQ;AACtB;;AAEA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,IAAI,+CAAM,UAAU,iEAAK;AACzB,kBAAkB,iEAAK;AACvB,kBAAkB,iEAAK;AACvB;AACA,iBAAiB,iEAAK;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB,oBAAoB,iEAAK;AACzB;AACA,mBAAmB,iEAAK;AACxB,mBAAmB,iEAAK;AACxB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AA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BAAuB,qDAAS;;AAEhC,aAAa,OAAO;AACpB;AACA,IAAI,+CAAM;AACV,IAAI,+CAAM;AACV;AACA;AACA;;AAEA;AACA;AACA,WAAW,qEAAY;AACvB;AACA;AACA,MAAM,iEAAK;AACX;AACA;AACA;;AAEA,aAAa,OAAO;AACpB;AACA,IAAI,8CAAM;AACV,kDAAkD,uEAAa;AAC/D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,aAAa,OAAO;AACpB;AACA,IAAI,8CAAM;AACV;AACA;AACA;AACA;AACA;AACA,IAAI,+CAAM;AACV;AACA;AACA;AACA,WAAW,qEAAY;AACvB;AACA;AACA,MAAM,iEAAK;AACX;AACA;AACA,UAAU,yEAAS;AACnB;AACA;AACA;;AAEA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;;AAEA,EAAE,+CAAM;AACR,EAAE,+CAAM;;AAER,SAAS,qEAAY;AACrB;AACA;AACA,IAAI,iEAAK;AACT;AACA;;AAEA,aAAa,OAAO;AACpB;AACA,IAAI,+CAAM;AACV;AACA;AACA,uBAAuB,iEAAK;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA,EAAE,8CAAM;AACR,EAAE,+CAAM;AACR;AACA;;AAEA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;;AAEA;AACA,EAAE,+CAAM;AACR;AACA;AACA;;AAEA,SAAS,qEAAY;AACrB;AACA;AACA,IAAI,iEAAK;AACT;AACA;AACA,QAAQ,yEAAS;AACjB;;AAEA,aAAa,OAAO;AACpB;AACA;;AAEA,YAAY,uEAAa;AACzB;AACA,uBAAuB,iEAAK;AAC5B;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;AC7SA;AACA,aAAa,qCAAqC;AAClD,aAAa,0CAA0C;AACvD,aAAa,yCAAyC;AACtD,aAAa,sCAAsC;AACnD,aAAa,gDAAgD;AAC7D,aAAa,0CAA0C;AACvD;;AAEoD;AACsB;AACtB;AACA;AACb;;AAEvC,WAAW,WAAW;AACf;AACP;AACA;AACA;AACA;;AAEA,WAAW,UAAU;AACrB;AACA;AACA;AACA,aAAa,oBAAoB;AACjC;AACA,aAAa,oBAAoB;AACjC;AACA,aAAa,oBAAoB;AACjC;;AAEA;AACA;AACA;AACA;AACA,oCAAoC,iEAAK;AACzC;AACA;AACA;;AAEA,oCAAoC,iEAAK;AACzC;AACA;AACA;AACA;AACA;AACA,oCAAoC,iEAAK;AACzC;AACA;AACA;;AAEA,mDAAmD,iEAAK;AACxD;AACA;AACA;AACA;;AAEA,EAAE,8CAAM;AACR,EAAE,+CAAM;;AAER;AACA,UAAU,iEAAK;AACf,2BAA2B;AAC3B,yBAAyB;AACzB;;AAEA;AACA,yBAAyB,iEAAK;;AAE9B;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C,IAAI;AACJ;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;AACA,aAAa,mBAAmB;AAChC;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,eAAe,qBAAqB;AACpC;;AAEA,IAAI,+CAAM;AACV,eAAe,iEAAK,kBAAkB,iEAAK;AAC3C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,uCAAuC,iEAAK;AAC5C,uCAAuC,iEAAK;AAC5C,uCAAuC,iEAAK;AAC5C;AACA,mDAAmD,iEAAK;AACxD;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAoB,iEAAK;AACzB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,kBAAkB,iEAAK;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,iEAAK;;AAEtB,WAAW,uEAAa;AACxB,QAAQ,qEAAY,iBAAiB,iEAAK;AAC1C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK,QAAQ,4EAAkB;AAChD,mBAAmB,iEAAK;AACxB;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;AC3MA;AACA,aAAa,qCAAqC;AAClD,aAAa,0CAA0C;AACvD,aAAa,sCAAsC;AACnD,aAAa,gDAAgD;AAC7D,aAAa,0CAA0C;AACvD;;AAEoD;AACsB;AACtB;AACQ;AACR;AACb;;AAEvC,WAAW,WAAW;AACf;AACP;AACA;AACA;;AAEA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;AACA,aAAa,mBAAmB;AAChC;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,kBAAkB,iEAAK;AACvB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,IAAI,8CAAM;AACV,eAAe,iEAAK;AACpB,iBAAiB,iEAAK;AACtB,iBAAiB,iEAAK;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,oBAAoB,iEAAK;AACzB;AACA;;AAEA;AACA,cAAc,yEAAS;AACvB,gBAAgB,iEAAK,QAAQ,4EAAkB;AAC/C;AACA,mBAAmB,iEAAK;AACxB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,iEAAK;AACtB,WAAW,uEAAa;AACxB,QAAQ,qEAAY,mBAAmB,iEAAK;AAC5C;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACtHA;AACA,aAAa,wCAAwC;AACrD,aAAa,sCAAsC;AACnD,aAAa,0CAA0C;AACvD;;AAMiC;AACmB;AACQ;AACR;;AAEpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA,WAAW,OAAO;AAClB;AACA,WAAW,OAAO;AAClB;AACA,WAAW,WAAW;AACtB;AACA,WAAW,WAAW;AACtB;AACA,WAAW,WAAW;AACtB;AACA,WAAW,WAAW;AACtB;AACA,WAAW,WAAW;AACtB;AACA,WAAW,oBAAoB;AAC/B;AACA,aAAa;AACb;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,MAAM,sEAAY;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAkB,iEAAK,eAAe,aAAa,yEAAS,mBAAmB;AAC/E;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAkB,iEAAK,eAAe,aAAa,yEAAS,mBAAmB;AAC/E;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,iBAAiB,iEAAK;AACtB,mBAAmB,iEAAK;AACxB;AACA;AACA;;AAEA;AACA,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,MAAM,4EAAkB;AACxB;AACA;AACA;;AAEA;AACA,oBAAoB,iEAAK;AACzB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,gBAAgB,iEAAK;AACrB,iBAAiB,iEAAK;AACtB,QAAQ,mFAAyB;AACjC;AACA,mBAAmB,iEAAK;AACxB;AACA;AACA;AACA;AACA;;AAEA,oCAAoC,iEAAK;AACzC;AACA;AACA;AACA;;AAEA,iBAAiB,iEAAK;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,MAAM,sEAAY;AAClB;AACA;AACA;;AAEA;AACA,oBAAoB,iEAAK;AACzB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;ACnQA;AACA,aAAa,wCAAwC;AACrD,aAAa,sCAAsC;AACnD,aAAa,gDAAgD;AAC7D,aAAa,0CAA0C;AACvD;;AAE0E;AACtB;AACQ;AACR;AACb;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,WAAW,SAAS;AACpB;AACA,WAAW,OAAO;AAClB;AACA,WAAW,OAAO;AAClB;AACA,WAAW,WAAW;AACtB;AACA,WAAW,WAAW;AACtB;AACA,WAAW,WAAW;AACtB;AACA,aAAa;AACb;AACA;AACA;AACO;AACP;AACA;AACA,aAAa,SAAS;AACtB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,IAAI,+CAAM,UAAU,iEAAK;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,aAAa,yEAAS;AACtB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,gBAAgB,iEAAK;AACrB;AACA;AACA;AACA;AACA;AACA,gBAAgB,iEAAK;AACrB;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,iEAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,QAAQ,4EAAkB;AAC1B,oBAAoB,iEAAK;AACzB;AACA,mBAAmB,iEAAK;AACxB;AACA;;AAEA,kBAAkB,iEAAK,eAAe,aAAa,yEAAS,mBAAmB;AAC/E;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,MAAM,4EAAkB;AACxB,eAAe,yEAAS;AACxB;AACA,mBAAmB,iEAAK;AACxB;AACA;;AAEA;AACA,uBAAuB,uEAAa;AACpC,oBAAoB,iEAAK;AACzB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;AC5KA;AACA,aAAa,wCAAwC;AACrD,aAAa,sCAAsC;AACnD,aAAa,0CAA0C;AACvD;;AAEsD;;AAEtD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA,WAAW,OAAO;AAClB;AACA,WAAW,WAAW;AACtB;AACA,WAAW,oBAAoB;AAC/B;AACA;AACA;AACA;AACO;AACP;AACA;;AAEA;;AAEA,aAAa,OAAO;AACpB;AACA,QAAQ,uEAAa;AACrB;AACA;AACA;;AAEA;AACA;;AAEA,aAAa,OAAO;AACpB;AACA,QAAQ,uEAAa;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;ACpEA;AACA,aAAa,qCAAqC;AAClD,aAAa,wCAAwC;AACrD,aAAa,sCAAsC;AACnD,aAAa,0CAA0C;AACvD;;AAEoD;AACO;AACP;AACQ;AACR;;AAEpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA,WAAW,OAAO;AAClB;AACA,WAAW,OAAO;AAClB;AACA,WAAW,WAAW;AACtB;AACA,WAAW,WAAW;AACtB;AACA,WAAW,WAAW;AACtB;AACA,aAAa;AACb;AACA;AACA;AACO;AACP,aAAa,mBAAmB;AAChC;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB,eAAe,iEAAK;AACpB;AACA;AACA;AACA;AACA;AACA,wBAAwB,iEAAK,mBAAmB,iEAAK;AACrD;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,iEAAK;AACtB;AACA;;AAEA;AACA,QAAQ,4EAAkB;AAC1B;AACA,oBAAoB,iEAAK;AACzB;AACA,mBAAmB,iEAAK;AACxB,aAAa,qEAAY,mBAAmB,iEAAK;AACjD;;AAEA,kBAAkB,iEAAK,eAAe,aAAa,yEAAS,mBAAmB;AAC/E;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,oCAAoC,iEAAK,QAAQ,4EAAkB;AACnE,mBAAmB,iEAAK;AACxB;AACA;;AAEA;AACA,oBAAoB,iEAAK;AACzB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,oCAAoC,iEAAK;AACzC;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACzKA;AACA,aAAa,wCAAwC;AACrD,aAAa,sCAAsC;AACnD;;AAEoD;AACsB;AACtB;;AAEpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACO;AACP,aAAa,SAAS;AACtB;;AAEA;;AAEA,aAAa,OAAO;AACpB;AACA,QAAQ,4EAAkB;AAC1B,oBAAoB,iEAAK;AACzB;AACA,mBAAmB,iEAAK;AACxB;AACA;AACA;;AAEA,QAAQ,uEAAa;AACrB,aAAa,qEAAY;AACzB;AACA;AACA,eAAe,iEAAK,cAAc,iEAAK;AACvC;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrDA;AACA,aAAa,qCAAqC;AAClD;;AAEoD;AACsB;;AAE1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA,aAAa;AACb;AACA;AACO;AACP;AACA;AACA;AACA,6BAA6B,iEAAK,mBAAmB,iEAAK;AAC1D;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACO,gDAAgD;;AAEvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA,aAAa;AACb;AACA;AACO;AACP,iCAAiC,iEAAK;AACtC;;AAEA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA,aAAa;AACb;AACA;AACO;AACP,kCAAkC,iEAAK,iBAAiB,iEAAK;AAC7D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA,aAAa;AACb;AACA;AACO;AACP;AACA,aAAa,iEAAK;AAClB,aAAa,iEAAK;AAClB,aAAa,iEAAK;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,sCAAsC,sFAAuB;;AAEpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;;AAEP;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,MAAM;AACnB;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC1PA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACO;AACP,cAAc;;;;;;;;;;;;;;;;;;ACX8C;;AAE5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,SAAS;AACvB;AACA,WAAW,UAAU;AACrB;AACA,WAAW,QAAQ;AACnB;AACA,WAAW,QAAQ;AACnB;AACA,WAAW,UAAU;AACrB;AACA,aAAa;AACb;AACA;AACO;AACP;AACA;AACA,aAAa,gBAAgB;AAC7B;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;;AAEA;AACA,qBAAqB,yEAAS;AAC9B;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB,yEAAS;AAC9B;AACA;AACA;AACA;;AAEA,oBAAoB,yEAAS;AAC7B,eAAe,yEAAS;AACxB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,SAAS;AACvB;AACA,WAAW,UAAU;AACrB;AACA,WAAW,UAAU;AACrB;AACA,aAAa;AACb;AACA;AACO;AACP;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;ACxFA;AACA,aAAa,qCAAqC;AAClD;;AAMiC;AACmB;AACQ;;AAE5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA,aAAa;AACb;AACA;AACO;AACP;AACA,aAAa,iEAAK;AAClB,IAAI,mFAAyB;AAC7B,IAAI,2EAAiB;AACrB;AACA,WAAW,yEAAS;AACpB;;AAEA,MAAM,4EAAkB;AACxB,WAAW,yEAAS;AACpB;AACA;;;;;;;;;;;;;;;;;;ACtCA;AACA,aAAa,0CAA0C;AACvD,aAAa,wCAAwC;AACrD,aAAa,8CAA8C;AAC3D,aAAa,oDAAoD;AACjE;;AAE6C;;AAE7C,yBAAyB;;AAEzB;AACA;AACA;AACA,WAAW,kBAAkB;AAC7B;AACA,aAAa;AACb;AACA;AACO;AACP,aAAa,qBAAqB;AAClC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,qBAAqB;AAChC;AACA,WAAW,WAAW;AACtB;AACA,aAAa;AACb;AACA;AACA,aAAa,iBAAiB;AAC9B;;AAEA;AACA;AACA,eAAe,yBAAyB;AACxC,yCAAyC;AACzC,eAAe,qCAAqC;AACpD;AACA,eAAe,QAAQ;AACvB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B,WAAW,gBAAgB;AAC3B,aAAa;AACb;AACA;AACA;AACA,aAAa,gBAAgB;AAC7B;;AAEA;AACA;AACA,KAAK;AACL;;AAEA,EAAE,8DAAM;AACR;;AAEA;AACA;AACA;AACA,WAAW,sBAAsB;AACjC;AACA,aAAa;AACb;AACA;AACO;AACP,aAAa,eAAe;AAC5B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,eAAe;AAC1B;AACA,WAAW,eAAe;AAC1B;AACA,aAAa;AACb;AACA;AACA,aAAa,qBAAqB;AAClC;;AAEA;AACA;AACA,yCAAyC;AACzC;AACA,eAAe,eAAe;AAC9B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACvIoD;AACE;;AAEtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,WAAW,QAAQ;AACnB;AACA,aAAa;AACb;AACA;AACO;AACP;;AAEA;AACA;AACA,WAAW,iEAAK;AAChB,aAAa,iEAAK;AAClB,YAAY,iEAAK,cAAc,iEAAK;AACpC;AACA,YAAY,iEAAK;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,mEAAM;AACjB;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;AC1C8E;AACmB;AAC7C;AACQ;;AAE5D;AACA,iBAAiB,cAAc,IAAI,UAAU,IAAI,UAAU,KAAK,EAAE;;AAElE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa;AACb;AACA;AACO;AACP;AACA;;AAEA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,eAAe,iEAAK;AACpB;AACA,yBAAyB,iEAAK,wBAAwB,iEAAK;AAC3D,WAAW,kHAA+B;AAC1C;AACA,YAAY,yEAAS,0BAA0B,yEAAS;AACxD;AACA;;AAEA,SAAS,+FAA6B;AACtC;;;;;;;;;;;;;;;;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;;;;;;;;;;;;;;;;;AC5F+C;;AAEtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa;AACb;AACA;AACO;AACP;AACA;AACA;AACA,8BAA8B,mEAAM;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACrCA;AACA,aAAa,sCAAsC;AACnD,aAAa,yCAAyC;AACtD,aAAa,gDAAgD;AAC7D;;AAEA;AACA;AACA;AACA,WAAW,OAAO,kCAAkC,GAAG;AACvD;AACA,WAAW,cAAc;AACzB;AACA,WAAW,iBAAiB;AAC5B;AACA,aAAa;AACb;AACA;AACO;AACP,aAAa,iBAAiB;AAC9B;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;ACjCA;AACA,aAAa,sCAAsC;AACnD,aAAa,sCAAsC;AACnD,aAAa,sCAAsC;AACnD;;AAE6C;AACO;AACA;AACb;;AAEvC;AACA;AACA;AACA,WAAW,cAAc;AACzB;AACA,aAAa;AACb;AACA;AACO;AACP,aAAa,wBAAwB;AACrC;AACA;AACA,aAAa,OAAO;AACpB;AACA,aAAa,oBAAoB;AACjC;AACA,aAAa,QAAQ;AACrB;AACA,aAAa,OAAO;AACpB;AACA,aAAa,cAAc;AAC3B;AACA,aAAa,cAAc;AAC3B;AACA,aAAa,qBAAqB;AAClC;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,iEAAK;AAC7B,oCAAoC,iEAAK;AACzC;AACA,MAAM,8CAAM;AACZ;AACA;;AAEA;AACA;AACA,0CAA0C,iEAAK;AAC/C;AACA;AACA;;AAEA;AACA;AACA,0CAA0C,iEAAK;AAC/C;AACA;AACA,gDAAgD,iEAAK;AACrD;AACA;;AAEA,gDAAgD,iEAAK;AACrD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,iCAAiC,iEAAK;AACtC,iCAAiC,iEAAK;AACtC;AACA;AACA;AACA,0CAA0C,iEAAK;AAC/C;;AAEA,iCAAiC,iEAAK;AACtC;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA,uCAAuC;;AAEvC;AACA;AACA;AACA,QAAQ,+DAAM;AACd;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa,eAAe;AAC5B;AACA,EAAE,+CAAM;AACR;AACA;AACA;AACA,aAAa,yBAAyB;AACtC;AACA,aAAa,wBAAwB;AACrC;AACA,aAAa,cAAc;AAC3B;AACA,aAAa,mBAAmB;AAChC;AACA;AACA,aAAa,mBAAmB;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI,8CAAM;AACV;AACA;AACA;AACA,IAAI,+CAAM;;AAEV;;AAEA;AACA;;AAEA;AACA,oBAAoB,iEAAK;AACzB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,8CAAM;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,+CAAM;AACV,IAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI,+CAAM;AACV;AACA,IAAI,+DAAM;AACV;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;ACpQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,yBAAyB,OAAO;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;;;;AC7JD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,6BAA6B,OAAO;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD,yDAAyD;AACzD,2EAA2E;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;;;;AC3CD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACO,yBAAyB,OAAO;AACvC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,wCAAwC,WAAW,gBAAgB;AACnE;AACA;AACA;AACA;;AAEA,uCAAuC;AACvC;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;;;;ACpcD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,0BAA0B,OAAO;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA,qBAAqB;AACrB;AACA;AACA,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5GD;AACA,aAAa,0CAA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U,iEAAK;AACf,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,aAAa,0BAA0B;AACvC;AACA,aAAa,4DAAI;;AAEjB;;AAEA;AACA,sCAAsC,iEAAK;AAC3C;AACA;;AAEA;;AAEA;AACA,qBAAqB,sEAAU;;AAE/B;AACA;;AAEA;AACA;AACA;;AAEA,aAAa,mCAAmC;AAChD;AACA;AACA;;AAEA,aAAa,gCAAgC;AAC7C;AACA;AACA;;AAEA,aAAa,wBAAwB;AACrC;AACA,4EAA4E;AAC5E,WAAW,4CAA4C;AACvD,YAAY;AACZ;;AAEA,aAAa,+BAA+B;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA,eAAe,QAAQ;AACvB;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,MAAM;AACnB,eAAe;AACf;AACA;AACA,IAAI,8CAAM;AACV;AACA;AACA;AACA,IAAI,+CAAM;AACV;AACA;;AAEA,aAAa,oBAAoB;AACjC;AACA,IAAI,8CAAM;;AAEV;;AAEA,IAAI,+CAAM;AACV;AACA;AACA;AACA,IAAI,+CAAM;AACV;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAQ,4EAAkB;AAC1B;AACA;AACA,+BAA+B,iEAAK;AACpC;AACA;AACA,MAAM,kBAAkB,iEAAK;AAC7B;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,aAAa,kBAAkB;AAC/B;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA,IAAI,+CAAM;AACV,IAAI,+CAAM;AACV;;AAEA;;AAEA;;AAEA;AACA;;AAEA,aAAa,iBAAiB;AAC9B;AACA,IAAI,8CAAM;AACV,IAAI,+CAAM;;AAEV;AACA,IAAI,+CAAM;AACV;;AAEA,IAAI,+CAAM;;AAEV,IAAI,+CAAM;AACV;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,cAAc;AAC3B,cAAc,iCAAiC,aAAa;AAC5D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,gDAAgD;AAC/D,eAAe,OAAO;AACtB,eAAe,mBAAmB;AAClC,iBAAiB;AACjB;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA,iBAAiB,QAAQ;AACzB;AACA,iBAAiB,WAAW;AAC5B;AACA,iBAAiB,MAAM;AACvB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,iBAAiB;AAClC,mBAAmB;AACnB;AACA;AACA;;AAEA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC,mBAAmB;AACnB;AACA;AACA;AACA;;AAEA;AACA,UAAU,8CAAM;AAChB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,WAAW;AAC5B,mBAAmB;AACnB;AACA;AACA;;AAEA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU,8CAAM;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,OAAO;AACxB;AACA,QAAQ,8CAAM;AACd;AACA;AACA;AACA;;AAEA,iBAAiB,OAAO;AACxB;AACA,QAAQ,8CAAM;AACd;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,aAAa,WAAW;AACxB,aAAa,QAAQ;AACrB,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM,8DAAM;AACZ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,IAAI,8CAAM;AACV;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY;;AAEZ;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,8BAA8B;AACzC,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,cAAc;AAC3B;;AAEA;AACA,IAAI,8CAAM;AACV,IAAI,+CAAM;AACV;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA,QAAQ;AACR,QAAQ,8CAAM;AACd;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,qBAAqB;AAChC,aAAa;AACb;AACA;AACA;AACA,aAAa,eAAe;AAC5B;AACA,aAAa,qBAAqB;AAClC;;AAEA;AACA;AACA,eAAe,QAAQ;AACvB;;AAEA;AACA;AACA,MAAM;AACN;AACA,aAAa,iEAAK;AAClB,kBAAkB,mEAAM;;AAExB;AACA;;AAEA,aAAa,iEAAK;AAClB,kBAAkB,mEAAM;;AAExB;AACA;;AAEA,aAAa,iEAAK;AAClB,kBAAkB,mEAAM,MAAM,mEAAM;;AAEpC;AACA;;AAEA,aAAa,iEAAK;AAClB,+BAA+B,mEAAM,SAAS,mEAAM;;AAEpD;AACA;;AAEA,aAAa,iEAAK;AAClB;AACA,kBAAkB,mEAAM;;AAExB;AACA;;AAEA;AACA,UAAU,8CAAM;AAChB;AACA;AACA;AACA;;AAEA,sBAAsB,iEAAK;AAC3B;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;AC9pBA;AACA,aAAa,iDAAiD;AAC9D,aAAa,4CAA4C;AACzD,aAAa,sCAAsC;AACnD,aAAa,sCAAsC;AACnD,aAAa,gDAAgD;AAC7D;;AAEoD;AACO;AACP;AACQ;AACR;AACb;;AAEvC,WAAW,kBAAkB;AACtB,iBAAiB;;AAExB;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;;AAEA;;AAEA,aAAa,OAAO;AACpB;AACA,IAAI,+CAAM;AACV,eAAe,iEAAK,QAAQ,4EAAkB;AAC9C;AACA;;AAEA,iBAAiB,iEAAK;AACtB;AACA;AACA;;AAEA,kBAAkB,iEAAK;AACvB;AACA,iBAAiB,iEAAK;AACtB,WAAW,qEAAY,wBAAwB,iEAAK;AACpD;;AAEA,aAAa,OAAO;AACpB;AACA,IAAI,8CAAM;AACV,eAAe,iEAAK,SAAS,4EAAkB;AAC/C;AACA;AACA,kBAAkB,iEAAK;AACvB;AACA;;AAEA,aAAa,OAAO;AACpB;AACA,gCAAgC,iEAAK;AACrC,mBAAmB,yEAAS;AAC5B;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,aAAa,OAAO;AACpB;AACA,iBAAiB,iEAAK;AACtB,mBAAmB,iEAAK;AACxB,mBAAmB,iEAAK;AACxB;AACA;AACA;;AAEA,QAAQ,4EAAkB;AAC1B;AACA,mBAAmB,iEAAK;AACxB;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;AChGA;AACA,aAAa,0CAA0C;AACvD,aAAa,+CAA+C;AAC5D,aAAa,iDAAiD;AAC9D,aAAa,4CAA4C;AACzD,aAAa,sCAAsC;AACnD,aAAa,sCAAsC;AACnD,aAAa,sCAAsC;AACnD,aAAa,gDAAgD;AAC7D,aAAa,0CAA0C;AACvD;;AAEA;AACA,aAAa,6BAA6B;AAC1C;;AAEoD;AACO;AACd;AACO;AACQ;AACR;AACb;;AAEvC,WAAW,kBAAkB;AACtB,kBAAkB;;AAEzB,WAAW,WAAW;AACtB,4BAA4B;;AAE5B;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;AACA,aAAa,kBAAkB;AAC/B;AACA;AACA,aAAa,6BAA6B;AAC1C;AACA,aAAa,mBAAmB;AAChC;AACA,aAAa,QAAQ;AACrB;;AAEA;;AAEA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,+CAAM;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,aAAa,OAAO;AACpB;AACA,IAAI,8CAAM;AACV;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,mBAAmB;AACpC;;AAEA;AACA;AACA;AACA;AACA,mDAAmD,iEAAK;AACxD;AACA;AACA;AACA;AACA;;AAEA,MAAM,8CAAM;;AAEZ;;AAEA;AACA;;AAEA;AACA,oDAAoD;AACpD;AACA;;AAEA;AACA,MAAM,8DAAM;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa,OAAO;AACpB;AACA,IAAI,8CAAM;AACV;AACA;AACA;AACA,IAAI,+CAAM;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa,OAAO;AACpB;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAkB,iEAAK;AACvB,mBAAmB,yEAAS;AAC5B;AACA;AACA,KAAK;;AAEL;AACA;;AAEA,aAAa,OAAO;AACpB;AACA,iBAAiB,iEAAK;AACtB,gCAAgC,iEAAK;AACrC;AACA;AACA;AACA;;AAEA,QAAQ,4EAAkB;AAC1B;AACA,gCAAgC,iEAAK;AACrC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,aAAa,OAAO;AACpB,aAAa,qBAAqB;AAClC,eAAe;AACf;AACA;AACA,IAAI,8CAAM;AACV;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,qBAAqB;AACtC;AACA,iBAAiB,mBAAmB;AACpC;;AAEA;AACA;AACA;AACA;AACA,mDAAmD,iEAAK;AACxD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,MAAM,8CAAM;;AAEZ;;AAEA;AACA;;AAEA;AACA,oDAAoD;AACpD;AACA;;AAEA;AACA,MAAM,8DAAM;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,aAAa,QAAQ;AACrB,eAAe;AACf;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM,+CAAM;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,IAAI,8CAAM;AACV;AACA;AACA;AACA,IAAI,+CAAM;AACV,qBAAqB,iEAAK;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;AACA,EAAE,8CAAM;AACR;AACA;AACA;AACA,SAAS,qEAAY;AACrB;AACA;AACA,IAAI,iEAAK;AACT;AACA;AACA,QAAQ,yEAAS;AACjB;AACA;;;;;;;;;;;;;;;;;;;;;;;AClbA;AACA,aAAa,iDAAiD;AAC9D,aAAa,4CAA4C;AACzD,aAAa,sCAAsC;AACnD,aAAa,gDAAgD;AAC7D;;AAE4D;AACR;AACO;AACP;AACA;AACb;;AAEvC,WAAW,kBAAkB;AACtB,cAAc;;AAErB;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,IAAI,gEAAS;AACb;AACA;AACA;AACA;AACA;AACA,MAAM,qEAAY;AAClB;AACA;AACA;AACA;AACA,0BAA0B,8DAAO;AACjC;AACA,QAAQ,iEAAK;AACb;AACA;AACA;;AAEA;;AAEA,aAAa,OAAO;AACpB;AACA,IAAI,+CAAM;AACV,eAAe,iEAAK,QAAQ,4EAAkB;AAC9C;AACA;;AAEA,iBAAiB,iEAAK;AACtB;AACA;AACA;;AAEA,kBAAkB,iEAAK;AACvB;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;;AAEA,aAAa,OAAO;AACpB;AACA,IAAI,8CAAM;AACV,eAAe,iEAAK,QAAQ,4EAAkB;AAC9C;AACA;;AAEA,iBAAiB,iEAAK;AACtB;AACA;AACA;;AAEA,kBAAkB,iEAAK;AACvB;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;AClFA;AACA,aAAa,qCAAqC;AAClD,aAAa,iDAAiD;AAC9D,aAAa,4CAA4C;AACzD,aAAa,yCAAyC;AACtD,aAAa,sCAAsC;AACnD,aAAa,gDAAgD;AAC7D;;AAEoD;AACQ;AACR;AACb;;AAEhC,kBAAkB;AAClB;AACA;;AAEP;AACA,WAAW,mBAAmB;AAC9B,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;;AAEA,eAAe,OAAO;AACtB;AACA;AACA;;AAEA,eAAe,OAAO;AACtB;AACA,mBAAmB,iEAAK;AACxB;AACA;AACA;;AAEA,oBAAoB,iEAAK;AACzB;AACA;AACA;;AAEA,eAAe,OAAO;AACtB;AACA;AACA,qBAAqB,iEAAK;AAC1B;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,eAAe,MAAM;AACrB,iBAAiB;AACjB;AACA;AACA,mBAAmB,iEAAK;AACxB;AACA;;AAEA;AACA;;AAEA;AACA;AACA,QAAQ,8CAAM;;AAEd;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,WAAW,sBAAsB;AACjC,aAAa;AACb;AACA;AACA;;AAEA,aAAa,UAAU;AACvB;AACA;AACA,eAAe,oBAAoB;AACnC;;AAEA;AACA;AACA;AACA;AACA,uDAAuD,iEAAK;AAC5D;AACA;AACA;AACA,QAAQ,qDAAqD,iEAAK;AAClE;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA,uCAAuC,iEAAK;AAC5C,yCAAyC,iEAAK;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,qBAAqB;AACtC;;AAEA;AACA;;AAEA;AACA;;AAEA,uDAAuD,iEAAK;AAC5D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,2BAA2B,iEAAK;AAChC;AACA;AACA,UAAU,mBAAmB,iEAAK;AAClC;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,yEAAS;AAC5B,gBAAgB,iEAAK;AACrB,gBAAgB,iEAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,+BAA+B;AAC/B;;AAEA,mCAAmC;;AAEnC;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;ACvOA;AACA,aAAa,uCAAuC;AACpD,aAAa,wDAAwD;AACrE,aAAa,iDAAiD;AAC9D,aAAa,6CAA6C;AAC1D,aAAa,6CAA6C;AAC1D;;AAEmE;AACpB;AACE;AACR;AACQ;AACI;AACD;;AAEpD;AACA,WAAW,iCAAiC;AAC5C,aAAa;AACb;AACO;AACP;AACA,gCAAgC,yBAAyB;AACzD,IAAI,oFAAiB,EAAE,2CAAiB;AACxC;;AAEA,aAAa,cAAc;AAC3B;AACA;AACA,YAAY;AACZ;AACA,oBAAoB,2DAAO;AAC3B,qBAAqB,6DAAQ;AAC7B,iBAAiB,qDAAI;AACrB,mBAAmB,uDAAM;AACzB,iBAAiB,qDAAI;AACrB;;AAEA;;AAEA;AACA,aAAa,kBAAkB;AAC/B;AACA;AACA;AACA,eAAe,QAAQ;AACvB;AACA,aAAa,qEAAe;AAC5B;AACA;AACA;;;;;;;;;;;;;;;;;AClDA;AACA,aAAa,sCAAsC;AACnD;;AAEsD;;AAEtD;AACA,WAAW,cAAc;AACzB,aAAa;AACb;AACO;AACP,UAAU,uEAAW;AACrB;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;AChBA;AACA,aAAa,sCAAsC;AACnD,aAAa,qCAAqC;AAClD,aAAa,yCAAyC;AACtD,aAAa,sCAAsC;AACnD;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,6BAA6B;AACxC,WAAW,4BAA4B;AACvC,aAAa;AACb;;AAEoD;AACQ;;AAE5D;;AAEA;AACA,aAAa;AACb;AACO;AACP;AACA;AACA,aAAa,qBAAqB;AAClC;AACA,aAAa,qBAAqB;AAClC;;AAEA;;AAEA,aAAa,cAAc;AAC3B;AACA,eAAe,cAAc;AAC7B;AACA,eAAe,yBAAyB;AACxC;AACA,eAAe,QAAQ;AACvB;AACA,eAAe,QAAQ;AACvB;AACA,eAAe,QAAQ;AACvB;AACA,eAAe,MAAM;AACrB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,kCAAkC,iEAAK;AACvC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,iEAAK;AACtB;AACA;AACA;AACA,oBAAoB,iEAAK;AACzB;AACA,QAAQ;AACR;AACA,sBAAsB,iEAAK;AAC3B;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,eAAe,iEAAK;AACpB,wBAAwB,iEAAK;AAC7B;;AAEA;AACA;;AAEA,eAAe,iEAAK;AACpB,sCAAsC,yEAAS,YAAY,yEAAS;AACpE,wBAAwB,iEAAK;AAC7B,gDAAgD,iEAAK;;AAErD;AACA;;AAEA,eAAe,iEAAK;AACpB,wBAAwB,iEAAK;AAC7B;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,wCAAwC,iEAAK;AAC7C;AACA,kBAAkB,iEAAK;AACvB;;AAEA;AACA;AACA;;;;;;;;;;;ACrIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,WAAW,QAAQ;AACnB,YAAY,OAAO;AACnB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;ACjKqD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA,GAAG;AACiE;;;;;;;;;;;;;;;;ACjCpE;AACA;AACsB;;;;;;;;;;;;ACFtB;AACA;AACA;AACA;AACA;;AAEa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,QAAQ;AAC1B;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH,kCAAkC;AAClC;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,oBAAoB;AACvC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;ACzFA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;;AAEA,IAAI,IAAqC;AACzC,6BAA6B,mBAAO,CAAC,yFAA4B;AACjE;AACA,YAAY,mBAAO,CAAC,uDAAW;;AAE/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,YAAY;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,WAAW;AACtB;AACA;AACA;AACA,MAAM,IAAqC;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6GAA6G;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,4DAA4D;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,IAAqC;AAC3C;AACA;AACA;;AAEA;;;;;;;;;;;;ACtGA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,cAAc,mBAAO,CAAC,kDAAU;AAChC,aAAa,mBAAO,CAAC,4DAAe;;AAEpC,2BAA2B,mBAAO,CAAC,yFAA4B;AAC/D,UAAU,mBAAO,CAAC,uDAAW;AAC7B,qBAAqB,mBAAO,CAAC,qEAAkB;;AAE/C;;AAEA,IAAI,IAAqC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,2CAA2C;;AAE3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,8BAA8B;AAC9B,QAAQ;AACR;AACA;AACA;AACA;AACA,+BAA+B,KAAK;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,4BAA4B;AAC5B,OAAO;AACP;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,QAAQ,IAAqC;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,SAAS,KAAqC;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,sBAAsB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU,IAAqC;AAC/C;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB,2BAA2B;AACjD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM,KAAqC,4FAA4F,CAAM;AAC7I;AACA;;AAEA,oBAAoB,gCAAgC;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB,gCAAgC;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iHAAiH;AACjH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;ACjmBA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI,IAAqC;AACzC,gBAAgB,mBAAO,CAAC,kDAAU;;AAElC;AACA;AACA;AACA,mBAAmB,mBAAO,CAAC,uFAA2B;AACtD,EAAE,KAAK;AAAA,EAIN;;;;;;;;;;;;AClBD;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;;AAEA;;;;;;;;;;;ACXA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA,aAAa,mCAAmC;AAChD,aAAa,uCAAuC;AACpD;;AAEyC;AACL;AACJ;AACI;AACF;AACY;AACH;;AAET;AACgB;AACN;AACrC,aAAa,yDAAK,EAAE,4CAAG,EAAE,gDAAK,EAAE,gDAAK,EAAE,8CAAI,EAAE,8CAAQ;AACrD,YAAY,yDAAK,EAAE,4CAAG,EAAE,gDAAK,EAAE,gDAAK,EAAE,8CAAI,EAAE,4CAAO;;;;;;;;;;;;;;;;;;ACjBQ;AAC3B;;AAEhC,aAAa,uDAAM;AAC1B;AACA;AACA,GAAG;AACH;AACA;AACA,gBAAgB,sDAAU;AAC1B;AACA,cAAc,sDAAU;AACxB,iBAAiB,sDAAU;AAC3B,kBAAkB,kDAAM;AACxB,kBAAkB,kDAAM;AACxB,iBAAiB,kDAAM;AACvB,kBAAkB,0DAAc;AAChC;AACA,qBAAqB,0DAAc;AACnC;AACA,kBAAkB,sDAAU;AAC5B,oBAAoB,0DAAc;AAClC;AACA,kBAAkB,sDAAU;AAC5B,gBAAgB,0DAAc;AAC9B,iBAAiB,sDAAU;AAC3B;AACA,gBAAgB,sDAAU;AAC1B;AACA;AACA;AACA,oBAAoB,0DAAc;AAClC,eAAe,kDAAM;AACrB;AACA,eAAe,sDAAU;AACzB,mBAAmB,sDAAU;AAC7B,yBAAyB,sDAAU;AACnC;AACA,cAAc,0DAAc;AAC5B;AACA,kBAAkB,kDAAM;AACxB,iBAAiB,sDAAU;AAC3B,kBAAkB,sDAAU;AAC5B;AACA,kBAAkB,sDAAU;AAC5B,yBAAyB,0DAAc;AACvC,kBAAkB,kDAAM;AACxB,kBAAkB,kDAAM;AACxB,iBAAiB,kDAAM;AACvB,kBAAkB,sDAAU;AAC5B,iBAAiB,kDAAM;AACvB;AACA,kBAAkB,kDAAM;AACxB,kBAAkB,kDAAM;AACxB,kBAAkB,kDAAM;AACxB;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;;;;;;;AC1DD;AACA,aAAa,mCAAmC;AAChD;;AAEwC;AACU;AACf;;AAEnC;AACA;AACA;;AAEA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa;AACb;AACO;AACP,iBAAiB,wDAAS;AAC1B;AACA,aAAa,+CAAI;;AAEjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,WAAW,8DAAW;AACtB;;AAEA;AACA;;AAEA;AACA,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACpBwB;AACe;AACsC;;AAEtE,aAAa,uDAAM;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,aAAa,yFAAwB;AACrC;AACA;AACA;AACA;AACA,YAAY,0DAAc;AAC1B,mBAAmB,0DAAc;AACjC,eAAe,0DAAc;AAC7B;AACA;AACA,qBAAqB,mDAAO;AAC5B,yBAAyB,mDAAO;AAChC,oBAAoB,mDAAO;AAC3B;AACA;AACA,WAAW,mDAAO;AAClB;AACA,kBAAkB,0DAAc;AAChC,eAAe,mDAAO;AACtB,cAAc,mDAAO;AACrB,cAAc,0DAAc;AAC5B;AACA;AACA,aAAa,mDAAO;AACpB;AACA,eAAe,0DAAc;AAC7B,UAAU,kDAAM;AAChB;AACA;AACA,qBAAqB,sDAAU;AAC/B,cAAc,mDAAO;AACrB,kBAAkB,0DAAc;AAChC,YAAY,kDAAM,GAAG,0DAAc;AACnC;AACA;AACA;AACA;AACA,aAAa,mDAAO;AACpB,WAAW,mDAAO;AAClB;AACA;AACA,cAAc,mDAAO;AACrB,cAAc,6DAAiB;AAC/B,eAAe,sDAAU;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,mDAAO;AAC3B;AACA,aAAa,0DAAc;AAC3B,YAAY,kDAAM;AAClB,YAAY,mDAAO;AACnB,UAAU,kDAAM;AAChB;AACA;AACA,aAAa,0DAAc;AAC3B,eAAe,0DAAc;AAC7B;AACA;AACA;AACA,WAAW,mDAAO;AAClB;AACA;AACA;AACA,WAAW,mDAAO;AAClB;AACA,cAAc,0DAAc;AAC5B,aAAa,0DAAc;AAC3B,eAAe,mDAAO;AACtB,cAAc,0DAAc;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,mDAAO;AACjB,SAAS,kDAAM;AACf;AACA;AACA,eAAe,kDAAM;AACrB;AACA;AACA;AACA,eAAe,kDAAM;AACrB,cAAc,mDAAO;AACrB,WAAW,mDAAO;AAClB;AACA;AACA,cAAc,mDAAO;AACrB,gBAAgB,mDAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,mDAAO;AACjB,aAAa,kDAAM;AACnB;AACA,UAAU,0DAAc;AACxB;AACA,iBAAiB,mDAAO;AACxB;AACA;AACA;AACA;AACA;AACA,cAAc,mDAAO;AACrB;AACA,SAAS,0DAAc;AACvB,cAAc,mDAAO;AACrB,cAAc,mDAAO;AACrB,UAAU,kDAAM;AAChB,aAAa,kDAAM;AACnB,aAAa,0DAAc;AAC3B;AACA,YAAY,mDAAO;AACnB,cAAc,mDAAO;AACrB,cAAc,mDAAO;AACrB,wBAAwB,mDAAO;AAC/B,8BAA8B,mDAAO;AACrC;AACA;AACA,UAAU,kDAAM;AAChB;AACA;AACA,UAAU,kDAAM;AAChB,gBAAgB,sDAAU;AAC1B;AACA;AACA;AACA;AACA,WAAW,kDAAM;AACjB;AACA;AACA,cAAc,kDAAM;AACpB;AACA;AACA;AACA;AACA,mBAAmB,mDAAO;AAC1B;AACA,WAAW,sDAAU;AACrB,WAAW,kDAAM;AACjB;AACA;;AAEA;AACA;AACA;AACA,iDAAiD,MAAM;AACvD,aAAa,0DAAc;AAC3B;AACA;AACA;AACA,YAAY,kDAAM;AAClB;AACA,kBAAkB,kDAAM;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,mDAAO;AACpB,aAAa,mDAAO;AACpB;AACA;AACA;AACA;AACA,YAAY,kDAAM;AAClB,gBAAgB,kDAAM;AACtB,8CAA8C,SAAS;AACvD;AACA;AACA,kBAAkB,kDAAM;AACxB,iBAAiB,kDAAM;AACvB,cAAc,mDAAO;AACrB,YAAY,mDAAO;AACnB,aAAa,mDAAO;AACpB,YAAY,mDAAO;AACnB;AACA;AACA;AACA;AACA,iBAAiB,kDAAM;AACvB;AACA;AACA,eAAe,sDAAU;AACzB;AACA;AACA;AACA,eAAe,kDAAM;AACrB;AACA;AACA;AACA,kDAAkD,MAAM;AACxD,YAAY,kDAAM;;AAElB;AACA;AACA;AACA;AACA,6BAA6B,mDAAO;AACpC,2BAA2B,mDAAO;AAClC;AACA;AACA,aAAa,kDAAM;AACnB;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;;;;ACjUD;AACA,WAAW,QAAQ;AACnB,aAAa;AACb;AACO;AACP;AACA;;;;;;;;;;;;;;;;;;;ACAwB;AACe;AACkC;;AAElE,YAAY,uDAAM;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,aAAa,qFAAsB;AACnC;AACA,WAAW,iEAAqB;AAChC,kBAAkB,kDAAM;AACxB;AACA;AACA;AACA,gBAAgB,kDAAM;AACtB,eAAe,kDAAM;AACrB;AACA,YAAY,kDAAM;AAClB;AACA;AACA,aAAa,kDAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,kDAAM;AAChB;AACA;AACA,eAAe,kDAAM;AACrB,eAAe,0DAAc;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,kDAAM;AACnB,qBAAqB,kDAAM;AAC3B;AACA;AACA;AACA,aAAa,kDAAM;AACnB;AACA,cAAc,mDAAO;AACrB;AACA;AACA;AACA;AACA,eAAe,kDAAM;AACrB;AACA;AACA;AACA,cAAc,kDAAM;AACpB;AACA;AACA,iBAAiB,kDAAM;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,0DAAc;AACtB,QAAQ,0DAAc;AACtB,eAAe,0DAAc;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,kDAAM;AACnB;AACA;AACA;AACA;AACA;AACA,eAAe,kDAAM;AACrB,kBAAkB,kDAAM;AACxB,kBAAkB,kDAAM;AACxB;AACA,iBAAiB,kDAAM;AACvB;AACA;AACA;AACA;AACA,eAAe,kDAAM;AACrB,OAAO,kDAAM;AACb,QAAQ,kDAAM;AACd,QAAQ,kDAAM;AACd,QAAQ,kDAAM;AACd,QAAQ,kDAAM;AACd,kBAAkB,iEAAqB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kDAAM;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,kDAAM;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,kDAAM;AAC5B,uBAAuB,kDAAM;AAC7B;AACA;AACA;AACA,gBAAgB,kDAAM;AACtB;AACA;AACA;AACA;AACA,UAAU,0DAAc;AACxB;AACA;AACA;AACA;AACA,eAAe,kDAAM;AACrB,eAAe,kDAAM;AACrB,eAAe,kDAAM;AACrB;AACA;AACA;AACA;AACA,cAAc,iEAAqB;AACnC;AACA;AACA;AACA;AACA;AACA,SAAS,iEAAqB;AAC9B,SAAS,iEAAqB;AAC9B;AACA;AACA;AACA,wBAAwB,iEAAqB;AAC7C,sBAAsB,iEAAqB;AAC3C,mBAAmB,iEAAqB;AACxC,qBAAqB,iEAAqB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,kDAAM;AAC5B,sBAAsB,kDAAM;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,kDAAM;AACjC,4BAA4B,kDAAM;AAClC;AACA;AACA,qBAAqB,iEAAqB;AAC1C;AACA;AACA;AACA,sBAAsB,kDAAM;AAC5B,mBAAmB,kDAAM;AACzB;AACA;AACA,kBAAkB,kDAAM;AACxB;AACA;AACA;AACA;AACA;AACA,oBAAoB,iEAAqB;AACzC,cAAc,kDAAM;AACpB;AACA;AACA,aAAa,kDAAM;AACnB,aAAa,kDAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,iEAAqB;AACjC;AACA;AACA;AACA;AACA;AACA,uBAAuB,kDAAM;AAC7B,wBAAwB,kDAAM;AAC9B;AACA;AACA;AACA,gBAAgB,kDAAM;AACtB;AACA,iBAAiB,kDAAM;AACvB,mBAAmB,kDAAM;AACzB;AACA,cAAc,kDAAM;AACpB,kBAAkB,kDAAM;AACxB;AACA,cAAc,kDAAM;AACpB,iBAAiB,kDAAM;AACvB,iBAAiB,kDAAM;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,kDAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;;;;;ACtjBmE;;AAEpE;AACA,WAAW,wBAAwB;AACnC,WAAW,QAAQ;AACnB,aAAa;AACb;AACO;AACP,SAAS,oFAAsB;AAC/B;;;;;;;;;;;;;;;;ACTA;AACA,WAAW,wBAAwB;AACnC,WAAW,QAAQ;AACnB,aAAa;AACb;AACO;AACP;AACA;;;;;;;;;;;;;;;;;;;ACPA;AACA,aAAa,kCAAkC;AAC/C,aAAa,8BAA8B;AAC3C;AACA,aAAa,wBAAwB;AACrC;AACA,aAAa,QAAQ;AACrB,cAAc,6BAA6B;AAC3C,cAAc,sDAAsD;AACpE,cAAc,QAAQ;AACtB,cAAc,YAAY;AAC1B,cAAc,eAAe;AAC7B;;AAEyC;AACP;AACW;;AAE7C,cAAc;;AAEd;AACA,WAAW,YAAY;AACvB,aAAa;AACb;AACO;AACP,aAAa,YAAY;AACzB;AACA,aAAa,QAAQ;AACrB;AACA,aAAa,QAAQ;AACrB;;AAEA;AACA;AACA;AACA,uBAAuB,yDAAW;AAClC;AACA,wDAAwD;AACxD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,aAAa,wDAAS;AACtB,aAAa,wDAAS;AACtB;AACA;;AAEA,aAAa,8CAAM;AACnB;;;;;;;;;;;;;;;;;;ACzD8B;AACK;;AAEnC,WAAW,oBAAoB;AAC/B;AACA,2BAA2B,sCAAK;;AAEzB,0BAA0B,0CAAI;AACrC;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,aAAa,aAAa;AAC1B,aAAa,QAAQ;AACrB;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,0CAA0C,sCAAK,aAAa,sCAAK;AACjE;AACA;AACA;AACA;;AAEA;;AAEA;AACA,WAAW,aAAa;AACxB,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC3CO;AACP;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB;AACA;AACA,eAAe,QAAQ;AACvB;AACA,eAAe,QAAQ;AACvB;AACA;AACA;;AAEA,WAAW,aAAa;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACxBA;AACA,aAAa,kCAAkC;AAC/C,aAAa,8BAA8B;AAC3C;;AAEkC;;AAElC;AACA,WAAW,UAAU;AACrB,WAAW,QAAQ;AACnB,aAAa;AACb;AACO;AACP,aAAa,YAAY;AACzB;AACA,aAAa,QAAQ;AACrB;AACA;;AAEA;AACA;AACA;AACA;;AAEA,aAAa,8CAAM;AACnB;;;;;;;;;;;;;;;;ACzBA;AACA,aAAa,0BAA0B;AACvC,aAAa,sBAAsB;AACnC,aAAa,wBAAwB;AACrC;;AAEO;AACP;AACA;AACA,aAAa,YAAY;AACzB,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAW,YAAY;AACvB;AACA,WAAW,QAAQ;AACnB;AACA,WAAW,aAAa;AACxB;;;;;;;;;;;;;;;;;;;;;;AC3BA;;AAEO;AACA;AACA;AACA;AACA;AACA;AACA;;AAEP;AACA;AACA;;;;;;;;;;;;;;;;;ACZuC;;AAEhC,cAAc,uDAAM;AAC3B;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;;;;;AChBsC;;AAEhC,YAAY,uDAAM;AACzB;AACA;AACA;AACA,GAAG;AACH,eAAe;AACf,CAAC;;;;;;;;;;;;;;;;;;ACRsC;AACsC;;AAEtE,cAAc,uDAAM;AAC3B;AACA,eAAe,0BAA0B;AACzC,aAAa,yFAAwB;AACrC,eAAe;AACf,CAAC;;;;;;;;;;;;ACRD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;;;AAIb,IAAI,IAAqC;AACzC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E;AAC3E;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;;AAEjD;AACA;AACA;AACA,kDAAkD;;AAElD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB;AACjB,sBAAsB;AACtB,uBAAuB;AACvB,uBAAuB;AACvB,eAAe;AACf,kBAAkB;AAClB,gBAAgB;AAChB,YAAY;AACZ,YAAY;AACZ,cAAc;AACd,gBAAgB;AAChB,kBAAkB;AAClB,gBAAgB;AAChB,mBAAmB;AACnB,wBAAwB;AACxB,yBAAyB;AACzB,yBAAyB;AACzB,iBAAiB;AACjB,oBAAoB;AACpB,kBAAkB;AAClB,cAAc;AACd,cAAc;AACd,gBAAgB;AAChB,kBAAkB;AAClB,oBAAoB;AACpB,kBAAkB;AAClB,0BAA0B;AAC1B,cAAc;AACd,GAAG;AACH;;;;;;;;;;;;ACpLa;;AAEb,IAAI,KAAqC,EAAE;AAAA,EAE1C,CAAC;AACF,EAAE,gIAAyD;AAC3D;;;;;;;;;;;;;;;;;;;ACNA;AACA,aAAa,wDAAwD;AACrE,aAAa,4CAA4C;AACzD;;AAEuD;;AAES;;;;;;;;;;;;;;;;;;;;;;;;;ACPhE;AACA;AACA,aAAa,kCAAkC;AAC/C;;AAEA;AACA;AACA,aAAa,6CAA6C;AAC1D;;AAEA;AACA,aAAa,2BAA2B;AACxC,aAAa,0BAA0B;AACvC,aAAa,wBAAwB;AACrC,aAAa,+BAA+B;AAC5C,aAAa,qBAAqB;AAClC,aAAa,qBAAqB;AAClC,aAAa,wBAAwB;AACrC,aAAa,wBAAwB;AACrC,aAAa,qCAAqC;AAClD,aAAa,uCAAuC;AACpD,aAAa,8CAA8C;AAC3D;AACA;AACA,cAAc,OAAO;AACrB,cAAc,QAAQ;AACtB;AACA;AACA,cAAc,SAAS;AACvB,cAAc,QAAQ;AACtB,cAAc,QAAQ;AACtB;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,uBAAuB;AAClC,WAAW,SAAS;AACpB,aAAa;AACb;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB,aAAa;AACb;AACA,aAAa,2CAA2C;AACxD;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,uBAAuB;AAClC,WAAW,SAAS;AACpB,aAAa;AACb;AACA,aAAa,6BAA6B;AAC1C;AACA;AACA;AACA,aAAa,yDAAyD,mBAAmB;AACzF,aAAa,uDAAuD,gBAAgB;AACpF,aAAa,uDAAuD,yDAAyD;AAC7H,aAAa,uDAAuD,+BAA+B;AACnG,aAAa,0DAA0D,qDAAqD;AAC5H,aAAa,uDAAuD,oBAAoB;AACxF,aAAa,uDAAuD,gCAAgC;AACpG;AACA,aAAa,0BAA0B;AACvC,aAAa,6BAA6B;AAC1C,aAAa,wBAAwB;AACrC,aAAa,iCAAiC;AAC9C,aAAa,+BAA+B;AAC5C,aAAa,8BAA8B;AAC3C,aAAa,mCAAmC;AAChD;AACA;AACA,cAAc,kCAAkC;AAChD,cAAc,qCAAqC;AACnD,cAAc,qCAAqC;AACnD,cAAc,qCAAqC;AACnD,cAAc,qCAAqC;AACnD,cAAc,qCAAqC;AACnD,cAAc,qCAAqC;AACnD,cAAc,gCAAgC;AAC9C,cAAc,yCAAyC;AACvD,cAAc,uCAAuC;AACrD,cAAc,uCAAuC;AACrD,cAAc,sCAAsC;AACpD,cAAc,2CAA2C;AACzD;AACA,aAAa,wGAAwG;AACrH;AACA;AACA,cAAc,SAAS;AACvB,cAAc,SAAS;AACvB,cAAc,SAAS;AACvB,cAAc,SAAS;AACvB,cAAc,0BAA0B;AACxC,cAAc,gBAAgB;AAC9B,cAAc,6CAA6C;AAC3D,cAAc,YAAY;AAC1B;;AAEyB;AACK;AACiB;AACY;AACD;AACA;AACvB;;AAEnC,cAAc;;AAEd;AACA;AACA;;AAEA;AACA,WAAW,SAAS;AACpB,WAAW,cAAc;AACzB;AACO;AACP,aAAa,kBAAkB;AAC/B;AACA;AACA,aAAa,kCAAkC;AAC/C;;AAEA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,gEAAU;AACnB;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,WAAW,QAAQ;AACnB,WAAW,cAAc;AACzB;AACA;AACA;AACA;AACA,aAAa,oBAAoB;AACjC;AACA;AACA,aAAa,yBAAyB;AACtC;AACA;AACA,aAAa,QAAQ;AACrB;;AAEA;AACA,aAAa,qDAAG;AAChB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAY,uCAAuC;AACnD,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,+DAA+D,2CAAc;;AAE7E,OAAO,wDAA0B;AACjC;AACA,8BAA8B,KAAK;AACnC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAM,gDAAmB;AACzB,MAAM,gDAAmB;AACzB;;AAEA;AACA,WAAW,cAAc;AACzB,aAAa;AACb;AACA;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CA,aAAa,4CAAc;AAC3B,gBAAgB,4CAAc;AAC9B,YAAY,4CAAc;AAC1B,uBAAuB,4CAAc;AACrC,oBAAoB,iDAAmB,EAAE,4CAAc,EAAE,4CAAc;AACvE,cAAc,iDAAmB,EAAE,4CAAc,EAAE,8CAAgB;AACnE,qBAAqB,4CAAc;AACnC,cAAc,8CAAgB;AAC9B;;;;;;;;;;;;;;;;;AC/JsC;;AAEtC;AACA,aAAa,sBAAsB;AACnC,aAAa,qBAAqB;AAClC,aAAa,wBAAwB;AACrC;AACA;AACA,WAAW,SAAS;AACpB,WAAW,QAAQ;AACnB,WAAW,cAAc;AACzB,aAAa;AACb;AACA;AACA,cAAc,eAAe;AAC7B,cAAc,eAAe;AAC7B,cAAc,cAAc;AAC5B,cAAc,SAAS;AACvB;;AAEA;AACA,UAAU;AACV;AACe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,uDAAK;AACX,kCAAkC,cAAc;AAChD,mBAAmB,mBAAmB;AACtC;;AAEA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;;AAEA;AACA,OAAO;AACP;AACA;AACA;;;;;;;;;;;;;;;;ACjEA;;AAEA;AACA,WAAW,QAAQ;AACnB,aAAa;AACb;AACO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,IAAI,IAAqC;AACzC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4BAA4B;;AAE5B;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD;;AAEtD;AACA;AACA;AACA,kDAAkD;;AAElD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,uDAAuD;;AAEvD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB;AACvB,uBAAuB;AACvB,eAAe;AACf,kBAAkB;AAClB,gBAAgB;AAChB,YAAY;AACZ,YAAY;AACZ,cAAc;AACd,gBAAgB;AAChB,kBAAkB;AAClB,gBAAgB;AAChB,mBAAmB;AACnB,wBAAwB;AACxB,yBAAyB;AACzB,yBAAyB;AACzB,iBAAiB;AACjB,oBAAoB;AACpB,kBAAkB;AAClB,cAAc;AACd,cAAc;AACd,gBAAgB;AAChB,kBAAkB;AAClB,oBAAoB;AACpB,kBAAkB;AAClB,0BAA0B;AAC1B,cAAc;AACd,GAAG;AACH;;;;;;;;;;;;ACjOa;;AAEb,IAAI,KAAqC,EAAE;AAAA,EAE1C,CAAC;AACF,EAAE,4JAAyD;AAC3D;;;;;;;;;;;;;;;;;ACNA;AACA,aAAa,sBAAsB;AACnC,aAAa,4CAA4C;AACzD;;AAEqD;;AAErD;AACA,UAAU;AACV,UAAU;AACV;AACe;AACf,aAAa,wCAAwC;AACrD;AACA;AACA,gCAAgC,SAAS;;AAEzC,WAAW,sEAAY;AACvB;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA,uBAAuB,eAAe;AACtC;;;;;;;;;;;;;;;;;AC9BA;AACA,aAAa,sBAAsB;AACnC,aAAa,qBAAqB;AAClC,aAAa,sBAAsB;AACnC,aAAa,sCAAsC;AACnD,aAAa,iDAAiD;AAC9D;AACA,aAAa,8BAA8B;AAC3C;;AAEyC;;AAEzC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,2EAA2E;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iEAAe,YAAY;;AAE3B;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,oBAAoB,0DAAM;AAC1B;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,mBAAmB,0DAAM;AACzB;;;;;;;;;;;;AC9Da;AACb,8FAAuC;;;;;;;;;;;;ACD1B;;AAEb,qBAAqB,mBAAO,CAAC,wFAA2B;;AAExD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACtGa;;AAEb,eAAe,mBAAO,CAAC,0DAAY;AACnC,eAAe,mBAAO,CAAC,0DAAY;;AAEnC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AC7Ca;;AAEb,eAAe,mBAAO,CAAC,0DAAY;AACnC,aAAa,mBAAO,CAAC,sFAAsB;AAC3C,mBAAmB,0FAA8B;;AAEjD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACpBa;;AAEb,eAAe,mBAAO,CAAC,0DAAY;AACnC,YAAY,mBAAO,CAAC,oDAAS;AAC7B,cAAc,mBAAO,CAAC,0DAAY;;AAElC;AACA;AACA;AACA;AACA,sBAAsB,mBAAO,CAAC,8FAA0B;;AAExD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB;AACvB,mBAAmB;AACnB,qBAAqB;AACrB,yBAAyB;AACzB,sBAAsB;;;;;;;;;;;;AC7DT;AACb,eAAe,mBAAO,CAAC,0DAAY;;AAEnC;AACA;AACA;AACA;;AAEA;AACA,oCAAoC;AACpC;AACA;AACA;;AAEA;;;;;;;;;;;;ACda;;AAEb,+EAA+E;;AAE/E;;AAEA;AACA;AACA;AACA,wBAAwB,UAAU;AAClC;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACpBa;;AAEb;AACA;;AAEA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;ACxBa;;AAEb;;;;;;;;;;;;;;;;;ACFA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa;AACb;AACA;AACO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,sBAAsB;AACjC;AACA,aAAa;AACb;AACA;AACO;AACP;AACA;;;;;;;;;;;ACvBA,YAAY,mBAAO,CAAC,wEAAqB;;AAEzC;AACA;AACA;AACA;AACA,gBAAgB;AAChB,kCAAkC;AAClC;AACA,YAAY,aAAa;AACzB,YAAY,aAAa;AACzB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,6CAA6C,SAAS;AACtD;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN,4BAA4B;AAC5B;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,mBAAO,CAAC,cAAI;AACvB,WAAW,mBAAO,CAAC,cAAI;AACvB,aAAa,mBAAO,CAAC,kBAAM;AAC3B,eAAe,mBAAO,CAAC,sBAAQ;AAC/B,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,UAAU;AACrB;AACA;AACA;AACA,0BAA0B,iBAAiB;AAC3C;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA,8BAA8B,iBAAiB;AAC/C;;AAEA;AACA;AACA;AACA,WAAW,2BAA2B;AACtC,WAAW,kBAAkB;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,SAAS;AACT,QAAQ;AACR;AACA;AACA,KAAK;AACL,GAAG;AACH;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,QAAQ;AACrB,YAAY,OAAO;AACnB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,IAAI;;AAEJ;AACA;;AAEA;AACA;AACA;AACA,WAAW,uCAAuC;AAClD,WAAW,eAAe;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;;AAEA;AACA;AACA;AACA,WAAW,SAAS;AACpB,aAAa,gBAAgB;AAC7B,YAAY,OAAO;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,uBAAuB;AAClC,WAAW,cAAc;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL,GAAG;AACH;;AAEA;AACA;AACA;AACA,WAAW,SAAS;AACpB,aAAa,eAAe;AAC5B,YAAY,OAAO;AACnB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,UAAU;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB,WAAW,sBAAsB;AACjC,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR,mEAAmE;AACnE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA,kBAAkB,aAAa;AAC/B;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,mCAAmC;AAC9C,WAAW,WAAW;AACtB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;;AAEA;AACA;AACA,cAAc;AACd;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,OAAO;AACP,MAAM;AACN;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wGAAwG,KAAK;;AAE7G;AACA;AACA;AACA,qEAAqE,KAAK;AAC1E;;AAEA;AACA;AACA,gDAAgD,iBAAiB;AACjE;;AAEA;AACA;AACA,6CAA6C,cAAc;AAC3D;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,6BAA6B,QAAQ,8BAA8B,OAAO,YAAY,aAAa;AACnG;;AAEA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,uBAAuB,QAAQ,8BAA8B,OAAO,YAAY,aAAa;AAC7F;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,OAAO;AACP,KAAK;AACL,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,kBAAkB,QAAQ;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,cAAc,UAAU;AACxB,cAAc,SAAS;AACvB;AACA,cAAc,SAAS;AACvB,cAAc,SAAS;AACvB,cAAc,SAAS;AACvB,cAAc,SAAS;AACvB,cAAc,SAAS;AACvB,cAAc,SAAS;AACvB,cAAc,UAAU;AACxB,cAAc,UAAU;AACxB,cAAc,UAAU;AACxB;;AAEA;AACA,aAAa,QAAQ;AACrB,cAAc,QAAQ;AACtB,cAAc,QAAQ;AACtB,cAAc,cAAc;AAC5B;;AAEA;AACA,aAAa,QAAQ;AACrB,cAAc,QAAQ;AACtB,cAAc,cAAc;AAC5B;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,iBAAiB;AAC5B;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,qBAAqB;AAChC;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,iBAAiB;AAC5B;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,qBAAqB;AAChC;;AAEA;AACA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;AACA,iDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA,CAAC,EAAC;;AAEF,kBAAkB;AAClB,sBAAsB;;AAEtB,mBAAmB;AACnB,uBAAuB;;AAEvB,sBAAsB;AACtB,0BAA0B;;AAE1B,iCAAiC;;;;;;;;;;;;;;;;;ACz0BjC;AACA;;AAEA;AACA,aAAa,mEAAmE;AAChF;AACA;AACA,aAAa,+BAA+B;AAC5C;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB;AACA,cAAc,KAAK;AACnB;AACA;AACA,aAAa,gCAAgC;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,8BAA8B;AAC3C;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACO;AACP,aAAa,mBAAmB;AAChC;AACA,aAAa,UAAU;AACvB,oBAAoB;;AAEpB;;AAEA,aAAa,KAAK;AAClB;AACA;AACA,eAAe,UAAU;AACzB;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,eAAe,0BAA0B;AACzC,eAAe,YAAY;AAC3B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,YAAY;AACvB;AACA,WAAW,UAAU;AACrB;AACA,aAAa;AACb;AACA;AACO;AACP,aAAa,SAAS;AACtB;;AAEA;;AAEA;AACA;AACA,YAAY;AACZ,aAAa,YAAY;AACzB,eAAe;AACf;AACA;AACA;AACA,eAAe,KAAK;AACpB;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN,mCAAmC,OAAO;;AAE1C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;AC7MA;AACA,aAAa,sBAAsB;AACnC,aAAa,iCAAiC;AAC9C,aAAa,4BAA4B;AACzC,aAAa,wBAAwB;AACrC,aAAa,qBAAqB;AAClC,aAAa,qBAAqB;AAClC,aAAa,wBAAwB;AACrC,aAAa,4BAA4B;AACzC,aAAa,0BAA0B;AACvC,aAAa,qBAAqB;AAClC,aAAa,uBAAuB;AACpC,aAAa,0BAA0B;AACvC,aAAa,8BAA8B;AAC3C;AACA;AACA,cAAc,MAAM;AACpB,cAAc,OAAO;AACrB;;AAEyB;AACO;AACL;AACU;AACR;AACF;;AAE3B;AACO;;AAEP,cAAc;;AAEd;AACA;AACA,aAAa;AACb;AACA;AACA,uBAAuB,8CAAM;AAC7B,aAAa,wBAAwB;AACrC;AACA,aAAa,yBAAyB;AACtC;AACA,aAAa,mBAAmB;AAChC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,aAAa,WAAW;AACxB;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB,mCAAM,SAAS;;AAEpC;AACA;;AAEA;AACA,aAAa,gCAAgC;AAC7C,aAAa,SAAS;AACtB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,aAAa,qBAAqB;AAClC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,kBAAkB;AACnC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,aAAa,0BAA0B;AACvC,aAAa,YAAY;AACzB,eAAe;AACf;AACA;AACA,eAAe,mCAAmC;AAClD;;AAEA;;AAEA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA,QAAQ;AACR;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA,iEAAiE;AACjE;;AAEA;;AAEA;AACA,eAAe,mCAAmC;AAClD,iBAAiB;AACjB;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA,eAAe,QAAQ;AACvB,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA,+CAA+C;AAC/C;AACA;;AAEA;AACA,eAAe,8BAA8B;AAC7C,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA,eAAe,QAAQ;AACvB,eAAe,YAAY;AAC3B,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB,0CAA0C;AAC3D;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,YAAY,wDAAU,cAAc,wDAAU;AAC9C,kBAAkB,mCAAM;AACxB;;AAEA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA,aAAa,oBAAoB;AACjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,aAAa,wBAAwB;AACrC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,aAAa,MAAM;AACnB,aAAa,6BAA6B;AAC1C,aAAa,aAAa;AAC1B,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,eAAe,6BAA6B;AAC5C,eAAe,wBAAwB;AACvC,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,YAAY;AAC7B,iBAAiB,MAAM;AACvB,iBAAiB,OAAO;AACxB,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa,sBAAsB;AACnC;AACA,eAAe,gBAAgB;AAC/B;AACA,eAAe,mBAAmB;AAClC;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA,eAAe,YAAY;AAC3B,eAAe,MAAM;AACrB,iBAAiB;AACjB;AACA;AACA,MAAM,2CAAI;AACV;AACA;AACA;AACA;;AAEA;AACA,aAAa,iBAAiB;AAC9B,aAAa,iBAAiB;AAC9B,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,eAAe,8BAA8B;AAC7C,eAAe,wCAAwC;AACvD,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV,qBAAqB,SAAS;AAC9B;;AAEA;AACA;AACA,YAAY;AACZ;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA,OAAO;;AAEP;AACA,iBAAiB,sBAAsB;AACvC,iBAAiB,iBAAiB;AAClC,mBAAmB;AACnB;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa,0BAA0B;AACvC;AACA,eAAe,mBAAmB;AAClC;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA,eAAe,sBAAsB;AACrC,iBAAiB;AACjB;AACA;AACA;AACA,MAAM,2CAAI;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,yBAAyB;AACpC,aAAa;AACb;AACA;AACA,aAAa,QAAQ;AACrB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,SAAS;AACpB,aAAa;AACb;AACA;AACA;AACA;AACA,OAAO,wDAAU;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,iBAAiB;AAC5B,aAAa;AACb;AACA;AACA,8CAA8C,wCAAK;AACnD;;AAEA;AACA,WAAW,iBAAiB;AAC5B,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,SAAS;AACpB,aAAa;AACb;AACA;AACA,sCAAsC,sCAAQ;AAC9C;;;;;;;;;;;;;;;;ACtlBA;AACA,aAAa,sBAAsB;AACnC;;AAEA;AACA,aAAa,sBAAsB;AACnC;AACA;AACA,aAAa,yBAAyB;AACtC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA,YAAY;AACZ,wCAAwC,QAAQ;AAChD,mEAAmE,SAAS;AAC5E,uDAAuD,uBAAuB;AAC9E,kFAAkF,wBAAwB;AAC1G,4EAA4E,qBAAqB;AACjG,uGAAuG,sBAAsB;AAC7H;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,4CAA4C;AAC3D,eAAe,oCAAoC;AACnD,iBAAiB;AACjB;AACA;AACA,iBAAiB,MAAM;AACvB,oBAAoB;;AAEpB;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;ACjEA;AACA;AACA,cAAc,2BAA2B;AACzC,cAAc,2BAA2B;AACzC,cAAc,2BAA2B;AACzC;AACA;AACA,cAAc,8BAA8B;AAC5C,cAAc,8BAA8B;AAC5C;AACA;AACA,cAAc,iCAAiC;AAC/C;;AAEA;AACA;AACA;AACA,WAAW,6BAA6B;AACxC;AACA,aAAa;AACb;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACjCA;AACA,aAAa,sBAAsB;AACnC,aAAa,wBAAwB;AACrC;;AAEA;AACA,aAAa,yBAAyB;AACtC,aAAa,yGAAyG;AACtH;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA,WAAW,MAAM;AACjB;AACA,WAAW,2BAA2B;AACtC;AACA,WAAW,2BAA2B;AACtC;AACA,aAAa;AACb;AACA;;AAEA;AACA,cAAc,MAAM;AACpB;AACA,aAAa,gIAAgI;AAC7I;AACA;;AAEA;AACA;AACA;AACA,cAAc,MAAM;AACpB;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA,WAAW,2BAA2B;AACtC;AACA,WAAW,2BAA2B;AACtC;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA,WAAW,2BAA2B;AACtC;AACA,WAAW,2BAA2B;AACtC;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA,cAAc,MAAM;AACpB;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA,WAAW,2BAA2B;AACtC;AACA,WAAW,2BAA2B;AACtC;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB,eAAe,MAAM;AACrB,eAAe,2BAA2B;AAC1C,eAAe,2BAA2B;AAC1C,eAAe,SAAS;AACxB,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,MAAM;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,WAAW,8CAA8C;AACzD,aAAa;AACb;AACA;AACA,aAAa,uBAAuB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,YAAY;AACZ,aAAa,gBAAgB;AAC7B,eAAe;AACf;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;;AAEA;AACA,aAAa,MAAM;AACnB,eAAe;AACf;AACA;AACA,eAAe,QAAQ;AACvB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;;AAEA;AACA,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,sBAAsB;AACjC,aAAa;AACb;AACA;AACA;;AAEA;AACA,YAAY;AACZ,aAAa,SAAS;AACtB,aAAa,gBAAgB;AAC7B,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;AC5SA;AACA,aAAa,0BAA0B;AACvC,aAAa,sBAAsB;AACnC,aAAa,uBAAuB;AACpC;;AAEA;AACA;AACA,cAAc,QAAQ;AACtB,cAAc,iCAAiC;AAC/C;AACA;AACA,cAAc,8BAA8B;AAC5C,cAAc,8BAA8B;AAC5C;AACA;AACA,cAAc,2BAA2B;AACzC,cAAc,2BAA2B;AACzC,cAAc,2BAA2B;AACzC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;;AAEP;AACA;AACA;AACA,WAAW,oCAAoC;AAC/C;AACA,aAAa;AACb;AACA;AACO;AACP,UAAU;AACV;;AAEA;AACA;AACA;AACA,WAAW,iBAAiB;AAC5B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,oCAAoC;AACjD,eAAe;AACf;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACnFA;AACA,aAAa,sBAAsB;AACnC,aAAa,uBAAuB;AACpC,aAAa,0BAA0B;AACvC;;AAEA;AACA;AACA,cAAc,QAAQ;AACtB,cAAc,iCAAiC;AAC/C;AACA;AACA,cAAc,8BAA8B;AAC5C,cAAc,8BAA8B;AAC5C;AACA;AACA,cAAc,2BAA2B;AACzC,cAAc,2BAA2B;AACzC,cAAc,2BAA2B;AACzC;;AAEA;AACA;AACA;AACA;AACA,WAAW,kFAAkF;AAC7F;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,WAAW,sCAAsC;AACjD,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA,WAAW,4CAA4C;AACvD,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA,WAAW,2BAA2B;AACtC,aAAa;AACb;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACnFA;AACA,WAAW,QAAQ;AACnB,aAAa;AACb;AACO;AACP;AACA;;;;;;;;;;;;;;;;;;;;;ACNA;AACA,aAAa,sBAAsB;AACnC,aAAa,wBAAwB;AACrC,aAAa,8BAA8B;AAC3C;;AAEA;AACA,aAAa,kBAAkB;AAC/B;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,oEAAoE;AACjF;AACA;AACA,aAAa,wDAAwD;AACrE;AACA;;AAEA;AACA,cAAc,MAAM;AACpB;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA,WAAW,iBAAiB;AAC5B;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAc,MAAM;AACpB;AACA,cAAc,MAAM;AACpB;AACA,aAAa,uLAAuL;AACpM;AACA;AACA;AACA;;AAEqC;AACL;;AAEhC;AACA;AACA;AACO;;AAEP;AACA;AACA;AACO;;AAEP;AACA;AACA;AACO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,MAAM;AACrB,eAAe,MAAM;AACrB,eAAe,eAAe;AAC9B,eAAe,4BAA4B;AAC3C,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,sDAAO;AACxB;;AAEA;;AAEA;AACA,iBAAiB,MAAM;AACvB,iBAAiB,oBAAoB;AACrC,iBAAiB,eAAe;AAChC;AACA;AACA,mBAAmB,yBAAyB;AAC5C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yBAAyB,gDAAK;AAC9B,WAAW;AACX;;AAEA;;AAEA;AACA,qBAAqB,aAAa;AAClC;AACA,qBAAqB,aAAa;AAClC;AACA,qBAAqB,QAAQ;AAC7B;AACA,qBAAqB,eAAe;AACpC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,eAAe;AAC1B;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;AChPA;AACA,aAAa,sBAAsB;AACnC,aAAa,wBAAwB;AACrC,aAAa,8BAA8B;AAC3C,aAAa,kDAAkD;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,MAAM;AACpB;AACA,cAAc,MAAM;AACpB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;;AAEA;AACA,cAAc,MAAM;AACpB;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA,WAAW,8CAA8C;AACzD;AACA,WAAW,iDAAiD;AAC5D;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc,MAAM;AACpB;AACA,cAAc,QAAQ;AACtB;AACA,aAAa,gDAAgD;AAC7D;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc,MAAM;AACpB;AACA,cAAc,MAAM;AACpB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,MAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc,MAAM;AACpB;AACA,cAAc,MAAM;AACpB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,MAAM;AACN;;AAEqD;;AAErD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,MAAM;AACrB,eAAe,MAAM;AACrB,eAAe,SAAS;AACxB,eAAe,4BAA4B;AAC3C,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAM,sEAAY;;AAElB;AACA,iBAAiB,MAAM;AACvB,iBAAiB,eAAe;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAE6D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrL7B;AACU;;AAE1C;AACA;AACA;AACA;AACA,SAAS,SAAS;AAClB,sDAAsD,EAAE,KAAK;AAC7D;;AAEO;AACP,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,uBAAuB,8DAA8D;AACrF;;AAEO;AACP;AACA;;AAEO;AACP,qCAAqC,6CAAO;AAC5C;;AAEO;AACP,QAAQ,8CAAM,+BAA+B,6CAAO;AACpD;;AAEO;AACP;AACA;;AAEO;AACP;AACA,2DAA2D,IAAI,WAAW,IAAI;AAC9E;;AAEO;AACP;AACA,gGAAgG,KAAK;AACrG;;AAEO;AACP;AACA,oFAAoF,IAAI;AACxF,GAAG;AACH,+EAA+E,YAAY;AAC3F;AACA;;AAEO;AACP,kBAAkB;AAClB,2CAA2C,2CAAK;AAChD;;AAEA,2BAA2B,+CAAK;AACzB;AACP,kBAAkB;AAClB;AACA;;AAEO;AACP;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,IAAI;AACJ,kHAAkH,YAAY;AAC9H;AACA;AACA;;AAEA;;AAEO;AACP;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS,8CAAM;AACf;;AAEA;AACA;AACA,+DAA+D,IAAI,eAAe,IAAI;AACtF;;AAEA;AACA;AACA,2GAA2G,KAAK;AAChH;;AAEA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA,6FAA6F,IAAI;AACjG,GAAG;AACH,wFAAwF,YAAY;AACpG;AACA;;AAEA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,IAAI;AACJ,2HAA2H,YAAY;AACvI,IAAI;AACJ;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;AC/J0B;AACG;;AAE7B;AACA,OAAO,6CAAK;AACZ,OAAO,6CAAK;AACZ,OAAO,6CAAK;AACZ;;AAEA,cAAc,6CAAK;AACnB,UAAU,6CAAK,iBAAiB,6CAAK,cAAc,6CAAK;AACxD;AACA,yBAAyB,6CAAK;AAC9B;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,QAAQ,gBAAgB;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACO;AACP,WAAW,4CAAe;AAC1B;AACA;;AAEA,QAAQ,gBAAgB;AACxB;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA,YAAY,sBAAsB;AAClC;AACA;AACA,aAAa,eAAe;AAC5B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEO;AACP;AACA,WAAW,2CAAc;AACzB;;AAEA,QAAQ,gBAAgB;AACxB;AACA;AACA;;AAEA;AACA;;AAEO;AACP,WAAW,2CAAc;AACzB;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA,GAAG;AACH,iBAAiB,gBAAgB;AACjC;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,6CAAK;AACtB;;AAEO;AACP;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,8BAA8B,6CAAK,SAAS,MAAM;AAClD,+BAA+B,6CAAK,SAAS,MAAM;;AAEnD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEO;AACP;AACA;;AAEA;AACA,YAAY,gBAAgB;AAC5B;AACA;AACA,uCAAuC;AACvC;AACA,GAAG;AACH;AACA;;AAEA,SAAS,iBAAiB;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;;AAEA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEO;AACP;AACA;;AAEO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;AC1NA;AACA,aAAa,sBAAsB;AACnC,aAAa,0BAA0B;AACvC,aAAa,uBAAuB;AACpC,aAAa,UAAU,gDAAgD;AACvE;;AAE+D;;AAE/D;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA,aAAa,+BAA+B;AAC5C;AACA;AACA;AACA,aAAa,uDAAuD;AACpE;AACA,aAAa,2BAA2B;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,gCAAgC;AAC/C;AACA,eAAe,UAAU;AACzB;AACA;AACA,cAAc,yBAAyB;AACvC;AACA,YAAY;AACZ;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,gFAAiB;;AAEjC;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;AChOA;AACA,aAAa,sBAAsB;AACnC,aAAa,0BAA0B;AACvC,aAAa,uBAAuB;AACpC,aAAa,kCAAkC;AAC/C,aAAa,4BAA4B;AACzC,aAAa,6BAA6B;AAC1C;;AAEA;AACA,aAAa,2BAA2B,gDAAgD;AACxF;AACA,aAAa,kHAAkH;AAC/H;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,+BAA+B;AAC5C;AACA;AACA;AACA;AACA,cAAc,0BAA0B;AACxC;AACA,cAAc,2BAA2B;AACzC;AACA,cAAc,kCAAkC;AAChD;AACA,cAAc,iCAAiC;AAC/C;AACA,cAAc,2BAA2B;AACzC;AACA,cAAc,2BAA2B;AACzC;AACA,cAAc,2BAA2B;AACzC;AACA,cAAc,2BAA2B;AACzC;AACA,cAAc,yBAAyB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,QAAQ;AACtB;AACA,cAAc,eAAe;AAC7B;AACA,cAAc,eAAe;AAC7B;AACA,cAAc,oBAAoB;AAClC;AACA,cAAc,2BAA2B;AACzC;AACA,cAAc,QAAQ;AACtB;AACA,cAAc,QAAQ;AACtB;AACA;AACA,cAAc,wBAAwB,oBAAoB;AAC1D;AACA;AACA;AACA;AACA,aAAa,yBAAyB;AACtC;AACA;;AAEA;AACA,cAAc,kBAAkB;AAChC;AACA;AACA;AACA,WAAW,cAAc;AACzB;AACA,WAAW,UAAU;AACrB;AACA,aAAa;AACb;AACA;;AAEkC;AACQ;AACT;AACA;AACW;;AAE5C;AACA;AACA,KAAK,0BAA0B;AAC/B;AACA;AACA,UAAU;AACV;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,kCAAkC,eAAe;AACjD,mBAAmB,cAAc;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,+BAA+B;AAC5C;AACA;AACA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;;AAEA;AACA;AACA,MAAM;AACN,iBAAiB;AACjB,MAAM,SAAS,iDAAK;AACpB,iBAAiB;AACjB,MAAM;AACN;AACA;;AAEA;AACA,sDAAsD;AACtD;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA,eAAe,6CAAI;;AAEnB;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,eAAe,QAAQ;AACvB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,cAAc;AAC3B;AACA;AACA,QAAQ,iDAAK;AACb,aAAa,qDAAS;AACtB;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,2CAA2C,6CAAI;AAC/C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,6CAAI;AACpB;;AAEA;AACA;AACA;AACA;AACA,2CAA2C,6CAAI;AAC/C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,6CAAI;AACpB;;AAEA;AACA;AACA;AACA;AACA,2CAA2C,6CAAI;AAC/C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,gBAAgB,6CAAI;AACpB;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAQ,6CAAI;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,6CAAI;AACpB;;AAEA;AACA;AACA;AACA,aAAa,mCAAmC;AAChD;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,+BAA+B;AAC5C;AACA,aAAa,uDAAuD;AACpE;AACA,aAAa,2BAA2B;AACxC;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,wBAAwB,uDAAY;;AAEpC;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,+BAA+B;AAC5C;AACA,aAAa,uDAAuD;AACpE;AACA,aAAa,2BAA2B;AACxC;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,+BAA+B;AAC5C;AACA,aAAa,uDAAuD;AACpE;AACA,aAAa,2BAA2B;AACxC;AACA;AACA,eAAe;AACf;AACA,cAAc;AACd;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,2BAA2B;AACtC;AACA,WAAW,QAAQ;AACnB;AACA,aAAa;AACb;AACA;AACA;AACA,4BAA4B,6CAAI;AAChC;AACA,4DAA4D,6CAAI;AAChE;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,oBAAoB;AAC/B;AACA,WAAW,QAAQ;AACnB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,oBAAoB;AAC/B;AACA,WAAW,QAAQ;AACnB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS,sCAAU;AACnB;;;;;;;;;;;;;;;;ACvgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO,cAAc;;AAErB;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,WAAW,oBAAoB;AAC/B;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,qBAAqB;AAClC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,aAAa,qBAAqB;AAClC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,qBAAqB;AAClC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,eAAe;AAC1B;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa,oBAAoB;AACjC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,WAAW,SAAS;AACpB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,oBAAoB;AACjC;AACA,aAAa,QAAQ;AACrB;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;;;;ACraA;AACA;AACA;AACO,cAAc;;AAErB;AACA;AACA;;;;;;;;;;;;;;;;;;ACPA;;AAEwC;;AAExC;;AAEA;AACA,WAAW,cAAc;AACzB;AACA,aAAa;AACb;AACA;AACO;AACP;AACA;AACA,IAAI,UAAU,wDAAK;AACnB,eAAe,uBAAuB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,uBAAuB;AACtC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,eAAe,uBAAuB;AACtC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,uBAAuB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEwC;;;;;;;;;;;;;;;;AC7ExC;AACA;AACA,cAAc,QAAQ;AACtB,cAAc,QAAQ;AACtB,cAAc,QAAQ;AACtB,cAAc,QAAQ;AACtB,cAAc,QAAQ;AACtB,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","sources":["webpack://collections/./node_modules/bail/index.js","webpack://collections/./node_modules/bsdiff-node/index.js","webpack://collections/./node_modules/comma-separated-tokens/index.js","webpack://collections/./node_modules/crc-32/crc32.js","webpack://collections/./node_modules/debug/src/browser.js","webpack://collections/./node_modules/debug/src/common.js","webpack://collections/./node_modules/decode-named-character-reference/index.dom.js","webpack://collections/./node_modules/dequal/dist/index.mjs","webpack://collections/./node_modules/diff/lib/index.mjs","webpack://collections/./node_modules/extend/index.js","webpack://collections/./node_modules/hast-util-whitespace/index.js","webpack://collections/./node_modules/inline-style-parser/index.js","webpack://collections/./node_modules/is-buffer/index.js","webpack://collections/./node_modules/is-plain-obj/index.js","webpack://collections/./node_modules/kleur/index.mjs","webpack://collections/./node_modules/mdast-util-definitions/lib/index.js","webpack://collections/./node_modules/mdast-util-from-markdown/dev/lib/index.js","webpack://collections/./node_modules/mdast-util-to-hast/lib/footer.js","webpack://collections/./node_modules/mdast-util-to-hast/lib/handlers/blockquote.js","webpack://collections/./node_modules/mdast-util-to-hast/lib/handlers/break.js","webpack://collections/./node_modules/mdast-util-to-hast/lib/handlers/code.js","webpack://collections/./node_modules/mdast-util-to-hast/lib/handlers/delete.js","webpack://collections/./node_modules/mdast-util-to-hast/lib/handlers/emphasis.js","webpack://collections/./node_modules/mdast-util-to-hast/lib/handlers/footnote-reference.js","webpack://collections/./node_modules/mdast-util-to-hast/lib/handlers/footnote.js","webpack://collections/./node_modules/mdast-util-to-hast/lib/handlers/heading.js","webpack://collections/./node_modules/mdast-util-to-hast/lib/handlers/html.js","webpack://collections/./node_modules/mdast-util-to-hast/lib/handlers/image-reference.js","webpack://collections/./node_modules/mdast-util-to-hast/lib/handlers/image.js","webpack://collections/./node_modules/mdast-util-to-hast/lib/handlers/index.js","webpack://collections/./node_modules/mdast-util-to-hast/lib/handlers/inline-code.js","webpack://collections/./node_modules/mdast-util-to-hast/lib/handlers/link-reference.js","webpack://collections/./node_modules/mdast-util-to-hast/lib/handlers/link.js","webpack://collections/./node_modules/mdast-util-to-hast/lib/handlers/list-item.js","webpack://collections/./node_modules/mdast-util-to-hast/lib/handlers/list.js","webpack://collections/./node_modules/mdast-util-to-hast/lib/handlers/paragraph.js","webpack://collections/./node_modules/mdast-util-to-hast/lib/handlers/root.js","webpack://collections/./node_modules/mdast-util-to-hast/lib/handlers/strong.js","webpack://collections/./node_modules/mdast-util-to-hast/lib/handlers/table.js","webpack://collections/./node_modules/mdast-util-to-hast/lib/handlers/text.js","webpack://collections/./node_modules/mdast-util-to-hast/lib/handlers/thematic-break.js","webpack://collections/./node_modules/mdast-util-to-hast/lib/index.js","webpack://collections/./node_modules/mdast-util-to-hast/lib/revert.js","webpack://collections/./node_modules/mdast-util-to-hast/lib/traverse.js","webpack://collections/./node_modules/mdast-util-to-hast/lib/wrap.js","webpack://collections/./node_modules/mdast-util-to-string/lib/index.js","webpack://collections/./node_modules/mdurl/encode.js","webpack://collections/./node_modules/memoize-one/dist/memoize-one.esm.js","webpack://collections/./node_modules/micromark-core-commonmark/dev/lib/attention.js","webpack://collections/./node_modules/micromark-core-commonmark/dev/lib/autolink.js","webpack://collections/./node_modules/micromark-core-commonmark/dev/lib/blank-line.js","webpack://collections/./node_modules/micromark-core-commonmark/dev/lib/block-quote.js","webpack://collections/./node_modules/micromark-core-commonmark/dev/lib/character-escape.js","webpack://collections/./node_modules/micromark-core-commonmark/dev/lib/character-reference.js","webpack://collections/./node_modules/micromark-core-commonmark/dev/lib/code-fenced.js","webpack://collections/./node_modules/micromark-core-commonmark/dev/lib/code-indented.js","webpack://collections/./node_modules/micromark-core-commonmark/dev/lib/code-text.js","webpack://collections/./node_modules/micromark-core-commonmark/dev/lib/content.js","webpack://collections/./node_modules/micromark-core-commonmark/dev/lib/definition.js","webpack://collections/./node_modules/micromark-core-commonmark/dev/lib/hard-break-escape.js","webpack://collections/./node_modules/micromark-core-commonmark/dev/lib/heading-atx.js","webpack://collections/./node_modules/micromark-core-commonmark/dev/lib/html-flow.js","webpack://collections/./node_modules/micromark-core-commonmark/dev/lib/html-text.js","webpack://collections/./node_modules/micromark-core-commonmark/dev/lib/label-end.js","webpack://collections/./node_modules/micromark-core-commonmark/dev/lib/label-start-image.js","webpack://collections/./node_modules/micromark-core-commonmark/dev/lib/label-start-link.js","webpack://collections/./node_modules/micromark-core-commonmark/dev/lib/line-ending.js","webpack://collections/./node_modules/micromark-core-commonmark/dev/lib/list.js","webpack://collections/./node_modules/micromark-core-commonmark/dev/lib/setext-underline.js","webpack://collections/./node_modules/micromark-core-commonmark/dev/lib/thematic-break.js","webpack://collections/./node_modules/micromark-factory-destination/dev/index.js","webpack://collections/./node_modules/micromark-factory-label/dev/index.js","webpack://collections/./node_modules/micromark-factory-space/dev/index.js","webpack://collections/./node_modules/micromark-factory-title/dev/index.js","webpack://collections/./node_modules/micromark-factory-whitespace/dev/index.js","webpack://collections/./node_modules/micromark-util-character/dev/index.js","webpack://collections/./node_modules/micromark-util-character/dev/lib/unicode-punctuation-regex.js","webpack://collections/./node_modules/micromark-util-chunked/dev/index.js","webpack://collections/./node_modules/micromark-util-classify-character/dev/index.js","webpack://collections/./node_modules/micromark-util-combine-extensions/index.js","webpack://collections/./node_modules/micromark-util-decode-numeric-character-reference/dev/index.js","webpack://collections/./node_modules/micromark-util-decode-string/dev/index.js","webpack://collections/./node_modules/micromark-util-html-tag-name/index.js","webpack://collections/./node_modules/micromark-util-normalize-identifier/dev/index.js","webpack://collections/./node_modules/micromark-util-resolve-all/index.js","webpack://collections/./node_modules/micromark-util-subtokenize/dev/index.js","webpack://collections/./node_modules/micromark-util-symbol/codes.js","webpack://collections/./node_modules/micromark-util-symbol/constants.js","webpack://collections/./node_modules/micromark-util-symbol/types.js","webpack://collections/./node_modules/micromark-util-symbol/values.js","webpack://collections/./node_modules/micromark/dev/lib/constructs.js","webpack://collections/./node_modules/micromark/dev/lib/create-tokenizer.js","webpack://collections/./node_modules/micromark/dev/lib/initialize/content.js","webpack://collections/./node_modules/micromark/dev/lib/initialize/document.js","webpack://collections/./node_modules/micromark/dev/lib/initialize/flow.js","webpack://collections/./node_modules/micromark/dev/lib/initialize/text.js","webpack://collections/./node_modules/micromark/dev/lib/parse.js","webpack://collections/./node_modules/micromark/dev/lib/postprocess.js","webpack://collections/./node_modules/micromark/dev/lib/preprocess.js","webpack://collections/./node_modules/ms/index.js","webpack://collections/./node_modules/nanoid/index.browser.js","webpack://collections/./node_modules/nanoid/url-alphabet/index.js","webpack://collections/./node_modules/object-assign/index.js","webpack://collections/./node_modules/prop-types/checkPropTypes.js","webpack://collections/./node_modules/prop-types/factoryWithTypeCheckers.js","webpack://collections/./node_modules/prop-types/index.js","webpack://collections/./node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack://collections/./node_modules/prop-types/lib/has.js","webpack://collections/./node_modules/property-information/index.js","webpack://collections/./node_modules/property-information/lib/aria.js","webpack://collections/./node_modules/property-information/lib/find.js","webpack://collections/./node_modules/property-information/lib/hast-to-react.js","webpack://collections/./node_modules/property-information/lib/html.js","webpack://collections/./node_modules/property-information/lib/normalize.js","webpack://collections/./node_modules/property-information/lib/svg.js","webpack://collections/./node_modules/property-information/lib/util/case-insensitive-transform.js","webpack://collections/./node_modules/property-information/lib/util/case-sensitive-transform.js","webpack://collections/./node_modules/property-information/lib/util/create.js","webpack://collections/./node_modules/property-information/lib/util/defined-info.js","webpack://collections/./node_modules/property-information/lib/util/info.js","webpack://collections/./node_modules/property-information/lib/util/merge.js","webpack://collections/./node_modules/property-information/lib/util/schema.js","webpack://collections/./node_modules/property-information/lib/util/types.js","webpack://collections/./node_modules/property-information/lib/xlink.js","webpack://collections/./node_modules/property-information/lib/xml.js","webpack://collections/./node_modules/property-information/lib/xmlns.js","webpack://collections/./node_modules/react-is/cjs/react-is.development.js","webpack://collections/./node_modules/react-is/index.js","webpack://collections/./node_modules/react-markdown/index.js","webpack://collections/./node_modules/react-markdown/lib/ast-to-react.js","webpack://collections/./node_modules/react-markdown/lib/react-markdown.js","webpack://collections/./node_modules/react-markdown/lib/rehype-filter.js","webpack://collections/./node_modules/react-markdown/lib/uri-transformer.js","webpack://collections/./node_modules/react-markdown/node_modules/react-is/cjs/react-is.development.js","webpack://collections/./node_modules/react-markdown/node_modules/react-is/index.js","webpack://collections/./node_modules/remark-parse/lib/index.js","webpack://collections/./node_modules/remark-rehype/index.js","webpack://collections/./node_modules/shortid/index.js","webpack://collections/./node_modules/shortid/lib/alphabet.js","webpack://collections/./node_modules/shortid/lib/build.js","webpack://collections/./node_modules/shortid/lib/generate.js","webpack://collections/./node_modules/shortid/lib/index.js","webpack://collections/./node_modules/shortid/lib/is-valid.js","webpack://collections/./node_modules/shortid/lib/random/random-byte-browser.js","webpack://collections/./node_modules/shortid/lib/random/random-from-seed.js","webpack://collections/./node_modules/shortid/lib/util/cluster-worker-id-browser.js","webpack://collections/./node_modules/space-separated-tokens/index.js","webpack://collections/./node_modules/style-to-object/index.js","webpack://collections/./node_modules/tmp/lib/tmp.js","webpack://collections/./node_modules/trough/lib/index.js","webpack://collections/./node_modules/unified/lib/index.js","webpack://collections/./node_modules/unist-builder/lib/index.js","webpack://collections/./node_modules/unist-util-generated/lib/index.js","webpack://collections/./node_modules/unist-util-is/lib/index.js","webpack://collections/./node_modules/unist-util-position/lib/index.js","webpack://collections/./node_modules/unist-util-stringify-position/lib/index.js","webpack://collections/./node_modules/unist-util-visit-parents/lib/color.browser.js","webpack://collections/./node_modules/unist-util-visit-parents/lib/index.js","webpack://collections/./node_modules/unist-util-visit/lib/index.js","webpack://collections/./node_modules/uvu/assert/index.mjs","webpack://collections/./node_modules/uvu/diff/index.mjs","webpack://collections/./node_modules/vfile-message/lib/index.js","webpack://collections/./node_modules/vfile/lib/index.js","webpack://collections/./node_modules/vfile/lib/minpath.browser.js","webpack://collections/./node_modules/vfile/lib/minproc.browser.js","webpack://collections/./node_modules/vfile/lib/minurl.browser.js","webpack://collections/./node_modules/vfile/lib/minurl.shared.js","webpack://collections/./src/actions/persistent.ts","webpack://collections/./src/actions/session.ts","webpack://collections/./src/actions/settings.ts","webpack://collections/./src/collectionCreate.ts","webpack://collections/./src/collectionExport.ts","webpack://collections/./src/collectionInstall.ts","webpack://collections/./src/constants.ts","webpack://collections/./src/eventHandlers.ts","webpack://collections/./src/initweaks.ts","webpack://collections/./src/reducers/persistent.ts","webpack://collections/./src/reducers/session.ts","webpack://collections/./src/reducers/settings.ts","webpack://collections/./src/tools.ts","webpack://collections/./src/util/InfoCache.ts","webpack://collections/./src/util/InstallDriver.ts","webpack://collections/./src/util/binaryPatching.ts","webpack://collections/./src/util/checksumMatcher.ts","webpack://collections/./src/util/collectionConfig/index.ts","webpack://collections/./src/util/defaults.ts","webpack://collections/./src/util/errors.ts","webpack://collections/./src/util/extension.ts","webpack://collections/./src/util/findModByRef.ts","webpack://collections/./src/util/gameSupport/gamebryo.tsx","webpack://collections/./src/util/gameSupport/index.ts","webpack://collections/./src/util/importCollection.ts","webpack://collections/./src/util/transformCollection.ts","webpack://collections/./src/util/util.ts","webpack://collections/./src/validationCode/ICollection.validate.js","webpack://collections/./src/validationCode/dummy.js","webpack://collections/./src/validationCode/validation.ts","webpack://collections/./src/views/AddModsDialog.tsx","webpack://collections/./src/views/CollectionList/StartPage.tsx","webpack://collections/./src/views/CollectionList/index.tsx","webpack://collections/./src/views/CollectionModsPageAttributeRenderer.tsx","webpack://collections/./src/views/CollectionPageEdit/FileOverrides.tsx","webpack://collections/./src/views/CollectionPageEdit/InstallModeRenderer.tsx","webpack://collections/./src/views/CollectionPageEdit/Instructions.tsx","webpack://collections/./src/views/CollectionPageEdit/ModRules.tsx","webpack://collections/./src/views/CollectionPageEdit/ModsEditPage.tsx","webpack://collections/./src/views/CollectionPageEdit/index.tsx","webpack://collections/./src/views/CollectionPageView/CollectionBanner.tsx","webpack://collections/./src/views/CollectionPageView/CollectionInstructions.tsx","webpack://collections/./src/views/CollectionPageView/CollectionItemStatus.tsx","webpack://collections/./src/views/CollectionPageView/CollectionModDetails.tsx","webpack://collections/./src/views/CollectionPageView/CollectionOverview.tsx","webpack://collections/./src/views/CollectionPageView/CollectionOverviewSelection.tsx","webpack://collections/./src/views/CollectionPageView/CollectionProgress.tsx","webpack://collections/./src/views/CollectionPageView/HealthDownvoteDialog.tsx","webpack://collections/./src/views/CollectionPageView/HealthIndicator.tsx","webpack://collections/./src/views/CollectionPageView/SlideshowControls.tsx","webpack://collections/./src/views/CollectionPageView/Timer.tsx","webpack://collections/./src/views/CollectionPageView/index.tsx","webpack://collections/./src/views/CollectionReleaseStatus.tsx","webpack://collections/./src/views/CollectionTile/NewRevisionMarker.tsx","webpack://collections/./src/views/CollectionTile/RemoteTile.tsx","webpack://collections/./src/views/CollectionTile/SuccessRating.tsx","webpack://collections/./src/views/CollectionTile/index.tsx","webpack://collections/./src/views/IniTweaks.tsx","webpack://collections/./src/views/InstallDialog/InstallChangelogDialog.tsx","webpack://collections/./src/views/InstallDialog/InstallFinishedDialog.tsx","webpack://collections/./src/views/InstallDialog/InstallStartDialog.tsx","webpack://collections/./src/views/InstallDialog/YouCuratedThisTag.tsx","webpack://collections/./src/views/InstallDialog/index.tsx","webpack://collections/./src/views/Tools.tsx","webpack://collections/external commonjs2 \"bluebird\"","webpack://collections/external node-commonjs \"crypto\"","webpack://collections/external commonjs2 \"fs\"","webpack://collections/external commonjs2 \"lodash\"","webpack://collections/external commonjs2 \"node-7z\"","webpack://collections/external node-commonjs \"os\"","webpack://collections/external commonjs2 \"path\"","webpack://collections/external commonjs2 \"react\"","webpack://collections/external commonjs2 \"react-bootstrap\"","webpack://collections/external commonjs2 \"react-dom\"","webpack://collections/external commonjs2 \"react-i18next\"","webpack://collections/external commonjs2 \"react-redux\"","webpack://collections/external commonjs2 \"react-select\"","webpack://collections/external commonjs2 \"redux-act\"","webpack://collections/external commonjs2 \"semver\"","webpack://collections/external commonjs2 \"turbowalk\"","webpack://collections/external node-commonjs \"url\"","webpack://collections/external commonjs2 \"util\"","webpack://collections/external commonjs2 \"vortex-api\"","webpack://collections/external commonjs2 \"vortexmt\"","webpack://collections/webpack/bootstrap","webpack://collections/webpack/runtime/define property getters","webpack://collections/webpack/runtime/hasOwnProperty shorthand","webpack://collections/webpack/runtime/make namespace object","webpack://collections/./src/index.ts"],"sourcesContent":["/**\n * Throw a given error.\n *\n * @param {Error|null|undefined} [error]\n *   Maybe error.\n * @returns {asserts error is null|undefined}\n */\nexport function bail(error) {\n  if (error) {\n    throw error\n  }\n}\n","\"use strict\";\nconst fs = require(\"fs\");\nconst { promisify } = require(\"util\");\nconst readFile = promisify(fs.readFile);\nconst writeFile = promisify(fs.writeFile);\n\nfunction nodeify(promise, cb) {\n  if (typeof cb === \"function\") {\n    promise.then(() => cb()).catch(cb);\n    return;\n  }\n  return promise;\n}\n\nfunction diff(_srcFile, dstFile, patchFile, cb) {\n  const work = (async () => {\n    const data = await readFile(dstFile);\n    await writeFile(patchFile, data);\n  })();\n  return nodeify(work, cb);\n}\n\nfunction patch(_srcFile, patchFile, dstFile, cb) {\n  const work = (async () => {\n    const data = await readFile(patchFile);\n    await writeFile(dstFile, data);\n  })();\n  return nodeify(work, cb);\n}\n\nmodule.exports = { diff, patch };\n","/**\n * @typedef Options\n *   Configuration for `stringify`.\n * @property {boolean} [padLeft=true]\n *   Whether to pad a space before a token.\n * @property {boolean} [padRight=false]\n *   Whether to pad a space after a token.\n */\n\n/**\n * @typedef {Options} StringifyOptions\n *   Please use `StringifyOptions` instead.\n */\n\n/**\n * Parse comma-separated tokens to an array.\n *\n * @param {string} value\n *   Comma-separated tokens.\n * @returns {Array<string>}\n *   List of tokens.\n */\nexport function parse(value) {\n  /** @type {Array<string>} */\n  const tokens = []\n  const input = String(value || '')\n  let index = input.indexOf(',')\n  let start = 0\n  /** @type {boolean} */\n  let end = false\n\n  while (!end) {\n    if (index === -1) {\n      index = input.length\n      end = true\n    }\n\n    const token = input.slice(start, index).trim()\n\n    if (token || !end) {\n      tokens.push(token)\n    }\n\n    start = index + 1\n    index = input.indexOf(',', start)\n  }\n\n  return tokens\n}\n\n/**\n * Serialize an array of strings or numbers to comma-separated tokens.\n *\n * @param {Array<string|number>} values\n *   List of tokens.\n * @param {Options} [options]\n *   Configuration for `stringify` (optional).\n * @returns {string}\n *   Comma-separated tokens.\n */\nexport function stringify(values, options) {\n  const settings = options || {}\n\n  // Ensure the last empty entry is seen.\n  const input = values[values.length - 1] === '' ? [...values, ''] : values\n\n  return input\n    .join(\n      (settings.padRight ? ' ' : '') +\n        ',' +\n        (settings.padLeft === false ? '' : ' ')\n    )\n    .trim()\n}\n","/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */\n/* vim: set ts=2: */\n/*exported CRC32 */\nvar CRC32;\n(function (factory) {\n\t/*jshint ignore:start */\n\t/*eslint-disable */\n\tif(typeof DO_NOT_EXPORT_CRC === 'undefined') {\n\t\tif('object' === typeof exports) {\n\t\t\tfactory(exports);\n\t\t} else if ('function' === typeof define && define.amd) {\n\t\t\tdefine(function () {\n\t\t\t\tvar module = {};\n\t\t\t\tfactory(module);\n\t\t\t\treturn module;\n\t\t\t});\n\t\t} else {\n\t\t\tfactory(CRC32 = {});\n\t\t}\n\t} else {\n\t\tfactory(CRC32 = {});\n\t}\n\t/*eslint-enable */\n\t/*jshint ignore:end */\n}(function(CRC32) {\nCRC32.version = '1.2.2';\n/*global Int32Array */\nfunction signed_crc_table() {\n\tvar c = 0, table = new Array(256);\n\n\tfor(var n =0; n != 256; ++n){\n\t\tc = n;\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\tc = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));\n\t\ttable[n] = c;\n\t}\n\n\treturn typeof Int32Array !== 'undefined' ? new Int32Array(table) : table;\n}\n\nvar T0 = signed_crc_table();\nfunction slice_by_16_tables(T) {\n\tvar c = 0, v = 0, n = 0, table = typeof Int32Array !== 'undefined' ? new Int32Array(4096) : new Array(4096) ;\n\n\tfor(n = 0; n != 256; ++n) table[n] = T[n];\n\tfor(n = 0; n != 256; ++n) {\n\t\tv = T[n];\n\t\tfor(c = 256 + n; c < 4096; c += 256) v = table[c] = (v >>> 8) ^ T[v & 0xFF];\n\t}\n\tvar out = [];\n\tfor(n = 1; n != 16; ++n) out[n - 1] = typeof Int32Array !== 'undefined' ? table.subarray(n * 256, n * 256 + 256) : table.slice(n * 256, n * 256 + 256);\n\treturn out;\n}\nvar TT = slice_by_16_tables(T0);\nvar T1 = TT[0],  T2 = TT[1],  T3 = TT[2],  T4 = TT[3],  T5 = TT[4];\nvar T6 = TT[5],  T7 = TT[6],  T8 = TT[7],  T9 = TT[8],  Ta = TT[9];\nvar Tb = TT[10], Tc = TT[11], Td = TT[12], Te = TT[13], Tf = TT[14];\nfunction crc32_bstr(bstr, seed) {\n\tvar C = seed ^ -1;\n\tfor(var i = 0, L = bstr.length; i < L;) C = (C>>>8) ^ T0[(C^bstr.charCodeAt(i++))&0xFF];\n\treturn ~C;\n}\n\nfunction crc32_buf(B, seed) {\n\tvar C = seed ^ -1, L = B.length - 15, i = 0;\n\tfor(; i < L;) C =\n\t\tTf[B[i++] ^ (C & 255)] ^\n\t\tTe[B[i++] ^ ((C >> 8) & 255)] ^\n\t\tTd[B[i++] ^ ((C >> 16) & 255)] ^\n\t\tTc[B[i++] ^ (C >>> 24)] ^\n\t\tTb[B[i++]] ^ Ta[B[i++]] ^ T9[B[i++]] ^ T8[B[i++]] ^\n\t\tT7[B[i++]] ^ T6[B[i++]] ^ T5[B[i++]] ^ T4[B[i++]] ^\n\t\tT3[B[i++]] ^ T2[B[i++]] ^ T1[B[i++]] ^ T0[B[i++]];\n\tL += 15;\n\twhile(i < L) C = (C>>>8) ^ T0[(C^B[i++])&0xFF];\n\treturn ~C;\n}\n\nfunction crc32_str(str, seed) {\n\tvar C = seed ^ -1;\n\tfor(var i = 0, L = str.length, c = 0, d = 0; i < L;) {\n\t\tc = str.charCodeAt(i++);\n\t\tif(c < 0x80) {\n\t\t\tC = (C>>>8) ^ T0[(C^c)&0xFF];\n\t\t} else if(c < 0x800) {\n\t\t\tC = (C>>>8) ^ T0[(C ^ (192|((c>>6)&31)))&0xFF];\n\t\t\tC = (C>>>8) ^ T0[(C ^ (128|(c&63)))&0xFF];\n\t\t} else if(c >= 0xD800 && c < 0xE000) {\n\t\t\tc = (c&1023)+64; d = str.charCodeAt(i++)&1023;\n\t\t\tC = (C>>>8) ^ T0[(C ^ (240|((c>>8)&7)))&0xFF];\n\t\t\tC = (C>>>8) ^ T0[(C ^ (128|((c>>2)&63)))&0xFF];\n\t\t\tC = (C>>>8) ^ T0[(C ^ (128|((d>>6)&15)|((c&3)<<4)))&0xFF];\n\t\t\tC = (C>>>8) ^ T0[(C ^ (128|(d&63)))&0xFF];\n\t\t} else {\n\t\t\tC = (C>>>8) ^ T0[(C ^ (224|((c>>12)&15)))&0xFF];\n\t\t\tC = (C>>>8) ^ T0[(C ^ (128|((c>>6)&63)))&0xFF];\n\t\t\tC = (C>>>8) ^ T0[(C ^ (128|(c&63)))&0xFF];\n\t\t}\n\t}\n\treturn ~C;\n}\nCRC32.table = T0;\n// $FlowIgnore\nCRC32.bstr = crc32_bstr;\n// $FlowIgnore\nCRC32.buf = crc32_buf;\n// $FlowIgnore\nCRC32.str = crc32_str;\n}));\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\tlet m;\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\t// eslint-disable-next-line no-return-assign\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && (m = navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/)) && parseInt(m[1], 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug') || exports.storage.getItem('DEBUG') ;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '')\n\t\t\t.trim()\n\t\t\t.replace(/\\s+/g, ',')\n\t\t\t.split(',')\n\t\t\t.filter(Boolean);\n\n\t\tfor (const ns of split) {\n\t\t\tif (ns[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(ns.slice(1));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(ns);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Checks if the given string matches a namespace template, honoring\n\t * asterisks as wildcards.\n\t *\n\t * @param {String} search\n\t * @param {String} template\n\t * @return {Boolean}\n\t */\n\tfunction matchesTemplate(search, template) {\n\t\tlet searchIndex = 0;\n\t\tlet templateIndex = 0;\n\t\tlet starIndex = -1;\n\t\tlet matchIndex = 0;\n\n\t\twhile (searchIndex < search.length) {\n\t\t\tif (templateIndex < template.length && (template[templateIndex] === search[searchIndex] || template[templateIndex] === '*')) {\n\t\t\t\t// Match character or proceed with wildcard\n\t\t\t\tif (template[templateIndex] === '*') {\n\t\t\t\t\tstarIndex = templateIndex;\n\t\t\t\t\tmatchIndex = searchIndex;\n\t\t\t\t\ttemplateIndex++; // Skip the '*'\n\t\t\t\t} else {\n\t\t\t\t\tsearchIndex++;\n\t\t\t\t\ttemplateIndex++;\n\t\t\t\t}\n\t\t\t} else if (starIndex !== -1) { // eslint-disable-line no-negated-condition\n\t\t\t\t// Backtrack to the last '*' and try to match more characters\n\t\t\t\ttemplateIndex = starIndex + 1;\n\t\t\t\tmatchIndex++;\n\t\t\t\tsearchIndex = matchIndex;\n\t\t\t} else {\n\t\t\t\treturn false; // No match\n\t\t\t}\n\t\t}\n\n\t\t// Handle trailing '*' in template\n\t\twhile (templateIndex < template.length && template[templateIndex] === '*') {\n\t\t\ttemplateIndex++;\n\t\t}\n\n\t\treturn templateIndex === template.length;\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names,\n\t\t\t...createDebug.skips.map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tfor (const skip of createDebug.skips) {\n\t\t\tif (matchesTemplate(name, skip)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (const ns of createDebug.names) {\n\t\t\tif (matchesTemplate(name, ns)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/// <reference lib=\"dom\" />\n\n/* global document */\n\nconst element = document.createElement('i')\n\n/**\n * @param {string} value\n * @returns {string | false}\n */\nexport function decodeNamedCharacterReference(value) {\n  const characterReference = '&' + value + ';'\n  element.innerHTML = characterReference\n  const character = element.textContent\n\n  // Some named character references do not require the closing semicolon\n  // (`&not`, for instance), which leads to situations where parsing the assumed\n  // named reference of `&notit;` will result in the string `¬it;`.\n  // When we encounter a trailing semicolon after parsing, and the character\n  // reference to decode was not a semicolon (`&semi;`), we can assume that the\n  // matching was not complete.\n  if (\n    // @ts-expect-error: TypeScript is wrong that `textContent` on elements can\n    // yield `null`.\n    character.charCodeAt(character.length - 1) === 59 /* `;` */ &&\n    value !== 'semi'\n  ) {\n    return false\n  }\n\n  // If the decoded string is equal to the input, the character reference was\n  // not valid.\n  // @ts-expect-error: TypeScript is wrong that `textContent` on elements can\n  // yield `null`.\n  return character === characterReference ? false : character\n}\n","var has = Object.prototype.hasOwnProperty;\n\nfunction find(iter, tar, key) {\n\tfor (key of iter.keys()) {\n\t\tif (dequal(key, tar)) return key;\n\t}\n}\n\nexport function dequal(foo, bar) {\n\tvar ctor, len, tmp;\n\tif (foo === bar) return true;\n\n\tif (foo && bar && (ctor=foo.constructor) === bar.constructor) {\n\t\tif (ctor === Date) return foo.getTime() === bar.getTime();\n\t\tif (ctor === RegExp) return foo.toString() === bar.toString();\n\n\t\tif (ctor === Array) {\n\t\t\tif ((len=foo.length) === bar.length) {\n\t\t\t\twhile (len-- && dequal(foo[len], bar[len]));\n\t\t\t}\n\t\t\treturn len === -1;\n\t\t}\n\n\t\tif (ctor === Set) {\n\t\t\tif (foo.size !== bar.size) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tfor (len of foo) {\n\t\t\t\ttmp = len;\n\t\t\t\tif (tmp && typeof tmp === 'object') {\n\t\t\t\t\ttmp = find(bar, tmp);\n\t\t\t\t\tif (!tmp) return false;\n\t\t\t\t}\n\t\t\t\tif (!bar.has(tmp)) return false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\tif (ctor === Map) {\n\t\t\tif (foo.size !== bar.size) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tfor (len of foo) {\n\t\t\t\ttmp = len[0];\n\t\t\t\tif (tmp && typeof tmp === 'object') {\n\t\t\t\t\ttmp = find(bar, tmp);\n\t\t\t\t\tif (!tmp) return false;\n\t\t\t\t}\n\t\t\t\tif (!dequal(len[1], bar.get(tmp))) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\tif (ctor === ArrayBuffer) {\n\t\t\tfoo = new Uint8Array(foo);\n\t\t\tbar = new Uint8Array(bar);\n\t\t} else if (ctor === DataView) {\n\t\t\tif ((len=foo.byteLength) === bar.byteLength) {\n\t\t\t\twhile (len-- && foo.getInt8(len) === bar.getInt8(len));\n\t\t\t}\n\t\t\treturn len === -1;\n\t\t}\n\n\t\tif (ArrayBuffer.isView(foo)) {\n\t\t\tif ((len=foo.byteLength) === bar.byteLength) {\n\t\t\t\twhile (len-- && foo[len] === bar[len]);\n\t\t\t}\n\t\t\treturn len === -1;\n\t\t}\n\n\t\tif (!ctor || typeof foo === 'object') {\n\t\t\tlen = 0;\n\t\t\tfor (ctor in foo) {\n\t\t\t\tif (has.call(foo, ctor) && ++len && !has.call(bar, ctor)) return false;\n\t\t\t\tif (!(ctor in bar) || !dequal(foo[ctor], bar[ctor])) return false;\n\t\t\t}\n\t\t\treturn Object.keys(bar).length === len;\n\t\t}\n\t}\n\n\treturn foo !== foo && bar !== bar;\n}\n","function Diff() {}\nDiff.prototype = {\n  diff: function diff(oldString, newString) {\n    var _options$timeout;\n\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var callback = options.callback;\n\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n\n    this.options = options;\n    var self = this;\n\n    function done(value) {\n      if (callback) {\n        setTimeout(function () {\n          callback(undefined, value);\n        }, 0);\n        return true;\n      } else {\n        return value;\n      }\n    } // Allow subclasses to massage the input prior to running\n\n\n    oldString = this.castInput(oldString);\n    newString = this.castInput(newString);\n    oldString = this.removeEmpty(this.tokenize(oldString));\n    newString = this.removeEmpty(this.tokenize(newString));\n    var newLen = newString.length,\n        oldLen = oldString.length;\n    var editLength = 1;\n    var maxEditLength = newLen + oldLen;\n\n    if (options.maxEditLength) {\n      maxEditLength = Math.min(maxEditLength, options.maxEditLength);\n    }\n\n    var maxExecutionTime = (_options$timeout = options.timeout) !== null && _options$timeout !== void 0 ? _options$timeout : Infinity;\n    var abortAfterTimestamp = Date.now() + maxExecutionTime;\n    var bestPath = [{\n      oldPos: -1,\n      lastComponent: undefined\n    }]; // Seed editLength = 0, i.e. the content starts with the same values\n\n    var newPos = this.extractCommon(bestPath[0], newString, oldString, 0);\n\n    if (bestPath[0].oldPos + 1 >= oldLen && newPos + 1 >= newLen) {\n      // Identity per the equality and tokenizer\n      return done([{\n        value: this.join(newString),\n        count: newString.length\n      }]);\n    } // Once we hit the right edge of the edit graph on some diagonal k, we can\n    // definitely reach the end of the edit graph in no more than k edits, so\n    // there's no point in considering any moves to diagonal k+1 any more (from\n    // which we're guaranteed to need at least k+1 more edits).\n    // Similarly, once we've reached the bottom of the edit graph, there's no\n    // point considering moves to lower diagonals.\n    // We record this fact by setting minDiagonalToConsider and\n    // maxDiagonalToConsider to some finite value once we've hit the edge of\n    // the edit graph.\n    // This optimization is not faithful to the original algorithm presented in\n    // Myers's paper, which instead pointlessly extends D-paths off the end of\n    // the edit graph - see page 7 of Myers's paper which notes this point\n    // explicitly and illustrates it with a diagram. This has major performance\n    // implications for some common scenarios. For instance, to compute a diff\n    // where the new text simply appends d characters on the end of the\n    // original text of length n, the true Myers algorithm will take O(n+d^2)\n    // time while this optimization needs only O(n+d) time.\n\n\n    var minDiagonalToConsider = -Infinity,\n        maxDiagonalToConsider = Infinity; // Main worker method. checks all permutations of a given edit length for acceptance.\n\n    function execEditLength() {\n      for (var diagonalPath = Math.max(minDiagonalToConsider, -editLength); diagonalPath <= Math.min(maxDiagonalToConsider, editLength); diagonalPath += 2) {\n        var basePath = void 0;\n        var removePath = bestPath[diagonalPath - 1],\n            addPath = bestPath[diagonalPath + 1];\n\n        if (removePath) {\n          // No one else is going to attempt to use this value, clear it\n          bestPath[diagonalPath - 1] = undefined;\n        }\n\n        var canAdd = false;\n\n        if (addPath) {\n          // what newPos will be after we do an insertion:\n          var addPathNewPos = addPath.oldPos - diagonalPath;\n          canAdd = addPath && 0 <= addPathNewPos && addPathNewPos < newLen;\n        }\n\n        var canRemove = removePath && removePath.oldPos + 1 < oldLen;\n\n        if (!canAdd && !canRemove) {\n          // If this path is a terminal then prune\n          bestPath[diagonalPath] = undefined;\n          continue;\n        } // Select the diagonal that we want to branch from. We select the prior\n        // path whose position in the old string is the farthest from the origin\n        // and does not pass the bounds of the diff graph\n        // TODO: Remove the `+ 1` here to make behavior match Myers algorithm\n        //       and prefer to order removals before insertions.\n\n\n        if (!canRemove || canAdd && removePath.oldPos + 1 < addPath.oldPos) {\n          basePath = self.addToPath(addPath, true, undefined, 0);\n        } else {\n          basePath = self.addToPath(removePath, undefined, true, 1);\n        }\n\n        newPos = self.extractCommon(basePath, newString, oldString, diagonalPath);\n\n        if (basePath.oldPos + 1 >= oldLen && newPos + 1 >= newLen) {\n          // If we have hit the end of both strings, then we are done\n          return done(buildValues(self, basePath.lastComponent, newString, oldString, self.useLongestToken));\n        } else {\n          bestPath[diagonalPath] = basePath;\n\n          if (basePath.oldPos + 1 >= oldLen) {\n            maxDiagonalToConsider = Math.min(maxDiagonalToConsider, diagonalPath - 1);\n          }\n\n          if (newPos + 1 >= newLen) {\n            minDiagonalToConsider = Math.max(minDiagonalToConsider, diagonalPath + 1);\n          }\n        }\n      }\n\n      editLength++;\n    } // Performs the length of edit iteration. Is a bit fugly as this has to support the\n    // sync and async mode which is never fun. Loops over execEditLength until a value\n    // is produced, or until the edit length exceeds options.maxEditLength (if given),\n    // in which case it will return undefined.\n\n\n    if (callback) {\n      (function exec() {\n        setTimeout(function () {\n          if (editLength > maxEditLength || Date.now() > abortAfterTimestamp) {\n            return callback();\n          }\n\n          if (!execEditLength()) {\n            exec();\n          }\n        }, 0);\n      })();\n    } else {\n      while (editLength <= maxEditLength && Date.now() <= abortAfterTimestamp) {\n        var ret = execEditLength();\n\n        if (ret) {\n          return ret;\n        }\n      }\n    }\n  },\n  addToPath: function addToPath(path, added, removed, oldPosInc) {\n    var last = path.lastComponent;\n\n    if (last && last.added === added && last.removed === removed) {\n      return {\n        oldPos: path.oldPos + oldPosInc,\n        lastComponent: {\n          count: last.count + 1,\n          added: added,\n          removed: removed,\n          previousComponent: last.previousComponent\n        }\n      };\n    } else {\n      return {\n        oldPos: path.oldPos + oldPosInc,\n        lastComponent: {\n          count: 1,\n          added: added,\n          removed: removed,\n          previousComponent: last\n        }\n      };\n    }\n  },\n  extractCommon: function extractCommon(basePath, newString, oldString, diagonalPath) {\n    var newLen = newString.length,\n        oldLen = oldString.length,\n        oldPos = basePath.oldPos,\n        newPos = oldPos - diagonalPath,\n        commonCount = 0;\n\n    while (newPos + 1 < newLen && oldPos + 1 < oldLen && this.equals(newString[newPos + 1], oldString[oldPos + 1])) {\n      newPos++;\n      oldPos++;\n      commonCount++;\n    }\n\n    if (commonCount) {\n      basePath.lastComponent = {\n        count: commonCount,\n        previousComponent: basePath.lastComponent\n      };\n    }\n\n    basePath.oldPos = oldPos;\n    return newPos;\n  },\n  equals: function equals(left, right) {\n    if (this.options.comparator) {\n      return this.options.comparator(left, right);\n    } else {\n      return left === right || this.options.ignoreCase && left.toLowerCase() === right.toLowerCase();\n    }\n  },\n  removeEmpty: function removeEmpty(array) {\n    var ret = [];\n\n    for (var i = 0; i < array.length; i++) {\n      if (array[i]) {\n        ret.push(array[i]);\n      }\n    }\n\n    return ret;\n  },\n  castInput: function castInput(value) {\n    return value;\n  },\n  tokenize: function tokenize(value) {\n    return value.split('');\n  },\n  join: function join(chars) {\n    return chars.join('');\n  }\n};\n\nfunction buildValues(diff, lastComponent, newString, oldString, useLongestToken) {\n  // First we convert our linked list of components in reverse order to an\n  // array in the right order:\n  var components = [];\n  var nextComponent;\n\n  while (lastComponent) {\n    components.push(lastComponent);\n    nextComponent = lastComponent.previousComponent;\n    delete lastComponent.previousComponent;\n    lastComponent = nextComponent;\n  }\n\n  components.reverse();\n  var componentPos = 0,\n      componentLen = components.length,\n      newPos = 0,\n      oldPos = 0;\n\n  for (; componentPos < componentLen; componentPos++) {\n    var component = components[componentPos];\n\n    if (!component.removed) {\n      if (!component.added && useLongestToken) {\n        var value = newString.slice(newPos, newPos + component.count);\n        value = value.map(function (value, i) {\n          var oldValue = oldString[oldPos + i];\n          return oldValue.length > value.length ? oldValue : value;\n        });\n        component.value = diff.join(value);\n      } else {\n        component.value = diff.join(newString.slice(newPos, newPos + component.count));\n      }\n\n      newPos += component.count; // Common case\n\n      if (!component.added) {\n        oldPos += component.count;\n      }\n    } else {\n      component.value = diff.join(oldString.slice(oldPos, oldPos + component.count));\n      oldPos += component.count; // Reverse add and remove so removes are output first to match common convention\n      // The diffing algorithm is tied to add then remove output and this is the simplest\n      // route to get the desired output with minimal overhead.\n\n      if (componentPos && components[componentPos - 1].added) {\n        var tmp = components[componentPos - 1];\n        components[componentPos - 1] = components[componentPos];\n        components[componentPos] = tmp;\n      }\n    }\n  } // Special case handle for when one terminal is ignored (i.e. whitespace).\n  // For this case we merge the terminal into the prior string and drop the change.\n  // This is only available for string mode.\n\n\n  var finalComponent = components[componentLen - 1];\n\n  if (componentLen > 1 && typeof finalComponent.value === 'string' && (finalComponent.added || finalComponent.removed) && diff.equals('', finalComponent.value)) {\n    components[componentLen - 2].value += finalComponent.value;\n    components.pop();\n  }\n\n  return components;\n}\n\nvar characterDiff = new Diff();\nfunction diffChars(oldStr, newStr, options) {\n  return characterDiff.diff(oldStr, newStr, options);\n}\n\nfunction generateOptions(options, defaults) {\n  if (typeof options === 'function') {\n    defaults.callback = options;\n  } else if (options) {\n    for (var name in options) {\n      /* istanbul ignore else */\n      if (options.hasOwnProperty(name)) {\n        defaults[name] = options[name];\n      }\n    }\n  }\n\n  return defaults;\n}\n\n//\n// Ranges and exceptions:\n// Latin-1 Supplement, 0080–00FF\n//  - U+00D7  × Multiplication sign\n//  - U+00F7  ÷ Division sign\n// Latin Extended-A, 0100–017F\n// Latin Extended-B, 0180–024F\n// IPA Extensions, 0250–02AF\n// Spacing Modifier Letters, 02B0–02FF\n//  - U+02C7  ˇ &#711;  Caron\n//  - U+02D8  ˘ &#728;  Breve\n//  - U+02D9  ˙ &#729;  Dot Above\n//  - U+02DA  ˚ &#730;  Ring Above\n//  - U+02DB  ˛ &#731;  Ogonek\n//  - U+02DC  ˜ &#732;  Small Tilde\n//  - U+02DD  ˝ &#733;  Double Acute Accent\n// Latin Extended Additional, 1E00–1EFF\n\nvar extendedWordChars = /^[A-Za-z\\xC0-\\u02C6\\u02C8-\\u02D7\\u02DE-\\u02FF\\u1E00-\\u1EFF]+$/;\nvar reWhitespace = /\\S/;\nvar wordDiff = new Diff();\n\nwordDiff.equals = function (left, right) {\n  if (this.options.ignoreCase) {\n    left = left.toLowerCase();\n    right = right.toLowerCase();\n  }\n\n  return left === right || this.options.ignoreWhitespace && !reWhitespace.test(left) && !reWhitespace.test(right);\n};\n\nwordDiff.tokenize = function (value) {\n  // All whitespace symbols except newline group into one token, each newline - in separate token\n  var tokens = value.split(/([^\\S\\r\\n]+|[()[\\]{}'\"\\r\\n]|\\b)/); // Join the boundary splits that we do not consider to be boundaries. This is primarily the extended Latin character set.\n\n  for (var i = 0; i < tokens.length - 1; i++) {\n    // If we have an empty string in the next field and we have only word chars before and after, merge\n    if (!tokens[i + 1] && tokens[i + 2] && extendedWordChars.test(tokens[i]) && extendedWordChars.test(tokens[i + 2])) {\n      tokens[i] += tokens[i + 2];\n      tokens.splice(i + 1, 2);\n      i--;\n    }\n  }\n\n  return tokens;\n};\n\nfunction diffWords(oldStr, newStr, options) {\n  options = generateOptions(options, {\n    ignoreWhitespace: true\n  });\n  return wordDiff.diff(oldStr, newStr, options);\n}\nfunction diffWordsWithSpace(oldStr, newStr, options) {\n  return wordDiff.diff(oldStr, newStr, options);\n}\n\nvar lineDiff = new Diff();\n\nlineDiff.tokenize = function (value) {\n  if (this.options.stripTrailingCr) {\n    // remove one \\r before \\n to match GNU diff's --strip-trailing-cr behavior\n    value = value.replace(/\\r\\n/g, '\\n');\n  }\n\n  var retLines = [],\n      linesAndNewlines = value.split(/(\\n|\\r\\n)/); // Ignore the final empty token that occurs if the string ends with a new line\n\n  if (!linesAndNewlines[linesAndNewlines.length - 1]) {\n    linesAndNewlines.pop();\n  } // Merge the content and line separators into single tokens\n\n\n  for (var i = 0; i < linesAndNewlines.length; i++) {\n    var line = linesAndNewlines[i];\n\n    if (i % 2 && !this.options.newlineIsToken) {\n      retLines[retLines.length - 1] += line;\n    } else {\n      if (this.options.ignoreWhitespace) {\n        line = line.trim();\n      }\n\n      retLines.push(line);\n    }\n  }\n\n  return retLines;\n};\n\nfunction diffLines(oldStr, newStr, callback) {\n  return lineDiff.diff(oldStr, newStr, callback);\n}\nfunction diffTrimmedLines(oldStr, newStr, callback) {\n  var options = generateOptions(callback, {\n    ignoreWhitespace: true\n  });\n  return lineDiff.diff(oldStr, newStr, options);\n}\n\nvar sentenceDiff = new Diff();\n\nsentenceDiff.tokenize = function (value) {\n  return value.split(/(\\S.+?[.!?])(?=\\s+|$)/);\n};\n\nfunction diffSentences(oldStr, newStr, callback) {\n  return sentenceDiff.diff(oldStr, newStr, callback);\n}\n\nvar cssDiff = new Diff();\n\ncssDiff.tokenize = function (value) {\n  return value.split(/([{}:;,]|\\s+)/);\n};\n\nfunction diffCss(oldStr, newStr, callback) {\n  return cssDiff.diff(oldStr, newStr, callback);\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar objectPrototypeToString = Object.prototype.toString;\nvar jsonDiff = new Diff(); // Discriminate between two lines of pretty-printed, serialized JSON where one of them has a\n// dangling comma and the other doesn't. Turns out including the dangling comma yields the nicest output:\n\njsonDiff.useLongestToken = true;\njsonDiff.tokenize = lineDiff.tokenize;\n\njsonDiff.castInput = function (value) {\n  var _this$options = this.options,\n      undefinedReplacement = _this$options.undefinedReplacement,\n      _this$options$stringi = _this$options.stringifyReplacer,\n      stringifyReplacer = _this$options$stringi === void 0 ? function (k, v) {\n    return typeof v === 'undefined' ? undefinedReplacement : v;\n  } : _this$options$stringi;\n  return typeof value === 'string' ? value : JSON.stringify(canonicalize(value, null, null, stringifyReplacer), stringifyReplacer, '  ');\n};\n\njsonDiff.equals = function (left, right) {\n  return Diff.prototype.equals.call(jsonDiff, left.replace(/,([\\r\\n])/g, '$1'), right.replace(/,([\\r\\n])/g, '$1'));\n};\n\nfunction diffJson(oldObj, newObj, options) {\n  return jsonDiff.diff(oldObj, newObj, options);\n} // This function handles the presence of circular references by bailing out when encountering an\n// object that is already on the \"stack\" of items being processed. Accepts an optional replacer\n\nfunction canonicalize(obj, stack, replacementStack, replacer, key) {\n  stack = stack || [];\n  replacementStack = replacementStack || [];\n\n  if (replacer) {\n    obj = replacer(key, obj);\n  }\n\n  var i;\n\n  for (i = 0; i < stack.length; i += 1) {\n    if (stack[i] === obj) {\n      return replacementStack[i];\n    }\n  }\n\n  var canonicalizedObj;\n\n  if ('[object Array]' === objectPrototypeToString.call(obj)) {\n    stack.push(obj);\n    canonicalizedObj = new Array(obj.length);\n    replacementStack.push(canonicalizedObj);\n\n    for (i = 0; i < obj.length; i += 1) {\n      canonicalizedObj[i] = canonicalize(obj[i], stack, replacementStack, replacer, key);\n    }\n\n    stack.pop();\n    replacementStack.pop();\n    return canonicalizedObj;\n  }\n\n  if (obj && obj.toJSON) {\n    obj = obj.toJSON();\n  }\n\n  if (_typeof(obj) === 'object' && obj !== null) {\n    stack.push(obj);\n    canonicalizedObj = {};\n    replacementStack.push(canonicalizedObj);\n\n    var sortedKeys = [],\n        _key;\n\n    for (_key in obj) {\n      /* istanbul ignore else */\n      if (obj.hasOwnProperty(_key)) {\n        sortedKeys.push(_key);\n      }\n    }\n\n    sortedKeys.sort();\n\n    for (i = 0; i < sortedKeys.length; i += 1) {\n      _key = sortedKeys[i];\n      canonicalizedObj[_key] = canonicalize(obj[_key], stack, replacementStack, replacer, _key);\n    }\n\n    stack.pop();\n    replacementStack.pop();\n  } else {\n    canonicalizedObj = obj;\n  }\n\n  return canonicalizedObj;\n}\n\nvar arrayDiff = new Diff();\n\narrayDiff.tokenize = function (value) {\n  return value.slice();\n};\n\narrayDiff.join = arrayDiff.removeEmpty = function (value) {\n  return value;\n};\n\nfunction diffArrays(oldArr, newArr, callback) {\n  return arrayDiff.diff(oldArr, newArr, callback);\n}\n\nfunction parsePatch(uniDiff) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var diffstr = uniDiff.split(/\\r\\n|[\\n\\v\\f\\r\\x85]/),\n      delimiters = uniDiff.match(/\\r\\n|[\\n\\v\\f\\r\\x85]/g) || [],\n      list = [],\n      i = 0;\n\n  function parseIndex() {\n    var index = {};\n    list.push(index); // Parse diff metadata\n\n    while (i < diffstr.length) {\n      var line = diffstr[i]; // File header found, end parsing diff metadata\n\n      if (/^(\\-\\-\\-|\\+\\+\\+|@@)\\s/.test(line)) {\n        break;\n      } // Diff index\n\n\n      var header = /^(?:Index:|diff(?: -r \\w+)+)\\s+(.+?)\\s*$/.exec(line);\n\n      if (header) {\n        index.index = header[1];\n      }\n\n      i++;\n    } // Parse file headers if they are defined. Unified diff requires them, but\n    // there's no technical issues to have an isolated hunk without file header\n\n\n    parseFileHeader(index);\n    parseFileHeader(index); // Parse hunks\n\n    index.hunks = [];\n\n    while (i < diffstr.length) {\n      var _line = diffstr[i];\n\n      if (/^(Index:|diff|\\-\\-\\-|\\+\\+\\+)\\s/.test(_line)) {\n        break;\n      } else if (/^@@/.test(_line)) {\n        index.hunks.push(parseHunk());\n      } else if (_line && options.strict) {\n        // Ignore unexpected content unless in strict mode\n        throw new Error('Unknown line ' + (i + 1) + ' ' + JSON.stringify(_line));\n      } else {\n        i++;\n      }\n    }\n  } // Parses the --- and +++ headers, if none are found, no lines\n  // are consumed.\n\n\n  function parseFileHeader(index) {\n    var fileHeader = /^(---|\\+\\+\\+)\\s+(.*)$/.exec(diffstr[i]);\n\n    if (fileHeader) {\n      var keyPrefix = fileHeader[1] === '---' ? 'old' : 'new';\n      var data = fileHeader[2].split('\\t', 2);\n      var fileName = data[0].replace(/\\\\\\\\/g, '\\\\');\n\n      if (/^\".*\"$/.test(fileName)) {\n        fileName = fileName.substr(1, fileName.length - 2);\n      }\n\n      index[keyPrefix + 'FileName'] = fileName;\n      index[keyPrefix + 'Header'] = (data[1] || '').trim();\n      i++;\n    }\n  } // Parses a hunk\n  // This assumes that we are at the start of a hunk.\n\n\n  function parseHunk() {\n    var chunkHeaderIndex = i,\n        chunkHeaderLine = diffstr[i++],\n        chunkHeader = chunkHeaderLine.split(/@@ -(\\d+)(?:,(\\d+))? \\+(\\d+)(?:,(\\d+))? @@/);\n    var hunk = {\n      oldStart: +chunkHeader[1],\n      oldLines: typeof chunkHeader[2] === 'undefined' ? 1 : +chunkHeader[2],\n      newStart: +chunkHeader[3],\n      newLines: typeof chunkHeader[4] === 'undefined' ? 1 : +chunkHeader[4],\n      lines: [],\n      linedelimiters: []\n    }; // Unified Diff Format quirk: If the chunk size is 0,\n    // the first number is one lower than one would expect.\n    // https://www.artima.com/weblogs/viewpost.jsp?thread=164293\n\n    if (hunk.oldLines === 0) {\n      hunk.oldStart += 1;\n    }\n\n    if (hunk.newLines === 0) {\n      hunk.newStart += 1;\n    }\n\n    var addCount = 0,\n        removeCount = 0;\n\n    for (; i < diffstr.length; i++) {\n      // Lines starting with '---' could be mistaken for the \"remove line\" operation\n      // But they could be the header for the next file. Therefore prune such cases out.\n      if (diffstr[i].indexOf('--- ') === 0 && i + 2 < diffstr.length && diffstr[i + 1].indexOf('+++ ') === 0 && diffstr[i + 2].indexOf('@@') === 0) {\n        break;\n      }\n\n      var operation = diffstr[i].length == 0 && i != diffstr.length - 1 ? ' ' : diffstr[i][0];\n\n      if (operation === '+' || operation === '-' || operation === ' ' || operation === '\\\\') {\n        hunk.lines.push(diffstr[i]);\n        hunk.linedelimiters.push(delimiters[i] || '\\n');\n\n        if (operation === '+') {\n          addCount++;\n        } else if (operation === '-') {\n          removeCount++;\n        } else if (operation === ' ') {\n          addCount++;\n          removeCount++;\n        }\n      } else {\n        break;\n      }\n    } // Handle the empty block count case\n\n\n    if (!addCount && hunk.newLines === 1) {\n      hunk.newLines = 0;\n    }\n\n    if (!removeCount && hunk.oldLines === 1) {\n      hunk.oldLines = 0;\n    } // Perform optional sanity checking\n\n\n    if (options.strict) {\n      if (addCount !== hunk.newLines) {\n        throw new Error('Added line count did not match for hunk at line ' + (chunkHeaderIndex + 1));\n      }\n\n      if (removeCount !== hunk.oldLines) {\n        throw new Error('Removed line count did not match for hunk at line ' + (chunkHeaderIndex + 1));\n      }\n    }\n\n    return hunk;\n  }\n\n  while (i < diffstr.length) {\n    parseIndex();\n  }\n\n  return list;\n}\n\n// Iterator that traverses in the range of [min, max], stepping\n// by distance from a given start position. I.e. for [0, 4], with\n// start of 2, this will iterate 2, 3, 1, 4, 0.\nfunction distanceIterator (start, minLine, maxLine) {\n  var wantForward = true,\n      backwardExhausted = false,\n      forwardExhausted = false,\n      localOffset = 1;\n  return function iterator() {\n    if (wantForward && !forwardExhausted) {\n      if (backwardExhausted) {\n        localOffset++;\n      } else {\n        wantForward = false;\n      } // Check if trying to fit beyond text length, and if not, check it fits\n      // after offset location (or desired location on first iteration)\n\n\n      if (start + localOffset <= maxLine) {\n        return localOffset;\n      }\n\n      forwardExhausted = true;\n    }\n\n    if (!backwardExhausted) {\n      if (!forwardExhausted) {\n        wantForward = true;\n      } // Check if trying to fit before text beginning, and if not, check it fits\n      // before offset location\n\n\n      if (minLine <= start - localOffset) {\n        return -localOffset++;\n      }\n\n      backwardExhausted = true;\n      return iterator();\n    } // We tried to fit hunk before text beginning and beyond text length, then\n    // hunk can't fit on the text. Return undefined\n\n  };\n}\n\nfunction applyPatch(source, uniDiff) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  if (typeof uniDiff === 'string') {\n    uniDiff = parsePatch(uniDiff);\n  }\n\n  if (Array.isArray(uniDiff)) {\n    if (uniDiff.length > 1) {\n      throw new Error('applyPatch only works with a single input.');\n    }\n\n    uniDiff = uniDiff[0];\n  } // Apply the diff to the input\n\n\n  var lines = source.split(/\\r\\n|[\\n\\v\\f\\r\\x85]/),\n      delimiters = source.match(/\\r\\n|[\\n\\v\\f\\r\\x85]/g) || [],\n      hunks = uniDiff.hunks,\n      compareLine = options.compareLine || function (lineNumber, line, operation, patchContent) {\n    return line === patchContent;\n  },\n      errorCount = 0,\n      fuzzFactor = options.fuzzFactor || 0,\n      minLine = 0,\n      offset = 0,\n      removeEOFNL,\n      addEOFNL;\n  /**\n   * Checks if the hunk exactly fits on the provided location\n   */\n\n\n  function hunkFits(hunk, toPos) {\n    for (var j = 0; j < hunk.lines.length; j++) {\n      var line = hunk.lines[j],\n          operation = line.length > 0 ? line[0] : ' ',\n          content = line.length > 0 ? line.substr(1) : line;\n\n      if (operation === ' ' || operation === '-') {\n        // Context sanity check\n        if (!compareLine(toPos + 1, lines[toPos], operation, content)) {\n          errorCount++;\n\n          if (errorCount > fuzzFactor) {\n            return false;\n          }\n        }\n\n        toPos++;\n      }\n    }\n\n    return true;\n  } // Search best fit offsets for each hunk based on the previous ones\n\n\n  for (var i = 0; i < hunks.length; i++) {\n    var hunk = hunks[i],\n        maxLine = lines.length - hunk.oldLines,\n        localOffset = 0,\n        toPos = offset + hunk.oldStart - 1;\n    var iterator = distanceIterator(toPos, minLine, maxLine);\n\n    for (; localOffset !== undefined; localOffset = iterator()) {\n      if (hunkFits(hunk, toPos + localOffset)) {\n        hunk.offset = offset += localOffset;\n        break;\n      }\n    }\n\n    if (localOffset === undefined) {\n      return false;\n    } // Set lower text limit to end of the current hunk, so next ones don't try\n    // to fit over already patched text\n\n\n    minLine = hunk.offset + hunk.oldStart + hunk.oldLines;\n  } // Apply patch hunks\n\n\n  var diffOffset = 0;\n\n  for (var _i = 0; _i < hunks.length; _i++) {\n    var _hunk = hunks[_i],\n        _toPos = _hunk.oldStart + _hunk.offset + diffOffset - 1;\n\n    diffOffset += _hunk.newLines - _hunk.oldLines;\n\n    for (var j = 0; j < _hunk.lines.length; j++) {\n      var line = _hunk.lines[j],\n          operation = line.length > 0 ? line[0] : ' ',\n          content = line.length > 0 ? line.substr(1) : line,\n          delimiter = _hunk.linedelimiters && _hunk.linedelimiters[j] || '\\n';\n\n      if (operation === ' ') {\n        _toPos++;\n      } else if (operation === '-') {\n        lines.splice(_toPos, 1);\n        delimiters.splice(_toPos, 1);\n        /* istanbul ignore else */\n      } else if (operation === '+') {\n        lines.splice(_toPos, 0, content);\n        delimiters.splice(_toPos, 0, delimiter);\n        _toPos++;\n      } else if (operation === '\\\\') {\n        var previousOperation = _hunk.lines[j - 1] ? _hunk.lines[j - 1][0] : null;\n\n        if (previousOperation === '+') {\n          removeEOFNL = true;\n        } else if (previousOperation === '-') {\n          addEOFNL = true;\n        }\n      }\n    }\n  } // Handle EOFNL insertion/removal\n\n\n  if (removeEOFNL) {\n    while (!lines[lines.length - 1]) {\n      lines.pop();\n      delimiters.pop();\n    }\n  } else if (addEOFNL) {\n    lines.push('');\n    delimiters.push('\\n');\n  }\n\n  for (var _k = 0; _k < lines.length - 1; _k++) {\n    lines[_k] = lines[_k] + delimiters[_k];\n  }\n\n  return lines.join('');\n} // Wrapper that supports multiple file patches via callbacks.\n\nfunction applyPatches(uniDiff, options) {\n  if (typeof uniDiff === 'string') {\n    uniDiff = parsePatch(uniDiff);\n  }\n\n  var currentIndex = 0;\n\n  function processIndex() {\n    var index = uniDiff[currentIndex++];\n\n    if (!index) {\n      return options.complete();\n    }\n\n    options.loadFile(index, function (err, data) {\n      if (err) {\n        return options.complete(err);\n      }\n\n      var updatedContent = applyPatch(data, index, options);\n      options.patched(index, updatedContent, function (err) {\n        if (err) {\n          return options.complete(err);\n        }\n\n        processIndex();\n      });\n    });\n  }\n\n  processIndex();\n}\n\nfunction structuredPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options) {\n  if (!options) {\n    options = {};\n  }\n\n  if (typeof options.context === 'undefined') {\n    options.context = 4;\n  }\n\n  var diff = diffLines(oldStr, newStr, options);\n\n  if (!diff) {\n    return;\n  }\n\n  diff.push({\n    value: '',\n    lines: []\n  }); // Append an empty value to make cleanup easier\n\n  function contextLines(lines) {\n    return lines.map(function (entry) {\n      return ' ' + entry;\n    });\n  }\n\n  var hunks = [];\n  var oldRangeStart = 0,\n      newRangeStart = 0,\n      curRange = [],\n      oldLine = 1,\n      newLine = 1;\n\n  var _loop = function _loop(i) {\n    var current = diff[i],\n        lines = current.lines || current.value.replace(/\\n$/, '').split('\\n');\n    current.lines = lines;\n\n    if (current.added || current.removed) {\n      var _curRange;\n\n      // If we have previous context, start with that\n      if (!oldRangeStart) {\n        var prev = diff[i - 1];\n        oldRangeStart = oldLine;\n        newRangeStart = newLine;\n\n        if (prev) {\n          curRange = options.context > 0 ? contextLines(prev.lines.slice(-options.context)) : [];\n          oldRangeStart -= curRange.length;\n          newRangeStart -= curRange.length;\n        }\n      } // Output our changes\n\n\n      (_curRange = curRange).push.apply(_curRange, _toConsumableArray(lines.map(function (entry) {\n        return (current.added ? '+' : '-') + entry;\n      }))); // Track the updated file position\n\n\n      if (current.added) {\n        newLine += lines.length;\n      } else {\n        oldLine += lines.length;\n      }\n    } else {\n      // Identical context lines. Track line changes\n      if (oldRangeStart) {\n        // Close out any changes that have been output (or join overlapping)\n        if (lines.length <= options.context * 2 && i < diff.length - 2) {\n          var _curRange2;\n\n          // Overlapping\n          (_curRange2 = curRange).push.apply(_curRange2, _toConsumableArray(contextLines(lines)));\n        } else {\n          var _curRange3;\n\n          // end the range and output\n          var contextSize = Math.min(lines.length, options.context);\n\n          (_curRange3 = curRange).push.apply(_curRange3, _toConsumableArray(contextLines(lines.slice(0, contextSize))));\n\n          var hunk = {\n            oldStart: oldRangeStart,\n            oldLines: oldLine - oldRangeStart + contextSize,\n            newStart: newRangeStart,\n            newLines: newLine - newRangeStart + contextSize,\n            lines: curRange\n          };\n\n          if (i >= diff.length - 2 && lines.length <= options.context) {\n            // EOF is inside this hunk\n            var oldEOFNewline = /\\n$/.test(oldStr);\n            var newEOFNewline = /\\n$/.test(newStr);\n            var noNlBeforeAdds = lines.length == 0 && curRange.length > hunk.oldLines;\n\n            if (!oldEOFNewline && noNlBeforeAdds && oldStr.length > 0) {\n              // special case: old has no eol and no trailing context; no-nl can end up before adds\n              // however, if the old file is empty, do not output the no-nl line\n              curRange.splice(hunk.oldLines, 0, '\\\\ No newline at end of file');\n            }\n\n            if (!oldEOFNewline && !noNlBeforeAdds || !newEOFNewline) {\n              curRange.push('\\\\ No newline at end of file');\n            }\n          }\n\n          hunks.push(hunk);\n          oldRangeStart = 0;\n          newRangeStart = 0;\n          curRange = [];\n        }\n      }\n\n      oldLine += lines.length;\n      newLine += lines.length;\n    }\n  };\n\n  for (var i = 0; i < diff.length; i++) {\n    _loop(i);\n  }\n\n  return {\n    oldFileName: oldFileName,\n    newFileName: newFileName,\n    oldHeader: oldHeader,\n    newHeader: newHeader,\n    hunks: hunks\n  };\n}\nfunction formatPatch(diff) {\n  if (Array.isArray(diff)) {\n    return diff.map(formatPatch).join('\\n');\n  }\n\n  var ret = [];\n\n  if (diff.oldFileName == diff.newFileName) {\n    ret.push('Index: ' + diff.oldFileName);\n  }\n\n  ret.push('===================================================================');\n  ret.push('--- ' + diff.oldFileName + (typeof diff.oldHeader === 'undefined' ? '' : '\\t' + diff.oldHeader));\n  ret.push('+++ ' + diff.newFileName + (typeof diff.newHeader === 'undefined' ? '' : '\\t' + diff.newHeader));\n\n  for (var i = 0; i < diff.hunks.length; i++) {\n    var hunk = diff.hunks[i]; // Unified Diff Format quirk: If the chunk size is 0,\n    // the first number is one lower than one would expect.\n    // https://www.artima.com/weblogs/viewpost.jsp?thread=164293\n\n    if (hunk.oldLines === 0) {\n      hunk.oldStart -= 1;\n    }\n\n    if (hunk.newLines === 0) {\n      hunk.newStart -= 1;\n    }\n\n    ret.push('@@ -' + hunk.oldStart + ',' + hunk.oldLines + ' +' + hunk.newStart + ',' + hunk.newLines + ' @@');\n    ret.push.apply(ret, hunk.lines);\n  }\n\n  return ret.join('\\n') + '\\n';\n}\nfunction createTwoFilesPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options) {\n  return formatPatch(structuredPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options));\n}\nfunction createPatch(fileName, oldStr, newStr, oldHeader, newHeader, options) {\n  return createTwoFilesPatch(fileName, fileName, oldStr, newStr, oldHeader, newHeader, options);\n}\n\nfunction arrayEqual(a, b) {\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  return arrayStartsWith(a, b);\n}\nfunction arrayStartsWith(array, start) {\n  if (start.length > array.length) {\n    return false;\n  }\n\n  for (var i = 0; i < start.length; i++) {\n    if (start[i] !== array[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction calcLineCount(hunk) {\n  var _calcOldNewLineCount = calcOldNewLineCount(hunk.lines),\n      oldLines = _calcOldNewLineCount.oldLines,\n      newLines = _calcOldNewLineCount.newLines;\n\n  if (oldLines !== undefined) {\n    hunk.oldLines = oldLines;\n  } else {\n    delete hunk.oldLines;\n  }\n\n  if (newLines !== undefined) {\n    hunk.newLines = newLines;\n  } else {\n    delete hunk.newLines;\n  }\n}\nfunction merge(mine, theirs, base) {\n  mine = loadPatch(mine, base);\n  theirs = loadPatch(theirs, base);\n  var ret = {}; // For index we just let it pass through as it doesn't have any necessary meaning.\n  // Leaving sanity checks on this to the API consumer that may know more about the\n  // meaning in their own context.\n\n  if (mine.index || theirs.index) {\n    ret.index = mine.index || theirs.index;\n  }\n\n  if (mine.newFileName || theirs.newFileName) {\n    if (!fileNameChanged(mine)) {\n      // No header or no change in ours, use theirs (and ours if theirs does not exist)\n      ret.oldFileName = theirs.oldFileName || mine.oldFileName;\n      ret.newFileName = theirs.newFileName || mine.newFileName;\n      ret.oldHeader = theirs.oldHeader || mine.oldHeader;\n      ret.newHeader = theirs.newHeader || mine.newHeader;\n    } else if (!fileNameChanged(theirs)) {\n      // No header or no change in theirs, use ours\n      ret.oldFileName = mine.oldFileName;\n      ret.newFileName = mine.newFileName;\n      ret.oldHeader = mine.oldHeader;\n      ret.newHeader = mine.newHeader;\n    } else {\n      // Both changed... figure it out\n      ret.oldFileName = selectField(ret, mine.oldFileName, theirs.oldFileName);\n      ret.newFileName = selectField(ret, mine.newFileName, theirs.newFileName);\n      ret.oldHeader = selectField(ret, mine.oldHeader, theirs.oldHeader);\n      ret.newHeader = selectField(ret, mine.newHeader, theirs.newHeader);\n    }\n  }\n\n  ret.hunks = [];\n  var mineIndex = 0,\n      theirsIndex = 0,\n      mineOffset = 0,\n      theirsOffset = 0;\n\n  while (mineIndex < mine.hunks.length || theirsIndex < theirs.hunks.length) {\n    var mineCurrent = mine.hunks[mineIndex] || {\n      oldStart: Infinity\n    },\n        theirsCurrent = theirs.hunks[theirsIndex] || {\n      oldStart: Infinity\n    };\n\n    if (hunkBefore(mineCurrent, theirsCurrent)) {\n      // This patch does not overlap with any of the others, yay.\n      ret.hunks.push(cloneHunk(mineCurrent, mineOffset));\n      mineIndex++;\n      theirsOffset += mineCurrent.newLines - mineCurrent.oldLines;\n    } else if (hunkBefore(theirsCurrent, mineCurrent)) {\n      // This patch does not overlap with any of the others, yay.\n      ret.hunks.push(cloneHunk(theirsCurrent, theirsOffset));\n      theirsIndex++;\n      mineOffset += theirsCurrent.newLines - theirsCurrent.oldLines;\n    } else {\n      // Overlap, merge as best we can\n      var mergedHunk = {\n        oldStart: Math.min(mineCurrent.oldStart, theirsCurrent.oldStart),\n        oldLines: 0,\n        newStart: Math.min(mineCurrent.newStart + mineOffset, theirsCurrent.oldStart + theirsOffset),\n        newLines: 0,\n        lines: []\n      };\n      mergeLines(mergedHunk, mineCurrent.oldStart, mineCurrent.lines, theirsCurrent.oldStart, theirsCurrent.lines);\n      theirsIndex++;\n      mineIndex++;\n      ret.hunks.push(mergedHunk);\n    }\n  }\n\n  return ret;\n}\n\nfunction loadPatch(param, base) {\n  if (typeof param === 'string') {\n    if (/^@@/m.test(param) || /^Index:/m.test(param)) {\n      return parsePatch(param)[0];\n    }\n\n    if (!base) {\n      throw new Error('Must provide a base reference or pass in a patch');\n    }\n\n    return structuredPatch(undefined, undefined, base, param);\n  }\n\n  return param;\n}\n\nfunction fileNameChanged(patch) {\n  return patch.newFileName && patch.newFileName !== patch.oldFileName;\n}\n\nfunction selectField(index, mine, theirs) {\n  if (mine === theirs) {\n    return mine;\n  } else {\n    index.conflict = true;\n    return {\n      mine: mine,\n      theirs: theirs\n    };\n  }\n}\n\nfunction hunkBefore(test, check) {\n  return test.oldStart < check.oldStart && test.oldStart + test.oldLines < check.oldStart;\n}\n\nfunction cloneHunk(hunk, offset) {\n  return {\n    oldStart: hunk.oldStart,\n    oldLines: hunk.oldLines,\n    newStart: hunk.newStart + offset,\n    newLines: hunk.newLines,\n    lines: hunk.lines\n  };\n}\n\nfunction mergeLines(hunk, mineOffset, mineLines, theirOffset, theirLines) {\n  // This will generally result in a conflicted hunk, but there are cases where the context\n  // is the only overlap where we can successfully merge the content here.\n  var mine = {\n    offset: mineOffset,\n    lines: mineLines,\n    index: 0\n  },\n      their = {\n    offset: theirOffset,\n    lines: theirLines,\n    index: 0\n  }; // Handle any leading content\n\n  insertLeading(hunk, mine, their);\n  insertLeading(hunk, their, mine); // Now in the overlap content. Scan through and select the best changes from each.\n\n  while (mine.index < mine.lines.length && their.index < their.lines.length) {\n    var mineCurrent = mine.lines[mine.index],\n        theirCurrent = their.lines[their.index];\n\n    if ((mineCurrent[0] === '-' || mineCurrent[0] === '+') && (theirCurrent[0] === '-' || theirCurrent[0] === '+')) {\n      // Both modified ...\n      mutualChange(hunk, mine, their);\n    } else if (mineCurrent[0] === '+' && theirCurrent[0] === ' ') {\n      var _hunk$lines;\n\n      // Mine inserted\n      (_hunk$lines = hunk.lines).push.apply(_hunk$lines, _toConsumableArray(collectChange(mine)));\n    } else if (theirCurrent[0] === '+' && mineCurrent[0] === ' ') {\n      var _hunk$lines2;\n\n      // Theirs inserted\n      (_hunk$lines2 = hunk.lines).push.apply(_hunk$lines2, _toConsumableArray(collectChange(their)));\n    } else if (mineCurrent[0] === '-' && theirCurrent[0] === ' ') {\n      // Mine removed or edited\n      removal(hunk, mine, their);\n    } else if (theirCurrent[0] === '-' && mineCurrent[0] === ' ') {\n      // Their removed or edited\n      removal(hunk, their, mine, true);\n    } else if (mineCurrent === theirCurrent) {\n      // Context identity\n      hunk.lines.push(mineCurrent);\n      mine.index++;\n      their.index++;\n    } else {\n      // Context mismatch\n      conflict(hunk, collectChange(mine), collectChange(their));\n    }\n  } // Now push anything that may be remaining\n\n\n  insertTrailing(hunk, mine);\n  insertTrailing(hunk, their);\n  calcLineCount(hunk);\n}\n\nfunction mutualChange(hunk, mine, their) {\n  var myChanges = collectChange(mine),\n      theirChanges = collectChange(their);\n\n  if (allRemoves(myChanges) && allRemoves(theirChanges)) {\n    // Special case for remove changes that are supersets of one another\n    if (arrayStartsWith(myChanges, theirChanges) && skipRemoveSuperset(their, myChanges, myChanges.length - theirChanges.length)) {\n      var _hunk$lines3;\n\n      (_hunk$lines3 = hunk.lines).push.apply(_hunk$lines3, _toConsumableArray(myChanges));\n\n      return;\n    } else if (arrayStartsWith(theirChanges, myChanges) && skipRemoveSuperset(mine, theirChanges, theirChanges.length - myChanges.length)) {\n      var _hunk$lines4;\n\n      (_hunk$lines4 = hunk.lines).push.apply(_hunk$lines4, _toConsumableArray(theirChanges));\n\n      return;\n    }\n  } else if (arrayEqual(myChanges, theirChanges)) {\n    var _hunk$lines5;\n\n    (_hunk$lines5 = hunk.lines).push.apply(_hunk$lines5, _toConsumableArray(myChanges));\n\n    return;\n  }\n\n  conflict(hunk, myChanges, theirChanges);\n}\n\nfunction removal(hunk, mine, their, swap) {\n  var myChanges = collectChange(mine),\n      theirChanges = collectContext(their, myChanges);\n\n  if (theirChanges.merged) {\n    var _hunk$lines6;\n\n    (_hunk$lines6 = hunk.lines).push.apply(_hunk$lines6, _toConsumableArray(theirChanges.merged));\n  } else {\n    conflict(hunk, swap ? theirChanges : myChanges, swap ? myChanges : theirChanges);\n  }\n}\n\nfunction conflict(hunk, mine, their) {\n  hunk.conflict = true;\n  hunk.lines.push({\n    conflict: true,\n    mine: mine,\n    theirs: their\n  });\n}\n\nfunction insertLeading(hunk, insert, their) {\n  while (insert.offset < their.offset && insert.index < insert.lines.length) {\n    var line = insert.lines[insert.index++];\n    hunk.lines.push(line);\n    insert.offset++;\n  }\n}\n\nfunction insertTrailing(hunk, insert) {\n  while (insert.index < insert.lines.length) {\n    var line = insert.lines[insert.index++];\n    hunk.lines.push(line);\n  }\n}\n\nfunction collectChange(state) {\n  var ret = [],\n      operation = state.lines[state.index][0];\n\n  while (state.index < state.lines.length) {\n    var line = state.lines[state.index]; // Group additions that are immediately after subtractions and treat them as one \"atomic\" modify change.\n\n    if (operation === '-' && line[0] === '+') {\n      operation = '+';\n    }\n\n    if (operation === line[0]) {\n      ret.push(line);\n      state.index++;\n    } else {\n      break;\n    }\n  }\n\n  return ret;\n}\n\nfunction collectContext(state, matchChanges) {\n  var changes = [],\n      merged = [],\n      matchIndex = 0,\n      contextChanges = false,\n      conflicted = false;\n\n  while (matchIndex < matchChanges.length && state.index < state.lines.length) {\n    var change = state.lines[state.index],\n        match = matchChanges[matchIndex]; // Once we've hit our add, then we are done\n\n    if (match[0] === '+') {\n      break;\n    }\n\n    contextChanges = contextChanges || change[0] !== ' ';\n    merged.push(match);\n    matchIndex++; // Consume any additions in the other block as a conflict to attempt\n    // to pull in the remaining context after this\n\n    if (change[0] === '+') {\n      conflicted = true;\n\n      while (change[0] === '+') {\n        changes.push(change);\n        change = state.lines[++state.index];\n      }\n    }\n\n    if (match.substr(1) === change.substr(1)) {\n      changes.push(change);\n      state.index++;\n    } else {\n      conflicted = true;\n    }\n  }\n\n  if ((matchChanges[matchIndex] || '')[0] === '+' && contextChanges) {\n    conflicted = true;\n  }\n\n  if (conflicted) {\n    return changes;\n  }\n\n  while (matchIndex < matchChanges.length) {\n    merged.push(matchChanges[matchIndex++]);\n  }\n\n  return {\n    merged: merged,\n    changes: changes\n  };\n}\n\nfunction allRemoves(changes) {\n  return changes.reduce(function (prev, change) {\n    return prev && change[0] === '-';\n  }, true);\n}\n\nfunction skipRemoveSuperset(state, removeChanges, delta) {\n  for (var i = 0; i < delta; i++) {\n    var changeContent = removeChanges[removeChanges.length - delta + i].substr(1);\n\n    if (state.lines[state.index + i] !== ' ' + changeContent) {\n      return false;\n    }\n  }\n\n  state.index += delta;\n  return true;\n}\n\nfunction calcOldNewLineCount(lines) {\n  var oldLines = 0;\n  var newLines = 0;\n  lines.forEach(function (line) {\n    if (typeof line !== 'string') {\n      var myCount = calcOldNewLineCount(line.mine);\n      var theirCount = calcOldNewLineCount(line.theirs);\n\n      if (oldLines !== undefined) {\n        if (myCount.oldLines === theirCount.oldLines) {\n          oldLines += myCount.oldLines;\n        } else {\n          oldLines = undefined;\n        }\n      }\n\n      if (newLines !== undefined) {\n        if (myCount.newLines === theirCount.newLines) {\n          newLines += myCount.newLines;\n        } else {\n          newLines = undefined;\n        }\n      }\n    } else {\n      if (newLines !== undefined && (line[0] === '+' || line[0] === ' ')) {\n        newLines++;\n      }\n\n      if (oldLines !== undefined && (line[0] === '-' || line[0] === ' ')) {\n        oldLines++;\n      }\n    }\n  });\n  return {\n    oldLines: oldLines,\n    newLines: newLines\n  };\n}\n\nfunction reversePatch(structuredPatch) {\n  if (Array.isArray(structuredPatch)) {\n    return structuredPatch.map(reversePatch).reverse();\n  }\n\n  return _objectSpread2(_objectSpread2({}, structuredPatch), {}, {\n    oldFileName: structuredPatch.newFileName,\n    oldHeader: structuredPatch.newHeader,\n    newFileName: structuredPatch.oldFileName,\n    newHeader: structuredPatch.oldHeader,\n    hunks: structuredPatch.hunks.map(function (hunk) {\n      return {\n        oldLines: hunk.newLines,\n        oldStart: hunk.newStart,\n        newLines: hunk.oldLines,\n        newStart: hunk.oldStart,\n        linedelimiters: hunk.linedelimiters,\n        lines: hunk.lines.map(function (l) {\n          if (l.startsWith('-')) {\n            return \"+\".concat(l.slice(1));\n          }\n\n          if (l.startsWith('+')) {\n            return \"-\".concat(l.slice(1));\n          }\n\n          return l;\n        })\n      };\n    })\n  });\n}\n\n// See: http://code.google.com/p/google-diff-match-patch/wiki/API\nfunction convertChangesToDMP(changes) {\n  var ret = [],\n      change,\n      operation;\n\n  for (var i = 0; i < changes.length; i++) {\n    change = changes[i];\n\n    if (change.added) {\n      operation = 1;\n    } else if (change.removed) {\n      operation = -1;\n    } else {\n      operation = 0;\n    }\n\n    ret.push([operation, change.value]);\n  }\n\n  return ret;\n}\n\nfunction convertChangesToXML(changes) {\n  var ret = [];\n\n  for (var i = 0; i < changes.length; i++) {\n    var change = changes[i];\n\n    if (change.added) {\n      ret.push('<ins>');\n    } else if (change.removed) {\n      ret.push('<del>');\n    }\n\n    ret.push(escapeHTML(change.value));\n\n    if (change.added) {\n      ret.push('</ins>');\n    } else if (change.removed) {\n      ret.push('</del>');\n    }\n  }\n\n  return ret.join('');\n}\n\nfunction escapeHTML(s) {\n  var n = s;\n  n = n.replace(/&/g, '&amp;');\n  n = n.replace(/</g, '&lt;');\n  n = n.replace(/>/g, '&gt;');\n  n = n.replace(/\"/g, '&quot;');\n  return n;\n}\n\nexport { Diff, applyPatch, applyPatches, canonicalize, convertChangesToDMP, convertChangesToXML, createPatch, createTwoFilesPatch, diffArrays, diffChars, diffCss, diffJson, diffLines, diffSentences, diffTrimmedLines, diffWords, diffWordsWithSpace, formatPatch, merge, parsePatch, reversePatch, structuredPatch };\n","'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\nvar defineProperty = Object.defineProperty;\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) { /**/ }\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\n// If name is '__proto__', and Object.defineProperty is available, define __proto__ as an own property on target\nvar setProperty = function setProperty(target, options) {\n\tif (defineProperty && options.name === '__proto__') {\n\t\tdefineProperty(target, options.name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t\tvalue: options.newValue,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\ttarget[options.name] = options.newValue;\n\t}\n};\n\n// Return undefined instead of __proto__ if '__proto__' is not an own property\nvar getProperty = function getProperty(obj, name) {\n\tif (name === '__proto__') {\n\t\tif (!hasOwn.call(obj, name)) {\n\t\t\treturn void 0;\n\t\t} else if (gOPD) {\n\t\t\t// In early versions of node, obj['__proto__'] is buggy when obj has\n\t\t\t// __proto__ as an own property. Object.getOwnPropertyDescriptor() works.\n\t\t\treturn gOPD(obj, name).value;\n\t\t}\n\t}\n\n\treturn obj[name];\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone;\n\tvar target = arguments[0];\n\tvar i = 1;\n\tvar length = arguments.length;\n\tvar deep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\tif (target == null || (typeof target !== 'object' && typeof target !== 'function')) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = getProperty(target, name);\n\t\t\t\tcopy = getProperty(options, name);\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: extend(deep, clone, copy) });\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: copy });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n","/**\n * Check if the given value is *inter-element whitespace*.\n *\n * @param {unknown} thing\n *   Thing to check (typically `Node` or `string`).\n * @returns {boolean}\n *   Whether the `value` is inter-element whitespace (`boolean`): consisting of\n *   zero or more of space, tab (`\\t`), line feed (`\\n`), carriage return\n *   (`\\r`), or form feed (`\\f`).\n *   If a node is passed it must be a `Text` node, whose `value` field is\n *   checked.\n */\nexport function whitespace(thing) {\n  /** @type {string} */\n  const value =\n    // @ts-expect-error looks like a node.\n    thing && typeof thing === 'object' && thing.type === 'text'\n      ? // @ts-expect-error looks like a text.\n        thing.value || ''\n      : thing\n\n  // HTML whitespace expression.\n  // See <https://infra.spec.whatwg.org/#ascii-whitespace>.\n  return typeof value === 'string' && value.replace(/[ \\t\\n\\f\\r]/g, '') === ''\n}\n","// http://www.w3.org/TR/CSS21/grammar.html\n// https://github.com/visionmedia/css-parse/pull/49#issuecomment-30088027\nvar COMMENT_REGEX = /\\/\\*[^*]*\\*+([^/*][^*]*\\*+)*\\//g;\n\nvar NEWLINE_REGEX = /\\n/g;\nvar WHITESPACE_REGEX = /^\\s*/;\n\n// declaration\nvar PROPERTY_REGEX = /^(\\*?[-#/*\\\\\\w]+(\\[[0-9a-z_-]+\\])?)\\s*/;\nvar COLON_REGEX = /^:\\s*/;\nvar VALUE_REGEX = /^((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^)]*?\\)|[^};])+)/;\nvar SEMICOLON_REGEX = /^[;\\s]*/;\n\n// https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String/Trim#Polyfill\nvar TRIM_REGEX = /^\\s+|\\s+$/g;\n\n// strings\nvar NEWLINE = '\\n';\nvar FORWARD_SLASH = '/';\nvar ASTERISK = '*';\nvar EMPTY_STRING = '';\n\n// types\nvar TYPE_COMMENT = 'comment';\nvar TYPE_DECLARATION = 'declaration';\n\n/**\n * @param {String} style\n * @param {Object} [options]\n * @return {Object[]}\n * @throws {TypeError}\n * @throws {Error}\n */\nmodule.exports = function(style, options) {\n  if (typeof style !== 'string') {\n    throw new TypeError('First argument must be a string');\n  }\n\n  if (!style) return [];\n\n  options = options || {};\n\n  /**\n   * Positional.\n   */\n  var lineno = 1;\n  var column = 1;\n\n  /**\n   * Update lineno and column based on `str`.\n   *\n   * @param {String} str\n   */\n  function updatePosition(str) {\n    var lines = str.match(NEWLINE_REGEX);\n    if (lines) lineno += lines.length;\n    var i = str.lastIndexOf(NEWLINE);\n    column = ~i ? str.length - i : column + str.length;\n  }\n\n  /**\n   * Mark position and patch `node.position`.\n   *\n   * @return {Function}\n   */\n  function position() {\n    var start = { line: lineno, column: column };\n    return function(node) {\n      node.position = new Position(start);\n      whitespace();\n      return node;\n    };\n  }\n\n  /**\n   * Store position information for a node.\n   *\n   * @constructor\n   * @property {Object} start\n   * @property {Object} end\n   * @property {undefined|String} source\n   */\n  function Position(start) {\n    this.start = start;\n    this.end = { line: lineno, column: column };\n    this.source = options.source;\n  }\n\n  /**\n   * Non-enumerable source string.\n   */\n  Position.prototype.content = style;\n\n  var errorsList = [];\n\n  /**\n   * Error `msg`.\n   *\n   * @param {String} msg\n   * @throws {Error}\n   */\n  function error(msg) {\n    var err = new Error(\n      options.source + ':' + lineno + ':' + column + ': ' + msg\n    );\n    err.reason = msg;\n    err.filename = options.source;\n    err.line = lineno;\n    err.column = column;\n    err.source = style;\n\n    if (options.silent) {\n      errorsList.push(err);\n    } else {\n      throw err;\n    }\n  }\n\n  /**\n   * Match `re` and return captures.\n   *\n   * @param {RegExp} re\n   * @return {undefined|Array}\n   */\n  function match(re) {\n    var m = re.exec(style);\n    if (!m) return;\n    var str = m[0];\n    updatePosition(str);\n    style = style.slice(str.length);\n    return m;\n  }\n\n  /**\n   * Parse whitespace.\n   */\n  function whitespace() {\n    match(WHITESPACE_REGEX);\n  }\n\n  /**\n   * Parse comments.\n   *\n   * @param {Object[]} [rules]\n   * @return {Object[]}\n   */\n  function comments(rules) {\n    var c;\n    rules = rules || [];\n    while ((c = comment())) {\n      if (c !== false) {\n        rules.push(c);\n      }\n    }\n    return rules;\n  }\n\n  /**\n   * Parse comment.\n   *\n   * @return {Object}\n   * @throws {Error}\n   */\n  function comment() {\n    var pos = position();\n    if (FORWARD_SLASH != style.charAt(0) || ASTERISK != style.charAt(1)) return;\n\n    var i = 2;\n    while (\n      EMPTY_STRING != style.charAt(i) &&\n      (ASTERISK != style.charAt(i) || FORWARD_SLASH != style.charAt(i + 1))\n    ) {\n      ++i;\n    }\n    i += 2;\n\n    if (EMPTY_STRING === style.charAt(i - 1)) {\n      return error('End of comment missing');\n    }\n\n    var str = style.slice(2, i - 2);\n    column += 2;\n    updatePosition(str);\n    style = style.slice(i);\n    column += 2;\n\n    return pos({\n      type: TYPE_COMMENT,\n      comment: str\n    });\n  }\n\n  /**\n   * Parse declaration.\n   *\n   * @return {Object}\n   * @throws {Error}\n   */\n  function declaration() {\n    var pos = position();\n\n    // prop\n    var prop = match(PROPERTY_REGEX);\n    if (!prop) return;\n    comment();\n\n    // :\n    if (!match(COLON_REGEX)) return error(\"property missing ':'\");\n\n    // val\n    var val = match(VALUE_REGEX);\n\n    var ret = pos({\n      type: TYPE_DECLARATION,\n      property: trim(prop[0].replace(COMMENT_REGEX, EMPTY_STRING)),\n      value: val\n        ? trim(val[0].replace(COMMENT_REGEX, EMPTY_STRING))\n        : EMPTY_STRING\n    });\n\n    // ;\n    match(SEMICOLON_REGEX);\n\n    return ret;\n  }\n\n  /**\n   * Parse declarations.\n   *\n   * @return {Object[]}\n   */\n  function declarations() {\n    var decls = [];\n\n    comments(decls);\n\n    // declarations\n    var decl;\n    while ((decl = declaration())) {\n      if (decl !== false) {\n        decls.push(decl);\n        comments(decls);\n      }\n    }\n\n    return decls;\n  }\n\n  whitespace();\n  return declarations();\n};\n\n/**\n * Trim `str`.\n *\n * @param {String} str\n * @return {String}\n */\nfunction trim(str) {\n  return str ? str.replace(TRIM_REGEX, EMPTY_STRING) : EMPTY_STRING;\n}\n","/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\nmodule.exports = function isBuffer (obj) {\n  return obj != null && obj.constructor != null &&\n    typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n","export default function isPlainObject(value) {\n\tif (typeof value !== 'object' || value === null) {\n\t\treturn false;\n\t}\n\n\tconst prototype = Object.getPrototypeOf(value);\n\treturn (prototype === null || prototype === Object.prototype || Object.getPrototypeOf(prototype) === null) && !(Symbol.toStringTag in value) && !(Symbol.iterator in value);\n}\n","'use strict';\n\nlet FORCE_COLOR, NODE_DISABLE_COLORS, NO_COLOR, TERM, isTTY=true;\nif (typeof process !== 'undefined') {\n\t({ FORCE_COLOR, NODE_DISABLE_COLORS, NO_COLOR, TERM } = process.env || {});\n\tisTTY = process.stdout && process.stdout.isTTY;\n}\n\nconst $ = {\n\tenabled: !NODE_DISABLE_COLORS && NO_COLOR == null && TERM !== 'dumb' && (\n\t\tFORCE_COLOR != null && FORCE_COLOR !== '0' || isTTY\n\t),\n\n\t// modifiers\n\treset: init(0, 0),\n\tbold: init(1, 22),\n\tdim: init(2, 22),\n\titalic: init(3, 23),\n\tunderline: init(4, 24),\n\tinverse: init(7, 27),\n\thidden: init(8, 28),\n\tstrikethrough: init(9, 29),\n\n\t// colors\n\tblack: init(30, 39),\n\tred: init(31, 39),\n\tgreen: init(32, 39),\n\tyellow: init(33, 39),\n\tblue: init(34, 39),\n\tmagenta: init(35, 39),\n\tcyan: init(36, 39),\n\twhite: init(37, 39),\n\tgray: init(90, 39),\n\tgrey: init(90, 39),\n\n\t// background colors\n\tbgBlack: init(40, 49),\n\tbgRed: init(41, 49),\n\tbgGreen: init(42, 49),\n\tbgYellow: init(43, 49),\n\tbgBlue: init(44, 49),\n\tbgMagenta: init(45, 49),\n\tbgCyan: init(46, 49),\n\tbgWhite: init(47, 49)\n};\n\nfunction run(arr, str) {\n\tlet i=0, tmp, beg='', end='';\n\tfor (; i < arr.length; i++) {\n\t\ttmp = arr[i];\n\t\tbeg += tmp.open;\n\t\tend += tmp.close;\n\t\tif (!!~str.indexOf(tmp.close)) {\n\t\t\tstr = str.replace(tmp.rgx, tmp.close + tmp.open);\n\t\t}\n\t}\n\treturn beg + str + end;\n}\n\nfunction chain(has, keys) {\n\tlet ctx = { has, keys };\n\n\tctx.reset = $.reset.bind(ctx);\n\tctx.bold = $.bold.bind(ctx);\n\tctx.dim = $.dim.bind(ctx);\n\tctx.italic = $.italic.bind(ctx);\n\tctx.underline = $.underline.bind(ctx);\n\tctx.inverse = $.inverse.bind(ctx);\n\tctx.hidden = $.hidden.bind(ctx);\n\tctx.strikethrough = $.strikethrough.bind(ctx);\n\n\tctx.black = $.black.bind(ctx);\n\tctx.red = $.red.bind(ctx);\n\tctx.green = $.green.bind(ctx);\n\tctx.yellow = $.yellow.bind(ctx);\n\tctx.blue = $.blue.bind(ctx);\n\tctx.magenta = $.magenta.bind(ctx);\n\tctx.cyan = $.cyan.bind(ctx);\n\tctx.white = $.white.bind(ctx);\n\tctx.gray = $.gray.bind(ctx);\n\tctx.grey = $.grey.bind(ctx);\n\n\tctx.bgBlack = $.bgBlack.bind(ctx);\n\tctx.bgRed = $.bgRed.bind(ctx);\n\tctx.bgGreen = $.bgGreen.bind(ctx);\n\tctx.bgYellow = $.bgYellow.bind(ctx);\n\tctx.bgBlue = $.bgBlue.bind(ctx);\n\tctx.bgMagenta = $.bgMagenta.bind(ctx);\n\tctx.bgCyan = $.bgCyan.bind(ctx);\n\tctx.bgWhite = $.bgWhite.bind(ctx);\n\n\treturn ctx;\n}\n\nfunction init(open, close) {\n\tlet blk = {\n\t\topen: `\\x1b[${open}m`,\n\t\tclose: `\\x1b[${close}m`,\n\t\trgx: new RegExp(`\\\\x1b\\\\[${close}m`, 'g')\n\t};\n\treturn function (txt) {\n\t\tif (this !== void 0 && this.has !== void 0) {\n\t\t\t!!~this.has.indexOf(open) || (this.has.push(open),this.keys.push(blk));\n\t\t\treturn txt === void 0 ? this : $.enabled ? run(this.keys, txt+'') : txt+'';\n\t\t}\n\t\treturn txt === void 0 ? chain([open], [blk]) : $.enabled ? run([blk], txt+'') : txt+'';\n\t};\n}\n\nexport default $;\n","/**\n * @typedef {import('mdast').Root} Root\n * @typedef {import('mdast').Content} Content\n * @typedef {import('mdast').Definition} Definition\n */\n\n/**\n * @typedef {Root | Content} Node\n *\n * @callback GetDefinition\n *   Get a definition by identifier.\n * @param {string | null | undefined} [identifier]\n *   Identifier of definition.\n * @returns {Definition | null}\n *   Definition corresponding to `identifier` or `null`.\n */\n\nimport {visit} from 'unist-util-visit'\n\nconst own = {}.hasOwnProperty\n\n/**\n * Find definitions in `tree`.\n *\n * Uses CommonMark precedence, which means that earlier definitions are\n * preferred over duplicate later definitions.\n *\n * @param {Node} tree\n *   Tree to check.\n * @returns {GetDefinition}\n *   Getter.\n */\nexport function definitions(tree) {\n  /** @type {Record<string, Definition>} */\n  const cache = Object.create(null)\n\n  if (!tree || !tree.type) {\n    throw new Error('mdast-util-definitions expected node')\n  }\n\n  visit(tree, 'definition', (definition) => {\n    const id = clean(definition.identifier)\n    if (id && !own.call(cache, id)) {\n      cache[id] = definition\n    }\n  })\n\n  return definition\n\n  /** @type {GetDefinition} */\n  function definition(identifier) {\n    const id = clean(identifier)\n    // To do: next major: return `undefined` when not found.\n    return id && own.call(cache, id) ? cache[id] : null\n  }\n}\n\n/**\n * @param {string | null | undefined} [value]\n * @returns {string}\n */\nfunction clean(value) {\n  return String(value || '').toUpperCase()\n}\n","/**\n * @typedef {import('micromark-util-types').Encoding} Encoding\n * @typedef {import('micromark-util-types').Event} Event\n * @typedef {import('micromark-util-types').ParseOptions} ParseOptions\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Value} Value\n *\n * @typedef {import('unist').Parent} UnistParent\n * @typedef {import('unist').Point} Point\n *\n * @typedef {import('mdast').PhrasingContent} PhrasingContent\n * @typedef {import('mdast').StaticPhrasingContent} StaticPhrasingContent\n * @typedef {import('mdast').Content} Content\n * @typedef {import('mdast').Break} Break\n * @typedef {import('mdast').Blockquote} Blockquote\n * @typedef {import('mdast').Code} Code\n * @typedef {import('mdast').Definition} Definition\n * @typedef {import('mdast').Emphasis} Emphasis\n * @typedef {import('mdast').Heading} Heading\n * @typedef {import('mdast').HTML} HTML\n * @typedef {import('mdast').Image} Image\n * @typedef {import('mdast').ImageReference} ImageReference\n * @typedef {import('mdast').InlineCode} InlineCode\n * @typedef {import('mdast').Link} Link\n * @typedef {import('mdast').LinkReference} LinkReference\n * @typedef {import('mdast').List} List\n * @typedef {import('mdast').ListItem} ListItem\n * @typedef {import('mdast').Paragraph} Paragraph\n * @typedef {import('mdast').Root} Root\n * @typedef {import('mdast').Strong} Strong\n * @typedef {import('mdast').Text} Text\n * @typedef {import('mdast').ThematicBreak} ThematicBreak\n * @typedef {import('mdast').ReferenceType} ReferenceType\n * @typedef {import('../index.js').CompileData} CompileData\n */\n\n/**\n * @typedef {Root | Content} Node\n * @typedef {Extract<Node, UnistParent>} Parent\n *\n * @typedef {Omit<UnistParent, 'type' | 'children'> & {type: 'fragment', children: Array<PhrasingContent>}} Fragment\n */\n\n/**\n * @callback Transform\n *   Extra transform, to change the AST afterwards.\n * @param {Root} tree\n *   Tree to transform.\n * @returns {Root | undefined | null | void}\n *   New tree or nothing (in which case the current tree is used).\n *\n * @callback Handle\n *   Handle a token.\n * @param {CompileContext} this\n *   Context.\n * @param {Token} token\n *   Current token.\n * @returns {void}\n *   Nothing.\n *\n * @typedef {Record<string, Handle>} Handles\n *   Token types mapping to handles\n *\n * @callback OnEnterError\n *   Handle the case where the `right` token is open, but it is closed (by the\n *   `left` token) or because we reached the end of the document.\n * @param {Omit<CompileContext, 'sliceSerialize'>} this\n *   Context.\n * @param {Token | undefined} left\n *   Left token.\n * @param {Token} right\n *   Right token.\n * @returns {void}\n *   Nothing.\n *\n * @callback OnExitError\n *   Handle the case where the `right` token is open but it is closed by\n *   exiting the `left` token.\n * @param {Omit<CompileContext, 'sliceSerialize'>} this\n *   Context.\n * @param {Token} left\n *   Left token.\n * @param {Token} right\n *   Right token.\n * @returns {void}\n *   Nothing.\n *\n * @typedef {[Token, OnEnterError | undefined]} TokenTuple\n *   Open token on the stack, with an optional error handler for when\n *   that token isn’t closed properly.\n */\n\n/**\n * @typedef Config\n *   Configuration.\n *\n *   We have our defaults, but extensions will add more.\n * @property {Array<string>} canContainEols\n *   Token types where line endings are used.\n * @property {Handles} enter\n *   Opening handles.\n * @property {Handles} exit\n *   Closing handles.\n * @property {Array<Transform>} transforms\n *   Tree transforms.\n *\n * @typedef {Partial<Config>} Extension\n *   Change how markdown tokens from micromark are turned into mdast.\n *\n * @typedef CompileContext\n *   mdast compiler context.\n * @property {Array<Node | Fragment>} stack\n *   Stack of nodes.\n * @property {Array<TokenTuple>} tokenStack\n *   Stack of tokens.\n * @property {<Key extends keyof CompileData>(key: Key) => CompileData[Key]} getData\n *   Get data from the key/value store.\n * @property {<Key extends keyof CompileData>(key: Key, value?: CompileData[Key]) => void} setData\n *   Set data into the key/value store.\n * @property {(this: CompileContext) => void} buffer\n *   Capture some of the output data.\n * @property {(this: CompileContext) => string} resume\n *   Stop capturing and access the output data.\n * @property {<Kind extends Node>(this: CompileContext, node: Kind, token: Token, onError?: OnEnterError) => Kind} enter\n *   Enter a token.\n * @property {(this: CompileContext, token: Token, onError?: OnExitError) => Node} exit\n *   Exit a token.\n * @property {TokenizeContext['sliceSerialize']} sliceSerialize\n *   Get the string value of a token.\n * @property {Config} config\n *   Configuration.\n *\n * @typedef FromMarkdownOptions\n *   Configuration for how to build mdast.\n * @property {Array<Extension | Array<Extension>> | null | undefined} [mdastExtensions]\n *   Extensions for this utility to change how tokens are turned into a tree.\n *\n * @typedef {ParseOptions & FromMarkdownOptions} Options\n *   Configuration.\n */\n\n// To do: micromark: create a registry of tokens?\n// To do: next major: don’t return given `Node` from `enter`.\n// To do: next major: remove setter/getter.\n\nimport {ok as assert} from 'uvu/assert'\nimport {toString} from 'mdast-util-to-string'\nimport {parse} from 'micromark/lib/parse.js'\nimport {preprocess} from 'micromark/lib/preprocess.js'\nimport {postprocess} from 'micromark/lib/postprocess.js'\nimport {decodeNumericCharacterReference} from 'micromark-util-decode-numeric-character-reference'\nimport {decodeString} from 'micromark-util-decode-string'\nimport {normalizeIdentifier} from 'micromark-util-normalize-identifier'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {constants} from 'micromark-util-symbol/constants.js'\nimport {types} from 'micromark-util-symbol/types.js'\nimport {decodeNamedCharacterReference} from 'decode-named-character-reference'\nimport {stringifyPosition} from 'unist-util-stringify-position'\n\nconst own = {}.hasOwnProperty\n\n/**\n * @param value\n *   Markdown to parse.\n * @param encoding\n *   Character encoding for when `value` is `Buffer`.\n * @param options\n *   Configuration.\n * @returns\n *   mdast tree.\n */\nexport const fromMarkdown =\n  /**\n   * @type {(\n   *   ((value: Value, encoding: Encoding, options?: Options | null | undefined) => Root) &\n   *   ((value: Value, options?: Options | null | undefined) => Root)\n   * )}\n   */\n  (\n    /**\n     * @param {Value} value\n     * @param {Encoding | Options | null | undefined} [encoding]\n     * @param {Options | null | undefined} [options]\n     * @returns {Root}\n     */\n    function (value, encoding, options) {\n      if (typeof encoding !== 'string') {\n        options = encoding\n        encoding = undefined\n      }\n\n      return compiler(options)(\n        postprocess(\n          parse(options).document().write(preprocess()(value, encoding, true))\n        )\n      )\n    }\n  )\n\n/**\n * Note this compiler only understand complete buffering, not streaming.\n *\n * @param {Options | null | undefined} [options]\n */\nfunction compiler(options) {\n  /** @type {Config} */\n  const config = {\n    transforms: [],\n    canContainEols: ['emphasis', 'fragment', 'heading', 'paragraph', 'strong'],\n    enter: {\n      autolink: opener(link),\n      autolinkProtocol: onenterdata,\n      autolinkEmail: onenterdata,\n      atxHeading: opener(heading),\n      blockQuote: opener(blockQuote),\n      characterEscape: onenterdata,\n      characterReference: onenterdata,\n      codeFenced: opener(codeFlow),\n      codeFencedFenceInfo: buffer,\n      codeFencedFenceMeta: buffer,\n      codeIndented: opener(codeFlow, buffer),\n      codeText: opener(codeText, buffer),\n      codeTextData: onenterdata,\n      data: onenterdata,\n      codeFlowValue: onenterdata,\n      definition: opener(definition),\n      definitionDestinationString: buffer,\n      definitionLabelString: buffer,\n      definitionTitleString: buffer,\n      emphasis: opener(emphasis),\n      hardBreakEscape: opener(hardBreak),\n      hardBreakTrailing: opener(hardBreak),\n      htmlFlow: opener(html, buffer),\n      htmlFlowData: onenterdata,\n      htmlText: opener(html, buffer),\n      htmlTextData: onenterdata,\n      image: opener(image),\n      label: buffer,\n      link: opener(link),\n      listItem: opener(listItem),\n      listItemValue: onenterlistitemvalue,\n      listOrdered: opener(list, onenterlistordered),\n      listUnordered: opener(list),\n      paragraph: opener(paragraph),\n      reference: onenterreference,\n      referenceString: buffer,\n      resourceDestinationString: buffer,\n      resourceTitleString: buffer,\n      setextHeading: opener(heading),\n      strong: opener(strong),\n      thematicBreak: opener(thematicBreak)\n    },\n    exit: {\n      atxHeading: closer(),\n      atxHeadingSequence: onexitatxheadingsequence,\n      autolink: closer(),\n      autolinkEmail: onexitautolinkemail,\n      autolinkProtocol: onexitautolinkprotocol,\n      blockQuote: closer(),\n      characterEscapeValue: onexitdata,\n      characterReferenceMarkerHexadecimal: onexitcharacterreferencemarker,\n      characterReferenceMarkerNumeric: onexitcharacterreferencemarker,\n      characterReferenceValue: onexitcharacterreferencevalue,\n      codeFenced: closer(onexitcodefenced),\n      codeFencedFence: onexitcodefencedfence,\n      codeFencedFenceInfo: onexitcodefencedfenceinfo,\n      codeFencedFenceMeta: onexitcodefencedfencemeta,\n      codeFlowValue: onexitdata,\n      codeIndented: closer(onexitcodeindented),\n      codeText: closer(onexitcodetext),\n      codeTextData: onexitdata,\n      data: onexitdata,\n      definition: closer(),\n      definitionDestinationString: onexitdefinitiondestinationstring,\n      definitionLabelString: onexitdefinitionlabelstring,\n      definitionTitleString: onexitdefinitiontitlestring,\n      emphasis: closer(),\n      hardBreakEscape: closer(onexithardbreak),\n      hardBreakTrailing: closer(onexithardbreak),\n      htmlFlow: closer(onexithtmlflow),\n      htmlFlowData: onexitdata,\n      htmlText: closer(onexithtmltext),\n      htmlTextData: onexitdata,\n      image: closer(onexitimage),\n      label: onexitlabel,\n      labelText: onexitlabeltext,\n      lineEnding: onexitlineending,\n      link: closer(onexitlink),\n      listItem: closer(),\n      listOrdered: closer(),\n      listUnordered: closer(),\n      paragraph: closer(),\n      referenceString: onexitreferencestring,\n      resourceDestinationString: onexitresourcedestinationstring,\n      resourceTitleString: onexitresourcetitlestring,\n      resource: onexitresource,\n      setextHeading: closer(onexitsetextheading),\n      setextHeadingLineSequence: onexitsetextheadinglinesequence,\n      setextHeadingText: onexitsetextheadingtext,\n      strong: closer(),\n      thematicBreak: closer()\n    }\n  }\n\n  configure(config, (options || {}).mdastExtensions || [])\n\n  /** @type {CompileData} */\n  const data = {}\n\n  return compile\n\n  /**\n   * Turn micromark events into an mdast tree.\n   *\n   * @param {Array<Event>} events\n   *   Events.\n   * @returns {Root}\n   *   mdast tree.\n   */\n  function compile(events) {\n    /** @type {Root} */\n    let tree = {type: 'root', children: []}\n    /** @type {Omit<CompileContext, 'sliceSerialize'>} */\n    const context = {\n      stack: [tree],\n      tokenStack: [],\n      config,\n      enter,\n      exit,\n      buffer,\n      resume,\n      setData,\n      getData\n    }\n    /** @type {Array<number>} */\n    const listStack = []\n    let index = -1\n\n    while (++index < events.length) {\n      // We preprocess lists to add `listItem` tokens, and to infer whether\n      // items the list itself are spread out.\n      if (\n        events[index][1].type === types.listOrdered ||\n        events[index][1].type === types.listUnordered\n      ) {\n        if (events[index][0] === 'enter') {\n          listStack.push(index)\n        } else {\n          const tail = listStack.pop()\n          assert(typeof tail === 'number', 'expected list ot be open')\n          index = prepareList(events, tail, index)\n        }\n      }\n    }\n\n    index = -1\n\n    while (++index < events.length) {\n      const handler = config[events[index][0]]\n\n      if (own.call(handler, events[index][1].type)) {\n        handler[events[index][1].type].call(\n          Object.assign(\n            {sliceSerialize: events[index][2].sliceSerialize},\n            context\n          ),\n          events[index][1]\n        )\n      }\n    }\n\n    // Handle tokens still being open.\n    if (context.tokenStack.length > 0) {\n      const tail = context.tokenStack[context.tokenStack.length - 1]\n      const handler = tail[1] || defaultOnError\n      handler.call(context, undefined, tail[0])\n    }\n\n    // Figure out `root` position.\n    tree.position = {\n      start: point(\n        events.length > 0 ? events[0][1].start : {line: 1, column: 1, offset: 0}\n      ),\n      end: point(\n        events.length > 0\n          ? events[events.length - 2][1].end\n          : {line: 1, column: 1, offset: 0}\n      )\n    }\n\n    // Call transforms.\n    index = -1\n    while (++index < config.transforms.length) {\n      tree = config.transforms[index](tree) || tree\n    }\n\n    return tree\n  }\n\n  /**\n   * @param {Array<Event>} events\n   * @param {number} start\n   * @param {number} length\n   * @returns {number}\n   */\n  function prepareList(events, start, length) {\n    let index = start - 1\n    let containerBalance = -1\n    let listSpread = false\n    /** @type {Token | undefined} */\n    let listItem\n    /** @type {number | undefined} */\n    let lineIndex\n    /** @type {number | undefined} */\n    let firstBlankLineIndex\n    /** @type {boolean | undefined} */\n    let atMarker\n\n    while (++index <= length) {\n      const event = events[index]\n\n      if (\n        event[1].type === types.listUnordered ||\n        event[1].type === types.listOrdered ||\n        event[1].type === types.blockQuote\n      ) {\n        if (event[0] === 'enter') {\n          containerBalance++\n        } else {\n          containerBalance--\n        }\n\n        atMarker = undefined\n      } else if (event[1].type === types.lineEndingBlank) {\n        if (event[0] === 'enter') {\n          if (\n            listItem &&\n            !atMarker &&\n            !containerBalance &&\n            !firstBlankLineIndex\n          ) {\n            firstBlankLineIndex = index\n          }\n\n          atMarker = undefined\n        }\n      } else if (\n        event[1].type === types.linePrefix ||\n        event[1].type === types.listItemValue ||\n        event[1].type === types.listItemMarker ||\n        event[1].type === types.listItemPrefix ||\n        event[1].type === types.listItemPrefixWhitespace\n      ) {\n        // Empty.\n      } else {\n        atMarker = undefined\n      }\n\n      if (\n        (!containerBalance &&\n          event[0] === 'enter' &&\n          event[1].type === types.listItemPrefix) ||\n        (containerBalance === -1 &&\n          event[0] === 'exit' &&\n          (event[1].type === types.listUnordered ||\n            event[1].type === types.listOrdered))\n      ) {\n        if (listItem) {\n          let tailIndex = index\n          lineIndex = undefined\n\n          while (tailIndex--) {\n            const tailEvent = events[tailIndex]\n\n            if (\n              tailEvent[1].type === types.lineEnding ||\n              tailEvent[1].type === types.lineEndingBlank\n            ) {\n              if (tailEvent[0] === 'exit') continue\n\n              if (lineIndex) {\n                events[lineIndex][1].type = types.lineEndingBlank\n                listSpread = true\n              }\n\n              tailEvent[1].type = types.lineEnding\n              lineIndex = tailIndex\n            } else if (\n              tailEvent[1].type === types.linePrefix ||\n              tailEvent[1].type === types.blockQuotePrefix ||\n              tailEvent[1].type === types.blockQuotePrefixWhitespace ||\n              tailEvent[1].type === types.blockQuoteMarker ||\n              tailEvent[1].type === types.listItemIndent\n            ) {\n              // Empty\n            } else {\n              break\n            }\n          }\n\n          if (\n            firstBlankLineIndex &&\n            (!lineIndex || firstBlankLineIndex < lineIndex)\n          ) {\n            listItem._spread = true\n          }\n\n          // Fix position.\n          listItem.end = Object.assign(\n            {},\n            lineIndex ? events[lineIndex][1].start : event[1].end\n          )\n\n          events.splice(lineIndex || index, 0, ['exit', listItem, event[2]])\n          index++\n          length++\n        }\n\n        // Create a new list item.\n        if (event[1].type === types.listItemPrefix) {\n          listItem = {\n            type: 'listItem',\n            _spread: false,\n            start: Object.assign({}, event[1].start),\n            // @ts-expect-error: we’ll add `end` in a second.\n            end: undefined\n          }\n          // @ts-expect-error: `listItem` is most definitely defined, TS...\n          events.splice(index, 0, ['enter', listItem, event[2]])\n          index++\n          length++\n          firstBlankLineIndex = undefined\n          atMarker = true\n        }\n      }\n    }\n\n    events[start][1]._spread = listSpread\n    return length\n  }\n\n  /**\n   * Set data.\n   *\n   * @template {keyof CompileData} Key\n   *   Field type.\n   * @param {Key} key\n   *   Key of field.\n   * @param {CompileData[Key]} [value]\n   *   New value.\n   * @returns {void}\n   *   Nothing.\n   */\n  function setData(key, value) {\n    data[key] = value\n  }\n\n  /**\n   * Get data.\n   *\n   * @template {keyof CompileData} Key\n   *   Field type.\n   * @param {Key} key\n   *   Key of field.\n   * @returns {CompileData[Key]}\n   *   Value.\n   */\n  function getData(key) {\n    return data[key]\n  }\n\n  /**\n   * Create an opener handle.\n   *\n   * @param {(token: Token) => Node} create\n   *   Create a node.\n   * @param {Handle} [and]\n   *   Optional function to also run.\n   * @returns {Handle}\n   *   Handle.\n   */\n  function opener(create, and) {\n    return open\n\n    /**\n     * @this {CompileContext}\n     * @param {Token} token\n     * @returns {void}\n     */\n    function open(token) {\n      enter.call(this, create(token), token)\n      if (and) and.call(this, token)\n    }\n  }\n\n  /**\n   * @this {CompileContext}\n   * @returns {void}\n   */\n  function buffer() {\n    this.stack.push({type: 'fragment', children: []})\n  }\n\n  /**\n   * @template {Node} Kind\n   *   Node type.\n   * @this {CompileContext}\n   *   Context.\n   * @param {Kind} node\n   *   Node to enter.\n   * @param {Token} token\n   *   Corresponding token.\n   * @param {OnEnterError | undefined} [errorHandler]\n   *   Handle the case where this token is open, but it is closed by something else.\n   * @returns {Kind}\n   *   The given node.\n   */\n  function enter(node, token, errorHandler) {\n    const parent = this.stack[this.stack.length - 1]\n    assert(parent, 'expected `parent`')\n    assert('children' in parent, 'expected `parent`')\n    // @ts-expect-error: Assume `Node` can exist as a child of `parent`.\n    parent.children.push(node)\n    this.stack.push(node)\n    this.tokenStack.push([token, errorHandler])\n    // @ts-expect-error: `end` will be patched later.\n    node.position = {start: point(token.start)}\n    return node\n  }\n\n  /**\n   * Create a closer handle.\n   *\n   * @param {Handle} [and]\n   *   Optional function to also run.\n   * @returns {Handle}\n   *   Handle.\n   */\n  function closer(and) {\n    return close\n\n    /**\n     * @this {CompileContext}\n     * @param {Token} token\n     * @returns {void}\n     */\n    function close(token) {\n      if (and) and.call(this, token)\n      exit.call(this, token)\n    }\n  }\n\n  /**\n   * @this {CompileContext}\n   *   Context.\n   * @param {Token} token\n   *   Corresponding token.\n   * @param {OnExitError | undefined} [onExitError]\n   *   Handle the case where another token is open.\n   * @returns {Node}\n   *   The closed node.\n   */\n  function exit(token, onExitError) {\n    const node = this.stack.pop()\n    assert(node, 'expected `node`')\n    const open = this.tokenStack.pop()\n\n    if (!open) {\n      throw new Error(\n        'Cannot close `' +\n          token.type +\n          '` (' +\n          stringifyPosition({start: token.start, end: token.end}) +\n          '): it’s not open'\n      )\n    } else if (open[0].type !== token.type) {\n      if (onExitError) {\n        onExitError.call(this, token, open[0])\n      } else {\n        const handler = open[1] || defaultOnError\n        handler.call(this, token, open[0])\n      }\n    }\n\n    assert(node.type !== 'fragment', 'unexpected fragment `exit`ed')\n    assert(node.position, 'expected `position` to be defined')\n    node.position.end = point(token.end)\n    return node\n  }\n\n  /**\n   * @this {CompileContext}\n   * @returns {string}\n   */\n  function resume() {\n    return toString(this.stack.pop())\n  }\n\n  //\n  // Handlers.\n  //\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onenterlistordered() {\n    setData('expectingFirstListItemValue', true)\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onenterlistitemvalue(token) {\n    if (getData('expectingFirstListItemValue')) {\n      const ancestor = this.stack[this.stack.length - 2]\n      assert(ancestor, 'expected nodes on stack')\n      assert(ancestor.type === 'list', 'expected list on stack')\n      ancestor.start = Number.parseInt(\n        this.sliceSerialize(token),\n        constants.numericBaseDecimal\n      )\n      setData('expectingFirstListItemValue')\n    }\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitcodefencedfenceinfo() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    assert(node, 'expected node on stack')\n    assert(node.type === 'code', 'expected code on stack')\n    node.lang = data\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitcodefencedfencemeta() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    assert(node, 'expected node on stack')\n    assert(node.type === 'code', 'expected code on stack')\n    node.meta = data\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitcodefencedfence() {\n    // Exit if this is the closing fence.\n    if (getData('flowCodeInside')) return\n    this.buffer()\n    setData('flowCodeInside', true)\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitcodefenced() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    assert(node, 'expected node on stack')\n    assert(node.type === 'code', 'expected code on stack')\n\n    node.value = data.replace(/^(\\r?\\n|\\r)|(\\r?\\n|\\r)$/g, '')\n    setData('flowCodeInside')\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitcodeindented() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    assert(node, 'expected node on stack')\n    assert(node.type === 'code', 'expected code on stack')\n\n    node.value = data.replace(/(\\r?\\n|\\r)$/g, '')\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitdefinitionlabelstring(token) {\n    const label = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    assert(node, 'expected node on stack')\n    assert(node.type === 'definition', 'expected definition on stack')\n\n    node.label = label\n    node.identifier = normalizeIdentifier(\n      this.sliceSerialize(token)\n    ).toLowerCase()\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitdefinitiontitlestring() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    assert(node, 'expected node on stack')\n    assert(node.type === 'definition', 'expected definition on stack')\n\n    node.title = data\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitdefinitiondestinationstring() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    assert(node, 'expected node on stack')\n    assert(node.type === 'definition', 'expected definition on stack')\n\n    node.url = data\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitatxheadingsequence(token) {\n    const node = this.stack[this.stack.length - 1]\n    assert(node, 'expected node on stack')\n    assert(node.type === 'heading', 'expected heading on stack')\n\n    if (!node.depth) {\n      const depth = this.sliceSerialize(token).length\n\n      assert(\n        depth === 1 ||\n          depth === 2 ||\n          depth === 3 ||\n          depth === 4 ||\n          depth === 5 ||\n          depth === 6,\n        'expected `depth` between `1` and `6`'\n      )\n\n      node.depth = depth\n    }\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitsetextheadingtext() {\n    setData('setextHeadingSlurpLineEnding', true)\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitsetextheadinglinesequence(token) {\n    const node = this.stack[this.stack.length - 1]\n    assert(node, 'expected node on stack')\n    assert(node.type === 'heading', 'expected heading on stack')\n\n    node.depth =\n      this.sliceSerialize(token).charCodeAt(0) === codes.equalsTo ? 1 : 2\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitsetextheading() {\n    setData('setextHeadingSlurpLineEnding')\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onenterdata(token) {\n    const node = this.stack[this.stack.length - 1]\n    assert(node, 'expected node on stack')\n    assert('children' in node, 'expected parent on stack')\n\n    let tail = node.children[node.children.length - 1]\n\n    if (!tail || tail.type !== 'text') {\n      // Add a new text node.\n      tail = text()\n      // @ts-expect-error: we’ll add `end` later.\n      tail.position = {start: point(token.start)}\n      // @ts-expect-error: Assume `parent` accepts `text`.\n      node.children.push(tail)\n    }\n\n    this.stack.push(tail)\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitdata(token) {\n    const tail = this.stack.pop()\n    assert(tail, 'expected a `node` to be on the stack')\n    assert('value' in tail, 'expected a `literal` to be on the stack')\n    assert(tail.position, 'expected `node` to have an open position')\n    tail.value += this.sliceSerialize(token)\n    tail.position.end = point(token.end)\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitlineending(token) {\n    const context = this.stack[this.stack.length - 1]\n    assert(context, 'expected `node`')\n\n    // If we’re at a hard break, include the line ending in there.\n    if (getData('atHardBreak')) {\n      assert('children' in context, 'expected `parent`')\n      const tail = context.children[context.children.length - 1]\n      assert(tail.position, 'expected tail to have a starting position')\n      tail.position.end = point(token.end)\n      setData('atHardBreak')\n      return\n    }\n\n    if (\n      !getData('setextHeadingSlurpLineEnding') &&\n      config.canContainEols.includes(context.type)\n    ) {\n      onenterdata.call(this, token)\n      onexitdata.call(this, token)\n    }\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexithardbreak() {\n    setData('atHardBreak', true)\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexithtmlflow() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    assert(node, 'expected node on stack')\n    assert(node.type === 'html', 'expected html on stack')\n\n    node.value = data\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexithtmltext() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    assert(node, 'expected node on stack')\n    assert(node.type === 'html', 'expected html on stack')\n\n    node.value = data\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitcodetext() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    assert(node, 'expected node on stack')\n    assert(node.type === 'inlineCode', 'expected inline code on stack')\n\n    node.value = data\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitlink() {\n    const node = this.stack[this.stack.length - 1]\n    assert(node, 'expected node on stack')\n    assert(node.type === 'link', 'expected link on stack')\n\n    // Note: there are also `identifier` and `label` fields on this link node!\n    // These are used / cleaned here.\n\n    // To do: clean.\n    if (getData('inReference')) {\n      /** @type {ReferenceType} */\n      const referenceType = getData('referenceType') || 'shortcut'\n\n      node.type += 'Reference'\n      // @ts-expect-error: mutate.\n      node.referenceType = referenceType\n      // @ts-expect-error: mutate.\n      delete node.url\n      delete node.title\n    } else {\n      // @ts-expect-error: mutate.\n      delete node.identifier\n      // @ts-expect-error: mutate.\n      delete node.label\n    }\n\n    setData('referenceType')\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitimage() {\n    const node = this.stack[this.stack.length - 1]\n    assert(node, 'expected node on stack')\n    assert(node.type === 'image', 'expected image on stack')\n\n    // Note: there are also `identifier` and `label` fields on this link node!\n    // These are used / cleaned here.\n\n    // To do: clean.\n    if (getData('inReference')) {\n      /** @type {ReferenceType} */\n      const referenceType = getData('referenceType') || 'shortcut'\n\n      node.type += 'Reference'\n      // @ts-expect-error: mutate.\n      node.referenceType = referenceType\n      // @ts-expect-error: mutate.\n      delete node.url\n      delete node.title\n    } else {\n      // @ts-expect-error: mutate.\n      delete node.identifier\n      // @ts-expect-error: mutate.\n      delete node.label\n    }\n\n    setData('referenceType')\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitlabeltext(token) {\n    const string = this.sliceSerialize(token)\n    const ancestor = this.stack[this.stack.length - 2]\n    assert(ancestor, 'expected ancestor on stack')\n    assert(\n      ancestor.type === 'image' || ancestor.type === 'link',\n      'expected image or link on stack'\n    )\n\n    // @ts-expect-error: stash this on the node, as it might become a reference\n    // later.\n    ancestor.label = decodeString(string)\n    // @ts-expect-error: same as above.\n    ancestor.identifier = normalizeIdentifier(string).toLowerCase()\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitlabel() {\n    const fragment = this.stack[this.stack.length - 1]\n    assert(fragment, 'expected node on stack')\n    assert(fragment.type === 'fragment', 'expected fragment on stack')\n    const value = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    assert(node, 'expected node on stack')\n    assert(\n      node.type === 'image' || node.type === 'link',\n      'expected image or link on stack'\n    )\n\n    // Assume a reference.\n    setData('inReference', true)\n\n    if (node.type === 'link') {\n      /** @type {Array<StaticPhrasingContent>} */\n      // @ts-expect-error: Assume static phrasing content.\n      const children = fragment.children\n\n      node.children = children\n    } else {\n      node.alt = value\n    }\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitresourcedestinationstring() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    assert(node, 'expected node on stack')\n    assert(\n      node.type === 'image' || node.type === 'link',\n      'expected image or link on stack'\n    )\n    node.url = data\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitresourcetitlestring() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    assert(node, 'expected node on stack')\n    assert(\n      node.type === 'image' || node.type === 'link',\n      'expected image or link on stack'\n    )\n    node.title = data\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitresource() {\n    setData('inReference')\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onenterreference() {\n    setData('referenceType', 'collapsed')\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitreferencestring(token) {\n    const label = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    assert(node, 'expected node on stack')\n    assert(\n      node.type === 'image' || node.type === 'link',\n      'expected image reference or link reference on stack'\n    )\n\n    // @ts-expect-error: stash this on the node, as it might become a reference\n    // later.\n    node.label = label\n    // @ts-expect-error: same as above.\n    node.identifier = normalizeIdentifier(\n      this.sliceSerialize(token)\n    ).toLowerCase()\n    setData('referenceType', 'full')\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitcharacterreferencemarker(token) {\n    assert(\n      token.type === 'characterReferenceMarkerNumeric' ||\n        token.type === 'characterReferenceMarkerHexadecimal'\n    )\n    setData('characterReferenceType', token.type)\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitcharacterreferencevalue(token) {\n    const data = this.sliceSerialize(token)\n    const type = getData('characterReferenceType')\n    /** @type {string} */\n    let value\n\n    if (type) {\n      value = decodeNumericCharacterReference(\n        data,\n        type === types.characterReferenceMarkerNumeric\n          ? constants.numericBaseDecimal\n          : constants.numericBaseHexadecimal\n      )\n      setData('characterReferenceType')\n    } else {\n      const result = decodeNamedCharacterReference(data)\n      assert(result !== false, 'expected reference to decode')\n      value = result\n    }\n\n    const tail = this.stack.pop()\n    assert(tail, 'expected `node`')\n    assert(tail.position, 'expected `node.position`')\n    assert('value' in tail, 'expected `node.value`')\n    tail.value += value\n    tail.position.end = point(token.end)\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitautolinkprotocol(token) {\n    onexitdata.call(this, token)\n    const node = this.stack[this.stack.length - 1]\n    assert(node, 'expected node on stack')\n    assert(node.type === 'link', 'expected link on stack')\n\n    node.url = this.sliceSerialize(token)\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitautolinkemail(token) {\n    onexitdata.call(this, token)\n    const node = this.stack[this.stack.length - 1]\n    assert(node, 'expected node on stack')\n    assert(node.type === 'link', 'expected link on stack')\n\n    node.url = 'mailto:' + this.sliceSerialize(token)\n  }\n\n  //\n  // Creaters.\n  //\n\n  /** @returns {Blockquote} */\n  function blockQuote() {\n    return {type: 'blockquote', children: []}\n  }\n\n  /** @returns {Code} */\n  function codeFlow() {\n    return {type: 'code', lang: null, meta: null, value: ''}\n  }\n\n  /** @returns {InlineCode} */\n  function codeText() {\n    return {type: 'inlineCode', value: ''}\n  }\n\n  /** @returns {Definition} */\n  function definition() {\n    return {\n      type: 'definition',\n      identifier: '',\n      label: null,\n      title: null,\n      url: ''\n    }\n  }\n\n  /** @returns {Emphasis} */\n  function emphasis() {\n    return {type: 'emphasis', children: []}\n  }\n\n  /** @returns {Heading} */\n  function heading() {\n    // @ts-expect-error `depth` will be set later.\n    return {type: 'heading', depth: undefined, children: []}\n  }\n\n  /** @returns {Break} */\n  function hardBreak() {\n    return {type: 'break'}\n  }\n\n  /** @returns {HTML} */\n  function html() {\n    return {type: 'html', value: ''}\n  }\n\n  /** @returns {Image} */\n  function image() {\n    return {type: 'image', title: null, url: '', alt: null}\n  }\n\n  /** @returns {Link} */\n  function link() {\n    return {type: 'link', title: null, url: '', children: []}\n  }\n\n  /**\n   * @param {Token} token\n   * @returns {List}\n   */\n  function list(token) {\n    return {\n      type: 'list',\n      ordered: token.type === 'listOrdered',\n      start: null,\n      spread: token._spread,\n      children: []\n    }\n  }\n\n  /**\n   * @param {Token} token\n   * @returns {ListItem}\n   */\n  function listItem(token) {\n    return {\n      type: 'listItem',\n      spread: token._spread,\n      checked: null,\n      children: []\n    }\n  }\n\n  /** @returns {Paragraph} */\n  function paragraph() {\n    return {type: 'paragraph', children: []}\n  }\n\n  /** @returns {Strong} */\n  function strong() {\n    return {type: 'strong', children: []}\n  }\n\n  /** @returns {Text} */\n  function text() {\n    return {type: 'text', value: ''}\n  }\n\n  /** @returns {ThematicBreak} */\n  function thematicBreak() {\n    return {type: 'thematicBreak'}\n  }\n}\n\n/**\n * Copy a point-like value.\n *\n * @param {Point} d\n *   Point-like value.\n * @returns {Point}\n *   unist point.\n */\nfunction point(d) {\n  return {line: d.line, column: d.column, offset: d.offset}\n}\n\n/**\n * @param {Config} combined\n * @param {Array<Extension | Array<Extension>>} extensions\n * @returns {void}\n */\nfunction configure(combined, extensions) {\n  let index = -1\n\n  while (++index < extensions.length) {\n    const value = extensions[index]\n\n    if (Array.isArray(value)) {\n      configure(combined, value)\n    } else {\n      extension(combined, value)\n    }\n  }\n}\n\n/**\n * @param {Config} combined\n * @param {Extension} extension\n * @returns {void}\n */\nfunction extension(combined, extension) {\n  /** @type {keyof Extension} */\n  let key\n\n  for (key in extension) {\n    if (own.call(extension, key)) {\n      if (key === 'canContainEols') {\n        const right = extension[key]\n        if (right) {\n          combined[key].push(...right)\n        }\n      } else if (key === 'transforms') {\n        const right = extension[key]\n        if (right) {\n          combined[key].push(...right)\n        }\n      } else if (key === 'enter' || key === 'exit') {\n        const right = extension[key]\n        if (right) {\n          Object.assign(combined[key], right)\n        }\n      }\n    }\n  }\n}\n\n/** @type {OnEnterError} */\nfunction defaultOnError(left, right) {\n  if (left) {\n    throw new Error(\n      'Cannot close `' +\n        left.type +\n        '` (' +\n        stringifyPosition({start: left.start, end: left.end}) +\n        '): a different token (`' +\n        right.type +\n        '`, ' +\n        stringifyPosition({start: right.start, end: right.end}) +\n        ') is open'\n    )\n  } else {\n    throw new Error(\n      'Cannot close document, a token (`' +\n        right.type +\n        '`, ' +\n        stringifyPosition({start: right.start, end: right.end}) +\n        ') is still open'\n    )\n  }\n}\n","/**\n * @typedef {import('mdast').BlockContent} BlockContent\n * @typedef {import('mdast').FootnoteDefinition} FootnoteDefinition\n * @typedef {import('mdast').Link} Link\n * @typedef {import('mdast').ListItem} ListItem\n * @typedef {import('mdast').Paragraph} Paragraph\n * @typedef {import('./index.js').H} H\n */\n\nimport {thematicBreak} from './handlers/thematic-break.js'\nimport {list} from './handlers/list.js'\nimport {wrap} from './wrap.js'\n\n/**\n * @param {H} h\n */\nexport function footer(h) {\n  const footnoteById = h.footnoteById\n  const footnoteOrder = h.footnoteOrder\n  let index = -1\n  /** @type {Array.<ListItem>} */\n  const listItems = []\n\n  while (++index < footnoteOrder.length) {\n    const def = footnoteById[footnoteOrder[index].toUpperCase()]\n\n    if (!def) {\n      continue\n    }\n\n    const marker = String(index + 1)\n    const content = [...def.children]\n    /** @type {Link} */\n    const backReference = {\n      type: 'link',\n      url: '#fnref' + marker,\n      data: {hProperties: {className: ['footnote-back'], role: 'doc-backlink'}},\n      children: [{type: 'text', value: '↩'}]\n    }\n    const tail = content[content.length - 1]\n\n    if (tail && tail.type === 'paragraph') {\n      tail.children.push(backReference)\n    } else {\n      // @ts-expect-error Indeed, link directly added in block content.\n      // Which we do because that way at least the handlers will be called\n      // for the other HTML we’re generating (as markdown).\n      content.push(backReference)\n    }\n\n    listItems.push({\n      type: 'listItem',\n      data: {hProperties: {id: 'fn' + marker, role: 'doc-endnote'}},\n      children: content,\n      position: def.position\n    })\n  }\n\n  if (listItems.length === 0) {\n    return null\n  }\n\n  return h(\n    null,\n    'section',\n    {className: ['footnotes'], role: 'doc-endnotes'},\n    wrap(\n      [\n        thematicBreak(h),\n        list(h, {type: 'list', ordered: true, children: listItems})\n      ],\n      true\n    )\n  )\n}\n","/**\n * @typedef {import('mdast').Blockquote} Blockquote\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport {wrap} from '../wrap.js'\nimport {all} from '../traverse.js'\n\n/**\n * @type {Handler}\n * @param {Blockquote} node\n */\nexport function blockquote(h, node) {\n  return h(node, 'blockquote', wrap(all(h, node), true))\n}\n","/**\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').Text} Text\n * @typedef {import('mdast').Break} Break\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport {u} from 'unist-builder'\n\n/**\n * @type {Handler}\n * @param {Break} node\n * @returns {Array<Element|Text>}\n */\nexport function hardBreak(h, node) {\n  return [h(node, 'br'), u('text', '\\n')]\n}\n","/**\n * @typedef {import('mdast').Code} Code\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport {u} from 'unist-builder'\n\n/**\n * @type {Handler}\n * @param {Code} node\n */\nexport function code(h, node) {\n  const value = node.value ? node.value + '\\n' : ''\n  // To do: next major, use `node.lang` w/o regex, the splitting’s been going\n  // on for years in remark now.\n  const lang = node.lang && node.lang.match(/^[^ \\t]+(?=[ \\t]|$)/)\n  /** @type {Properties} */\n  const props = {}\n\n  if (lang) {\n    props.className = ['language-' + lang]\n  }\n\n  const code = h(node, 'code', props, [u('text', value)])\n\n  if (node.meta) {\n    code.data = {meta: node.meta}\n  }\n\n  return h(node.position, 'pre', [code])\n}\n","/**\n * @typedef {import('mdast').Delete} Delete\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport {all} from '../traverse.js'\n\n/**\n * @type {Handler}\n * @param {Delete} node\n */\nexport function strikethrough(h, node) {\n  return h(node, 'del', all(h, node))\n}\n","/**\n * @typedef {import('mdast').Emphasis} Emphasis\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport {all} from '../traverse.js'\n\n/**\n * @type {Handler}\n * @param {Emphasis} node\n */\nexport function emphasis(h, node) {\n  return h(node, 'em', all(h, node))\n}\n","/**\n * @typedef {import('mdast').FootnoteReference} FootnoteReference\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport {u} from 'unist-builder'\n\n/**\n * @type {Handler}\n * @param {FootnoteReference} node\n */\nexport function footnoteReference(h, node) {\n  const footnoteOrder = h.footnoteOrder\n  const identifier = String(node.identifier)\n  const index = footnoteOrder.indexOf(identifier)\n  const marker = String(\n    index === -1 ? footnoteOrder.push(identifier) : index + 1\n  )\n\n  return h(\n    node,\n    'a',\n    {\n      href: '#fn' + marker,\n      className: ['footnote-ref'],\n      id: 'fnref' + marker,\n      role: 'doc-noteref'\n    },\n    [h(node.position, 'sup', [u('text', marker)])]\n  )\n}\n","/**\n * @typedef {import('mdast').Footnote} Footnote\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport {footnoteReference} from './footnote-reference.js'\n\n/**\n * @type {Handler}\n * @param {Footnote} node\n */\nexport function footnote(h, node) {\n  const footnoteById = h.footnoteById\n  const footnoteOrder = h.footnoteOrder\n  let no = 1\n\n  while (no in footnoteById) no++\n\n  const identifier = String(no)\n\n  // No need to check if `identifier` exists in `footnoteOrder`, it’s guaranteed\n  // to not exist because we just generated it.\n  footnoteOrder.push(identifier)\n\n  footnoteById[identifier] = {\n    type: 'footnoteDefinition',\n    identifier,\n    children: [{type: 'paragraph', children: node.children}],\n    position: node.position\n  }\n\n  return footnoteReference(h, {\n    type: 'footnoteReference',\n    identifier,\n    position: node.position\n  })\n}\n","/**\n * @typedef {import('mdast').Heading} Heading\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport {all} from '../traverse.js'\n\n/**\n * @type {Handler}\n * @param {Heading} node\n */\nexport function heading(h, node) {\n  return h(node, 'h' + node.depth, all(h, node))\n}\n","/**\n * @typedef {import('mdast').HTML} HTML\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport {u} from 'unist-builder'\n\n/**\n * Return either a `raw` node in dangerous mode, otherwise nothing.\n *\n * @type {Handler}\n * @param {HTML} node\n */\nexport function html(h, node) {\n  return h.dangerous ? h.augment(node, u('raw', node.value)) : null\n}\n","/**\n * @typedef {import('mdast').ImageReference} ImageReference\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport normalize from 'mdurl/encode.js'\nimport {revert} from '../revert.js'\n\n/**\n * @type {Handler}\n * @param {ImageReference} node\n */\nexport function imageReference(h, node) {\n  const def = h.definition(node.identifier)\n\n  if (!def) {\n    return revert(h, node)\n  }\n\n  /** @type {Properties} */\n  const props = {src: normalize(def.url || ''), alt: node.alt}\n\n  if (def.title !== null && def.title !== undefined) {\n    props.title = def.title\n  }\n\n  return h(node, 'img', props)\n}\n","/**\n * @typedef {import('mdast').Image} Image\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport normalize from 'mdurl/encode.js'\n\n/**\n * @type {Handler}\n * @param {Image} node\n */\nexport function image(h, node) {\n  /** @type {Properties} */\n  const props = {src: normalize(node.url), alt: node.alt}\n\n  if (node.title !== null && node.title !== undefined) {\n    props.title = node.title\n  }\n\n  return h(node, 'img', props)\n}\n","import {blockquote} from './blockquote.js'\nimport {hardBreak} from './break.js'\nimport {code} from './code.js'\nimport {strikethrough} from './delete.js'\nimport {emphasis} from './emphasis.js'\nimport {footnoteReference} from './footnote-reference.js'\nimport {footnote} from './footnote.js'\nimport {heading} from './heading.js'\nimport {html} from './html.js'\nimport {imageReference} from './image-reference.js'\nimport {image} from './image.js'\nimport {inlineCode} from './inline-code.js'\nimport {linkReference} from './link-reference.js'\nimport {link} from './link.js'\nimport {listItem} from './list-item.js'\nimport {list} from './list.js'\nimport {paragraph} from './paragraph.js'\nimport {root} from './root.js'\nimport {strong} from './strong.js'\nimport {table} from './table.js'\nimport {text} from './text.js'\nimport {thematicBreak} from './thematic-break.js'\n\nexport const handlers = {\n  blockquote,\n  break: hardBreak,\n  code,\n  delete: strikethrough,\n  emphasis,\n  footnoteReference,\n  footnote,\n  heading,\n  html,\n  imageReference,\n  image,\n  inlineCode,\n  linkReference,\n  link,\n  listItem,\n  list,\n  paragraph,\n  root,\n  strong,\n  table,\n  text,\n  thematicBreak,\n  toml: ignore,\n  yaml: ignore,\n  definition: ignore,\n  footnoteDefinition: ignore\n}\n\n// Return nothing for nodes that are ignored.\nfunction ignore() {\n  return null\n}\n","/**\n * @typedef {import('mdast').InlineCode} InlineCode\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport {u} from 'unist-builder'\n\n/**\n * @type {Handler}\n * @param {InlineCode} node\n */\nexport function inlineCode(h, node) {\n  return h(node, 'code', [u('text', node.value.replace(/\\r?\\n|\\r/g, ' '))])\n}\n","/**\n * @typedef {import('mdast').LinkReference} LinkReference\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport normalize from 'mdurl/encode.js'\nimport {revert} from '../revert.js'\nimport {all} from '../traverse.js'\n\n/**\n * @type {Handler}\n * @param {LinkReference} node\n */\nexport function linkReference(h, node) {\n  const def = h.definition(node.identifier)\n\n  if (!def) {\n    return revert(h, node)\n  }\n\n  /** @type {Properties} */\n  const props = {href: normalize(def.url || '')}\n\n  if (def.title !== null && def.title !== undefined) {\n    props.title = def.title\n  }\n\n  return h(node, 'a', props, all(h, node))\n}\n","/**\n * @typedef {import('mdast').Link} Link\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport normalize from 'mdurl/encode.js'\nimport {all} from '../traverse.js'\n\n/**\n * @type {Handler}\n * @param {Link} node\n */\nexport function link(h, node) {\n  /** @type {Properties} */\n  const props = {href: normalize(node.url)}\n\n  if (node.title !== null && node.title !== undefined) {\n    props.title = node.title\n  }\n\n  return h(node, 'a', props, all(h, node))\n}\n","/**\n * @typedef {import('mdast').ListItem} ListItem\n * @typedef {import('mdast').List} List\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('hast').Element} Element\n * @typedef {import('../index.js').Handler} Handler\n * @typedef {import('../index.js').Content} Content\n */\n\nimport {u} from 'unist-builder'\nimport {all} from '../traverse.js'\n\n/**\n * @type {Handler}\n * @param {ListItem} node\n * @param {List} parent\n */\nexport function listItem(h, node, parent) {\n  const result = all(h, node)\n  const loose = parent ? listLoose(parent) : listItemLoose(node)\n  /** @type {Properties} */\n  const props = {}\n  /** @type {Array.<Content>} */\n  const wrapped = []\n\n  if (typeof node.checked === 'boolean') {\n    /** @type {Element} */\n    let paragraph\n\n    if (\n      result[0] &&\n      result[0].type === 'element' &&\n      result[0].tagName === 'p'\n    ) {\n      paragraph = result[0]\n    } else {\n      paragraph = h(null, 'p', [])\n      result.unshift(paragraph)\n    }\n\n    if (paragraph.children.length > 0) {\n      paragraph.children.unshift(u('text', ' '))\n    }\n\n    paragraph.children.unshift(\n      h(null, 'input', {\n        type: 'checkbox',\n        checked: node.checked,\n        disabled: true\n      })\n    )\n\n    // According to github-markdown-css, this class hides bullet.\n    // See: <https://github.com/sindresorhus/github-markdown-css>.\n    props.className = ['task-list-item']\n  }\n\n  let index = -1\n\n  while (++index < result.length) {\n    const child = result[index]\n\n    // Add eols before nodes, except if this is a loose, first paragraph.\n    if (\n      loose ||\n      index !== 0 ||\n      child.type !== 'element' ||\n      child.tagName !== 'p'\n    ) {\n      wrapped.push(u('text', '\\n'))\n    }\n\n    if (child.type === 'element' && child.tagName === 'p' && !loose) {\n      wrapped.push(...child.children)\n    } else {\n      wrapped.push(child)\n    }\n  }\n\n  const tail = result[result.length - 1]\n\n  // Add a final eol.\n  if (tail && (loose || !('tagName' in tail) || tail.tagName !== 'p')) {\n    wrapped.push(u('text', '\\n'))\n  }\n\n  return h(node, 'li', props, wrapped)\n}\n\n/**\n * @param {List} node\n * @return {Boolean}\n */\nfunction listLoose(node) {\n  let loose = node.spread\n  const children = node.children\n  let index = -1\n\n  while (!loose && ++index < children.length) {\n    loose = listItemLoose(children[index])\n  }\n\n  return Boolean(loose)\n}\n\n/**\n * @param {ListItem} node\n * @return {Boolean}\n */\nfunction listItemLoose(node) {\n  const spread = node.spread\n\n  return spread === undefined || spread === null\n    ? node.children.length > 1\n    : spread\n}\n","/**\n * @typedef {import('mdast').List} List\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport {wrap} from '../wrap.js'\nimport {all} from '../traverse.js'\n\n/**\n * @type {Handler}\n * @param {List} node\n * @returns {Element}\n */\nexport function list(h, node) {\n  /** @type {Properties} */\n  const props = {}\n  const name = node.ordered ? 'ol' : 'ul'\n  const items = all(h, node)\n  let index = -1\n\n  if (typeof node.start === 'number' && node.start !== 1) {\n    props.start = node.start\n  }\n\n  // Like GitHub, add a class for custom styling.\n  while (++index < items.length) {\n    const item = items[index]\n\n    if (\n      item.type === 'element' &&\n      item.tagName === 'li' &&\n      item.properties &&\n      Array.isArray(item.properties.className) &&\n      item.properties.className.includes('task-list-item')\n    ) {\n      props.className = ['contains-task-list']\n      break\n    }\n  }\n\n  return h(node, name, props, wrap(items, true))\n}\n","/**\n * @typedef {import('mdast').Paragraph} Paragraph\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport {all} from '../traverse.js'\n\n/**\n * @type {Handler}\n * @param {Paragraph} node\n */\nexport function paragraph(h, node) {\n  return h(node, 'p', all(h, node))\n}\n","/**\n * @typedef {import('mdast').Root} Root\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport {u} from 'unist-builder'\nimport {all} from '../traverse.js'\nimport {wrap} from '../wrap.js'\n\n/**\n * @type {Handler}\n * @param {Root} node\n */\nexport function root(h, node) {\n  // @ts-expect-error `root`s are also fine.\n  return h.augment(node, u('root', wrap(all(h, node))))\n}\n","/**\n * @typedef {import('mdast').Strong} Strong\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport {all} from '../traverse.js'\n\n/**\n * @type {Handler}\n * @param {Strong} node\n */\nexport function strong(h, node) {\n  return h(node, 'strong', all(h, node))\n}\n","/**\n * @typedef {import('mdast').Table} Table\n * @typedef {import('mdast').TableCell} TableCell\n * @typedef {import('hast').Element} Element\n * @typedef {import('../index.js').Handler} Handler\n * @typedef {import('../index.js').Content} Content\n */\n\nimport {pointStart, pointEnd} from 'unist-util-position'\nimport {wrap} from '../wrap.js'\nimport {all} from '../traverse.js'\n\n/**\n * @type {Handler}\n * @param {Table} node\n */\nexport function table(h, node) {\n  const rows = node.children\n  let index = -1\n  const align = node.align || []\n  /** @type {Array.<Element>} */\n  const result = []\n\n  while (++index < rows.length) {\n    const row = rows[index].children\n    const name = index === 0 ? 'th' : 'td'\n    let pos = node.align ? align.length : row.length\n    /** @type {Array.<Content>} */\n    const out = []\n\n    while (pos--) {\n      const cell = row[pos]\n      out[pos] = h(cell, name, {align: align[pos]}, cell ? all(h, cell) : [])\n    }\n\n    result[index] = h(rows[index], 'tr', wrap(out, true))\n  }\n\n  return h(\n    node,\n    'table',\n    wrap(\n      [h(result[0].position, 'thead', wrap([result[0]], true))].concat(\n        result[1]\n          ? h(\n              {\n                start: pointStart(result[1]),\n                end: pointEnd(result[result.length - 1])\n              },\n              'tbody',\n              wrap(result.slice(1), true)\n            )\n          : []\n      ),\n      true\n    )\n  )\n}\n","/**\n * @typedef {import('mdast').Text} Text\n * @typedef {import('../index.js').Handler} Handler\n */\n\nimport {u} from 'unist-builder'\n\n/**\n * @type {Handler}\n * @param {Text} node\n */\nexport function text(h, node) {\n  return h.augment(\n    node,\n    u('text', String(node.value).replace(/[ \\t]*(\\r?\\n|\\r)[ \\t]*/g, '$1'))\n  )\n}\n","/**\n * @typedef {import('mdast').ThematicBreak} ThematicBreak\n * @typedef {import('hast').Element} Element\n * @typedef {import('../index.js').Handler} Handler\n */\n\n/**\n * @type {Handler}\n * @param {ThematicBreak} [node]\n * @returns {Element}\n */\nexport function thematicBreak(h, node) {\n  return h(node, 'hr')\n}\n","/**\n * @typedef {import('mdast').Root|import('mdast').Parent['children'][number]} MdastNode\n * @typedef {import('hast').Root|import('hast').Parent['children'][number]} HastNode\n * @typedef {import('mdast').Parent} Parent\n * @typedef {import('mdast').Definition} Definition\n * @typedef {import('mdast').FootnoteDefinition} FootnoteDefinition\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('hast').Text} Text\n * @typedef {import('hast').Comment} Comment\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').Root} Root\n * @typedef {import('hast').ElementContent} Content\n * @typedef {import('unist-util-position').PositionLike} PositionLike\n *\n * @typedef EmbeddedHastFields\n * @property {string} [hName] Defines the tag name of an element\n * @property {Properties} [hProperties] Defines the properties of an element\n * @property {Array.<Content>} [hChildren] Defines the (hast) children of an element\n *\n * @typedef {Object.<string, unknown> & EmbeddedHastFields} Data unist data with embedded hast fields\n *\n * @typedef {MdastNode & {data?: Data}} NodeWithData unist node with embedded hast data\n *\n * @callback Handler\n * @param {H} h Handle context\n * @param {any} node mdast node to handle\n * @param {Parent|null} parent Parent of `node`\n * @returns {Content|Array.<Content>|null|undefined} hast node\n *\n * @callback HFunctionProps\n * @param {MdastNode|PositionLike|null|undefined} node mdast node or unist position\n * @param {string} tagName HTML tag name\n * @param {Properties} props Properties\n * @param {Array.<Content>?} [children] hast content\n * @returns {Element}\n *\n * @callback HFunctionNoProps\n * @param {MdastNode|PositionLike|null|undefined} node mdast node or unist position\n * @param {string} tagName HTML tag name\n * @param {Array.<Content>?} [children] hast content\n * @returns {Element}\n *\n * @typedef HFields\n * @property {boolean} dangerous Whether HTML is allowed\n * @property {(identifier: string) => Definition|null} definition Definition cache\n * @property {Object.<string, FootnoteDefinition>} footnoteById Footnote cache\n * @property {Array.<string>} footnoteOrder Order in which footnotes occur\n * @property {Handlers} handlers Applied handlers\n * @property {Handler} unknownHandler Handler for any none not in `passThrough` or otherwise handled\n * @property {(left: NodeWithData|PositionLike|null|undefined, right: Content) => Content} augment Like `h` but lower-level and usable on non-elements.\n * @property {Array.<string>} passThrough List of node types to pass through untouched (except for their children).\n *\n * @typedef Options\n * @property {boolean} [allowDangerousHtml=false] Whether to allow `html` nodes and inject them as `raw` HTML\n * @property {Handlers} [handlers] Object mapping mdast nodes to functions handling them\n * @property {Array.<string>} [passThrough] List of custom mdast node types to pass through (keep) in hast\n * @property {Handler} [unknownHandler] Handler for all unknown nodes.\n *\n * @typedef {Record.<string, Handler>} Handlers Map of node types to handlers\n * @typedef {HFunctionProps & HFunctionNoProps & HFields} H Handle context\n */\n\nimport {u} from 'unist-builder'\nimport {visit} from 'unist-util-visit'\nimport {pointStart, pointEnd} from 'unist-util-position'\nimport {generated} from 'unist-util-generated'\nimport {definitions} from 'mdast-util-definitions'\nimport {one} from './traverse.js'\nimport {footer} from './footer.js'\nimport {handlers} from './handlers/index.js'\n\nconst own = {}.hasOwnProperty\n\n/**\n * Factory to transform.\n * @param {MdastNode} tree mdast node\n * @param {Options} [options] Configuration\n * @returns {H} `h` function\n */\nfunction factory(tree, options) {\n  const settings = options || {}\n  const dangerous = settings.allowDangerousHtml || false\n  /** @type {Object.<string, FootnoteDefinition>} */\n  const footnoteById = {}\n\n  h.dangerous = dangerous\n  h.definition = definitions(tree)\n  h.footnoteById = footnoteById\n  /** @type {Array.<string>} */\n  h.footnoteOrder = []\n  h.augment = augment\n  h.handlers = {...handlers, ...settings.handlers}\n  h.unknownHandler = settings.unknownHandler\n  h.passThrough = settings.passThrough\n\n  visit(tree, 'footnoteDefinition', (definition) => {\n    const id = String(definition.identifier).toUpperCase()\n\n    // Mimick CM behavior of link definitions.\n    // See: <https://github.com/syntax-tree/mdast-util-definitions/blob/8290999/index.js#L26>.\n    if (!own.call(footnoteById, id)) {\n      footnoteById[id] = definition\n    }\n  })\n\n  // @ts-expect-error Hush, it’s fine!\n  return h\n\n  /**\n   * Finalise the created `right`, a hast node, from `left`, an mdast node.\n   * @param {(NodeWithData|PositionLike)?} left\n   * @param {Content} right\n   * @returns {Content}\n   */\n  function augment(left, right) {\n    // Handle `data.hName`, `data.hProperties, `data.hChildren`.\n    if (left && 'data' in left && left.data) {\n      /** @type {Data} */\n      const data = left.data\n\n      if (data.hName) {\n        if (right.type !== 'element') {\n          right = {\n            type: 'element',\n            tagName: '',\n            properties: {},\n            children: []\n          }\n        }\n\n        right.tagName = data.hName\n      }\n\n      if (right.type === 'element' && data.hProperties) {\n        right.properties = {...right.properties, ...data.hProperties}\n      }\n\n      if ('children' in right && right.children && data.hChildren) {\n        right.children = data.hChildren\n      }\n    }\n\n    if (left) {\n      const ctx = 'type' in left ? left : {position: left}\n\n      if (!generated(ctx)) {\n        right.position = {start: pointStart(ctx), end: pointEnd(ctx)}\n      }\n    }\n\n    return right\n  }\n\n  /**\n   * Create an element for `node`.\n   *\n   * @type {HFunctionProps}\n   */\n  function h(node, tagName, props, children) {\n    if (Array.isArray(props)) {\n      children = props\n      props = {}\n    }\n\n    // @ts-expect-error augmenting an element yields an element.\n    return augment(node, {\n      type: 'element',\n      tagName,\n      properties: props || {},\n      children: children || []\n    })\n  }\n}\n\n/**\n * Transform `tree` (an mdast node) to a hast node.\n *\n * @param {MdastNode} tree mdast node\n * @param {Options} [options] Configuration\n * @returns {HastNode|null|undefined} hast node\n */\nexport function toHast(tree, options) {\n  const h = factory(tree, options)\n  const node = one(h, tree, null)\n  const foot = footer(h)\n\n  if (foot) {\n    // @ts-expect-error If there’s a footer, there were definitions, meaning block\n    // content.\n    // So assume `node` is a parent node.\n    node.children.push(u('text', '\\n'), foot)\n  }\n\n  return Array.isArray(node) ? {type: 'root', children: node} : node\n}\n","/**\n * @typedef {import('mdast').LinkReference} LinkReference\n * @typedef {import('mdast').ImageReference} ImageReference\n * @typedef {import('./index.js').Handler} Handler\n * @typedef {import('./index.js').Content} Content\n */\n\nimport {u} from 'unist-builder'\nimport {all} from './traverse.js'\n\n/**\n * Return the content of a reference without definition as plain text.\n *\n * @type {Handler}\n * @param {ImageReference|LinkReference} node\n * @returns {Content|Array.<Content>}\n */\nexport function revert(h, node) {\n  const subtype = node.referenceType\n  let suffix = ']'\n\n  if (subtype === 'collapsed') {\n    suffix += '[]'\n  } else if (subtype === 'full') {\n    suffix += '[' + (node.label || node.identifier) + ']'\n  }\n\n  if (node.type === 'imageReference') {\n    return u('text', '![' + node.alt + suffix)\n  }\n\n  const contents = all(h, node)\n  const head = contents[0]\n\n  if (head && head.type === 'text') {\n    head.value = '[' + head.value\n  } else {\n    contents.unshift(u('text', '['))\n  }\n\n  const tail = contents[contents.length - 1]\n\n  if (tail && tail.type === 'text') {\n    tail.value += suffix\n  } else {\n    contents.push(u('text', suffix))\n  }\n\n  return contents\n}\n","/**\n * @typedef {import('mdast').Root|import('mdast').Parent['children'][number]} MdastNode\n * @typedef {import('./index.js').H} H\n * @typedef {import('./index.js').Handler} Handler\n * @typedef {import('./index.js').Content} Content\n */\n\nimport {u} from 'unist-builder'\n\nconst own = {}.hasOwnProperty\n\n/**\n * Transform an unknown node.\n * @type {Handler}\n * @param {MdastNode} node\n */\nfunction unknown(h, node) {\n  const data = node.data || {}\n\n  if (\n    'value' in node &&\n    !(\n      own.call(data, 'hName') ||\n      own.call(data, 'hProperties') ||\n      own.call(data, 'hChildren')\n    )\n  ) {\n    return h.augment(node, u('text', node.value))\n  }\n\n  return h(node, 'div', all(h, node))\n}\n\n/**\n * @type {Handler}\n * @param {MdastNode} node\n */\nexport function one(h, node, parent) {\n  const type = node && node.type\n  /** @type {Handler} */\n  let fn\n\n  // Fail on non-nodes.\n  if (!type) {\n    throw new Error('Expected node, got `' + node + '`')\n  }\n\n  if (own.call(h.handlers, type)) {\n    fn = h.handlers[type]\n  } else if (h.passThrough && h.passThrough.includes(type)) {\n    fn = returnNode\n  } else {\n    fn = h.unknownHandler\n  }\n\n  return (typeof fn === 'function' ? fn : unknown)(h, node, parent)\n}\n\n/**\n * @type {Handler}\n * @param {MdastNode} node\n */\nfunction returnNode(h, node) {\n  // @ts-expect-error: Pass through custom node.\n  return 'children' in node ? {...node, children: all(h, node)} : node\n}\n\n/**\n * @param {H} h\n * @param {MdastNode} parent\n */\nexport function all(h, parent) {\n  /** @type {Array.<Content>} */\n  const values = []\n\n  if ('children' in parent) {\n    const nodes = parent.children\n    let index = -1\n\n    while (++index < nodes.length) {\n      const result = one(h, nodes[index], parent)\n\n      if (result) {\n        if (index && nodes[index - 1].type === 'break') {\n          if (!Array.isArray(result) && result.type === 'text') {\n            result.value = result.value.replace(/^\\s+/, '')\n          }\n\n          if (!Array.isArray(result) && result.type === 'element') {\n            const head = result.children[0]\n\n            if (head && head.type === 'text') {\n              head.value = head.value.replace(/^\\s+/, '')\n            }\n          }\n        }\n\n        if (Array.isArray(result)) {\n          values.push(...result)\n        } else {\n          values.push(result)\n        }\n      }\n    }\n  }\n\n  return values\n}\n","/**\n * @typedef {import('./index.js').Content} Content\n */\n\nimport {u} from 'unist-builder'\n\n/**\n * Wrap `nodes` with line feeds between each entry.\n * Optionally adds line feeds at the start and end.\n *\n * @param {Array.<Content>} nodes\n * @param {boolean} [loose=false]\n * @returns {Array.<Content>}\n */\nexport function wrap(nodes, loose) {\n  /** @type {Array.<Content>} */\n  const result = []\n  let index = -1\n\n  if (loose) {\n    result.push(u('text', '\\n'))\n  }\n\n  while (++index < nodes.length) {\n    if (index) result.push(u('text', '\\n'))\n    result.push(nodes[index])\n  }\n\n  if (loose && nodes.length > 0) {\n    result.push(u('text', '\\n'))\n  }\n\n  return result\n}\n","/**\n * @typedef {import('mdast').Root|import('mdast').Content} Node\n *\n * @typedef Options\n *   Configuration (optional).\n * @property {boolean | null | undefined} [includeImageAlt=true]\n *   Whether to use `alt` for `image`s.\n * @property {boolean | null | undefined} [includeHtml=true]\n *   Whether to use `value` of HTML.\n */\n\n/** @type {Options} */\nconst emptyOptions = {}\n\n/**\n * Get the text content of a node or list of nodes.\n *\n * Prefers the node’s plain-text fields, otherwise serializes its children,\n * and if the given value is an array, serialize the nodes in it.\n *\n * @param {unknown} value\n *   Thing to serialize, typically `Node`.\n * @param {Options | null | undefined} [options]\n *   Configuration (optional).\n * @returns {string}\n *   Serialized `value`.\n */\nexport function toString(value, options) {\n  const settings = options || emptyOptions\n  const includeImageAlt =\n    typeof settings.includeImageAlt === 'boolean'\n      ? settings.includeImageAlt\n      : true\n  const includeHtml =\n    typeof settings.includeHtml === 'boolean' ? settings.includeHtml : true\n\n  return one(value, includeImageAlt, includeHtml)\n}\n\n/**\n * One node or several nodes.\n *\n * @param {unknown} value\n *   Thing to serialize.\n * @param {boolean} includeImageAlt\n *   Include image `alt`s.\n * @param {boolean} includeHtml\n *   Include HTML.\n * @returns {string}\n *   Serialized node.\n */\nfunction one(value, includeImageAlt, includeHtml) {\n  if (node(value)) {\n    if ('value' in value) {\n      return value.type === 'html' && !includeHtml ? '' : value.value\n    }\n\n    if (includeImageAlt && 'alt' in value && value.alt) {\n      return value.alt\n    }\n\n    if ('children' in value) {\n      return all(value.children, includeImageAlt, includeHtml)\n    }\n  }\n\n  if (Array.isArray(value)) {\n    return all(value, includeImageAlt, includeHtml)\n  }\n\n  return ''\n}\n\n/**\n * Serialize a list of nodes.\n *\n * @param {Array<unknown>} values\n *   Thing to serialize.\n * @param {boolean} includeImageAlt\n *   Include image `alt`s.\n * @param {boolean} includeHtml\n *   Include HTML.\n * @returns {string}\n *   Serialized nodes.\n */\nfunction all(values, includeImageAlt, includeHtml) {\n  /** @type {Array<string>} */\n  const result = []\n  let index = -1\n\n  while (++index < values.length) {\n    result[index] = one(values[index], includeImageAlt, includeHtml)\n  }\n\n  return result.join('')\n}\n\n/**\n * Check if `value` looks like a node.\n *\n * @param {unknown} value\n *   Thing.\n * @returns {value is Node}\n *   Whether `value` is a node.\n */\nfunction node(value) {\n  return Boolean(value && typeof value === 'object')\n}\n","\n'use strict';\n\n\nvar encodeCache = {};\n\n\n// Create a lookup array where anything but characters in `chars` string\n// and alphanumeric chars is percent-encoded.\n//\nfunction getEncodeCache(exclude) {\n  var i, ch, cache = encodeCache[exclude];\n  if (cache) { return cache; }\n\n  cache = encodeCache[exclude] = [];\n\n  for (i = 0; i < 128; i++) {\n    ch = String.fromCharCode(i);\n\n    if (/^[0-9a-z]$/i.test(ch)) {\n      // always allow unencoded alphanumeric characters\n      cache.push(ch);\n    } else {\n      cache.push('%' + ('0' + i.toString(16).toUpperCase()).slice(-2));\n    }\n  }\n\n  for (i = 0; i < exclude.length; i++) {\n    cache[exclude.charCodeAt(i)] = exclude[i];\n  }\n\n  return cache;\n}\n\n\n// Encode unsafe characters with percent-encoding, skipping already\n// encoded sequences.\n//\n//  - string       - string to encode\n//  - exclude      - list of characters to ignore (in addition to a-zA-Z0-9)\n//  - keepEscaped  - don't encode '%' in a correct escape sequence (default: true)\n//\nfunction encode(string, exclude, keepEscaped) {\n  var i, l, code, nextCode, cache,\n      result = '';\n\n  if (typeof exclude !== 'string') {\n    // encode(string, keepEscaped)\n    keepEscaped  = exclude;\n    exclude = encode.defaultChars;\n  }\n\n  if (typeof keepEscaped === 'undefined') {\n    keepEscaped = true;\n  }\n\n  cache = getEncodeCache(exclude);\n\n  for (i = 0, l = string.length; i < l; i++) {\n    code = string.charCodeAt(i);\n\n    if (keepEscaped && code === 0x25 /* % */ && i + 2 < l) {\n      if (/^[0-9a-f]{2}$/i.test(string.slice(i + 1, i + 3))) {\n        result += string.slice(i, i + 3);\n        i += 2;\n        continue;\n      }\n    }\n\n    if (code < 128) {\n      result += cache[code];\n      continue;\n    }\n\n    if (code >= 0xD800 && code <= 0xDFFF) {\n      if (code >= 0xD800 && code <= 0xDBFF && i + 1 < l) {\n        nextCode = string.charCodeAt(i + 1);\n        if (nextCode >= 0xDC00 && nextCode <= 0xDFFF) {\n          result += encodeURIComponent(string[i] + string[i + 1]);\n          i++;\n          continue;\n        }\n      }\n      result += '%EF%BF%BD';\n      continue;\n    }\n\n    result += encodeURIComponent(string[i]);\n  }\n\n  return result;\n}\n\nencode.defaultChars   = \";/?:@&=+$,-_.!~*'()#\";\nencode.componentChars = \"-_.!~*'()\";\n\n\nmodule.exports = encode;\n","var safeIsNaN = Number.isNaN ||\n    function ponyfill(value) {\n        return typeof value === 'number' && value !== value;\n    };\nfunction isEqual(first, second) {\n    if (first === second) {\n        return true;\n    }\n    if (safeIsNaN(first) && safeIsNaN(second)) {\n        return true;\n    }\n    return false;\n}\nfunction areInputsEqual(newInputs, lastInputs) {\n    if (newInputs.length !== lastInputs.length) {\n        return false;\n    }\n    for (var i = 0; i < newInputs.length; i++) {\n        if (!isEqual(newInputs[i], lastInputs[i])) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction memoizeOne(resultFn, isEqual) {\n    if (isEqual === void 0) { isEqual = areInputsEqual; }\n    var cache = null;\n    function memoized() {\n        var newArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            newArgs[_i] = arguments[_i];\n        }\n        if (cache && cache.lastThis === this && isEqual(newArgs, cache.lastArgs)) {\n            return cache.lastResult;\n        }\n        var lastResult = resultFn.apply(this, newArgs);\n        cache = {\n            lastResult: lastResult,\n            lastArgs: newArgs,\n            lastThis: this,\n        };\n        return lastResult;\n    }\n    memoized.clear = function clear() {\n        cache = null;\n    };\n    return memoized;\n}\n\nexport { memoizeOne as default };\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').Event} Event\n * @typedef {import('micromark-util-types').Point} Point\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {push, splice} from 'micromark-util-chunked'\nimport {classifyCharacter} from 'micromark-util-classify-character'\nimport {resolveAll} from 'micromark-util-resolve-all'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {constants} from 'micromark-util-symbol/constants.js'\nimport {types} from 'micromark-util-symbol/types.js'\nimport {ok as assert} from 'uvu/assert'\n\n/** @type {Construct} */\nexport const attention = {\n  name: 'attention',\n  tokenize: tokenizeAttention,\n  resolveAll: resolveAllAttention\n}\n\n/**\n * Take all events and resolve attention to emphasis or strong.\n *\n * @type {Resolver}\n */\nfunction resolveAllAttention(events, context) {\n  let index = -1\n  /** @type {number} */\n  let open\n  /** @type {Token} */\n  let group\n  /** @type {Token} */\n  let text\n  /** @type {Token} */\n  let openingSequence\n  /** @type {Token} */\n  let closingSequence\n  /** @type {number} */\n  let use\n  /** @type {Array<Event>} */\n  let nextEvents\n  /** @type {number} */\n  let offset\n\n  // Walk through all events.\n  //\n  // Note: performance of this is fine on an mb of normal markdown, but it’s\n  // a bottleneck for malicious stuff.\n  while (++index < events.length) {\n    // Find a token that can close.\n    if (\n      events[index][0] === 'enter' &&\n      events[index][1].type === 'attentionSequence' &&\n      events[index][1]._close\n    ) {\n      open = index\n\n      // Now walk back to find an opener.\n      while (open--) {\n        // Find a token that can open the closer.\n        if (\n          events[open][0] === 'exit' &&\n          events[open][1].type === 'attentionSequence' &&\n          events[open][1]._open &&\n          // If the markers are the same:\n          context.sliceSerialize(events[open][1]).charCodeAt(0) ===\n            context.sliceSerialize(events[index][1]).charCodeAt(0)\n        ) {\n          // If the opening can close or the closing can open,\n          // and the close size *is not* a multiple of three,\n          // but the sum of the opening and closing size *is* multiple of three,\n          // then don’t match.\n          if (\n            (events[open][1]._close || events[index][1]._open) &&\n            (events[index][1].end.offset - events[index][1].start.offset) % 3 &&\n            !(\n              (events[open][1].end.offset -\n                events[open][1].start.offset +\n                events[index][1].end.offset -\n                events[index][1].start.offset) %\n              3\n            )\n          ) {\n            continue\n          }\n\n          // Number of markers to use from the sequence.\n          use =\n            events[open][1].end.offset - events[open][1].start.offset > 1 &&\n            events[index][1].end.offset - events[index][1].start.offset > 1\n              ? 2\n              : 1\n\n          const start = Object.assign({}, events[open][1].end)\n          const end = Object.assign({}, events[index][1].start)\n          movePoint(start, -use)\n          movePoint(end, use)\n\n          openingSequence = {\n            type: use > 1 ? types.strongSequence : types.emphasisSequence,\n            start,\n            end: Object.assign({}, events[open][1].end)\n          }\n          closingSequence = {\n            type: use > 1 ? types.strongSequence : types.emphasisSequence,\n            start: Object.assign({}, events[index][1].start),\n            end\n          }\n          text = {\n            type: use > 1 ? types.strongText : types.emphasisText,\n            start: Object.assign({}, events[open][1].end),\n            end: Object.assign({}, events[index][1].start)\n          }\n          group = {\n            type: use > 1 ? types.strong : types.emphasis,\n            start: Object.assign({}, openingSequence.start),\n            end: Object.assign({}, closingSequence.end)\n          }\n\n          events[open][1].end = Object.assign({}, openingSequence.start)\n          events[index][1].start = Object.assign({}, closingSequence.end)\n\n          nextEvents = []\n\n          // If there are more markers in the opening, add them before.\n          if (events[open][1].end.offset - events[open][1].start.offset) {\n            nextEvents = push(nextEvents, [\n              ['enter', events[open][1], context],\n              ['exit', events[open][1], context]\n            ])\n          }\n\n          // Opening.\n          nextEvents = push(nextEvents, [\n            ['enter', group, context],\n            ['enter', openingSequence, context],\n            ['exit', openingSequence, context],\n            ['enter', text, context]\n          ])\n\n          // Always populated by defaults.\n          assert(\n            context.parser.constructs.insideSpan.null,\n            'expected `insideSpan` to be populated'\n          )\n\n          // Between.\n          nextEvents = push(\n            nextEvents,\n            resolveAll(\n              context.parser.constructs.insideSpan.null,\n              events.slice(open + 1, index),\n              context\n            )\n          )\n\n          // Closing.\n          nextEvents = push(nextEvents, [\n            ['exit', text, context],\n            ['enter', closingSequence, context],\n            ['exit', closingSequence, context],\n            ['exit', group, context]\n          ])\n\n          // If there are more markers in the closing, add them after.\n          if (events[index][1].end.offset - events[index][1].start.offset) {\n            offset = 2\n            nextEvents = push(nextEvents, [\n              ['enter', events[index][1], context],\n              ['exit', events[index][1], context]\n            ])\n          } else {\n            offset = 0\n          }\n\n          splice(events, open - 1, index - open + 3, nextEvents)\n\n          index = open + nextEvents.length - offset - 2\n          break\n        }\n      }\n    }\n  }\n\n  // Remove remaining sequences.\n  index = -1\n\n  while (++index < events.length) {\n    if (events[index][1].type === 'attentionSequence') {\n      events[index][1].type = 'data'\n    }\n  }\n\n  return events\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeAttention(effects, ok) {\n  const attentionMarkers = this.parser.constructs.attentionMarkers.null\n  const previous = this.previous\n  const before = classifyCharacter(previous)\n\n  /** @type {NonNullable<Code>} */\n  let marker\n\n  return start\n\n  /**\n   * Before a sequence.\n   *\n   * ```markdown\n   * > | **\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    assert(\n      code === codes.asterisk || code === codes.underscore,\n      'expected asterisk or underscore'\n    )\n    marker = code\n    effects.enter('attentionSequence')\n    return inside(code)\n  }\n\n  /**\n   * In a sequence.\n   *\n   * ```markdown\n   * > | **\n   *     ^^\n   * ```\n   *\n   * @type {State}\n   */\n  function inside(code) {\n    if (code === marker) {\n      effects.consume(code)\n      return inside\n    }\n\n    const token = effects.exit('attentionSequence')\n\n    // To do: next major: move this to resolver, just like `markdown-rs`.\n    const after = classifyCharacter(code)\n\n    // Always populated by defaults.\n    assert(attentionMarkers, 'expected `attentionMarkers` to be populated')\n\n    const open =\n      !after ||\n      (after === constants.characterGroupPunctuation && before) ||\n      attentionMarkers.includes(code)\n    const close =\n      !before ||\n      (before === constants.characterGroupPunctuation && after) ||\n      attentionMarkers.includes(previous)\n\n    token._open = Boolean(\n      marker === codes.asterisk ? open : open && (before || !close)\n    )\n    token._close = Boolean(\n      marker === codes.asterisk ? close : close && (after || !open)\n    )\n    return ok(code)\n  }\n}\n\n/**\n * Move a point a bit.\n *\n * Note: `move` only works inside lines! It’s not possible to move past other\n * chunks (replacement characters, tabs, or line endings).\n *\n * @param {Point} point\n * @param {number} offset\n * @returns {void}\n */\nfunction movePoint(point, offset) {\n  point.column += offset\n  point.offset += offset\n  point._bufferIndex += offset\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {\n  asciiAlpha,\n  asciiAlphanumeric,\n  asciiAtext,\n  asciiControl\n} from 'micromark-util-character'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {constants} from 'micromark-util-symbol/constants.js'\nimport {types} from 'micromark-util-symbol/types.js'\nimport {ok as assert} from 'uvu/assert'\n\n/** @type {Construct} */\nexport const autolink = {name: 'autolink', tokenize: tokenizeAutolink}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeAutolink(effects, ok, nok) {\n  let size = 0\n\n  return start\n\n  /**\n   * Start of an autolink.\n   *\n   * ```markdown\n   * > | a<https://example.com>b\n   *      ^\n   * > | a<user@example.com>b\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    assert(code === codes.lessThan, 'expected `<`')\n    effects.enter(types.autolink)\n    effects.enter(types.autolinkMarker)\n    effects.consume(code)\n    effects.exit(types.autolinkMarker)\n    effects.enter(types.autolinkProtocol)\n    return open\n  }\n\n  /**\n   * After `<`, at protocol or atext.\n   *\n   * ```markdown\n   * > | a<https://example.com>b\n   *       ^\n   * > | a<user@example.com>b\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function open(code) {\n    if (asciiAlpha(code)) {\n      effects.consume(code)\n      return schemeOrEmailAtext\n    }\n\n    return emailAtext(code)\n  }\n\n  /**\n   * At second byte of protocol or atext.\n   *\n   * ```markdown\n   * > | a<https://example.com>b\n   *        ^\n   * > | a<user@example.com>b\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function schemeOrEmailAtext(code) {\n    // ASCII alphanumeric and `+`, `-`, and `.`.\n    if (\n      code === codes.plusSign ||\n      code === codes.dash ||\n      code === codes.dot ||\n      asciiAlphanumeric(code)\n    ) {\n      // Count the previous alphabetical from `open` too.\n      size = 1\n      return schemeInsideOrEmailAtext(code)\n    }\n\n    return emailAtext(code)\n  }\n\n  /**\n   * In ambiguous protocol or atext.\n   *\n   * ```markdown\n   * > | a<https://example.com>b\n   *        ^\n   * > | a<user@example.com>b\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function schemeInsideOrEmailAtext(code) {\n    if (code === codes.colon) {\n      effects.consume(code)\n      size = 0\n      return urlInside\n    }\n\n    // ASCII alphanumeric and `+`, `-`, and `.`.\n    if (\n      (code === codes.plusSign ||\n        code === codes.dash ||\n        code === codes.dot ||\n        asciiAlphanumeric(code)) &&\n      size++ < constants.autolinkSchemeSizeMax\n    ) {\n      effects.consume(code)\n      return schemeInsideOrEmailAtext\n    }\n\n    size = 0\n    return emailAtext(code)\n  }\n\n  /**\n   * After protocol, in URL.\n   *\n   * ```markdown\n   * > | a<https://example.com>b\n   *             ^\n   * ```\n   *\n   * @type {State}\n   */\n  function urlInside(code) {\n    if (code === codes.greaterThan) {\n      effects.exit(types.autolinkProtocol)\n      effects.enter(types.autolinkMarker)\n      effects.consume(code)\n      effects.exit(types.autolinkMarker)\n      effects.exit(types.autolink)\n      return ok\n    }\n\n    // ASCII control, space, or `<`.\n    if (\n      code === codes.eof ||\n      code === codes.space ||\n      code === codes.lessThan ||\n      asciiControl(code)\n    ) {\n      return nok(code)\n    }\n\n    effects.consume(code)\n    return urlInside\n  }\n\n  /**\n   * In email atext.\n   *\n   * ```markdown\n   * > | a<user.name@example.com>b\n   *              ^\n   * ```\n   *\n   * @type {State}\n   */\n  function emailAtext(code) {\n    if (code === codes.atSign) {\n      effects.consume(code)\n      return emailAtSignOrDot\n    }\n\n    if (asciiAtext(code)) {\n      effects.consume(code)\n      return emailAtext\n    }\n\n    return nok(code)\n  }\n\n  /**\n   * In label, after at-sign or dot.\n   *\n   * ```markdown\n   * > | a<user.name@example.com>b\n   *                 ^       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function emailAtSignOrDot(code) {\n    return asciiAlphanumeric(code) ? emailLabel(code) : nok(code)\n  }\n\n  /**\n   * In label, where `.` and `>` are allowed.\n   *\n   * ```markdown\n   * > | a<user.name@example.com>b\n   *                   ^\n   * ```\n   *\n   * @type {State}\n   */\n  function emailLabel(code) {\n    if (code === codes.dot) {\n      effects.consume(code)\n      size = 0\n      return emailAtSignOrDot\n    }\n\n    if (code === codes.greaterThan) {\n      // Exit, then change the token type.\n      effects.exit(types.autolinkProtocol).type = types.autolinkEmail\n      effects.enter(types.autolinkMarker)\n      effects.consume(code)\n      effects.exit(types.autolinkMarker)\n      effects.exit(types.autolink)\n      return ok\n    }\n\n    return emailValue(code)\n  }\n\n  /**\n   * In label, where `.` and `>` are *not* allowed.\n   *\n   * Though, this is also used in `emailLabel` to parse other values.\n   *\n   * ```markdown\n   * > | a<user.name@ex-ample.com>b\n   *                    ^\n   * ```\n   *\n   * @type {State}\n   */\n  function emailValue(code) {\n    // ASCII alphanumeric or `-`.\n    if (\n      (code === codes.dash || asciiAlphanumeric(code)) &&\n      size++ < constants.autolinkDomainSizeMax\n    ) {\n      const next = code === codes.dash ? emailValue : emailLabel\n      effects.consume(code)\n      return next\n    }\n\n    return nok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding, markdownSpace} from 'micromark-util-character'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {types} from 'micromark-util-symbol/types.js'\n\n/** @type {Construct} */\nexport const blankLine = {tokenize: tokenizeBlankLine, partial: true}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeBlankLine(effects, ok, nok) {\n  return start\n\n  /**\n   * Start of blank line.\n   *\n   * > 👉 **Note**: `␠` represents a space character.\n   *\n   * ```markdown\n   * > | ␠␠␊\n   *     ^\n   * > | ␊\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    return markdownSpace(code)\n      ? factorySpace(effects, after, types.linePrefix)(code)\n      : after(code)\n  }\n\n  /**\n   * At eof/eol, after optional whitespace.\n   *\n   * > 👉 **Note**: `␠` represents a space character.\n   *\n   * ```markdown\n   * > | ␠␠␊\n   *       ^\n   * > | ␊\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    return code === codes.eof || markdownLineEnding(code) ? ok(code) : nok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').Exiter} Exiter\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownSpace} from 'micromark-util-character'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {constants} from 'micromark-util-symbol/constants.js'\nimport {types} from 'micromark-util-symbol/types.js'\nimport {ok as assert} from 'uvu/assert'\n\n/** @type {Construct} */\nexport const blockQuote = {\n  name: 'blockQuote',\n  tokenize: tokenizeBlockQuoteStart,\n  continuation: {tokenize: tokenizeBlockQuoteContinuation},\n  exit\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeBlockQuoteStart(effects, ok, nok) {\n  const self = this\n\n  return start\n\n  /**\n   * Start of block quote.\n   *\n   * ```markdown\n   * > | > a\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    if (code === codes.greaterThan) {\n      const state = self.containerState\n\n      assert(state, 'expected `containerState` to be defined in container')\n\n      if (!state.open) {\n        effects.enter(types.blockQuote, {_container: true})\n        state.open = true\n      }\n\n      effects.enter(types.blockQuotePrefix)\n      effects.enter(types.blockQuoteMarker)\n      effects.consume(code)\n      effects.exit(types.blockQuoteMarker)\n      return after\n    }\n\n    return nok(code)\n  }\n\n  /**\n   * After `>`, before optional whitespace.\n   *\n   * ```markdown\n   * > | > a\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    if (markdownSpace(code)) {\n      effects.enter(types.blockQuotePrefixWhitespace)\n      effects.consume(code)\n      effects.exit(types.blockQuotePrefixWhitespace)\n      effects.exit(types.blockQuotePrefix)\n      return ok\n    }\n\n    effects.exit(types.blockQuotePrefix)\n    return ok(code)\n  }\n}\n\n/**\n * Start of block quote continuation.\n *\n * ```markdown\n *   | > a\n * > | > b\n *     ^\n * ```\n *\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeBlockQuoteContinuation(effects, ok, nok) {\n  const self = this\n\n  return contStart\n\n  /**\n   * Start of block quote continuation.\n   *\n   * Also used to parse the first block quote opening.\n   *\n   * ```markdown\n   *   | > a\n   * > | > b\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function contStart(code) {\n    if (markdownSpace(code)) {\n      // Always populated by defaults.\n      assert(\n        self.parser.constructs.disable.null,\n        'expected `disable.null` to be populated'\n      )\n\n      return factorySpace(\n        effects,\n        contBefore,\n        types.linePrefix,\n        self.parser.constructs.disable.null.includes('codeIndented')\n          ? undefined\n          : constants.tabSize\n      )(code)\n    }\n\n    return contBefore(code)\n  }\n\n  /**\n   * At `>`, after optional whitespace.\n   *\n   * Also used to parse the first block quote opening.\n   *\n   * ```markdown\n   *   | > a\n   * > | > b\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function contBefore(code) {\n    return effects.attempt(blockQuote, ok, nok)(code)\n  }\n}\n\n/** @type {Exiter} */\nfunction exit(effects) {\n  effects.exit(types.blockQuote)\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {asciiPunctuation} from 'micromark-util-character'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {types} from 'micromark-util-symbol/types.js'\nimport {ok as assert} from 'uvu/assert'\n\n/** @type {Construct} */\nexport const characterEscape = {\n  name: 'characterEscape',\n  tokenize: tokenizeCharacterEscape\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeCharacterEscape(effects, ok, nok) {\n  return start\n\n  /**\n   * Start of character escape.\n   *\n   * ```markdown\n   * > | a\\*b\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    assert(code === codes.backslash, 'expected `\\\\`')\n    effects.enter(types.characterEscape)\n    effects.enter(types.escapeMarker)\n    effects.consume(code)\n    effects.exit(types.escapeMarker)\n    return inside\n  }\n\n  /**\n   * After `\\`, at punctuation.\n   *\n   * ```markdown\n   * > | a\\*b\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function inside(code) {\n    // ASCII punctuation.\n    if (asciiPunctuation(code)) {\n      effects.enter(types.characterEscapeValue)\n      effects.consume(code)\n      effects.exit(types.characterEscapeValue)\n      effects.exit(types.characterEscape)\n      return ok\n    }\n\n    return nok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {decodeNamedCharacterReference} from 'decode-named-character-reference'\nimport {\n  asciiAlphanumeric,\n  asciiDigit,\n  asciiHexDigit\n} from 'micromark-util-character'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {constants} from 'micromark-util-symbol/constants.js'\nimport {types} from 'micromark-util-symbol/types.js'\nimport {ok as assert} from 'uvu/assert'\n\n/** @type {Construct} */\nexport const characterReference = {\n  name: 'characterReference',\n  tokenize: tokenizeCharacterReference\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeCharacterReference(effects, ok, nok) {\n  const self = this\n  let size = 0\n  /** @type {number} */\n  let max\n  /** @type {(code: Code) => boolean} */\n  let test\n\n  return start\n\n  /**\n   * Start of character reference.\n   *\n   * ```markdown\n   * > | a&amp;b\n   *      ^\n   * > | a&#123;b\n   *      ^\n   * > | a&#x9;b\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    assert(code === codes.ampersand, 'expected `&`')\n    effects.enter(types.characterReference)\n    effects.enter(types.characterReferenceMarker)\n    effects.consume(code)\n    effects.exit(types.characterReferenceMarker)\n    return open\n  }\n\n  /**\n   * After `&`, at `#` for numeric references or alphanumeric for named\n   * references.\n   *\n   * ```markdown\n   * > | a&amp;b\n   *       ^\n   * > | a&#123;b\n   *       ^\n   * > | a&#x9;b\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function open(code) {\n    if (code === codes.numberSign) {\n      effects.enter(types.characterReferenceMarkerNumeric)\n      effects.consume(code)\n      effects.exit(types.characterReferenceMarkerNumeric)\n      return numeric\n    }\n\n    effects.enter(types.characterReferenceValue)\n    max = constants.characterReferenceNamedSizeMax\n    test = asciiAlphanumeric\n    return value(code)\n  }\n\n  /**\n   * After `#`, at `x` for hexadecimals or digit for decimals.\n   *\n   * ```markdown\n   * > | a&#123;b\n   *        ^\n   * > | a&#x9;b\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function numeric(code) {\n    if (code === codes.uppercaseX || code === codes.lowercaseX) {\n      effects.enter(types.characterReferenceMarkerHexadecimal)\n      effects.consume(code)\n      effects.exit(types.characterReferenceMarkerHexadecimal)\n      effects.enter(types.characterReferenceValue)\n      max = constants.characterReferenceHexadecimalSizeMax\n      test = asciiHexDigit\n      return value\n    }\n\n    effects.enter(types.characterReferenceValue)\n    max = constants.characterReferenceDecimalSizeMax\n    test = asciiDigit\n    return value(code)\n  }\n\n  /**\n   * After markers (`&#x`, `&#`, or `&`), in value, before `;`.\n   *\n   * The character reference kind defines what and how many characters are\n   * allowed.\n   *\n   * ```markdown\n   * > | a&amp;b\n   *       ^^^\n   * > | a&#123;b\n   *        ^^^\n   * > | a&#x9;b\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function value(code) {\n    if (code === codes.semicolon && size) {\n      const token = effects.exit(types.characterReferenceValue)\n\n      if (\n        test === asciiAlphanumeric &&\n        !decodeNamedCharacterReference(self.sliceSerialize(token))\n      ) {\n        return nok(code)\n      }\n\n      // To do: `markdown-rs` uses a different name:\n      // `CharacterReferenceMarkerSemi`.\n      effects.enter(types.characterReferenceMarker)\n      effects.consume(code)\n      effects.exit(types.characterReferenceMarker)\n      effects.exit(types.characterReference)\n      return ok\n    }\n\n    if (test(code) && size++ < max) {\n      effects.consume(code)\n      return value\n    }\n\n    return nok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding, markdownSpace} from 'micromark-util-character'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {constants} from 'micromark-util-symbol/constants.js'\nimport {types} from 'micromark-util-symbol/types.js'\nimport {ok as assert} from 'uvu/assert'\n\n/** @type {Construct} */\nconst nonLazyContinuation = {\n  tokenize: tokenizeNonLazyContinuation,\n  partial: true\n}\n\n/** @type {Construct} */\nexport const codeFenced = {\n  name: 'codeFenced',\n  tokenize: tokenizeCodeFenced,\n  concrete: true\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeCodeFenced(effects, ok, nok) {\n  const self = this\n  /** @type {Construct} */\n  const closeStart = {tokenize: tokenizeCloseStart, partial: true}\n  let initialPrefix = 0\n  let sizeOpen = 0\n  /** @type {NonNullable<Code>} */\n  let marker\n\n  return start\n\n  /**\n   * Start of code.\n   *\n   * ```markdown\n   * > | ~~~js\n   *     ^\n   *   | alert(1)\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    // To do: parse whitespace like `markdown-rs`.\n    return beforeSequenceOpen(code)\n  }\n\n  /**\n   * In opening fence, after prefix, at sequence.\n   *\n   * ```markdown\n   * > | ~~~js\n   *     ^\n   *   | alert(1)\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function beforeSequenceOpen(code) {\n    assert(\n      code === codes.graveAccent || code === codes.tilde,\n      'expected `` ` `` or `~`'\n    )\n\n    const tail = self.events[self.events.length - 1]\n    initialPrefix =\n      tail && tail[1].type === types.linePrefix\n        ? tail[2].sliceSerialize(tail[1], true).length\n        : 0\n\n    marker = code\n    effects.enter(types.codeFenced)\n    effects.enter(types.codeFencedFence)\n    effects.enter(types.codeFencedFenceSequence)\n    return sequenceOpen(code)\n  }\n\n  /**\n   * In opening fence sequence.\n   *\n   * ```markdown\n   * > | ~~~js\n   *      ^\n   *   | alert(1)\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function sequenceOpen(code) {\n    if (code === marker) {\n      sizeOpen++\n      effects.consume(code)\n      return sequenceOpen\n    }\n\n    if (sizeOpen < constants.codeFencedSequenceSizeMin) {\n      return nok(code)\n    }\n\n    effects.exit(types.codeFencedFenceSequence)\n    return markdownSpace(code)\n      ? factorySpace(effects, infoBefore, types.whitespace)(code)\n      : infoBefore(code)\n  }\n\n  /**\n   * In opening fence, after the sequence (and optional whitespace), before info.\n   *\n   * ```markdown\n   * > | ~~~js\n   *        ^\n   *   | alert(1)\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function infoBefore(code) {\n    if (code === codes.eof || markdownLineEnding(code)) {\n      effects.exit(types.codeFencedFence)\n      return self.interrupt\n        ? ok(code)\n        : effects.check(nonLazyContinuation, atNonLazyBreak, after)(code)\n    }\n\n    effects.enter(types.codeFencedFenceInfo)\n    effects.enter(types.chunkString, {contentType: constants.contentTypeString})\n    return info(code)\n  }\n\n  /**\n   * In info.\n   *\n   * ```markdown\n   * > | ~~~js\n   *        ^\n   *   | alert(1)\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function info(code) {\n    if (code === codes.eof || markdownLineEnding(code)) {\n      effects.exit(types.chunkString)\n      effects.exit(types.codeFencedFenceInfo)\n      return infoBefore(code)\n    }\n\n    if (markdownSpace(code)) {\n      effects.exit(types.chunkString)\n      effects.exit(types.codeFencedFenceInfo)\n      return factorySpace(effects, metaBefore, types.whitespace)(code)\n    }\n\n    if (code === codes.graveAccent && code === marker) {\n      return nok(code)\n    }\n\n    effects.consume(code)\n    return info\n  }\n\n  /**\n   * In opening fence, after info and whitespace, before meta.\n   *\n   * ```markdown\n   * > | ~~~js eval\n   *           ^\n   *   | alert(1)\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function metaBefore(code) {\n    if (code === codes.eof || markdownLineEnding(code)) {\n      return infoBefore(code)\n    }\n\n    effects.enter(types.codeFencedFenceMeta)\n    effects.enter(types.chunkString, {contentType: constants.contentTypeString})\n    return meta(code)\n  }\n\n  /**\n   * In meta.\n   *\n   * ```markdown\n   * > | ~~~js eval\n   *           ^\n   *   | alert(1)\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function meta(code) {\n    if (code === codes.eof || markdownLineEnding(code)) {\n      effects.exit(types.chunkString)\n      effects.exit(types.codeFencedFenceMeta)\n      return infoBefore(code)\n    }\n\n    if (code === codes.graveAccent && code === marker) {\n      return nok(code)\n    }\n\n    effects.consume(code)\n    return meta\n  }\n\n  /**\n   * At eol/eof in code, before a non-lazy closing fence or content.\n   *\n   * ```markdown\n   * > | ~~~js\n   *          ^\n   * > | alert(1)\n   *             ^\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function atNonLazyBreak(code) {\n    assert(markdownLineEnding(code), 'expected eol')\n    return effects.attempt(closeStart, after, contentBefore)(code)\n  }\n\n  /**\n   * Before code content, not a closing fence, at eol.\n   *\n   * ```markdown\n   *   | ~~~js\n   * > | alert(1)\n   *             ^\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function contentBefore(code) {\n    assert(markdownLineEnding(code), 'expected eol')\n    effects.enter(types.lineEnding)\n    effects.consume(code)\n    effects.exit(types.lineEnding)\n    return contentStart\n  }\n\n  /**\n   * Before code content, not a closing fence.\n   *\n   * ```markdown\n   *   | ~~~js\n   * > | alert(1)\n   *     ^\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function contentStart(code) {\n    return initialPrefix > 0 && markdownSpace(code)\n      ? factorySpace(\n          effects,\n          beforeContentChunk,\n          types.linePrefix,\n          initialPrefix + 1\n        )(code)\n      : beforeContentChunk(code)\n  }\n\n  /**\n   * Before code content, after optional prefix.\n   *\n   * ```markdown\n   *   | ~~~js\n   * > | alert(1)\n   *     ^\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function beforeContentChunk(code) {\n    if (code === codes.eof || markdownLineEnding(code)) {\n      return effects.check(nonLazyContinuation, atNonLazyBreak, after)(code)\n    }\n\n    effects.enter(types.codeFlowValue)\n    return contentChunk(code)\n  }\n\n  /**\n   * In code content.\n   *\n   * ```markdown\n   *   | ~~~js\n   * > | alert(1)\n   *     ^^^^^^^^\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function contentChunk(code) {\n    if (code === codes.eof || markdownLineEnding(code)) {\n      effects.exit(types.codeFlowValue)\n      return beforeContentChunk(code)\n    }\n\n    effects.consume(code)\n    return contentChunk\n  }\n\n  /**\n   * After code.\n   *\n   * ```markdown\n   *   | ~~~js\n   *   | alert(1)\n   * > | ~~~\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    effects.exit(types.codeFenced)\n    return ok(code)\n  }\n\n  /**\n   * @this {TokenizeContext}\n   * @type {Tokenizer}\n   */\n  function tokenizeCloseStart(effects, ok, nok) {\n    let size = 0\n\n    return startBefore\n\n    /**\n     *\n     *\n     * @type {State}\n     */\n    function startBefore(code) {\n      assert(markdownLineEnding(code), 'expected eol')\n      effects.enter(types.lineEnding)\n      effects.consume(code)\n      effects.exit(types.lineEnding)\n      return start\n    }\n\n    /**\n     * Before closing fence, at optional whitespace.\n     *\n     * ```markdown\n     *   | ~~~js\n     *   | alert(1)\n     * > | ~~~\n     *     ^\n     * ```\n     *\n     * @type {State}\n     */\n    function start(code) {\n      // Always populated by defaults.\n      assert(\n        self.parser.constructs.disable.null,\n        'expected `disable.null` to be populated'\n      )\n\n      // To do: `enter` here or in next state?\n      effects.enter(types.codeFencedFence)\n      return markdownSpace(code)\n        ? factorySpace(\n            effects,\n            beforeSequenceClose,\n            types.linePrefix,\n            self.parser.constructs.disable.null.includes('codeIndented')\n              ? undefined\n              : constants.tabSize\n          )(code)\n        : beforeSequenceClose(code)\n    }\n\n    /**\n     * In closing fence, after optional whitespace, at sequence.\n     *\n     * ```markdown\n     *   | ~~~js\n     *   | alert(1)\n     * > | ~~~\n     *     ^\n     * ```\n     *\n     * @type {State}\n     */\n    function beforeSequenceClose(code) {\n      if (code === marker) {\n        effects.enter(types.codeFencedFenceSequence)\n        return sequenceClose(code)\n      }\n\n      return nok(code)\n    }\n\n    /**\n     * In closing fence sequence.\n     *\n     * ```markdown\n     *   | ~~~js\n     *   | alert(1)\n     * > | ~~~\n     *     ^\n     * ```\n     *\n     * @type {State}\n     */\n    function sequenceClose(code) {\n      if (code === marker) {\n        size++\n        effects.consume(code)\n        return sequenceClose\n      }\n\n      if (size >= sizeOpen) {\n        effects.exit(types.codeFencedFenceSequence)\n        return markdownSpace(code)\n          ? factorySpace(effects, sequenceCloseAfter, types.whitespace)(code)\n          : sequenceCloseAfter(code)\n      }\n\n      return nok(code)\n    }\n\n    /**\n     * After closing fence sequence, after optional whitespace.\n     *\n     * ```markdown\n     *   | ~~~js\n     *   | alert(1)\n     * > | ~~~\n     *        ^\n     * ```\n     *\n     * @type {State}\n     */\n    function sequenceCloseAfter(code) {\n      if (code === codes.eof || markdownLineEnding(code)) {\n        effects.exit(types.codeFencedFence)\n        return ok(code)\n      }\n\n      return nok(code)\n    }\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeNonLazyContinuation(effects, ok, nok) {\n  const self = this\n\n  return start\n\n  /**\n   *\n   *\n   * @type {State}\n   */\n  function start(code) {\n    if (code === codes.eof) {\n      return nok(code)\n    }\n\n    assert(markdownLineEnding(code), 'expected eol')\n    effects.enter(types.lineEnding)\n    effects.consume(code)\n    effects.exit(types.lineEnding)\n    return lineStart\n  }\n\n  /**\n   *\n   *\n   * @type {State}\n   */\n  function lineStart(code) {\n    return self.parser.lazy[self.now().line] ? nok(code) : ok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding, markdownSpace} from 'micromark-util-character'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {constants} from 'micromark-util-symbol/constants.js'\nimport {types} from 'micromark-util-symbol/types.js'\nimport {ok as assert} from 'uvu/assert'\n\n/** @type {Construct} */\nexport const codeIndented = {\n  name: 'codeIndented',\n  tokenize: tokenizeCodeIndented\n}\n\n/** @type {Construct} */\nconst furtherStart = {tokenize: tokenizeFurtherStart, partial: true}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeCodeIndented(effects, ok, nok) {\n  const self = this\n  return start\n\n  /**\n   * Start of code (indented).\n   *\n   * > **Parsing note**: it is not needed to check if this first line is a\n   * > filled line (that it has a non-whitespace character), because blank lines\n   * > are parsed already, so we never run into that.\n   *\n   * ```markdown\n   * > |     aaa\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    // To do: manually check if interrupting like `markdown-rs`.\n    assert(markdownSpace(code))\n    effects.enter(types.codeIndented)\n    // To do: use an improved `space_or_tab` function like `markdown-rs`,\n    // so that we can drop the next state.\n    return factorySpace(\n      effects,\n      afterPrefix,\n      types.linePrefix,\n      constants.tabSize + 1\n    )(code)\n  }\n\n  /**\n   * At start, after 1 or 4 spaces.\n   *\n   * ```markdown\n   * > |     aaa\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function afterPrefix(code) {\n    const tail = self.events[self.events.length - 1]\n    return tail &&\n      tail[1].type === types.linePrefix &&\n      tail[2].sliceSerialize(tail[1], true).length >= constants.tabSize\n      ? atBreak(code)\n      : nok(code)\n  }\n\n  /**\n   * At a break.\n   *\n   * ```markdown\n   * > |     aaa\n   *         ^  ^\n   * ```\n   *\n   * @type {State}\n   */\n  function atBreak(code) {\n    if (code === codes.eof) {\n      return after(code)\n    }\n\n    if (markdownLineEnding(code)) {\n      return effects.attempt(furtherStart, atBreak, after)(code)\n    }\n\n    effects.enter(types.codeFlowValue)\n    return inside(code)\n  }\n\n  /**\n   * In code content.\n   *\n   * ```markdown\n   * > |     aaa\n   *         ^^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function inside(code) {\n    if (code === codes.eof || markdownLineEnding(code)) {\n      effects.exit(types.codeFlowValue)\n      return atBreak(code)\n    }\n\n    effects.consume(code)\n    return inside\n  }\n\n  /** @type {State} */\n  function after(code) {\n    effects.exit(types.codeIndented)\n    // To do: allow interrupting like `markdown-rs`.\n    // Feel free to interrupt.\n    // tokenizer.interrupt = false\n    return ok(code)\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeFurtherStart(effects, ok, nok) {\n  const self = this\n\n  return furtherStart\n\n  /**\n   * At eol, trying to parse another indent.\n   *\n   * ```markdown\n   * > |     aaa\n   *            ^\n   *   |     bbb\n   * ```\n   *\n   * @type {State}\n   */\n  function furtherStart(code) {\n    // To do: improve `lazy` / `pierce` handling.\n    // If this is a lazy line, it can’t be code.\n    if (self.parser.lazy[self.now().line]) {\n      return nok(code)\n    }\n\n    if (markdownLineEnding(code)) {\n      effects.enter(types.lineEnding)\n      effects.consume(code)\n      effects.exit(types.lineEnding)\n      return furtherStart\n    }\n\n    // To do: the code here in `micromark-js` is a bit different from\n    // `markdown-rs` because there it can attempt spaces.\n    // We can’t yet.\n    //\n    // To do: use an improved `space_or_tab` function like `markdown-rs`,\n    // so that we can drop the next state.\n    return factorySpace(\n      effects,\n      afterPrefix,\n      types.linePrefix,\n      constants.tabSize + 1\n    )(code)\n  }\n\n  /**\n   * At start, after 1 or 4 spaces.\n   *\n   * ```markdown\n   * > |     aaa\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function afterPrefix(code) {\n    const tail = self.events[self.events.length - 1]\n    return tail &&\n      tail[1].type === types.linePrefix &&\n      tail[2].sliceSerialize(tail[1], true).length >= constants.tabSize\n      ? ok(code)\n      : markdownLineEnding(code)\n      ? furtherStart(code)\n      : nok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').Previous} Previous\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {markdownLineEnding} from 'micromark-util-character'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {types} from 'micromark-util-symbol/types.js'\nimport {ok as assert} from 'uvu/assert'\n\n/** @type {Construct} */\nexport const codeText = {\n  name: 'codeText',\n  tokenize: tokenizeCodeText,\n  resolve: resolveCodeText,\n  previous\n}\n\n// To do: next major: don’t resolve, like `markdown-rs`.\n/** @type {Resolver} */\nfunction resolveCodeText(events) {\n  let tailExitIndex = events.length - 4\n  let headEnterIndex = 3\n  /** @type {number} */\n  let index\n  /** @type {number | undefined} */\n  let enter\n\n  // If we start and end with an EOL or a space.\n  if (\n    (events[headEnterIndex][1].type === types.lineEnding ||\n      events[headEnterIndex][1].type === 'space') &&\n    (events[tailExitIndex][1].type === types.lineEnding ||\n      events[tailExitIndex][1].type === 'space')\n  ) {\n    index = headEnterIndex\n\n    // And we have data.\n    while (++index < tailExitIndex) {\n      if (events[index][1].type === types.codeTextData) {\n        // Then we have padding.\n        events[headEnterIndex][1].type = types.codeTextPadding\n        events[tailExitIndex][1].type = types.codeTextPadding\n        headEnterIndex += 2\n        tailExitIndex -= 2\n        break\n      }\n    }\n  }\n\n  // Merge adjacent spaces and data.\n  index = headEnterIndex - 1\n  tailExitIndex++\n\n  while (++index <= tailExitIndex) {\n    if (enter === undefined) {\n      if (\n        index !== tailExitIndex &&\n        events[index][1].type !== types.lineEnding\n      ) {\n        enter = index\n      }\n    } else if (\n      index === tailExitIndex ||\n      events[index][1].type === types.lineEnding\n    ) {\n      events[enter][1].type = types.codeTextData\n\n      if (index !== enter + 2) {\n        events[enter][1].end = events[index - 1][1].end\n        events.splice(enter + 2, index - enter - 2)\n        tailExitIndex -= index - enter - 2\n        index = enter + 2\n      }\n\n      enter = undefined\n    }\n  }\n\n  return events\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Previous}\n */\nfunction previous(code) {\n  // If there is a previous code, there will always be a tail.\n  return (\n    code !== codes.graveAccent ||\n    this.events[this.events.length - 1][1].type === types.characterEscape\n  )\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeCodeText(effects, ok, nok) {\n  const self = this\n  let sizeOpen = 0\n  /** @type {number} */\n  let size\n  /** @type {Token} */\n  let token\n\n  return start\n\n  /**\n   * Start of code (text).\n   *\n   * ```markdown\n   * > | `a`\n   *     ^\n   * > | \\`a`\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    assert(code === codes.graveAccent, 'expected `` ` ``')\n    assert(previous.call(self, self.previous), 'expected correct previous')\n    effects.enter(types.codeText)\n    effects.enter(types.codeTextSequence)\n    return sequenceOpen(code)\n  }\n\n  /**\n   * In opening sequence.\n   *\n   * ```markdown\n   * > | `a`\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function sequenceOpen(code) {\n    if (code === codes.graveAccent) {\n      effects.consume(code)\n      sizeOpen++\n      return sequenceOpen\n    }\n\n    effects.exit(types.codeTextSequence)\n    return between(code)\n  }\n\n  /**\n   * Between something and something else.\n   *\n   * ```markdown\n   * > | `a`\n   *      ^^\n   * ```\n   *\n   * @type {State}\n   */\n  function between(code) {\n    // EOF.\n    if (code === codes.eof) {\n      return nok(code)\n    }\n\n    // To do: next major: don’t do spaces in resolve, but when compiling,\n    // like `markdown-rs`.\n    // Tabs don’t work, and virtual spaces don’t make sense.\n    if (code === codes.space) {\n      effects.enter('space')\n      effects.consume(code)\n      effects.exit('space')\n      return between\n    }\n\n    // Closing fence? Could also be data.\n    if (code === codes.graveAccent) {\n      token = effects.enter(types.codeTextSequence)\n      size = 0\n      return sequenceClose(code)\n    }\n\n    if (markdownLineEnding(code)) {\n      effects.enter(types.lineEnding)\n      effects.consume(code)\n      effects.exit(types.lineEnding)\n      return between\n    }\n\n    // Data.\n    effects.enter(types.codeTextData)\n    return data(code)\n  }\n\n  /**\n   * In data.\n   *\n   * ```markdown\n   * > | `a`\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function data(code) {\n    if (\n      code === codes.eof ||\n      code === codes.space ||\n      code === codes.graveAccent ||\n      markdownLineEnding(code)\n    ) {\n      effects.exit(types.codeTextData)\n      return between(code)\n    }\n\n    effects.consume(code)\n    return data\n  }\n\n  /**\n   * In closing sequence.\n   *\n   * ```markdown\n   * > | `a`\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function sequenceClose(code) {\n    // More.\n    if (code === codes.graveAccent) {\n      effects.consume(code)\n      size++\n      return sequenceClose\n    }\n\n    // Done!\n    if (size === sizeOpen) {\n      effects.exit(types.codeTextSequence)\n      effects.exit(types.codeText)\n      return ok(code)\n    }\n\n    // More or less accents: mark as data.\n    token.type = types.codeTextData\n    return data(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding} from 'micromark-util-character'\nimport {subtokenize} from 'micromark-util-subtokenize'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {constants} from 'micromark-util-symbol/constants.js'\nimport {types} from 'micromark-util-symbol/types.js'\nimport {ok as assert} from 'uvu/assert'\n\n/**\n * No name because it must not be turned off.\n * @type {Construct}\n */\nexport const content = {tokenize: tokenizeContent, resolve: resolveContent}\n\n/** @type {Construct} */\nconst continuationConstruct = {tokenize: tokenizeContinuation, partial: true}\n\n/**\n * Content is transparent: it’s parsed right now. That way, definitions are also\n * parsed right now: before text in paragraphs (specifically, media) are parsed.\n *\n * @type {Resolver}\n */\nfunction resolveContent(events) {\n  subtokenize(events)\n  return events\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeContent(effects, ok) {\n  /** @type {Token | undefined} */\n  let previous\n\n  return chunkStart\n\n  /**\n   * Before a content chunk.\n   *\n   * ```markdown\n   * > | abc\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function chunkStart(code) {\n    assert(\n      code !== codes.eof && !markdownLineEnding(code),\n      'expected no eof or eol'\n    )\n\n    effects.enter(types.content)\n    previous = effects.enter(types.chunkContent, {\n      contentType: constants.contentTypeContent\n    })\n    return chunkInside(code)\n  }\n\n  /**\n   * In a content chunk.\n   *\n   * ```markdown\n   * > | abc\n   *     ^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function chunkInside(code) {\n    if (code === codes.eof) {\n      return contentEnd(code)\n    }\n\n    // To do: in `markdown-rs`, each line is parsed on its own, and everything\n    // is stitched together resolving.\n    if (markdownLineEnding(code)) {\n      return effects.check(\n        continuationConstruct,\n        contentContinue,\n        contentEnd\n      )(code)\n    }\n\n    // Data.\n    effects.consume(code)\n    return chunkInside\n  }\n\n  /**\n   *\n   *\n   * @type {State}\n   */\n  function contentEnd(code) {\n    effects.exit(types.chunkContent)\n    effects.exit(types.content)\n    return ok(code)\n  }\n\n  /**\n   *\n   *\n   * @type {State}\n   */\n  function contentContinue(code) {\n    assert(markdownLineEnding(code), 'expected eol')\n    effects.consume(code)\n    effects.exit(types.chunkContent)\n    assert(previous, 'expected previous token')\n    previous.next = effects.enter(types.chunkContent, {\n      contentType: constants.contentTypeContent,\n      previous\n    })\n    previous = previous.next\n    return chunkInside\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeContinuation(effects, ok, nok) {\n  const self = this\n\n  return startLookahead\n\n  /**\n   *\n   *\n   * @type {State}\n   */\n  function startLookahead(code) {\n    assert(markdownLineEnding(code), 'expected a line ending')\n    effects.exit(types.chunkContent)\n    effects.enter(types.lineEnding)\n    effects.consume(code)\n    effects.exit(types.lineEnding)\n    return factorySpace(effects, prefixed, types.linePrefix)\n  }\n\n  /**\n   *\n   *\n   * @type {State}\n   */\n  function prefixed(code) {\n    if (code === codes.eof || markdownLineEnding(code)) {\n      return nok(code)\n    }\n\n    // Always populated by defaults.\n    assert(\n      self.parser.constructs.disable.null,\n      'expected `disable.null` to be populated'\n    )\n\n    const tail = self.events[self.events.length - 1]\n\n    if (\n      !self.parser.constructs.disable.null.includes('codeIndented') &&\n      tail &&\n      tail[1].type === types.linePrefix &&\n      tail[2].sliceSerialize(tail[1], true).length >= constants.tabSize\n    ) {\n      return ok(code)\n    }\n\n    return effects.interrupt(self.parser.constructs.flow, nok, ok)(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factoryDestination} from 'micromark-factory-destination'\nimport {factoryLabel} from 'micromark-factory-label'\nimport {factorySpace} from 'micromark-factory-space'\nimport {factoryTitle} from 'micromark-factory-title'\nimport {factoryWhitespace} from 'micromark-factory-whitespace'\nimport {\n  markdownLineEnding,\n  markdownLineEndingOrSpace,\n  markdownSpace\n} from 'micromark-util-character'\nimport {normalizeIdentifier} from 'micromark-util-normalize-identifier'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {types} from 'micromark-util-symbol/types.js'\nimport {ok as assert} from 'uvu/assert'\n\n/** @type {Construct} */\nexport const definition = {name: 'definition', tokenize: tokenizeDefinition}\n\n/** @type {Construct} */\nconst titleBefore = {tokenize: tokenizeTitleBefore, partial: true}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeDefinition(effects, ok, nok) {\n  const self = this\n  /** @type {string} */\n  let identifier\n\n  return start\n\n  /**\n   * At start of a definition.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    // Do not interrupt paragraphs (but do follow definitions).\n    // To do: do `interrupt` the way `markdown-rs` does.\n    // To do: parse whitespace the way `markdown-rs` does.\n    effects.enter(types.definition)\n    return before(code)\n  }\n\n  /**\n   * After optional whitespace, at `[`.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function before(code) {\n    // To do: parse whitespace the way `markdown-rs` does.\n    assert(code === codes.leftSquareBracket, 'expected `[`')\n    return factoryLabel.call(\n      self,\n      effects,\n      labelAfter,\n      // Note: we don’t need to reset the way `markdown-rs` does.\n      nok,\n      types.definitionLabel,\n      types.definitionLabelMarker,\n      types.definitionLabelString\n    )(code)\n  }\n\n  /**\n   * After label.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function labelAfter(code) {\n    identifier = normalizeIdentifier(\n      self.sliceSerialize(self.events[self.events.length - 1][1]).slice(1, -1)\n    )\n\n    if (code === codes.colon) {\n      effects.enter(types.definitionMarker)\n      effects.consume(code)\n      effects.exit(types.definitionMarker)\n      return markerAfter\n    }\n\n    return nok(code)\n  }\n\n  /**\n   * After marker.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function markerAfter(code) {\n    // Note: whitespace is optional.\n    return markdownLineEndingOrSpace(code)\n      ? factoryWhitespace(effects, destinationBefore)(code)\n      : destinationBefore(code)\n  }\n\n  /**\n   * Before destination.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function destinationBefore(code) {\n    return factoryDestination(\n      effects,\n      destinationAfter,\n      // Note: we don’t need to reset the way `markdown-rs` does.\n      nok,\n      types.definitionDestination,\n      types.definitionDestinationLiteral,\n      types.definitionDestinationLiteralMarker,\n      types.definitionDestinationRaw,\n      types.definitionDestinationString\n    )(code)\n  }\n\n  /**\n   * After destination.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function destinationAfter(code) {\n    return effects.attempt(titleBefore, after, after)(code)\n  }\n\n  /**\n   * After definition.\n   *\n   * ```markdown\n   * > | [a]: b\n   *           ^\n   * > | [a]: b \"c\"\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    return markdownSpace(code)\n      ? factorySpace(effects, afterWhitespace, types.whitespace)(code)\n      : afterWhitespace(code)\n  }\n\n  /**\n   * After definition, after optional whitespace.\n   *\n   * ```markdown\n   * > | [a]: b\n   *           ^\n   * > | [a]: b \"c\"\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function afterWhitespace(code) {\n    if (code === codes.eof || markdownLineEnding(code)) {\n      effects.exit(types.definition)\n\n      // Note: we don’t care about uniqueness.\n      // It’s likely that that doesn’t happen very frequently.\n      // It is more likely that it wastes precious time.\n      self.parser.defined.push(identifier)\n\n      // To do: `markdown-rs` interrupt.\n      // // You’d be interrupting.\n      // tokenizer.interrupt = true\n      return ok(code)\n    }\n\n    return nok(code)\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeTitleBefore(effects, ok, nok) {\n  return titleBefore\n\n  /**\n   * After destination, at whitespace.\n   *\n   * ```markdown\n   * > | [a]: b\n   *           ^\n   * > | [a]: b \"c\"\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function titleBefore(code) {\n    return markdownLineEndingOrSpace(code)\n      ? factoryWhitespace(effects, beforeMarker)(code)\n      : nok(code)\n  }\n\n  /**\n   * At title.\n   *\n   * ```markdown\n   *   | [a]: b\n   * > | \"c\"\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function beforeMarker(code) {\n    return factoryTitle(\n      effects,\n      titleAfter,\n      nok,\n      types.definitionTitle,\n      types.definitionTitleMarker,\n      types.definitionTitleString\n    )(code)\n  }\n\n  /**\n   * After title.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function titleAfter(code) {\n    return markdownSpace(code)\n      ? factorySpace(\n          effects,\n          titleAfterOptionalWhitespace,\n          types.whitespace\n        )(code)\n      : titleAfterOptionalWhitespace(code)\n  }\n\n  /**\n   * After title, after optional whitespace.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function titleAfterOptionalWhitespace(code) {\n    return code === codes.eof || markdownLineEnding(code) ? ok(code) : nok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {markdownLineEnding} from 'micromark-util-character'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {types} from 'micromark-util-symbol/types.js'\nimport {ok as assert} from 'uvu/assert'\n\n/** @type {Construct} */\nexport const hardBreakEscape = {\n  name: 'hardBreakEscape',\n  tokenize: tokenizeHardBreakEscape\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeHardBreakEscape(effects, ok, nok) {\n  return start\n\n  /**\n   * Start of a hard break (escape).\n   *\n   * ```markdown\n   * > | a\\\n   *      ^\n   *   | b\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    assert(code === codes.backslash, 'expected `\\\\`')\n    effects.enter(types.hardBreakEscape)\n    effects.consume(code)\n    return after\n  }\n\n  /**\n   * After `\\`, at eol.\n   *\n   * ```markdown\n   * > | a\\\n   *       ^\n   *   | b\n   * ```\n   *\n   *  @type {State}\n   */\n  function after(code) {\n    if (markdownLineEnding(code)) {\n      effects.exit(types.hardBreakEscape)\n      return ok(code)\n    }\n\n    return nok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {\n  markdownLineEnding,\n  markdownLineEndingOrSpace,\n  markdownSpace\n} from 'micromark-util-character'\nimport {splice} from 'micromark-util-chunked'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {constants} from 'micromark-util-symbol/constants.js'\nimport {types} from 'micromark-util-symbol/types.js'\nimport {ok as assert} from 'uvu/assert'\n\n/** @type {Construct} */\nexport const headingAtx = {\n  name: 'headingAtx',\n  tokenize: tokenizeHeadingAtx,\n  resolve: resolveHeadingAtx\n}\n\n/** @type {Resolver} */\nfunction resolveHeadingAtx(events, context) {\n  let contentEnd = events.length - 2\n  let contentStart = 3\n  /** @type {Token} */\n  let content\n  /** @type {Token} */\n  let text\n\n  // Prefix whitespace, part of the opening.\n  if (events[contentStart][1].type === types.whitespace) {\n    contentStart += 2\n  }\n\n  // Suffix whitespace, part of the closing.\n  if (\n    contentEnd - 2 > contentStart &&\n    events[contentEnd][1].type === types.whitespace\n  ) {\n    contentEnd -= 2\n  }\n\n  if (\n    events[contentEnd][1].type === types.atxHeadingSequence &&\n    (contentStart === contentEnd - 1 ||\n      (contentEnd - 4 > contentStart &&\n        events[contentEnd - 2][1].type === types.whitespace))\n  ) {\n    contentEnd -= contentStart + 1 === contentEnd ? 2 : 4\n  }\n\n  if (contentEnd > contentStart) {\n    content = {\n      type: types.atxHeadingText,\n      start: events[contentStart][1].start,\n      end: events[contentEnd][1].end\n    }\n    text = {\n      type: types.chunkText,\n      start: events[contentStart][1].start,\n      end: events[contentEnd][1].end,\n      contentType: constants.contentTypeText\n    }\n\n    splice(events, contentStart, contentEnd - contentStart + 1, [\n      ['enter', content, context],\n      ['enter', text, context],\n      ['exit', text, context],\n      ['exit', content, context]\n    ])\n  }\n\n  return events\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeHeadingAtx(effects, ok, nok) {\n  let size = 0\n\n  return start\n\n  /**\n   * Start of a heading (atx).\n   *\n   * ```markdown\n   * > | ## aa\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    // To do: parse indent like `markdown-rs`.\n    effects.enter(types.atxHeading)\n    return before(code)\n  }\n\n  /**\n   * After optional whitespace, at `#`.\n   *\n   * ```markdown\n   * > | ## aa\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function before(code) {\n    assert(code === codes.numberSign, 'expected `#`')\n    effects.enter(types.atxHeadingSequence)\n    return sequenceOpen(code)\n  }\n\n  /**\n   * In opening sequence.\n   *\n   * ```markdown\n   * > | ## aa\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function sequenceOpen(code) {\n    if (\n      code === codes.numberSign &&\n      size++ < constants.atxHeadingOpeningFenceSizeMax\n    ) {\n      effects.consume(code)\n      return sequenceOpen\n    }\n\n    // Always at least one `#`.\n    if (code === codes.eof || markdownLineEndingOrSpace(code)) {\n      effects.exit(types.atxHeadingSequence)\n      return atBreak(code)\n    }\n\n    return nok(code)\n  }\n\n  /**\n   * After something, before something else.\n   *\n   * ```markdown\n   * > | ## aa\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function atBreak(code) {\n    if (code === codes.numberSign) {\n      effects.enter(types.atxHeadingSequence)\n      return sequenceFurther(code)\n    }\n\n    if (code === codes.eof || markdownLineEnding(code)) {\n      effects.exit(types.atxHeading)\n      // To do: interrupt like `markdown-rs`.\n      // // Feel free to interrupt.\n      // tokenizer.interrupt = false\n      return ok(code)\n    }\n\n    if (markdownSpace(code)) {\n      return factorySpace(effects, atBreak, types.whitespace)(code)\n    }\n\n    // To do: generate `data` tokens, add the `text` token later.\n    // Needs edit map, see: `markdown.rs`.\n    effects.enter(types.atxHeadingText)\n    return data(code)\n  }\n\n  /**\n   * In further sequence (after whitespace).\n   *\n   * Could be normal “visible” hashes in the heading or a final sequence.\n   *\n   * ```markdown\n   * > | ## aa ##\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function sequenceFurther(code) {\n    if (code === codes.numberSign) {\n      effects.consume(code)\n      return sequenceFurther\n    }\n\n    effects.exit(types.atxHeadingSequence)\n    return atBreak(code)\n  }\n\n  /**\n   * In text.\n   *\n   * ```markdown\n   * > | ## aa\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function data(code) {\n    if (\n      code === codes.eof ||\n      code === codes.numberSign ||\n      markdownLineEndingOrSpace(code)\n    ) {\n      effects.exit(types.atxHeadingText)\n      return atBreak(code)\n    }\n\n    effects.consume(code)\n    return data\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {\n  asciiAlpha,\n  asciiAlphanumeric,\n  markdownLineEnding,\n  markdownLineEndingOrSpace,\n  markdownSpace\n} from 'micromark-util-character'\nimport {htmlBlockNames, htmlRawNames} from 'micromark-util-html-tag-name'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {constants} from 'micromark-util-symbol/constants.js'\nimport {types} from 'micromark-util-symbol/types.js'\nimport {ok as assert} from 'uvu/assert'\nimport {blankLine} from './blank-line.js'\n\n/** @type {Construct} */\nexport const htmlFlow = {\n  name: 'htmlFlow',\n  tokenize: tokenizeHtmlFlow,\n  resolveTo: resolveToHtmlFlow,\n  concrete: true\n}\n\n/** @type {Construct} */\nconst blankLineBefore = {tokenize: tokenizeBlankLineBefore, partial: true}\nconst nonLazyContinuationStart = {\n  tokenize: tokenizeNonLazyContinuationStart,\n  partial: true\n}\n\n/** @type {Resolver} */\nfunction resolveToHtmlFlow(events) {\n  let index = events.length\n\n  while (index--) {\n    if (\n      events[index][0] === 'enter' &&\n      events[index][1].type === types.htmlFlow\n    ) {\n      break\n    }\n  }\n\n  if (index > 1 && events[index - 2][1].type === types.linePrefix) {\n    // Add the prefix start to the HTML token.\n    events[index][1].start = events[index - 2][1].start\n    // Add the prefix start to the HTML line token.\n    events[index + 1][1].start = events[index - 2][1].start\n    // Remove the line prefix.\n    events.splice(index - 2, 2)\n  }\n\n  return events\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeHtmlFlow(effects, ok, nok) {\n  const self = this\n  /** @type {number} */\n  let marker\n  /** @type {boolean} */\n  let closingTag\n  /** @type {string} */\n  let buffer\n  /** @type {number} */\n  let index\n  /** @type {Code} */\n  let markerB\n\n  return start\n\n  /**\n   * Start of HTML (flow).\n   *\n   * ```markdown\n   * > | <x />\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    // To do: parse indent like `markdown-rs`.\n    return before(code)\n  }\n\n  /**\n   * At `<`, after optional whitespace.\n   *\n   * ```markdown\n   * > | <x />\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function before(code) {\n    assert(code === codes.lessThan, 'expected `<`')\n    effects.enter(types.htmlFlow)\n    effects.enter(types.htmlFlowData)\n    effects.consume(code)\n    return open\n  }\n\n  /**\n   * After `<`, at tag name or other stuff.\n   *\n   * ```markdown\n   * > | <x />\n   *      ^\n   * > | <!doctype>\n   *      ^\n   * > | <!--xxx-->\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function open(code) {\n    if (code === codes.exclamationMark) {\n      effects.consume(code)\n      return declarationOpen\n    }\n\n    if (code === codes.slash) {\n      effects.consume(code)\n      closingTag = true\n      return tagCloseStart\n    }\n\n    if (code === codes.questionMark) {\n      effects.consume(code)\n      marker = constants.htmlInstruction\n      // To do:\n      // tokenizer.concrete = true\n      // To do: use `markdown-rs` style interrupt.\n      // While we’re in an instruction instead of a declaration, we’re on a `?`\n      // right now, so we do need to search for `>`, similar to declarations.\n      return self.interrupt ? ok : continuationDeclarationInside\n    }\n\n    // ASCII alphabetical.\n    if (asciiAlpha(code)) {\n      effects.consume(code)\n      // @ts-expect-error: not null.\n      buffer = String.fromCharCode(code)\n      return tagName\n    }\n\n    return nok(code)\n  }\n\n  /**\n   * After `<!`, at declaration, comment, or CDATA.\n   *\n   * ```markdown\n   * > | <!doctype>\n   *       ^\n   * > | <!--xxx-->\n   *       ^\n   * > | <![CDATA[>&<]]>\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function declarationOpen(code) {\n    if (code === codes.dash) {\n      effects.consume(code)\n      marker = constants.htmlComment\n      return commentOpenInside\n    }\n\n    if (code === codes.leftSquareBracket) {\n      effects.consume(code)\n      marker = constants.htmlCdata\n      index = 0\n      return cdataOpenInside\n    }\n\n    // ASCII alphabetical.\n    if (asciiAlpha(code)) {\n      effects.consume(code)\n      marker = constants.htmlDeclaration\n      // // Do not form containers.\n      // tokenizer.concrete = true\n      return self.interrupt ? ok : continuationDeclarationInside\n    }\n\n    return nok(code)\n  }\n\n  /**\n   * After `<!-`, inside a comment, at another `-`.\n   *\n   * ```markdown\n   * > | <!--xxx-->\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function commentOpenInside(code) {\n    if (code === codes.dash) {\n      effects.consume(code)\n      // // Do not form containers.\n      // tokenizer.concrete = true\n      return self.interrupt ? ok : continuationDeclarationInside\n    }\n\n    return nok(code)\n  }\n\n  /**\n   * After `<![`, inside CDATA, expecting `CDATA[`.\n   *\n   * ```markdown\n   * > | <![CDATA[>&<]]>\n   *        ^^^^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function cdataOpenInside(code) {\n    const value = constants.cdataOpeningString\n\n    if (code === value.charCodeAt(index++)) {\n      effects.consume(code)\n\n      if (index === value.length) {\n        // // Do not form containers.\n        // tokenizer.concrete = true\n        return self.interrupt ? ok : continuation\n      }\n\n      return cdataOpenInside\n    }\n\n    return nok(code)\n  }\n\n  /**\n   * After `</`, in closing tag, at tag name.\n   *\n   * ```markdown\n   * > | </x>\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagCloseStart(code) {\n    if (asciiAlpha(code)) {\n      effects.consume(code)\n      // @ts-expect-error: not null.\n      buffer = String.fromCharCode(code)\n      return tagName\n    }\n\n    return nok(code)\n  }\n\n  /**\n   * In tag name.\n   *\n   * ```markdown\n   * > | <ab>\n   *      ^^\n   * > | </ab>\n   *       ^^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagName(code) {\n    if (\n      code === codes.eof ||\n      code === codes.slash ||\n      code === codes.greaterThan ||\n      markdownLineEndingOrSpace(code)\n    ) {\n      const slash = code === codes.slash\n      const name = buffer.toLowerCase()\n\n      if (!slash && !closingTag && htmlRawNames.includes(name)) {\n        marker = constants.htmlRaw\n        // // Do not form containers.\n        // tokenizer.concrete = true\n        return self.interrupt ? ok(code) : continuation(code)\n      }\n\n      if (htmlBlockNames.includes(buffer.toLowerCase())) {\n        marker = constants.htmlBasic\n\n        if (slash) {\n          effects.consume(code)\n          return basicSelfClosing\n        }\n\n        // // Do not form containers.\n        // tokenizer.concrete = true\n        return self.interrupt ? ok(code) : continuation(code)\n      }\n\n      marker = constants.htmlComplete\n      // Do not support complete HTML when interrupting.\n      return self.interrupt && !self.parser.lazy[self.now().line]\n        ? nok(code)\n        : closingTag\n        ? completeClosingTagAfter(code)\n        : completeAttributeNameBefore(code)\n    }\n\n    // ASCII alphanumerical and `-`.\n    if (code === codes.dash || asciiAlphanumeric(code)) {\n      effects.consume(code)\n      buffer += String.fromCharCode(code)\n      return tagName\n    }\n\n    return nok(code)\n  }\n\n  /**\n   * After closing slash of a basic tag name.\n   *\n   * ```markdown\n   * > | <div/>\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function basicSelfClosing(code) {\n    if (code === codes.greaterThan) {\n      effects.consume(code)\n      // // Do not form containers.\n      // tokenizer.concrete = true\n      return self.interrupt ? ok : continuation\n    }\n\n    return nok(code)\n  }\n\n  /**\n   * After closing slash of a complete tag name.\n   *\n   * ```markdown\n   * > | <x/>\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeClosingTagAfter(code) {\n    if (markdownSpace(code)) {\n      effects.consume(code)\n      return completeClosingTagAfter\n    }\n\n    return completeEnd(code)\n  }\n\n  /**\n   * At an attribute name.\n   *\n   * At first, this state is used after a complete tag name, after whitespace,\n   * where it expects optional attributes or the end of the tag.\n   * It is also reused after attributes, when expecting more optional\n   * attributes.\n   *\n   * ```markdown\n   * > | <a />\n   *        ^\n   * > | <a :b>\n   *        ^\n   * > | <a _b>\n   *        ^\n   * > | <a b>\n   *        ^\n   * > | <a >\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAttributeNameBefore(code) {\n    if (code === codes.slash) {\n      effects.consume(code)\n      return completeEnd\n    }\n\n    // ASCII alphanumerical and `:` and `_`.\n    if (code === codes.colon || code === codes.underscore || asciiAlpha(code)) {\n      effects.consume(code)\n      return completeAttributeName\n    }\n\n    if (markdownSpace(code)) {\n      effects.consume(code)\n      return completeAttributeNameBefore\n    }\n\n    return completeEnd(code)\n  }\n\n  /**\n   * In attribute name.\n   *\n   * ```markdown\n   * > | <a :b>\n   *         ^\n   * > | <a _b>\n   *         ^\n   * > | <a b>\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAttributeName(code) {\n    // ASCII alphanumerical and `-`, `.`, `:`, and `_`.\n    if (\n      code === codes.dash ||\n      code === codes.dot ||\n      code === codes.colon ||\n      code === codes.underscore ||\n      asciiAlphanumeric(code)\n    ) {\n      effects.consume(code)\n      return completeAttributeName\n    }\n\n    return completeAttributeNameAfter(code)\n  }\n\n  /**\n   * After attribute name, at an optional initializer, the end of the tag, or\n   * whitespace.\n   *\n   * ```markdown\n   * > | <a b>\n   *         ^\n   * > | <a b=c>\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAttributeNameAfter(code) {\n    if (code === codes.equalsTo) {\n      effects.consume(code)\n      return completeAttributeValueBefore\n    }\n\n    if (markdownSpace(code)) {\n      effects.consume(code)\n      return completeAttributeNameAfter\n    }\n\n    return completeAttributeNameBefore(code)\n  }\n\n  /**\n   * Before unquoted, double quoted, or single quoted attribute value, allowing\n   * whitespace.\n   *\n   * ```markdown\n   * > | <a b=c>\n   *          ^\n   * > | <a b=\"c\">\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAttributeValueBefore(code) {\n    if (\n      code === codes.eof ||\n      code === codes.lessThan ||\n      code === codes.equalsTo ||\n      code === codes.greaterThan ||\n      code === codes.graveAccent\n    ) {\n      return nok(code)\n    }\n\n    if (code === codes.quotationMark || code === codes.apostrophe) {\n      effects.consume(code)\n      markerB = code\n      return completeAttributeValueQuoted\n    }\n\n    if (markdownSpace(code)) {\n      effects.consume(code)\n      return completeAttributeValueBefore\n    }\n\n    return completeAttributeValueUnquoted(code)\n  }\n\n  /**\n   * In double or single quoted attribute value.\n   *\n   * ```markdown\n   * > | <a b=\"c\">\n   *           ^\n   * > | <a b='c'>\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAttributeValueQuoted(code) {\n    if (code === markerB) {\n      effects.consume(code)\n      markerB = null\n      return completeAttributeValueQuotedAfter\n    }\n\n    if (code === codes.eof || markdownLineEnding(code)) {\n      return nok(code)\n    }\n\n    effects.consume(code)\n    return completeAttributeValueQuoted\n  }\n\n  /**\n   * In unquoted attribute value.\n   *\n   * ```markdown\n   * > | <a b=c>\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAttributeValueUnquoted(code) {\n    if (\n      code === codes.eof ||\n      code === codes.quotationMark ||\n      code === codes.apostrophe ||\n      code === codes.slash ||\n      code === codes.lessThan ||\n      code === codes.equalsTo ||\n      code === codes.greaterThan ||\n      code === codes.graveAccent ||\n      markdownLineEndingOrSpace(code)\n    ) {\n      return completeAttributeNameAfter(code)\n    }\n\n    effects.consume(code)\n    return completeAttributeValueUnquoted\n  }\n\n  /**\n   * After double or single quoted attribute value, before whitespace or the\n   * end of the tag.\n   *\n   * ```markdown\n   * > | <a b=\"c\">\n   *            ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAttributeValueQuotedAfter(code) {\n    if (\n      code === codes.slash ||\n      code === codes.greaterThan ||\n      markdownSpace(code)\n    ) {\n      return completeAttributeNameBefore(code)\n    }\n\n    return nok(code)\n  }\n\n  /**\n   * In certain circumstances of a complete tag where only an `>` is allowed.\n   *\n   * ```markdown\n   * > | <a b=\"c\">\n   *             ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeEnd(code) {\n    if (code === codes.greaterThan) {\n      effects.consume(code)\n      return completeAfter\n    }\n\n    return nok(code)\n  }\n\n  /**\n   * After `>` in a complete tag.\n   *\n   * ```markdown\n   * > | <x>\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAfter(code) {\n    if (code === codes.eof || markdownLineEnding(code)) {\n      // // Do not form containers.\n      // tokenizer.concrete = true\n      return continuation(code)\n    }\n\n    if (markdownSpace(code)) {\n      effects.consume(code)\n      return completeAfter\n    }\n\n    return nok(code)\n  }\n\n  /**\n   * In continuation of any HTML kind.\n   *\n   * ```markdown\n   * > | <!--xxx-->\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuation(code) {\n    if (code === codes.dash && marker === constants.htmlComment) {\n      effects.consume(code)\n      return continuationCommentInside\n    }\n\n    if (code === codes.lessThan && marker === constants.htmlRaw) {\n      effects.consume(code)\n      return continuationRawTagOpen\n    }\n\n    if (code === codes.greaterThan && marker === constants.htmlDeclaration) {\n      effects.consume(code)\n      return continuationClose\n    }\n\n    if (code === codes.questionMark && marker === constants.htmlInstruction) {\n      effects.consume(code)\n      return continuationDeclarationInside\n    }\n\n    if (code === codes.rightSquareBracket && marker === constants.htmlCdata) {\n      effects.consume(code)\n      return continuationCdataInside\n    }\n\n    if (\n      markdownLineEnding(code) &&\n      (marker === constants.htmlBasic || marker === constants.htmlComplete)\n    ) {\n      effects.exit(types.htmlFlowData)\n      return effects.check(\n        blankLineBefore,\n        continuationAfter,\n        continuationStart\n      )(code)\n    }\n\n    if (code === codes.eof || markdownLineEnding(code)) {\n      effects.exit(types.htmlFlowData)\n      return continuationStart(code)\n    }\n\n    effects.consume(code)\n    return continuation\n  }\n\n  /**\n   * In continuation, at eol.\n   *\n   * ```markdown\n   * > | <x>\n   *        ^\n   *   | asd\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationStart(code) {\n    return effects.check(\n      nonLazyContinuationStart,\n      continuationStartNonLazy,\n      continuationAfter\n    )(code)\n  }\n\n  /**\n   * In continuation, at eol, before non-lazy content.\n   *\n   * ```markdown\n   * > | <x>\n   *        ^\n   *   | asd\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationStartNonLazy(code) {\n    assert(markdownLineEnding(code))\n    effects.enter(types.lineEnding)\n    effects.consume(code)\n    effects.exit(types.lineEnding)\n    return continuationBefore\n  }\n\n  /**\n   * In continuation, before non-lazy content.\n   *\n   * ```markdown\n   *   | <x>\n   * > | asd\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationBefore(code) {\n    if (code === codes.eof || markdownLineEnding(code)) {\n      return continuationStart(code)\n    }\n\n    effects.enter(types.htmlFlowData)\n    return continuation(code)\n  }\n\n  /**\n   * In comment continuation, after one `-`, expecting another.\n   *\n   * ```markdown\n   * > | <!--xxx-->\n   *             ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationCommentInside(code) {\n    if (code === codes.dash) {\n      effects.consume(code)\n      return continuationDeclarationInside\n    }\n\n    return continuation(code)\n  }\n\n  /**\n   * In raw continuation, after `<`, at `/`.\n   *\n   * ```markdown\n   * > | <script>console.log(1)</script>\n   *                            ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationRawTagOpen(code) {\n    if (code === codes.slash) {\n      effects.consume(code)\n      buffer = ''\n      return continuationRawEndTag\n    }\n\n    return continuation(code)\n  }\n\n  /**\n   * In raw continuation, after `</`, in a raw tag name.\n   *\n   * ```markdown\n   * > | <script>console.log(1)</script>\n   *                             ^^^^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationRawEndTag(code) {\n    if (code === codes.greaterThan) {\n      const name = buffer.toLowerCase()\n\n      if (htmlRawNames.includes(name)) {\n        effects.consume(code)\n        return continuationClose\n      }\n\n      return continuation(code)\n    }\n\n    if (asciiAlpha(code) && buffer.length < constants.htmlRawSizeMax) {\n      effects.consume(code)\n      // @ts-expect-error: not null.\n      buffer += String.fromCharCode(code)\n      return continuationRawEndTag\n    }\n\n    return continuation(code)\n  }\n\n  /**\n   * In cdata continuation, after `]`, expecting `]>`.\n   *\n   * ```markdown\n   * > | <![CDATA[>&<]]>\n   *                  ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationCdataInside(code) {\n    if (code === codes.rightSquareBracket) {\n      effects.consume(code)\n      return continuationDeclarationInside\n    }\n\n    return continuation(code)\n  }\n\n  /**\n   * In declaration or instruction continuation, at `>`.\n   *\n   * ```markdown\n   * > | <!-->\n   *         ^\n   * > | <?>\n   *       ^\n   * > | <!q>\n   *        ^\n   * > | <!--ab-->\n   *             ^\n   * > | <![CDATA[>&<]]>\n   *                   ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationDeclarationInside(code) {\n    if (code === codes.greaterThan) {\n      effects.consume(code)\n      return continuationClose\n    }\n\n    // More dashes.\n    if (code === codes.dash && marker === constants.htmlComment) {\n      effects.consume(code)\n      return continuationDeclarationInside\n    }\n\n    return continuation(code)\n  }\n\n  /**\n   * In closed continuation: everything we get until the eol/eof is part of it.\n   *\n   * ```markdown\n   * > | <!doctype>\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationClose(code) {\n    if (code === codes.eof || markdownLineEnding(code)) {\n      effects.exit(types.htmlFlowData)\n      return continuationAfter(code)\n    }\n\n    effects.consume(code)\n    return continuationClose\n  }\n\n  /**\n   * Done.\n   *\n   * ```markdown\n   * > | <!doctype>\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationAfter(code) {\n    effects.exit(types.htmlFlow)\n    // // Feel free to interrupt.\n    // tokenizer.interrupt = false\n    // // No longer concrete.\n    // tokenizer.concrete = false\n    return ok(code)\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeNonLazyContinuationStart(effects, ok, nok) {\n  const self = this\n\n  return start\n\n  /**\n   * At eol, before continuation.\n   *\n   * ```markdown\n   * > | * ```js\n   *            ^\n   *   | b\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    if (markdownLineEnding(code)) {\n      effects.enter(types.lineEnding)\n      effects.consume(code)\n      effects.exit(types.lineEnding)\n      return after\n    }\n\n    return nok(code)\n  }\n\n  /**\n   * A continuation.\n   *\n   * ```markdown\n   *   | * ```js\n   * > | b\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    return self.parser.lazy[self.now().line] ? nok(code) : ok(code)\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeBlankLineBefore(effects, ok, nok) {\n  return start\n\n  /**\n   * Before eol, expecting blank line.\n   *\n   * ```markdown\n   * > | <div>\n   *          ^\n   *   |\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    assert(markdownLineEnding(code), 'expected a line ending')\n    effects.enter(types.lineEnding)\n    effects.consume(code)\n    effects.exit(types.lineEnding)\n    return effects.attempt(blankLine, ok, nok)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {\n  asciiAlpha,\n  asciiAlphanumeric,\n  markdownLineEnding,\n  markdownLineEndingOrSpace,\n  markdownSpace\n} from 'micromark-util-character'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {constants} from 'micromark-util-symbol/constants.js'\nimport {types} from 'micromark-util-symbol/types.js'\nimport {ok as assert} from 'uvu/assert'\n\n/** @type {Construct} */\nexport const htmlText = {name: 'htmlText', tokenize: tokenizeHtmlText}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeHtmlText(effects, ok, nok) {\n  const self = this\n  /** @type {NonNullable<Code> | undefined} */\n  let marker\n  /** @type {number} */\n  let index\n  /** @type {State} */\n  let returnState\n\n  return start\n\n  /**\n   * Start of HTML (text).\n   *\n   * ```markdown\n   * > | a <b> c\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    assert(code === codes.lessThan, 'expected `<`')\n    effects.enter(types.htmlText)\n    effects.enter(types.htmlTextData)\n    effects.consume(code)\n    return open\n  }\n\n  /**\n   * After `<`, at tag name or other stuff.\n   *\n   * ```markdown\n   * > | a <b> c\n   *        ^\n   * > | a <!doctype> c\n   *        ^\n   * > | a <!--b--> c\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function open(code) {\n    if (code === codes.exclamationMark) {\n      effects.consume(code)\n      return declarationOpen\n    }\n\n    if (code === codes.slash) {\n      effects.consume(code)\n      return tagCloseStart\n    }\n\n    if (code === codes.questionMark) {\n      effects.consume(code)\n      return instruction\n    }\n\n    // ASCII alphabetical.\n    if (asciiAlpha(code)) {\n      effects.consume(code)\n      return tagOpen\n    }\n\n    return nok(code)\n  }\n\n  /**\n   * After `<!`, at declaration, comment, or CDATA.\n   *\n   * ```markdown\n   * > | a <!doctype> c\n   *         ^\n   * > | a <!--b--> c\n   *         ^\n   * > | a <![CDATA[>&<]]> c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function declarationOpen(code) {\n    if (code === codes.dash) {\n      effects.consume(code)\n      return commentOpenInside\n    }\n\n    if (code === codes.leftSquareBracket) {\n      effects.consume(code)\n      index = 0\n      return cdataOpenInside\n    }\n\n    if (asciiAlpha(code)) {\n      effects.consume(code)\n      return declaration\n    }\n\n    return nok(code)\n  }\n\n  /**\n   * In a comment, after `<!-`, at another `-`.\n   *\n   * ```markdown\n   * > | a <!--b--> c\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function commentOpenInside(code) {\n    if (code === codes.dash) {\n      effects.consume(code)\n      return commentEnd\n    }\n\n    return nok(code)\n  }\n\n  /**\n   * In comment.\n   *\n   * ```markdown\n   * > | a <!--b--> c\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function comment(code) {\n    if (code === codes.eof) {\n      return nok(code)\n    }\n\n    if (code === codes.dash) {\n      effects.consume(code)\n      return commentClose\n    }\n\n    if (markdownLineEnding(code)) {\n      returnState = comment\n      return lineEndingBefore(code)\n    }\n\n    effects.consume(code)\n    return comment\n  }\n\n  /**\n   * In comment, after `-`.\n   *\n   * ```markdown\n   * > | a <!--b--> c\n   *             ^\n   * ```\n   *\n   * @type {State}\n   */\n  function commentClose(code) {\n    if (code === codes.dash) {\n      effects.consume(code)\n      return commentEnd\n    }\n\n    return comment(code)\n  }\n\n  /**\n   * In comment, after `--`.\n   *\n   * ```markdown\n   * > | a <!--b--> c\n   *              ^\n   * ```\n   *\n   * @type {State}\n   */\n  function commentEnd(code) {\n    return code === codes.greaterThan\n      ? end(code)\n      : code === codes.dash\n      ? commentClose(code)\n      : comment(code)\n  }\n\n  /**\n   * After `<![`, in CDATA, expecting `CDATA[`.\n   *\n   * ```markdown\n   * > | a <![CDATA[>&<]]> b\n   *          ^^^^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function cdataOpenInside(code) {\n    const value = constants.cdataOpeningString\n\n    if (code === value.charCodeAt(index++)) {\n      effects.consume(code)\n      return index === value.length ? cdata : cdataOpenInside\n    }\n\n    return nok(code)\n  }\n\n  /**\n   * In CDATA.\n   *\n   * ```markdown\n   * > | a <![CDATA[>&<]]> b\n   *                ^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function cdata(code) {\n    if (code === codes.eof) {\n      return nok(code)\n    }\n\n    if (code === codes.rightSquareBracket) {\n      effects.consume(code)\n      return cdataClose\n    }\n\n    if (markdownLineEnding(code)) {\n      returnState = cdata\n      return lineEndingBefore(code)\n    }\n\n    effects.consume(code)\n    return cdata\n  }\n\n  /**\n   * In CDATA, after `]`, at another `]`.\n   *\n   * ```markdown\n   * > | a <![CDATA[>&<]]> b\n   *                    ^\n   * ```\n   *\n   * @type {State}\n   */\n  function cdataClose(code) {\n    if (code === codes.rightSquareBracket) {\n      effects.consume(code)\n      return cdataEnd\n    }\n\n    return cdata(code)\n  }\n\n  /**\n   * In CDATA, after `]]`, at `>`.\n   *\n   * ```markdown\n   * > | a <![CDATA[>&<]]> b\n   *                     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function cdataEnd(code) {\n    if (code === codes.greaterThan) {\n      return end(code)\n    }\n\n    if (code === codes.rightSquareBracket) {\n      effects.consume(code)\n      return cdataEnd\n    }\n\n    return cdata(code)\n  }\n\n  /**\n   * In declaration.\n   *\n   * ```markdown\n   * > | a <!b> c\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function declaration(code) {\n    if (code === codes.eof || code === codes.greaterThan) {\n      return end(code)\n    }\n\n    if (markdownLineEnding(code)) {\n      returnState = declaration\n      return lineEndingBefore(code)\n    }\n\n    effects.consume(code)\n    return declaration\n  }\n\n  /**\n   * In instruction.\n   *\n   * ```markdown\n   * > | a <?b?> c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function instruction(code) {\n    if (code === codes.eof) {\n      return nok(code)\n    }\n\n    if (code === codes.questionMark) {\n      effects.consume(code)\n      return instructionClose\n    }\n\n    if (markdownLineEnding(code)) {\n      returnState = instruction\n      return lineEndingBefore(code)\n    }\n\n    effects.consume(code)\n    return instruction\n  }\n\n  /**\n   * In instruction, after `?`, at `>`.\n   *\n   * ```markdown\n   * > | a <?b?> c\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function instructionClose(code) {\n    return code === codes.greaterThan ? end(code) : instruction(code)\n  }\n\n  /**\n   * After `</`, in closing tag, at tag name.\n   *\n   * ```markdown\n   * > | a </b> c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagCloseStart(code) {\n    // ASCII alphabetical.\n    if (asciiAlpha(code)) {\n      effects.consume(code)\n      return tagClose\n    }\n\n    return nok(code)\n  }\n\n  /**\n   * After `</x`, in a tag name.\n   *\n   * ```markdown\n   * > | a </b> c\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagClose(code) {\n    // ASCII alphanumerical and `-`.\n    if (code === codes.dash || asciiAlphanumeric(code)) {\n      effects.consume(code)\n      return tagClose\n    }\n\n    return tagCloseBetween(code)\n  }\n\n  /**\n   * In closing tag, after tag name.\n   *\n   * ```markdown\n   * > | a </b> c\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagCloseBetween(code) {\n    if (markdownLineEnding(code)) {\n      returnState = tagCloseBetween\n      return lineEndingBefore(code)\n    }\n\n    if (markdownSpace(code)) {\n      effects.consume(code)\n      return tagCloseBetween\n    }\n\n    return end(code)\n  }\n\n  /**\n   * After `<x`, in opening tag name.\n   *\n   * ```markdown\n   * > | a <b> c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpen(code) {\n    // ASCII alphanumerical and `-`.\n    if (code === codes.dash || asciiAlphanumeric(code)) {\n      effects.consume(code)\n      return tagOpen\n    }\n\n    if (\n      code === codes.slash ||\n      code === codes.greaterThan ||\n      markdownLineEndingOrSpace(code)\n    ) {\n      return tagOpenBetween(code)\n    }\n\n    return nok(code)\n  }\n\n  /**\n   * In opening tag, after tag name.\n   *\n   * ```markdown\n   * > | a <b> c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpenBetween(code) {\n    if (code === codes.slash) {\n      effects.consume(code)\n      return end\n    }\n\n    // ASCII alphabetical and `:` and `_`.\n    if (code === codes.colon || code === codes.underscore || asciiAlpha(code)) {\n      effects.consume(code)\n      return tagOpenAttributeName\n    }\n\n    if (markdownLineEnding(code)) {\n      returnState = tagOpenBetween\n      return lineEndingBefore(code)\n    }\n\n    if (markdownSpace(code)) {\n      effects.consume(code)\n      return tagOpenBetween\n    }\n\n    return end(code)\n  }\n\n  /**\n   * In attribute name.\n   *\n   * ```markdown\n   * > | a <b c> d\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpenAttributeName(code) {\n    // ASCII alphabetical and `-`, `.`, `:`, and `_`.\n    if (\n      code === codes.dash ||\n      code === codes.dot ||\n      code === codes.colon ||\n      code === codes.underscore ||\n      asciiAlphanumeric(code)\n    ) {\n      effects.consume(code)\n      return tagOpenAttributeName\n    }\n\n    return tagOpenAttributeNameAfter(code)\n  }\n\n  /**\n   * After attribute name, before initializer, the end of the tag, or\n   * whitespace.\n   *\n   * ```markdown\n   * > | a <b c> d\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpenAttributeNameAfter(code) {\n    if (code === codes.equalsTo) {\n      effects.consume(code)\n      return tagOpenAttributeValueBefore\n    }\n\n    if (markdownLineEnding(code)) {\n      returnState = tagOpenAttributeNameAfter\n      return lineEndingBefore(code)\n    }\n\n    if (markdownSpace(code)) {\n      effects.consume(code)\n      return tagOpenAttributeNameAfter\n    }\n\n    return tagOpenBetween(code)\n  }\n\n  /**\n   * Before unquoted, double quoted, or single quoted attribute value, allowing\n   * whitespace.\n   *\n   * ```markdown\n   * > | a <b c=d> e\n   *            ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpenAttributeValueBefore(code) {\n    if (\n      code === codes.eof ||\n      code === codes.lessThan ||\n      code === codes.equalsTo ||\n      code === codes.greaterThan ||\n      code === codes.graveAccent\n    ) {\n      return nok(code)\n    }\n\n    if (code === codes.quotationMark || code === codes.apostrophe) {\n      effects.consume(code)\n      marker = code\n      return tagOpenAttributeValueQuoted\n    }\n\n    if (markdownLineEnding(code)) {\n      returnState = tagOpenAttributeValueBefore\n      return lineEndingBefore(code)\n    }\n\n    if (markdownSpace(code)) {\n      effects.consume(code)\n      return tagOpenAttributeValueBefore\n    }\n\n    effects.consume(code)\n    return tagOpenAttributeValueUnquoted\n  }\n\n  /**\n   * In double or single quoted attribute value.\n   *\n   * ```markdown\n   * > | a <b c=\"d\"> e\n   *             ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpenAttributeValueQuoted(code) {\n    if (code === marker) {\n      effects.consume(code)\n      marker = undefined\n      return tagOpenAttributeValueQuotedAfter\n    }\n\n    if (code === codes.eof) {\n      return nok(code)\n    }\n\n    if (markdownLineEnding(code)) {\n      returnState = tagOpenAttributeValueQuoted\n      return lineEndingBefore(code)\n    }\n\n    effects.consume(code)\n    return tagOpenAttributeValueQuoted\n  }\n\n  /**\n   * In unquoted attribute value.\n   *\n   * ```markdown\n   * > | a <b c=d> e\n   *            ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpenAttributeValueUnquoted(code) {\n    if (\n      code === codes.eof ||\n      code === codes.quotationMark ||\n      code === codes.apostrophe ||\n      code === codes.lessThan ||\n      code === codes.equalsTo ||\n      code === codes.graveAccent\n    ) {\n      return nok(code)\n    }\n\n    if (\n      code === codes.slash ||\n      code === codes.greaterThan ||\n      markdownLineEndingOrSpace(code)\n    ) {\n      return tagOpenBetween(code)\n    }\n\n    effects.consume(code)\n    return tagOpenAttributeValueUnquoted\n  }\n\n  /**\n   * After double or single quoted attribute value, before whitespace or the end\n   * of the tag.\n   *\n   * ```markdown\n   * > | a <b c=\"d\"> e\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpenAttributeValueQuotedAfter(code) {\n    if (\n      code === codes.slash ||\n      code === codes.greaterThan ||\n      markdownLineEndingOrSpace(code)\n    ) {\n      return tagOpenBetween(code)\n    }\n\n    return nok(code)\n  }\n\n  /**\n   * In certain circumstances of a tag where only an `>` is allowed.\n   *\n   * ```markdown\n   * > | a <b c=\"d\"> e\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function end(code) {\n    if (code === codes.greaterThan) {\n      effects.consume(code)\n      effects.exit(types.htmlTextData)\n      effects.exit(types.htmlText)\n      return ok\n    }\n\n    return nok(code)\n  }\n\n  /**\n   * At eol.\n   *\n   * > 👉 **Note**: we can’t have blank lines in text, so no need to worry about\n   * > empty tokens.\n   *\n   * ```markdown\n   * > | a <!--a\n   *            ^\n   *   | b-->\n   * ```\n   *\n   * @type {State}\n   */\n  function lineEndingBefore(code) {\n    assert(returnState, 'expected return state')\n    assert(markdownLineEnding(code), 'expected eol')\n    effects.exit(types.htmlTextData)\n    effects.enter(types.lineEnding)\n    effects.consume(code)\n    effects.exit(types.lineEnding)\n    return lineEndingAfter\n  }\n\n  /**\n   * After eol, at optional whitespace.\n   *\n   * > 👉 **Note**: we can’t have blank lines in text, so no need to worry about\n   * > empty tokens.\n   *\n   * ```markdown\n   *   | a <!--a\n   * > | b-->\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function lineEndingAfter(code) {\n    // Always populated by defaults.\n    assert(\n      self.parser.constructs.disable.null,\n      'expected `disable.null` to be populated'\n    )\n    return markdownSpace(code)\n      ? factorySpace(\n          effects,\n          lineEndingAfterPrefix,\n          types.linePrefix,\n          self.parser.constructs.disable.null.includes('codeIndented')\n            ? undefined\n            : constants.tabSize\n        )(code)\n      : lineEndingAfterPrefix(code)\n  }\n\n  /**\n   * After eol, after optional whitespace.\n   *\n   * > 👉 **Note**: we can’t have blank lines in text, so no need to worry about\n   * > empty tokens.\n   *\n   * ```markdown\n   *   | a <!--a\n   * > | b-->\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function lineEndingAfterPrefix(code) {\n    effects.enter(types.htmlTextData)\n    return returnState(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').Event} Event\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factoryDestination} from 'micromark-factory-destination'\nimport {factoryLabel} from 'micromark-factory-label'\nimport {factoryTitle} from 'micromark-factory-title'\nimport {factoryWhitespace} from 'micromark-factory-whitespace'\nimport {markdownLineEndingOrSpace} from 'micromark-util-character'\nimport {push, splice} from 'micromark-util-chunked'\nimport {normalizeIdentifier} from 'micromark-util-normalize-identifier'\nimport {resolveAll} from 'micromark-util-resolve-all'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {constants} from 'micromark-util-symbol/constants.js'\nimport {types} from 'micromark-util-symbol/types.js'\nimport {ok as assert} from 'uvu/assert'\n\n/** @type {Construct} */\nexport const labelEnd = {\n  name: 'labelEnd',\n  tokenize: tokenizeLabelEnd,\n  resolveTo: resolveToLabelEnd,\n  resolveAll: resolveAllLabelEnd\n}\n\n/** @type {Construct} */\nconst resourceConstruct = {tokenize: tokenizeResource}\n/** @type {Construct} */\nconst referenceFullConstruct = {tokenize: tokenizeReferenceFull}\n/** @type {Construct} */\nconst referenceCollapsedConstruct = {tokenize: tokenizeReferenceCollapsed}\n\n/** @type {Resolver} */\nfunction resolveAllLabelEnd(events) {\n  let index = -1\n\n  while (++index < events.length) {\n    const token = events[index][1]\n\n    if (\n      token.type === types.labelImage ||\n      token.type === types.labelLink ||\n      token.type === types.labelEnd\n    ) {\n      // Remove the marker.\n      events.splice(index + 1, token.type === types.labelImage ? 4 : 2)\n      token.type = types.data\n      index++\n    }\n  }\n\n  return events\n}\n\n/** @type {Resolver} */\nfunction resolveToLabelEnd(events, context) {\n  let index = events.length\n  let offset = 0\n  /** @type {Token} */\n  let token\n  /** @type {number | undefined} */\n  let open\n  /** @type {number | undefined} */\n  let close\n  /** @type {Array<Event>} */\n  let media\n\n  // Find an opening.\n  while (index--) {\n    token = events[index][1]\n\n    if (open) {\n      // If we see another link, or inactive link label, we’ve been here before.\n      if (\n        token.type === types.link ||\n        (token.type === types.labelLink && token._inactive)\n      ) {\n        break\n      }\n\n      // Mark other link openings as inactive, as we can’t have links in\n      // links.\n      if (events[index][0] === 'enter' && token.type === types.labelLink) {\n        token._inactive = true\n      }\n    } else if (close) {\n      if (\n        events[index][0] === 'enter' &&\n        (token.type === types.labelImage || token.type === types.labelLink) &&\n        !token._balanced\n      ) {\n        open = index\n\n        if (token.type !== types.labelLink) {\n          offset = 2\n          break\n        }\n      }\n    } else if (token.type === types.labelEnd) {\n      close = index\n    }\n  }\n\n  assert(open !== undefined, '`open` is supposed to be found')\n  assert(close !== undefined, '`close` is supposed to be found')\n\n  const group = {\n    type: events[open][1].type === types.labelLink ? types.link : types.image,\n    start: Object.assign({}, events[open][1].start),\n    end: Object.assign({}, events[events.length - 1][1].end)\n  }\n\n  const label = {\n    type: types.label,\n    start: Object.assign({}, events[open][1].start),\n    end: Object.assign({}, events[close][1].end)\n  }\n\n  const text = {\n    type: types.labelText,\n    start: Object.assign({}, events[open + offset + 2][1].end),\n    end: Object.assign({}, events[close - 2][1].start)\n  }\n\n  media = [\n    ['enter', group, context],\n    ['enter', label, context]\n  ]\n\n  // Opening marker.\n  media = push(media, events.slice(open + 1, open + offset + 3))\n\n  // Text open.\n  media = push(media, [['enter', text, context]])\n\n  // Always populated by defaults.\n  assert(\n    context.parser.constructs.insideSpan.null,\n    'expected `insideSpan.null` to be populated'\n  )\n  // Between.\n  media = push(\n    media,\n    resolveAll(\n      context.parser.constructs.insideSpan.null,\n      events.slice(open + offset + 4, close - 3),\n      context\n    )\n  )\n\n  // Text close, marker close, label close.\n  media = push(media, [\n    ['exit', text, context],\n    events[close - 2],\n    events[close - 1],\n    ['exit', label, context]\n  ])\n\n  // Reference, resource, or so.\n  media = push(media, events.slice(close + 1))\n\n  // Media close.\n  media = push(media, [['exit', group, context]])\n\n  splice(events, open, events.length, media)\n\n  return events\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeLabelEnd(effects, ok, nok) {\n  const self = this\n  let index = self.events.length\n  /** @type {Token} */\n  let labelStart\n  /** @type {boolean} */\n  let defined\n\n  // Find an opening.\n  while (index--) {\n    if (\n      (self.events[index][1].type === types.labelImage ||\n        self.events[index][1].type === types.labelLink) &&\n      !self.events[index][1]._balanced\n    ) {\n      labelStart = self.events[index][1]\n      break\n    }\n  }\n\n  return start\n\n  /**\n   * Start of label end.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *       ^\n   * > | [a][b] c\n   *       ^\n   * > | [a][] b\n   *       ^\n   * > | [a] b\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    assert(code === codes.rightSquareBracket, 'expected `]`')\n\n    // If there is not an okay opening.\n    if (!labelStart) {\n      return nok(code)\n    }\n\n    // If the corresponding label (link) start is marked as inactive,\n    // it means we’d be wrapping a link, like this:\n    //\n    // ```markdown\n    // > | a [b [c](d) e](f) g.\n    //                  ^\n    // ```\n    //\n    // We can’t have that, so it’s just balanced brackets.\n    if (labelStart._inactive) {\n      return labelEndNok(code)\n    }\n\n    defined = self.parser.defined.includes(\n      normalizeIdentifier(\n        self.sliceSerialize({start: labelStart.end, end: self.now()})\n      )\n    )\n    effects.enter(types.labelEnd)\n    effects.enter(types.labelMarker)\n    effects.consume(code)\n    effects.exit(types.labelMarker)\n    effects.exit(types.labelEnd)\n    return after\n  }\n\n  /**\n   * After `]`.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *       ^\n   * > | [a][b] c\n   *       ^\n   * > | [a][] b\n   *       ^\n   * > | [a] b\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    // Note: `markdown-rs` also parses GFM footnotes here, which for us is in\n    // an extension.\n\n    // Resource (`[asd](fgh)`)?\n    if (code === codes.leftParenthesis) {\n      return effects.attempt(\n        resourceConstruct,\n        labelEndOk,\n        defined ? labelEndOk : labelEndNok\n      )(code)\n    }\n\n    // Full (`[asd][fgh]`) or collapsed (`[asd][]`) reference?\n    if (code === codes.leftSquareBracket) {\n      return effects.attempt(\n        referenceFullConstruct,\n        labelEndOk,\n        defined ? referenceNotFull : labelEndNok\n      )(code)\n    }\n\n    // Shortcut (`[asd]`) reference?\n    return defined ? labelEndOk(code) : labelEndNok(code)\n  }\n\n  /**\n   * After `]`, at `[`, but not at a full reference.\n   *\n   * > 👉 **Note**: we only get here if the label is defined.\n   *\n   * ```markdown\n   * > | [a][] b\n   *        ^\n   * > | [a] b\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function referenceNotFull(code) {\n    return effects.attempt(\n      referenceCollapsedConstruct,\n      labelEndOk,\n      labelEndNok\n    )(code)\n  }\n\n  /**\n   * Done, we found something.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *           ^\n   * > | [a][b] c\n   *           ^\n   * > | [a][] b\n   *          ^\n   * > | [a] b\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function labelEndOk(code) {\n    // Note: `markdown-rs` does a bunch of stuff here.\n    return ok(code)\n  }\n\n  /**\n   * Done, it’s nothing.\n   *\n   * There was an okay opening, but we didn’t match anything.\n   *\n   * ```markdown\n   * > | [a](b c\n   *        ^\n   * > | [a][b c\n   *        ^\n   * > | [a] b\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function labelEndNok(code) {\n    labelStart._balanced = true\n    return nok(code)\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeResource(effects, ok, nok) {\n  return resourceStart\n\n  /**\n   * At a resource.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceStart(code) {\n    assert(code === codes.leftParenthesis, 'expected left paren')\n    effects.enter(types.resource)\n    effects.enter(types.resourceMarker)\n    effects.consume(code)\n    effects.exit(types.resourceMarker)\n    return resourceBefore\n  }\n\n  /**\n   * In resource, after `(`, at optional whitespace.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceBefore(code) {\n    return markdownLineEndingOrSpace(code)\n      ? factoryWhitespace(effects, resourceOpen)(code)\n      : resourceOpen(code)\n  }\n\n  /**\n   * In resource, after optional whitespace, at `)` or a destination.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceOpen(code) {\n    if (code === codes.rightParenthesis) {\n      return resourceEnd(code)\n    }\n\n    return factoryDestination(\n      effects,\n      resourceDestinationAfter,\n      resourceDestinationMissing,\n      types.resourceDestination,\n      types.resourceDestinationLiteral,\n      types.resourceDestinationLiteralMarker,\n      types.resourceDestinationRaw,\n      types.resourceDestinationString,\n      constants.linkResourceDestinationBalanceMax\n    )(code)\n  }\n\n  /**\n   * In resource, after destination, at optional whitespace.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceDestinationAfter(code) {\n    return markdownLineEndingOrSpace(code)\n      ? factoryWhitespace(effects, resourceBetween)(code)\n      : resourceEnd(code)\n  }\n\n  /**\n   * At invalid destination.\n   *\n   * ```markdown\n   * > | [a](<<) b\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceDestinationMissing(code) {\n    return nok(code)\n  }\n\n  /**\n   * In resource, after destination and whitespace, at `(` or title.\n   *\n   * ```markdown\n   * > | [a](b ) c\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceBetween(code) {\n    if (\n      code === codes.quotationMark ||\n      code === codes.apostrophe ||\n      code === codes.leftParenthesis\n    ) {\n      return factoryTitle(\n        effects,\n        resourceTitleAfter,\n        nok,\n        types.resourceTitle,\n        types.resourceTitleMarker,\n        types.resourceTitleString\n      )(code)\n    }\n\n    return resourceEnd(code)\n  }\n\n  /**\n   * In resource, after title, at optional whitespace.\n   *\n   * ```markdown\n   * > | [a](b \"c\") d\n   *              ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceTitleAfter(code) {\n    return markdownLineEndingOrSpace(code)\n      ? factoryWhitespace(effects, resourceEnd)(code)\n      : resourceEnd(code)\n  }\n\n  /**\n   * In resource, at `)`.\n   *\n   * ```markdown\n   * > | [a](b) d\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceEnd(code) {\n    if (code === codes.rightParenthesis) {\n      effects.enter(types.resourceMarker)\n      effects.consume(code)\n      effects.exit(types.resourceMarker)\n      effects.exit(types.resource)\n      return ok\n    }\n\n    return nok(code)\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeReferenceFull(effects, ok, nok) {\n  const self = this\n\n  return referenceFull\n\n  /**\n   * In a reference (full), at the `[`.\n   *\n   * ```markdown\n   * > | [a][b] d\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function referenceFull(code) {\n    assert(code === codes.leftSquareBracket, 'expected left bracket')\n    return factoryLabel.call(\n      self,\n      effects,\n      referenceFullAfter,\n      referenceFullMissing,\n      types.reference,\n      types.referenceMarker,\n      types.referenceString\n    )(code)\n  }\n\n  /**\n   * In a reference (full), after `]`.\n   *\n   * ```markdown\n   * > | [a][b] d\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function referenceFullAfter(code) {\n    return self.parser.defined.includes(\n      normalizeIdentifier(\n        self.sliceSerialize(self.events[self.events.length - 1][1]).slice(1, -1)\n      )\n    )\n      ? ok(code)\n      : nok(code)\n  }\n\n  /**\n   * In reference (full) that was missing.\n   *\n   * ```markdown\n   * > | [a][b d\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function referenceFullMissing(code) {\n    return nok(code)\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeReferenceCollapsed(effects, ok, nok) {\n  return referenceCollapsedStart\n\n  /**\n   * In reference (collapsed), at `[`.\n   *\n   * > 👉 **Note**: we only get here if the label is defined.\n   *\n   * ```markdown\n   * > | [a][] d\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function referenceCollapsedStart(code) {\n    // We only attempt a collapsed label if there’s a `[`.\n    assert(code === codes.leftSquareBracket, 'expected left bracket')\n    effects.enter(types.reference)\n    effects.enter(types.referenceMarker)\n    effects.consume(code)\n    effects.exit(types.referenceMarker)\n    return referenceCollapsedOpen\n  }\n\n  /**\n   * In reference (collapsed), at `]`.\n   *\n   * > 👉 **Note**: we only get here if the label is defined.\n   *\n   * ```markdown\n   * > | [a][] d\n   *         ^\n   * ```\n   *\n   *  @type {State}\n   */\n  function referenceCollapsedOpen(code) {\n    if (code === codes.rightSquareBracket) {\n      effects.enter(types.referenceMarker)\n      effects.consume(code)\n      effects.exit(types.referenceMarker)\n      effects.exit(types.reference)\n      return ok\n    }\n\n    return nok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {types} from 'micromark-util-symbol/types.js'\nimport {ok as assert} from 'uvu/assert'\nimport {labelEnd} from './label-end.js'\n\n/** @type {Construct} */\nexport const labelStartImage = {\n  name: 'labelStartImage',\n  tokenize: tokenizeLabelStartImage,\n  resolveAll: labelEnd.resolveAll\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeLabelStartImage(effects, ok, nok) {\n  const self = this\n\n  return start\n\n  /**\n   * Start of label (image) start.\n   *\n   * ```markdown\n   * > | a ![b] c\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    assert(code === codes.exclamationMark, 'expected `!`')\n    effects.enter(types.labelImage)\n    effects.enter(types.labelImageMarker)\n    effects.consume(code)\n    effects.exit(types.labelImageMarker)\n    return open\n  }\n\n  /**\n   * After `!`, at `[`.\n   *\n   * ```markdown\n   * > | a ![b] c\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function open(code) {\n    if (code === codes.leftSquareBracket) {\n      effects.enter(types.labelMarker)\n      effects.consume(code)\n      effects.exit(types.labelMarker)\n      effects.exit(types.labelImage)\n      return after\n    }\n\n    return nok(code)\n  }\n\n  /**\n   * After `![`.\n   *\n   * ```markdown\n   * > | a ![b] c\n   *         ^\n   * ```\n   *\n   * This is needed in because, when GFM footnotes are enabled, images never\n   * form when started with a `^`.\n   * Instead, links form:\n   *\n   * ```markdown\n   * ![^a](b)\n   *\n   * ![^a][b]\n   *\n   * [b]: c\n   * ```\n   *\n   * ```html\n   * <p>!<a href=\\\"b\\\">^a</a></p>\n   * <p>!<a href=\\\"c\\\">^a</a></p>\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    // To do: use a new field to do this, this is still needed for\n    // `micromark-extension-gfm-footnote`, but the `label-start-link`\n    // behavior isn’t.\n    // Hidden footnotes hook.\n    /* c8 ignore next 3 */\n    return code === codes.caret &&\n      '_hiddenFootnoteSupport' in self.parser.constructs\n      ? nok(code)\n      : ok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {types} from 'micromark-util-symbol/types.js'\nimport {ok as assert} from 'uvu/assert'\nimport {labelEnd} from './label-end.js'\n\n/** @type {Construct} */\nexport const labelStartLink = {\n  name: 'labelStartLink',\n  tokenize: tokenizeLabelStartLink,\n  resolveAll: labelEnd.resolveAll\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeLabelStartLink(effects, ok, nok) {\n  const self = this\n\n  return start\n\n  /**\n   * Start of label (link) start.\n   *\n   * ```markdown\n   * > | a [b] c\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    assert(code === codes.leftSquareBracket, 'expected `[`')\n    effects.enter(types.labelLink)\n    effects.enter(types.labelMarker)\n    effects.consume(code)\n    effects.exit(types.labelMarker)\n    effects.exit(types.labelLink)\n    return after\n  }\n\n  /** @type {State} */\n  function after(code) {\n    // To do: this isn’t needed in `micromark-extension-gfm-footnote`,\n    // remove.\n    // Hidden footnotes hook.\n    /* c8 ignore next 3 */\n    return code === codes.caret &&\n      '_hiddenFootnoteSupport' in self.parser.constructs\n      ? nok(code)\n      : ok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding} from 'micromark-util-character'\nimport {types} from 'micromark-util-symbol/types.js'\nimport {ok as assert} from 'uvu/assert'\n\n/** @type {Construct} */\nexport const lineEnding = {name: 'lineEnding', tokenize: tokenizeLineEnding}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeLineEnding(effects, ok) {\n  return start\n\n  /** @type {State} */\n  function start(code) {\n    assert(markdownLineEnding(code), 'expected eol')\n    effects.enter(types.lineEnding)\n    effects.consume(code)\n    effects.exit(types.lineEnding)\n    return factorySpace(effects, ok, types.linePrefix)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').ContainerState} ContainerState\n * @typedef {import('micromark-util-types').Exiter} Exiter\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {asciiDigit, markdownSpace} from 'micromark-util-character'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {constants} from 'micromark-util-symbol/constants.js'\nimport {types} from 'micromark-util-symbol/types.js'\nimport {ok as assert} from 'uvu/assert'\nimport {blankLine} from './blank-line.js'\nimport {thematicBreak} from './thematic-break.js'\n\n/** @type {Construct} */\nexport const list = {\n  name: 'list',\n  tokenize: tokenizeListStart,\n  continuation: {tokenize: tokenizeListContinuation},\n  exit: tokenizeListEnd\n}\n\n/** @type {Construct} */\nconst listItemPrefixWhitespaceConstruct = {\n  tokenize: tokenizeListItemPrefixWhitespace,\n  partial: true\n}\n\n/** @type {Construct} */\nconst indentConstruct = {tokenize: tokenizeIndent, partial: true}\n\n// To do: `markdown-rs` parses list items on their own and later stitches them\n// together.\n\n/**\n * @type {Tokenizer}\n * @this {TokenizeContext}\n */\nfunction tokenizeListStart(effects, ok, nok) {\n  const self = this\n  const tail = self.events[self.events.length - 1]\n  let initialSize =\n    tail && tail[1].type === types.linePrefix\n      ? tail[2].sliceSerialize(tail[1], true).length\n      : 0\n  let size = 0\n\n  return start\n\n  /** @type {State} */\n  function start(code) {\n    assert(self.containerState, 'expected state')\n    const kind =\n      self.containerState.type ||\n      (code === codes.asterisk || code === codes.plusSign || code === codes.dash\n        ? types.listUnordered\n        : types.listOrdered)\n\n    if (\n      kind === types.listUnordered\n        ? !self.containerState.marker || code === self.containerState.marker\n        : asciiDigit(code)\n    ) {\n      if (!self.containerState.type) {\n        self.containerState.type = kind\n        effects.enter(kind, {_container: true})\n      }\n\n      if (kind === types.listUnordered) {\n        effects.enter(types.listItemPrefix)\n        return code === codes.asterisk || code === codes.dash\n          ? effects.check(thematicBreak, nok, atMarker)(code)\n          : atMarker(code)\n      }\n\n      if (!self.interrupt || code === codes.digit1) {\n        effects.enter(types.listItemPrefix)\n        effects.enter(types.listItemValue)\n        return inside(code)\n      }\n    }\n\n    return nok(code)\n  }\n\n  /** @type {State} */\n  function inside(code) {\n    assert(self.containerState, 'expected state')\n    if (asciiDigit(code) && ++size < constants.listItemValueSizeMax) {\n      effects.consume(code)\n      return inside\n    }\n\n    if (\n      (!self.interrupt || size < 2) &&\n      (self.containerState.marker\n        ? code === self.containerState.marker\n        : code === codes.rightParenthesis || code === codes.dot)\n    ) {\n      effects.exit(types.listItemValue)\n      return atMarker(code)\n    }\n\n    return nok(code)\n  }\n\n  /**\n   * @type {State}\n   **/\n  function atMarker(code) {\n    assert(self.containerState, 'expected state')\n    assert(code !== codes.eof, 'eof (`null`) is not a marker')\n    effects.enter(types.listItemMarker)\n    effects.consume(code)\n    effects.exit(types.listItemMarker)\n    self.containerState.marker = self.containerState.marker || code\n    return effects.check(\n      blankLine,\n      // Can’t be empty when interrupting.\n      self.interrupt ? nok : onBlank,\n      effects.attempt(\n        listItemPrefixWhitespaceConstruct,\n        endOfPrefix,\n        otherPrefix\n      )\n    )\n  }\n\n  /** @type {State} */\n  function onBlank(code) {\n    assert(self.containerState, 'expected state')\n    self.containerState.initialBlankLine = true\n    initialSize++\n    return endOfPrefix(code)\n  }\n\n  /** @type {State} */\n  function otherPrefix(code) {\n    if (markdownSpace(code)) {\n      effects.enter(types.listItemPrefixWhitespace)\n      effects.consume(code)\n      effects.exit(types.listItemPrefixWhitespace)\n      return endOfPrefix\n    }\n\n    return nok(code)\n  }\n\n  /** @type {State} */\n  function endOfPrefix(code) {\n    assert(self.containerState, 'expected state')\n    self.containerState.size =\n      initialSize +\n      self.sliceSerialize(effects.exit(types.listItemPrefix), true).length\n    return ok(code)\n  }\n}\n\n/**\n * @type {Tokenizer}\n * @this {TokenizeContext}\n */\nfunction tokenizeListContinuation(effects, ok, nok) {\n  const self = this\n\n  assert(self.containerState, 'expected state')\n  self.containerState._closeFlow = undefined\n\n  return effects.check(blankLine, onBlank, notBlank)\n\n  /** @type {State} */\n  function onBlank(code) {\n    assert(self.containerState, 'expected state')\n    assert(typeof self.containerState.size === 'number', 'expected size')\n    self.containerState.furtherBlankLines =\n      self.containerState.furtherBlankLines ||\n      self.containerState.initialBlankLine\n\n    // We have a blank line.\n    // Still, try to consume at most the items size.\n    return factorySpace(\n      effects,\n      ok,\n      types.listItemIndent,\n      self.containerState.size + 1\n    )(code)\n  }\n\n  /** @type {State} */\n  function notBlank(code) {\n    assert(self.containerState, 'expected state')\n    if (self.containerState.furtherBlankLines || !markdownSpace(code)) {\n      self.containerState.furtherBlankLines = undefined\n      self.containerState.initialBlankLine = undefined\n      return notInCurrentItem(code)\n    }\n\n    self.containerState.furtherBlankLines = undefined\n    self.containerState.initialBlankLine = undefined\n    return effects.attempt(indentConstruct, ok, notInCurrentItem)(code)\n  }\n\n  /** @type {State} */\n  function notInCurrentItem(code) {\n    assert(self.containerState, 'expected state')\n    // While we do continue, we signal that the flow should be closed.\n    self.containerState._closeFlow = true\n    // As we’re closing flow, we’re no longer interrupting.\n    self.interrupt = undefined\n    // Always populated by defaults.\n    assert(\n      self.parser.constructs.disable.null,\n      'expected `disable.null` to be populated'\n    )\n    return factorySpace(\n      effects,\n      effects.attempt(list, ok, nok),\n      types.linePrefix,\n      self.parser.constructs.disable.null.includes('codeIndented')\n        ? undefined\n        : constants.tabSize\n    )(code)\n  }\n}\n\n/**\n * @type {Tokenizer}\n * @this {TokenizeContext}\n */\nfunction tokenizeIndent(effects, ok, nok) {\n  const self = this\n\n  assert(self.containerState, 'expected state')\n  assert(typeof self.containerState.size === 'number', 'expected size')\n\n  return factorySpace(\n    effects,\n    afterPrefix,\n    types.listItemIndent,\n    self.containerState.size + 1\n  )\n\n  /** @type {State} */\n  function afterPrefix(code) {\n    assert(self.containerState, 'expected state')\n    const tail = self.events[self.events.length - 1]\n    return tail &&\n      tail[1].type === types.listItemIndent &&\n      tail[2].sliceSerialize(tail[1], true).length === self.containerState.size\n      ? ok(code)\n      : nok(code)\n  }\n}\n\n/**\n * @type {Exiter}\n * @this {TokenizeContext}\n */\nfunction tokenizeListEnd(effects) {\n  assert(this.containerState, 'expected state')\n  assert(typeof this.containerState.type === 'string', 'expected type')\n  effects.exit(this.containerState.type)\n}\n\n/**\n * @type {Tokenizer}\n * @this {TokenizeContext}\n */\nfunction tokenizeListItemPrefixWhitespace(effects, ok, nok) {\n  const self = this\n\n  // Always populated by defaults.\n  assert(\n    self.parser.constructs.disable.null,\n    'expected `disable.null` to be populated'\n  )\n\n  return factorySpace(\n    effects,\n    afterPrefix,\n    types.listItemPrefixWhitespace,\n    self.parser.constructs.disable.null.includes('codeIndented')\n      ? undefined\n      : constants.tabSize + 1\n  )\n\n  /** @type {State} */\n  function afterPrefix(code) {\n    const tail = self.events[self.events.length - 1]\n\n    return !markdownSpace(code) &&\n      tail &&\n      tail[1].type === types.listItemPrefixWhitespace\n      ? ok(code)\n      : nok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding, markdownSpace} from 'micromark-util-character'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {types} from 'micromark-util-symbol/types.js'\nimport {ok as assert} from 'uvu/assert'\n\n/** @type {Construct} */\nexport const setextUnderline = {\n  name: 'setextUnderline',\n  tokenize: tokenizeSetextUnderline,\n  resolveTo: resolveToSetextUnderline\n}\n\n/** @type {Resolver} */\nfunction resolveToSetextUnderline(events, context) {\n  // To do: resolve like `markdown-rs`.\n  let index = events.length\n  /** @type {number | undefined} */\n  let content\n  /** @type {number | undefined} */\n  let text\n  /** @type {number | undefined} */\n  let definition\n\n  // Find the opening of the content.\n  // It’ll always exist: we don’t tokenize if it isn’t there.\n  while (index--) {\n    if (events[index][0] === 'enter') {\n      if (events[index][1].type === types.content) {\n        content = index\n        break\n      }\n\n      if (events[index][1].type === types.paragraph) {\n        text = index\n      }\n    }\n    // Exit\n    else {\n      if (events[index][1].type === types.content) {\n        // Remove the content end (if needed we’ll add it later)\n        events.splice(index, 1)\n      }\n\n      if (!definition && events[index][1].type === types.definition) {\n        definition = index\n      }\n    }\n  }\n\n  assert(text !== undefined, 'expected a `text` index to be found')\n  assert(content !== undefined, 'expected a `text` index to be found')\n\n  const heading = {\n    type: types.setextHeading,\n    start: Object.assign({}, events[text][1].start),\n    end: Object.assign({}, events[events.length - 1][1].end)\n  }\n\n  // Change the paragraph to setext heading text.\n  events[text][1].type = types.setextHeadingText\n\n  // If we have definitions in the content, we’ll keep on having content,\n  // but we need move it.\n  if (definition) {\n    events.splice(text, 0, ['enter', heading, context])\n    events.splice(definition + 1, 0, ['exit', events[content][1], context])\n    events[content][1].end = Object.assign({}, events[definition][1].end)\n  } else {\n    events[content][1] = heading\n  }\n\n  // Add the heading exit at the end.\n  events.push(['exit', heading, context])\n\n  return events\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeSetextUnderline(effects, ok, nok) {\n  const self = this\n  /** @type {NonNullable<Code>} */\n  let marker\n\n  return start\n\n  /**\n   * At start of heading (setext) underline.\n   *\n   * ```markdown\n   *   | aa\n   * > | ==\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    let index = self.events.length\n    /** @type {boolean | undefined} */\n    let paragraph\n\n    assert(\n      code === codes.dash || code === codes.equalsTo,\n      'expected `=` or `-`'\n    )\n\n    // Find an opening.\n    while (index--) {\n      // Skip enter/exit of line ending, line prefix, and content.\n      // We can now either have a definition or a paragraph.\n      if (\n        self.events[index][1].type !== types.lineEnding &&\n        self.events[index][1].type !== types.linePrefix &&\n        self.events[index][1].type !== types.content\n      ) {\n        paragraph = self.events[index][1].type === types.paragraph\n        break\n      }\n    }\n\n    // To do: handle lazy/pierce like `markdown-rs`.\n    // To do: parse indent like `markdown-rs`.\n    if (!self.parser.lazy[self.now().line] && (self.interrupt || paragraph)) {\n      effects.enter(types.setextHeadingLine)\n      marker = code\n      return before(code)\n    }\n\n    return nok(code)\n  }\n\n  /**\n   * After optional whitespace, at `-` or `=`.\n   *\n   * ```markdown\n   *   | aa\n   * > | ==\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function before(code) {\n    effects.enter(types.setextHeadingLineSequence)\n    return inside(code)\n  }\n\n  /**\n   * In sequence.\n   *\n   * ```markdown\n   *   | aa\n   * > | ==\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function inside(code) {\n    if (code === marker) {\n      effects.consume(code)\n      return inside\n    }\n\n    effects.exit(types.setextHeadingLineSequence)\n\n    return markdownSpace(code)\n      ? factorySpace(effects, after, types.lineSuffix)(code)\n      : after(code)\n  }\n\n  /**\n   * After sequence, after optional whitespace.\n   *\n   * ```markdown\n   *   | aa\n   * > | ==\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    if (code === codes.eof || markdownLineEnding(code)) {\n      effects.exit(types.setextHeadingLine)\n      return ok(code)\n    }\n\n    return nok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding, markdownSpace} from 'micromark-util-character'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {constants} from 'micromark-util-symbol/constants.js'\nimport {types} from 'micromark-util-symbol/types.js'\nimport {ok as assert} from 'uvu/assert'\n\n/** @type {Construct} */\nexport const thematicBreak = {\n  name: 'thematicBreak',\n  tokenize: tokenizeThematicBreak\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeThematicBreak(effects, ok, nok) {\n  let size = 0\n  /** @type {NonNullable<Code>} */\n  let marker\n\n  return start\n\n  /**\n   * Start of thematic break.\n   *\n   * ```markdown\n   * > | ***\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter(types.thematicBreak)\n    // To do: parse indent like `markdown-rs`.\n    return before(code)\n  }\n\n  /**\n   * After optional whitespace, at marker.\n   *\n   * ```markdown\n   * > | ***\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function before(code) {\n    assert(\n      code === codes.asterisk ||\n        code === codes.dash ||\n        code === codes.underscore,\n      'expected `*`, `-`, or `_`'\n    )\n    marker = code\n    return atBreak(code)\n  }\n\n  /**\n   * After something, before something else.\n   *\n   * ```markdown\n   * > | ***\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function atBreak(code) {\n    if (code === marker) {\n      effects.enter(types.thematicBreakSequence)\n      return sequence(code)\n    }\n\n    if (\n      size >= constants.thematicBreakMarkerCountMin &&\n      (code === codes.eof || markdownLineEnding(code))\n    ) {\n      effects.exit(types.thematicBreak)\n      return ok(code)\n    }\n\n    return nok(code)\n  }\n\n  /**\n   * In sequence.\n   *\n   * ```markdown\n   * > | ***\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function sequence(code) {\n    if (code === marker) {\n      effects.consume(code)\n      size++\n      return sequence\n    }\n\n    effects.exit(types.thematicBreakSequence)\n    return markdownSpace(code)\n      ? factorySpace(effects, atBreak, types.whitespace)(code)\n      : atBreak(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Effects} Effects\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenType} TokenType\n */\n\nimport {\n  asciiControl,\n  markdownLineEndingOrSpace,\n  markdownLineEnding\n} from 'micromark-util-character'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {constants} from 'micromark-util-symbol/constants.js'\nimport {types} from 'micromark-util-symbol/types.js'\n\n/**\n * Parse destinations.\n *\n * ###### Examples\n *\n * ```markdown\n * <a>\n * <a\\>b>\n * <a b>\n * <a)>\n * a\n * a\\)b\n * a(b)c\n * a(b)\n * ```\n *\n * @param {Effects} effects\n *   Context.\n * @param {State} ok\n *   State switched to when successful.\n * @param {State} nok\n *   State switched to when unsuccessful.\n * @param {TokenType} type\n *   Type for whole (`<a>` or `b`).\n * @param {TokenType} literalType\n *   Type when enclosed (`<a>`).\n * @param {TokenType} literalMarkerType\n *   Type for enclosing (`<` and `>`).\n * @param {TokenType} rawType\n *   Type when not enclosed (`b`).\n * @param {TokenType} stringType\n *   Type for the value (`a` or `b`).\n * @param {number | undefined} [max=Infinity]\n *   Depth of nested parens (inclusive).\n * @returns {State}\n *   Start state.\n */\n// eslint-disable-next-line max-params\nexport function factoryDestination(\n  effects,\n  ok,\n  nok,\n  type,\n  literalType,\n  literalMarkerType,\n  rawType,\n  stringType,\n  max\n) {\n  const limit = max || Number.POSITIVE_INFINITY\n  let balance = 0\n\n  return start\n\n  /**\n   * Start of destination.\n   *\n   * ```markdown\n   * > | <aa>\n   *     ^\n   * > | aa\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    if (code === codes.lessThan) {\n      effects.enter(type)\n      effects.enter(literalType)\n      effects.enter(literalMarkerType)\n      effects.consume(code)\n      effects.exit(literalMarkerType)\n      return enclosedBefore\n    }\n\n    // ASCII control, space, closing paren.\n    if (\n      code === codes.eof ||\n      code === codes.space ||\n      code === codes.rightParenthesis ||\n      asciiControl(code)\n    ) {\n      return nok(code)\n    }\n\n    effects.enter(type)\n    effects.enter(rawType)\n    effects.enter(stringType)\n    effects.enter(types.chunkString, {contentType: constants.contentTypeString})\n    return raw(code)\n  }\n\n  /**\n   * After `<`, at an enclosed destination.\n   *\n   * ```markdown\n   * > | <aa>\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function enclosedBefore(code) {\n    if (code === codes.greaterThan) {\n      effects.enter(literalMarkerType)\n      effects.consume(code)\n      effects.exit(literalMarkerType)\n      effects.exit(literalType)\n      effects.exit(type)\n      return ok\n    }\n\n    effects.enter(stringType)\n    effects.enter(types.chunkString, {contentType: constants.contentTypeString})\n    return enclosed(code)\n  }\n\n  /**\n   * In enclosed destination.\n   *\n   * ```markdown\n   * > | <aa>\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function enclosed(code) {\n    if (code === codes.greaterThan) {\n      effects.exit(types.chunkString)\n      effects.exit(stringType)\n      return enclosedBefore(code)\n    }\n\n    if (\n      code === codes.eof ||\n      code === codes.lessThan ||\n      markdownLineEnding(code)\n    ) {\n      return nok(code)\n    }\n\n    effects.consume(code)\n    return code === codes.backslash ? enclosedEscape : enclosed\n  }\n\n  /**\n   * After `\\`, at a special character.\n   *\n   * ```markdown\n   * > | <a\\*a>\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function enclosedEscape(code) {\n    if (\n      code === codes.lessThan ||\n      code === codes.greaterThan ||\n      code === codes.backslash\n    ) {\n      effects.consume(code)\n      return enclosed\n    }\n\n    return enclosed(code)\n  }\n\n  /**\n   * In raw destination.\n   *\n   * ```markdown\n   * > | aa\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function raw(code) {\n    if (\n      !balance &&\n      (code === codes.eof ||\n        code === codes.rightParenthesis ||\n        markdownLineEndingOrSpace(code))\n    ) {\n      effects.exit(types.chunkString)\n      effects.exit(stringType)\n      effects.exit(rawType)\n      effects.exit(type)\n      return ok(code)\n    }\n\n    if (balance < limit && code === codes.leftParenthesis) {\n      effects.consume(code)\n      balance++\n      return raw\n    }\n\n    if (code === codes.rightParenthesis) {\n      effects.consume(code)\n      balance--\n      return raw\n    }\n\n    // ASCII control (but *not* `\\0`) and space and `(`.\n    // Note: in `markdown-rs`, `\\0` exists in codes, in `micromark-js` it\n    // doesn’t.\n    if (\n      code === codes.eof ||\n      code === codes.space ||\n      code === codes.leftParenthesis ||\n      asciiControl(code)\n    ) {\n      return nok(code)\n    }\n\n    effects.consume(code)\n    return code === codes.backslash ? rawEscape : raw\n  }\n\n  /**\n   * After `\\`, at special character.\n   *\n   * ```markdown\n   * > | a\\*a\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function rawEscape(code) {\n    if (\n      code === codes.leftParenthesis ||\n      code === codes.rightParenthesis ||\n      code === codes.backslash\n    ) {\n      effects.consume(code)\n      return raw\n    }\n\n    return raw(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Effects} Effects\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').TokenType} TokenType\n */\n\nimport {markdownLineEnding, markdownSpace} from 'micromark-util-character'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {constants} from 'micromark-util-symbol/constants.js'\nimport {types} from 'micromark-util-symbol/types.js'\nimport {ok as assert} from 'uvu/assert'\n\n/**\n * Parse labels.\n *\n * > 👉 **Note**: labels in markdown are capped at 999 characters in the string.\n *\n * ###### Examples\n *\n * ```markdown\n * [a]\n * [a\n * b]\n * [a\\]b]\n * ```\n *\n * @this {TokenizeContext}\n *   Tokenize context.\n * @param {Effects} effects\n *   Context.\n * @param {State} ok\n *   State switched to when successful.\n * @param {State} nok\n *   State switched to when unsuccessful.\n * @param {TokenType} type\n *   Type of the whole label (`[a]`).\n * @param {TokenType} markerType\n *   Type for the markers (`[` and `]`).\n * @param {TokenType} stringType\n *   Type for the identifier (`a`).\n * @returns {State}\n *   Start state.\n */\n// eslint-disable-next-line max-params\nexport function factoryLabel(effects, ok, nok, type, markerType, stringType) {\n  const self = this\n  let size = 0\n  /** @type {boolean} */\n  let seen\n\n  return start\n\n  /**\n   * Start of label.\n   *\n   * ```markdown\n   * > | [a]\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    assert(code === codes.leftSquareBracket, 'expected `[`')\n    effects.enter(type)\n    effects.enter(markerType)\n    effects.consume(code)\n    effects.exit(markerType)\n    effects.enter(stringType)\n    return atBreak\n  }\n\n  /**\n   * In label, at something, before something else.\n   *\n   * ```markdown\n   * > | [a]\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function atBreak(code) {\n    if (\n      size > constants.linkReferenceSizeMax ||\n      code === codes.eof ||\n      code === codes.leftSquareBracket ||\n      (code === codes.rightSquareBracket && !seen) ||\n      // To do: remove in the future once we’ve switched from\n      // `micromark-extension-footnote` to `micromark-extension-gfm-footnote`,\n      // which doesn’t need this.\n      // Hidden footnotes hook.\n      /* c8 ignore next 3 */\n      (code === codes.caret &&\n        !size &&\n        '_hiddenFootnoteSupport' in self.parser.constructs)\n    ) {\n      return nok(code)\n    }\n\n    if (code === codes.rightSquareBracket) {\n      effects.exit(stringType)\n      effects.enter(markerType)\n      effects.consume(code)\n      effects.exit(markerType)\n      effects.exit(type)\n      return ok\n    }\n\n    // To do: indent? Link chunks and EOLs together?\n    if (markdownLineEnding(code)) {\n      effects.enter(types.lineEnding)\n      effects.consume(code)\n      effects.exit(types.lineEnding)\n      return atBreak\n    }\n\n    effects.enter(types.chunkString, {contentType: constants.contentTypeString})\n    return labelInside(code)\n  }\n\n  /**\n   * In label, in text.\n   *\n   * ```markdown\n   * > | [a]\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function labelInside(code) {\n    if (\n      code === codes.eof ||\n      code === codes.leftSquareBracket ||\n      code === codes.rightSquareBracket ||\n      markdownLineEnding(code) ||\n      size++ > constants.linkReferenceSizeMax\n    ) {\n      effects.exit(types.chunkString)\n      return atBreak(code)\n    }\n\n    effects.consume(code)\n    if (!seen) seen = !markdownSpace(code)\n    return code === codes.backslash ? labelEscape : labelInside\n  }\n\n  /**\n   * After `\\`, at a special character.\n   *\n   * ```markdown\n   * > | [a\\*a]\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function labelEscape(code) {\n    if (\n      code === codes.leftSquareBracket ||\n      code === codes.backslash ||\n      code === codes.rightSquareBracket\n    ) {\n      effects.consume(code)\n      size++\n      return labelInside\n    }\n\n    return labelInside(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Effects} Effects\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenType} TokenType\n */\n\nimport {markdownSpace} from 'micromark-util-character'\n\n// To do: implement `spaceOrTab`, `spaceOrTabMinMax`, `spaceOrTabWithOptions`.\n\n/**\n * Parse spaces and tabs.\n *\n * There is no `nok` parameter:\n *\n * *   spaces in markdown are often optional, in which case this factory can be\n *     used and `ok` will be switched to whether spaces were found or not\n * *   one line ending or space can be detected with `markdownSpace(code)` right\n *     before using `factorySpace`\n *\n * ###### Examples\n *\n * Where `␉` represents a tab (plus how much it expands) and `␠` represents a\n * single space.\n *\n * ```markdown\n * ␉\n * ␠␠␠␠\n * ␉␠\n * ```\n *\n * @param {Effects} effects\n *   Context.\n * @param {State} ok\n *   State switched to when successful.\n * @param {TokenType} type\n *   Type (`' \\t'`).\n * @param {number | undefined} [max=Infinity]\n *   Max (exclusive).\n * @returns\n *   Start state.\n */\nexport function factorySpace(effects, ok, type, max) {\n  const limit = max ? max - 1 : Number.POSITIVE_INFINITY\n  let size = 0\n\n  return start\n\n  /** @type {State} */\n  function start(code) {\n    if (markdownSpace(code)) {\n      effects.enter(type)\n      return prefix(code)\n    }\n\n    return ok(code)\n  }\n\n  /** @type {State} */\n  function prefix(code) {\n    if (markdownSpace(code) && size++ < limit) {\n      effects.consume(code)\n      return prefix\n    }\n\n    effects.exit(type)\n    return ok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Effects} Effects\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenType} TokenType\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding} from 'micromark-util-character'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {constants} from 'micromark-util-symbol/constants.js'\nimport {types} from 'micromark-util-symbol/types.js'\n\n/**\n * Parse titles.\n *\n * ###### Examples\n *\n * ```markdown\n * \"a\"\n * 'b'\n * (c)\n * \"a\n * b\"\n * 'a\n *     b'\n * (a\\)b)\n * ```\n *\n * @param {Effects} effects\n *   Context.\n * @param {State} ok\n *   State switched to when successful.\n * @param {State} nok\n *   State switched to when unsuccessful.\n * @param {TokenType} type\n *   Type of the whole title (`\"a\"`, `'b'`, `(c)`).\n * @param {TokenType} markerType\n *   Type for the markers (`\"`, `'`, `(`, and `)`).\n * @param {TokenType} stringType\n *   Type for the value (`a`).\n * @returns {State}\n *   Start state.\n */\n// eslint-disable-next-line max-params\nexport function factoryTitle(effects, ok, nok, type, markerType, stringType) {\n  /** @type {NonNullable<Code>} */\n  let marker\n\n  return start\n\n  /**\n   * Start of title.\n   *\n   * ```markdown\n   * > | \"a\"\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    if (\n      code === codes.quotationMark ||\n      code === codes.apostrophe ||\n      code === codes.leftParenthesis\n    ) {\n      effects.enter(type)\n      effects.enter(markerType)\n      effects.consume(code)\n      effects.exit(markerType)\n      marker = code === codes.leftParenthesis ? codes.rightParenthesis : code\n      return begin\n    }\n\n    return nok(code)\n  }\n\n  /**\n   * After opening marker.\n   *\n   * This is also used at the closing marker.\n   *\n   * ```markdown\n   * > | \"a\"\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function begin(code) {\n    if (code === marker) {\n      effects.enter(markerType)\n      effects.consume(code)\n      effects.exit(markerType)\n      effects.exit(type)\n      return ok\n    }\n\n    effects.enter(stringType)\n    return atBreak(code)\n  }\n\n  /**\n   * At something, before something else.\n   *\n   * ```markdown\n   * > | \"a\"\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function atBreak(code) {\n    if (code === marker) {\n      effects.exit(stringType)\n      return begin(marker)\n    }\n\n    if (code === codes.eof) {\n      return nok(code)\n    }\n\n    // Note: blank lines can’t exist in content.\n    if (markdownLineEnding(code)) {\n      // To do: use `space_or_tab_eol_with_options`, connect.\n      effects.enter(types.lineEnding)\n      effects.consume(code)\n      effects.exit(types.lineEnding)\n      return factorySpace(effects, atBreak, types.linePrefix)\n    }\n\n    effects.enter(types.chunkString, {contentType: constants.contentTypeString})\n    return inside(code)\n  }\n\n  /**\n   *\n   *\n   * @type {State}\n   */\n  function inside(code) {\n    if (code === marker || code === codes.eof || markdownLineEnding(code)) {\n      effects.exit(types.chunkString)\n      return atBreak(code)\n    }\n\n    effects.consume(code)\n    return code === codes.backslash ? escape : inside\n  }\n\n  /**\n   * After `\\`, at a special character.\n   *\n   * ```markdown\n   * > | \"a\\*b\"\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function escape(code) {\n    if (code === marker || code === codes.backslash) {\n      effects.consume(code)\n      return inside\n    }\n\n    return inside(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Effects} Effects\n * @typedef {import('micromark-util-types').State} State\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding, markdownSpace} from 'micromark-util-character'\nimport {types} from 'micromark-util-symbol/types.js'\n\n/**\n * Parse spaces and tabs.\n *\n * There is no `nok` parameter:\n *\n * *   line endings or spaces in markdown are often optional, in which case this\n *     factory can be used and `ok` will be switched to whether spaces were found\n *     or not\n * *   one line ending or space can be detected with\n *     `markdownLineEndingOrSpace(code)` right before using `factoryWhitespace`\n *\n * @param {Effects} effects\n *   Context.\n * @param {State} ok\n *   State switched to when successful.\n * @returns\n *   Start state.\n */\nexport function factoryWhitespace(effects, ok) {\n  /** @type {boolean} */\n  let seen\n\n  return start\n\n  /** @type {State} */\n  function start(code) {\n    if (markdownLineEnding(code)) {\n      effects.enter(types.lineEnding)\n      effects.consume(code)\n      effects.exit(types.lineEnding)\n      seen = true\n      return start\n    }\n\n    if (markdownSpace(code)) {\n      return factorySpace(\n        effects,\n        start,\n        seen ? types.linePrefix : types.lineSuffix\n      )(code)\n    }\n\n    return ok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n */\n\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {unicodePunctuationRegex} from './lib/unicode-punctuation-regex.js'\n\n/**\n * Check whether the character code represents an ASCII alpha (`a` through `z`,\n * case insensitive).\n *\n * An **ASCII alpha** is an ASCII upper alpha or ASCII lower alpha.\n *\n * An **ASCII upper alpha** is a character in the inclusive range U+0041 (`A`)\n * to U+005A (`Z`).\n *\n * An **ASCII lower alpha** is a character in the inclusive range U+0061 (`a`)\n * to U+007A (`z`).\n *\n * @param code\n *   Code.\n * @returns\n *   Whether it matches.\n */\nexport const asciiAlpha = regexCheck(/[A-Za-z]/)\n\n/**\n * Check whether the character code represents an ASCII alphanumeric (`a`\n * through `z`, case insensitive, or `0` through `9`).\n *\n * An **ASCII alphanumeric** is an ASCII digit (see `asciiDigit`) or ASCII alpha\n * (see `asciiAlpha`).\n *\n * @param code\n *   Code.\n * @returns\n *   Whether it matches.\n */\nexport const asciiAlphanumeric = regexCheck(/[\\dA-Za-z]/)\n\n/**\n * Check whether the character code represents an ASCII atext.\n *\n * atext is an ASCII alphanumeric (see `asciiAlphanumeric`), or a character in\n * the inclusive ranges U+0023 NUMBER SIGN (`#`) to U+0027 APOSTROPHE (`'`),\n * U+002A ASTERISK (`*`), U+002B PLUS SIGN (`+`), U+002D DASH (`-`), U+002F\n * SLASH (`/`), U+003D EQUALS TO (`=`), U+003F QUESTION MARK (`?`), U+005E\n * CARET (`^`) to U+0060 GRAVE ACCENT (`` ` ``), or U+007B LEFT CURLY BRACE\n * (`{`) to U+007E TILDE (`~`).\n *\n * See:\n * **\\[RFC5322]**:\n * [Internet Message Format](https://tools.ietf.org/html/rfc5322).\n * P. Resnick.\n * IETF.\n *\n * @param code\n *   Code.\n * @returns\n *   Whether it matches.\n */\nexport const asciiAtext = regexCheck(/[#-'*+\\--9=?A-Z^-~]/)\n\n/**\n * Check whether a character code is an ASCII control character.\n *\n * An **ASCII control** is a character in the inclusive range U+0000 NULL (NUL)\n * to U+001F (US), or U+007F (DEL).\n *\n * @param {Code} code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport function asciiControl(code) {\n  return (\n    // Special whitespace codes (which have negative values), C0 and Control\n    // character DEL\n    code !== null && (code < codes.space || code === codes.del)\n  )\n}\n\n/**\n * Check whether the character code represents an ASCII digit (`0` through `9`).\n *\n * An **ASCII digit** is a character in the inclusive range U+0030 (`0`) to\n * U+0039 (`9`).\n *\n * @param code\n *   Code.\n * @returns\n *   Whether it matches.\n */\nexport const asciiDigit = regexCheck(/\\d/)\n\n/**\n * Check whether the character code represents an ASCII hex digit (`a` through\n * `f`, case insensitive, or `0` through `9`).\n *\n * An **ASCII hex digit** is an ASCII digit (see `asciiDigit`), ASCII upper hex\n * digit, or an ASCII lower hex digit.\n *\n * An **ASCII upper hex digit** is a character in the inclusive range U+0041\n * (`A`) to U+0046 (`F`).\n *\n * An **ASCII lower hex digit** is a character in the inclusive range U+0061\n * (`a`) to U+0066 (`f`).\n *\n * @param code\n *   Code.\n * @returns\n *   Whether it matches.\n */\nexport const asciiHexDigit = regexCheck(/[\\dA-Fa-f]/)\n\n/**\n * Check whether the character code represents ASCII punctuation.\n *\n * An **ASCII punctuation** is a character in the inclusive ranges U+0021\n * EXCLAMATION MARK (`!`) to U+002F SLASH (`/`), U+003A COLON (`:`) to U+0040 AT\n * SIGN (`@`), U+005B LEFT SQUARE BRACKET (`[`) to U+0060 GRAVE ACCENT\n * (`` ` ``), or U+007B LEFT CURLY BRACE (`{`) to U+007E TILDE (`~`).\n *\n * @param code\n *   Code.\n * @returns\n *   Whether it matches.\n */\nexport const asciiPunctuation = regexCheck(/[!-/:-@[-`{-~]/)\n\n/**\n * Check whether a character code is a markdown line ending.\n *\n * A **markdown line ending** is the virtual characters M-0003 CARRIAGE RETURN\n * LINE FEED (CRLF), M-0004 LINE FEED (LF) and M-0005 CARRIAGE RETURN (CR).\n *\n * In micromark, the actual character U+000A LINE FEED (LF) and U+000D CARRIAGE\n * RETURN (CR) are replaced by these virtual characters depending on whether\n * they occurred together.\n *\n * @param {Code} code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport function markdownLineEnding(code) {\n  return code !== null && code < codes.horizontalTab\n}\n\n/**\n * Check whether a character code is a markdown line ending (see\n * `markdownLineEnding`) or markdown space (see `markdownSpace`).\n *\n * @param {Code} code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport function markdownLineEndingOrSpace(code) {\n  return code !== null && (code < codes.nul || code === codes.space)\n}\n\n/**\n * Check whether a character code is a markdown space.\n *\n * A **markdown space** is the concrete character U+0020 SPACE (SP) and the\n * virtual characters M-0001 VIRTUAL SPACE (VS) and M-0002 HORIZONTAL TAB (HT).\n *\n * In micromark, the actual character U+0009 CHARACTER TABULATION (HT) is\n * replaced by one M-0002 HORIZONTAL TAB (HT) and between 0 and 3 M-0001 VIRTUAL\n * SPACE (VS) characters, depending on the column at which the tab occurred.\n *\n * @param {Code} code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport function markdownSpace(code) {\n  return (\n    code === codes.horizontalTab ||\n    code === codes.virtualSpace ||\n    code === codes.space\n  )\n}\n\n// Size note: removing ASCII from the regex and using `asciiPunctuation` here\n// In fact adds to the bundle size.\n/**\n * Check whether the character code represents Unicode punctuation.\n *\n * A **Unicode punctuation** is a character in the Unicode `Pc` (Punctuation,\n * Connector), `Pd` (Punctuation, Dash), `Pe` (Punctuation, Close), `Pf`\n * (Punctuation, Final quote), `Pi` (Punctuation, Initial quote), `Po`\n * (Punctuation, Other), or `Ps` (Punctuation, Open) categories, or an ASCII\n * punctuation (see `asciiPunctuation`).\n *\n * See:\n * **\\[UNICODE]**:\n * [The Unicode Standard](https://www.unicode.org/versions/).\n * Unicode Consortium.\n *\n * @param code\n *   Code.\n * @returns\n *   Whether it matches.\n */\nexport const unicodePunctuation = regexCheck(unicodePunctuationRegex)\n\n/**\n * Check whether the character code represents Unicode whitespace.\n *\n * Note that this does handle micromark specific markdown whitespace characters.\n * See `markdownLineEndingOrSpace` to check that.\n *\n * A **Unicode whitespace** is a character in the Unicode `Zs` (Separator,\n * Space) category, or U+0009 CHARACTER TABULATION (HT), U+000A LINE FEED (LF),\n * U+000C (FF), or U+000D CARRIAGE RETURN (CR) (**\\[UNICODE]**).\n *\n * See:\n * **\\[UNICODE]**:\n * [The Unicode Standard](https://www.unicode.org/versions/).\n * Unicode Consortium.\n *\n * @param code\n *   Code.\n * @returns\n *   Whether it matches.\n */\nexport const unicodeWhitespace = regexCheck(/\\s/)\n\n/**\n * Create a code check from a regex.\n *\n * @param {RegExp} regex\n * @returns {(code: Code) => boolean}\n */\nfunction regexCheck(regex) {\n  return check\n\n  /**\n   * Check whether a code matches the bound regex.\n   *\n   * @param {Code} code\n   *   Character code.\n   * @returns {boolean}\n   *   Whether the character code matches the bound regex.\n   */\n  function check(code) {\n    return code !== null && regex.test(String.fromCharCode(code))\n  }\n}\n","// This module is generated by `script/`.\n//\n// CommonMark handles attention (emphasis, strong) markers based on what comes\n// before or after them.\n// One such difference is if those characters are Unicode punctuation.\n// This script is generated from the Unicode data.\n\n/**\n * Regular expression that matches a unicode punctuation character.\n */\nexport const unicodePunctuationRegex =\n  /[!-/:-@[-`{-~\\u00A1\\u00A7\\u00AB\\u00B6\\u00B7\\u00BB\\u00BF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061D-\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u09FD\\u0A76\\u0AF0\\u0C77\\u0C84\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1B7D\\u1B7E\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2308-\\u230B\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E4F\\u2E52-\\u2E5D\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA8FC\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]/\n","import {constants} from 'micromark-util-symbol/constants.js'\n\n/**\n * Like `Array#splice`, but smarter for giant arrays.\n *\n * `Array#splice` takes all items to be inserted as individual argument which\n * causes a stack overflow in V8 when trying to insert 100k items for instance.\n *\n * Otherwise, this does not return the removed items, and takes `items` as an\n * array instead of rest parameters.\n *\n * @template {unknown} T\n *   Item type.\n * @param {Array<T>} list\n *   List to operate on.\n * @param {number} start\n *   Index to remove/insert at (can be negative).\n * @param {number} remove\n *   Number of items to remove.\n * @param {Array<T>} items\n *   Items to inject into `list`.\n * @returns {void}\n *   Nothing.\n */\nexport function splice(list, start, remove, items) {\n  const end = list.length\n  let chunkStart = 0\n  /** @type {Array<unknown>} */\n  let parameters\n\n  // Make start between zero and `end` (included).\n  if (start < 0) {\n    start = -start > end ? 0 : end + start\n  } else {\n    start = start > end ? end : start\n  }\n\n  remove = remove > 0 ? remove : 0\n\n  // No need to chunk the items if there’s only a couple (10k) items.\n  if (items.length < constants.v8MaxSafeChunkSize) {\n    parameters = Array.from(items)\n    parameters.unshift(start, remove)\n    // @ts-expect-error Hush, it’s fine.\n    list.splice(...parameters)\n  } else {\n    // Delete `remove` items starting from `start`\n    if (remove) list.splice(start, remove)\n\n    // Insert the items in chunks to not cause stack overflows.\n    while (chunkStart < items.length) {\n      parameters = items.slice(\n        chunkStart,\n        chunkStart + constants.v8MaxSafeChunkSize\n      )\n      parameters.unshift(start, 0)\n      // @ts-expect-error Hush, it’s fine.\n      list.splice(...parameters)\n\n      chunkStart += constants.v8MaxSafeChunkSize\n      start += constants.v8MaxSafeChunkSize\n    }\n  }\n}\n\n/**\n * Append `items` (an array) at the end of `list` (another array).\n * When `list` was empty, returns `items` instead.\n *\n * This prevents a potentially expensive operation when `list` is empty,\n * and adds items in batches to prevent V8 from hanging.\n *\n * @template {unknown} T\n *   Item type.\n * @param {Array<T>} list\n *   List to operate on.\n * @param {Array<T>} items\n *   Items to add to `list`.\n * @returns {Array<T>}\n *   Either `list` or `items`.\n */\nexport function push(list, items) {\n  if (list.length > 0) {\n    splice(list, list.length, 0, items)\n    return list\n  }\n\n  return items\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n */\n\nimport {\n  markdownLineEndingOrSpace,\n  unicodePunctuation,\n  unicodeWhitespace\n} from 'micromark-util-character'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {constants} from 'micromark-util-symbol/constants.js'\n\n/**\n * Classify whether a code represents whitespace, punctuation, or something\n * else.\n *\n * Used for attention (emphasis, strong), whose sequences can open or close\n * based on the class of surrounding characters.\n *\n * > 👉 **Note**: eof (`null`) is seen as whitespace.\n *\n * @param {Code} code\n *   Code.\n * @returns {typeof constants.characterGroupWhitespace | typeof constants.characterGroupPunctuation | undefined}\n *   Group.\n */\nexport function classifyCharacter(code) {\n  if (\n    code === codes.eof ||\n    markdownLineEndingOrSpace(code) ||\n    unicodeWhitespace(code)\n  ) {\n    return constants.characterGroupWhitespace\n  }\n\n  if (unicodePunctuation(code)) {\n    return constants.characterGroupPunctuation\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Extension} Extension\n * @typedef {import('micromark-util-types').Handles} Handles\n * @typedef {import('micromark-util-types').HtmlExtension} HtmlExtension\n * @typedef {import('micromark-util-types').NormalizedExtension} NormalizedExtension\n */\n\nimport {splice} from 'micromark-util-chunked'\n\nconst hasOwnProperty = {}.hasOwnProperty\n\n/**\n * Combine multiple syntax extensions into one.\n *\n * @param {Array<Extension>} extensions\n *   List of syntax extensions.\n * @returns {NormalizedExtension}\n *   A single combined extension.\n */\nexport function combineExtensions(extensions) {\n  /** @type {NormalizedExtension} */\n  const all = {}\n  let index = -1\n\n  while (++index < extensions.length) {\n    syntaxExtension(all, extensions[index])\n  }\n\n  return all\n}\n\n/**\n * Merge `extension` into `all`.\n *\n * @param {NormalizedExtension} all\n *   Extension to merge into.\n * @param {Extension} extension\n *   Extension to merge.\n * @returns {void}\n */\nfunction syntaxExtension(all, extension) {\n  /** @type {keyof Extension} */\n  let hook\n\n  for (hook in extension) {\n    const maybe = hasOwnProperty.call(all, hook) ? all[hook] : undefined\n    /** @type {Record<string, unknown>} */\n    const left = maybe || (all[hook] = {})\n    /** @type {Record<string, unknown> | undefined} */\n    const right = extension[hook]\n    /** @type {string} */\n    let code\n\n    if (right) {\n      for (code in right) {\n        if (!hasOwnProperty.call(left, code)) left[code] = []\n        const value = right[code]\n        constructs(\n          // @ts-expect-error Looks like a list.\n          left[code],\n          Array.isArray(value) ? value : value ? [value] : []\n        )\n      }\n    }\n  }\n}\n\n/**\n * Merge `list` into `existing` (both lists of constructs).\n * Mutates `existing`.\n *\n * @param {Array<unknown>} existing\n * @param {Array<unknown>} list\n * @returns {void}\n */\nfunction constructs(existing, list) {\n  let index = -1\n  /** @type {Array<unknown>} */\n  const before = []\n\n  while (++index < list.length) {\n    // @ts-expect-error Looks like an object.\n    ;(list[index].add === 'after' ? existing : before).push(list[index])\n  }\n\n  splice(existing, 0, 0, before)\n}\n\n/**\n * Combine multiple HTML extensions into one.\n *\n * @param {Array<HtmlExtension>} htmlExtensions\n *   List of HTML extensions.\n * @returns {HtmlExtension}\n *   A single combined HTML extension.\n */\nexport function combineHtmlExtensions(htmlExtensions) {\n  /** @type {HtmlExtension} */\n  const handlers = {}\n  let index = -1\n\n  while (++index < htmlExtensions.length) {\n    htmlExtension(handlers, htmlExtensions[index])\n  }\n\n  return handlers\n}\n\n/**\n * Merge `extension` into `all`.\n *\n * @param {HtmlExtension} all\n *   Extension to merge into.\n * @param {HtmlExtension} extension\n *   Extension to merge.\n * @returns {void}\n */\nfunction htmlExtension(all, extension) {\n  /** @type {keyof HtmlExtension} */\n  let hook\n\n  for (hook in extension) {\n    const maybe = hasOwnProperty.call(all, hook) ? all[hook] : undefined\n    const left = maybe || (all[hook] = {})\n    const right = extension[hook]\n    /** @type {keyof Handles} */\n    let type\n\n    if (right) {\n      for (type in right) {\n        // @ts-expect-error assume document vs regular handler are managed correctly.\n        left[type] = right[type]\n      }\n    }\n  }\n}\n","import {codes} from 'micromark-util-symbol/codes.js'\nimport {values} from 'micromark-util-symbol/values.js'\n\n/**\n * Turn the number (in string form as either hexa- or plain decimal) coming from\n * a numeric character reference into a character.\n *\n * Sort of like `String.fromCharCode(Number.parseInt(value, base))`, but makes\n * non-characters and control characters safe.\n *\n * @param {string} value\n *   Value to decode.\n * @param {number} base\n *   Numeric base.\n * @returns {string}\n *   Character.\n */\nexport function decodeNumericCharacterReference(value, base) {\n  const code = Number.parseInt(value, base)\n\n  if (\n    // C0 except for HT, LF, FF, CR, space.\n    code < codes.ht ||\n    code === codes.vt ||\n    (code > codes.cr && code < codes.space) ||\n    // Control character (DEL) of C0, and C1 controls.\n    (code > codes.tilde && code < 160) ||\n    // Lone high surrogates and low surrogates.\n    (code > 55295 && code < 57344) ||\n    // Noncharacters.\n    (code > 64975 && code < 65008) ||\n    /* eslint-disable no-bitwise */\n    (code & 65535) === 65535 ||\n    (code & 65535) === 65534 ||\n    /* eslint-enable no-bitwise */\n    // Out of range\n    code > 1114111\n  ) {\n    return values.replacementCharacter\n  }\n\n  return String.fromCharCode(code)\n}\n","import {decodeNamedCharacterReference} from 'decode-named-character-reference'\nimport {decodeNumericCharacterReference} from 'micromark-util-decode-numeric-character-reference'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {constants} from 'micromark-util-symbol/constants.js'\n\nconst characterEscapeOrReference =\n  /\\\\([!-/:-@[-`{-~])|&(#(?:\\d{1,7}|x[\\da-f]{1,6})|[\\da-z]{1,31});/gi\n\n/**\n * Decode markdown strings (which occur in places such as fenced code info\n * strings, destinations, labels, and titles).\n *\n * The “string” content type allows character escapes and -references.\n * This decodes those.\n *\n * @param {string} value\n *   Value to decode.\n * @returns {string}\n *   Decoded value.\n */\nexport function decodeString(value) {\n  return value.replace(characterEscapeOrReference, decode)\n}\n\n/**\n * @param {string} $0\n * @param {string} $1\n * @param {string} $2\n * @returns {string}\n */\nfunction decode($0, $1, $2) {\n  if ($1) {\n    // Escape.\n    return $1\n  }\n\n  // Reference.\n  const head = $2.charCodeAt(0)\n\n  if (head === codes.numberSign) {\n    const head = $2.charCodeAt(1)\n    const hex = head === codes.lowercaseX || head === codes.uppercaseX\n    return decodeNumericCharacterReference(\n      $2.slice(hex ? 2 : 1),\n      hex ? constants.numericBaseHexadecimal : constants.numericBaseDecimal\n    )\n  }\n\n  return decodeNamedCharacterReference($2) || $0\n}\n","/**\n * List of lowercase HTML “block” tag names.\n *\n * The list, when parsing HTML (flow), results in more relaxed rules (condition\n * 6).\n * Because they are known blocks, the HTML-like syntax doesn’t have to be\n * strictly parsed.\n * For tag names not in this list, a more strict algorithm (condition 7) is used\n * to detect whether the HTML-like syntax is seen as HTML (flow) or not.\n *\n * This is copied from:\n * <https://spec.commonmark.org/0.30/#html-blocks>.\n *\n * > 👉 **Note**: `search` was added in `CommonMark@0.31`.\n */\nexport const htmlBlockNames = [\n  'address',\n  'article',\n  'aside',\n  'base',\n  'basefont',\n  'blockquote',\n  'body',\n  'caption',\n  'center',\n  'col',\n  'colgroup',\n  'dd',\n  'details',\n  'dialog',\n  'dir',\n  'div',\n  'dl',\n  'dt',\n  'fieldset',\n  'figcaption',\n  'figure',\n  'footer',\n  'form',\n  'frame',\n  'frameset',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'head',\n  'header',\n  'hr',\n  'html',\n  'iframe',\n  'legend',\n  'li',\n  'link',\n  'main',\n  'menu',\n  'menuitem',\n  'nav',\n  'noframes',\n  'ol',\n  'optgroup',\n  'option',\n  'p',\n  'param',\n  'search',\n  'section',\n  'summary',\n  'table',\n  'tbody',\n  'td',\n  'tfoot',\n  'th',\n  'thead',\n  'title',\n  'tr',\n  'track',\n  'ul'\n]\n\n/**\n * List of lowercase HTML “raw” tag names.\n *\n * The list, when parsing HTML (flow), results in HTML that can include lines\n * without exiting, until a closing tag also in this list is found (condition\n * 1).\n *\n * This module is copied from:\n * <https://spec.commonmark.org/0.30/#html-blocks>.\n *\n * > 👉 **Note**: `textarea` was added in `CommonMark@0.30`.\n */\nexport const htmlRawNames = ['pre', 'script', 'style', 'textarea']\n","import {values} from 'micromark-util-symbol/values.js'\n\n/**\n * Normalize an identifier (as found in references, definitions).\n *\n * Collapses markdown whitespace, trim, and then lower- and uppercase.\n *\n * Some characters are considered “uppercase”, such as U+03F4 (`ϴ`), but if their\n * lowercase counterpart (U+03B8 (`θ`)) is uppercased will result in a different\n * uppercase character (U+0398 (`Θ`)).\n * So, to get a canonical form, we perform both lower- and uppercase.\n *\n * Using uppercase last makes sure keys will never interact with default\n * prototypal values (such as `constructor`): nothing in the prototype of\n * `Object` is uppercase.\n *\n * @param {string} value\n *   Identifier to normalize.\n * @returns {string}\n *   Normalized identifier.\n */\nexport function normalizeIdentifier(value) {\n  return (\n    value\n      // Collapse markdown whitespace.\n      .replace(/[\\t\\n\\r ]+/g, values.space)\n      // Trim.\n      .replace(/^ | $/g, '')\n      // Some characters are considered “uppercase”, but if their lowercase\n      // counterpart is uppercased will result in a different uppercase\n      // character.\n      // Hence, to get that form, we perform both lower- and uppercase.\n      // Upper case makes sure keys will not interact with default prototypal\n      // methods: no method is uppercase.\n      .toLowerCase()\n      .toUpperCase()\n  )\n}\n","/**\n * @typedef {import('micromark-util-types').Event} Event\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n */\n\n/**\n * Call all `resolveAll`s.\n *\n * @param {Array<{resolveAll?: Resolver | undefined}>} constructs\n *   List of constructs, optionally with `resolveAll`s.\n * @param {Array<Event>} events\n *   List of events.\n * @param {TokenizeContext} context\n *   Context used by `tokenize`.\n * @returns {Array<Event>}\n *   Changed events.\n */\nexport function resolveAll(constructs, events, context) {\n  /** @type {Array<Resolver>} */\n  const called = []\n  let index = -1\n\n  while (++index < constructs.length) {\n    const resolve = constructs[index].resolveAll\n\n    if (resolve && !called.includes(resolve)) {\n      events = resolve(events, context)\n      called.push(resolve)\n    }\n  }\n\n  return events\n}\n","/**\n * @typedef {import('micromark-util-types').Chunk} Chunk\n * @typedef {import('micromark-util-types').Event} Event\n * @typedef {import('micromark-util-types').Token} Token\n */\n\nimport {splice} from 'micromark-util-chunked'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {types} from 'micromark-util-symbol/types.js'\nimport {ok as assert} from 'uvu/assert'\n\n/**\n * Tokenize subcontent.\n *\n * @param {Array<Event>} events\n *   List of events.\n * @returns {boolean}\n *   Whether subtokens were found.\n */\nexport function subtokenize(events) {\n  /** @type {Record<string, number>} */\n  const jumps = {}\n  let index = -1\n  /** @type {Event} */\n  let event\n  /** @type {number | undefined} */\n  let lineIndex\n  /** @type {number} */\n  let otherIndex\n  /** @type {Event} */\n  let otherEvent\n  /** @type {Array<Event>} */\n  let parameters\n  /** @type {Array<Event>} */\n  let subevents\n  /** @type {boolean | undefined} */\n  let more\n\n  while (++index < events.length) {\n    while (index in jumps) {\n      index = jumps[index]\n    }\n\n    event = events[index]\n\n    // Add a hook for the GFM tasklist extension, which needs to know if text\n    // is in the first content of a list item.\n    if (\n      index &&\n      event[1].type === types.chunkFlow &&\n      events[index - 1][1].type === types.listItemPrefix\n    ) {\n      assert(event[1]._tokenizer, 'expected `_tokenizer` on subtokens')\n      subevents = event[1]._tokenizer.events\n      otherIndex = 0\n\n      if (\n        otherIndex < subevents.length &&\n        subevents[otherIndex][1].type === types.lineEndingBlank\n      ) {\n        otherIndex += 2\n      }\n\n      if (\n        otherIndex < subevents.length &&\n        subevents[otherIndex][1].type === types.content\n      ) {\n        while (++otherIndex < subevents.length) {\n          if (subevents[otherIndex][1].type === types.content) {\n            break\n          }\n\n          if (subevents[otherIndex][1].type === types.chunkText) {\n            subevents[otherIndex][1]._isInFirstContentOfListItem = true\n            otherIndex++\n          }\n        }\n      }\n    }\n\n    // Enter.\n    if (event[0] === 'enter') {\n      if (event[1].contentType) {\n        Object.assign(jumps, subcontent(events, index))\n        index = jumps[index]\n        more = true\n      }\n    }\n    // Exit.\n    else if (event[1]._container) {\n      otherIndex = index\n      lineIndex = undefined\n\n      while (otherIndex--) {\n        otherEvent = events[otherIndex]\n\n        if (\n          otherEvent[1].type === types.lineEnding ||\n          otherEvent[1].type === types.lineEndingBlank\n        ) {\n          if (otherEvent[0] === 'enter') {\n            if (lineIndex) {\n              events[lineIndex][1].type = types.lineEndingBlank\n            }\n\n            otherEvent[1].type = types.lineEnding\n            lineIndex = otherIndex\n          }\n        } else {\n          break\n        }\n      }\n\n      if (lineIndex) {\n        // Fix position.\n        event[1].end = Object.assign({}, events[lineIndex][1].start)\n\n        // Switch container exit w/ line endings.\n        parameters = events.slice(lineIndex, index)\n        parameters.unshift(event)\n        splice(events, lineIndex, index - lineIndex + 1, parameters)\n      }\n    }\n  }\n\n  return !more\n}\n\n/**\n * Tokenize embedded tokens.\n *\n * @param {Array<Event>} events\n * @param {number} eventIndex\n * @returns {Record<string, number>}\n */\nfunction subcontent(events, eventIndex) {\n  const token = events[eventIndex][1]\n  const context = events[eventIndex][2]\n  let startPosition = eventIndex - 1\n  /** @type {Array<number>} */\n  const startPositions = []\n  assert(token.contentType, 'expected `contentType` on subtokens')\n  const tokenizer =\n    token._tokenizer || context.parser[token.contentType](token.start)\n  const childEvents = tokenizer.events\n  /** @type {Array<[number, number]>} */\n  const jumps = []\n  /** @type {Record<string, number>} */\n  const gaps = {}\n  /** @type {Array<Chunk>} */\n  let stream\n  /** @type {Token | undefined} */\n  let previous\n  let index = -1\n  /** @type {Token | undefined} */\n  let current = token\n  let adjust = 0\n  let start = 0\n  const breaks = [start]\n\n  // Loop forward through the linked tokens to pass them in order to the\n  // subtokenizer.\n  while (current) {\n    // Find the position of the event for this token.\n    while (events[++startPosition][1] !== current) {\n      // Empty.\n    }\n\n    assert(\n      !previous || current.previous === previous,\n      'expected previous to match'\n    )\n    assert(!previous || previous.next === current, 'expected next to match')\n\n    startPositions.push(startPosition)\n\n    if (!current._tokenizer) {\n      stream = context.sliceStream(current)\n\n      if (!current.next) {\n        stream.push(codes.eof)\n      }\n\n      if (previous) {\n        tokenizer.defineSkip(current.start)\n      }\n\n      if (current._isInFirstContentOfListItem) {\n        tokenizer._gfmTasklistFirstContentOfListItem = true\n      }\n\n      tokenizer.write(stream)\n\n      if (current._isInFirstContentOfListItem) {\n        tokenizer._gfmTasklistFirstContentOfListItem = undefined\n      }\n    }\n\n    // Unravel the next token.\n    previous = current\n    current = current.next\n  }\n\n  // Now, loop back through all events (and linked tokens), to figure out which\n  // parts belong where.\n  current = token\n\n  while (++index < childEvents.length) {\n    if (\n      // Find a void token that includes a break.\n      childEvents[index][0] === 'exit' &&\n      childEvents[index - 1][0] === 'enter' &&\n      childEvents[index][1].type === childEvents[index - 1][1].type &&\n      childEvents[index][1].start.line !== childEvents[index][1].end.line\n    ) {\n      assert(current, 'expected a current token')\n      start = index + 1\n      breaks.push(start)\n      // Help GC.\n      current._tokenizer = undefined\n      current.previous = undefined\n      current = current.next\n    }\n  }\n\n  // Help GC.\n  tokenizer.events = []\n\n  // If there’s one more token (which is the cases for lines that end in an\n  // EOF), that’s perfect: the last point we found starts it.\n  // If there isn’t then make sure any remaining content is added to it.\n  if (current) {\n    // Help GC.\n    current._tokenizer = undefined\n    current.previous = undefined\n    assert(!current.next, 'expected no next token')\n  } else {\n    breaks.pop()\n  }\n\n  // Now splice the events from the subtokenizer into the current events,\n  // moving back to front so that splice indices aren’t affected.\n  index = breaks.length\n\n  while (index--) {\n    const slice = childEvents.slice(breaks[index], breaks[index + 1])\n    const start = startPositions.pop()\n    assert(start !== undefined, 'expected a start position when splicing')\n    jumps.unshift([start, start + slice.length - 1])\n    splice(events, start, 2, slice)\n  }\n\n  index = -1\n\n  while (++index < jumps.length) {\n    gaps[adjust + jumps[index][0]] = adjust + jumps[index][1]\n    adjust += jumps[index][1] - jumps[index][0] - 1\n  }\n\n  return gaps\n}\n","/**\n * Character codes.\n *\n * This module is compiled away!\n *\n * micromark works based on character codes.\n * This module contains constants for the ASCII block and the replacement\n * character.\n * A couple of them are handled in a special way, such as the line endings\n * (CR, LF, and CR+LF, commonly known as end-of-line: EOLs), the tab (horizontal\n * tab) and its expansion based on what column it’s at (virtual space),\n * and the end-of-file (eof) character.\n * As values are preprocessed before handling them, the actual characters LF,\n * CR, HT, and NUL (which is present as the replacement character), are\n * guaranteed to not exist.\n *\n * Unicode basic latin block.\n */\nexport const codes = /** @type {const} */ ({\n  carriageReturn: -5,\n  lineFeed: -4,\n  carriageReturnLineFeed: -3,\n  horizontalTab: -2,\n  virtualSpace: -1,\n  eof: null,\n  nul: 0,\n  soh: 1,\n  stx: 2,\n  etx: 3,\n  eot: 4,\n  enq: 5,\n  ack: 6,\n  bel: 7,\n  bs: 8,\n  ht: 9, // `\\t`\n  lf: 10, // `\\n`\n  vt: 11, // `\\v`\n  ff: 12, // `\\f`\n  cr: 13, // `\\r`\n  so: 14,\n  si: 15,\n  dle: 16,\n  dc1: 17,\n  dc2: 18,\n  dc3: 19,\n  dc4: 20,\n  nak: 21,\n  syn: 22,\n  etb: 23,\n  can: 24,\n  em: 25,\n  sub: 26,\n  esc: 27,\n  fs: 28,\n  gs: 29,\n  rs: 30,\n  us: 31,\n  space: 32,\n  exclamationMark: 33, // `!`\n  quotationMark: 34, // `\"`\n  numberSign: 35, // `#`\n  dollarSign: 36, // `$`\n  percentSign: 37, // `%`\n  ampersand: 38, // `&`\n  apostrophe: 39, // `'`\n  leftParenthesis: 40, // `(`\n  rightParenthesis: 41, // `)`\n  asterisk: 42, // `*`\n  plusSign: 43, // `+`\n  comma: 44, // `,`\n  dash: 45, // `-`\n  dot: 46, // `.`\n  slash: 47, // `/`\n  digit0: 48, // `0`\n  digit1: 49, // `1`\n  digit2: 50, // `2`\n  digit3: 51, // `3`\n  digit4: 52, // `4`\n  digit5: 53, // `5`\n  digit6: 54, // `6`\n  digit7: 55, // `7`\n  digit8: 56, // `8`\n  digit9: 57, // `9`\n  colon: 58, // `:`\n  semicolon: 59, // `;`\n  lessThan: 60, // `<`\n  equalsTo: 61, // `=`\n  greaterThan: 62, // `>`\n  questionMark: 63, // `?`\n  atSign: 64, // `@`\n  uppercaseA: 65, // `A`\n  uppercaseB: 66, // `B`\n  uppercaseC: 67, // `C`\n  uppercaseD: 68, // `D`\n  uppercaseE: 69, // `E`\n  uppercaseF: 70, // `F`\n  uppercaseG: 71, // `G`\n  uppercaseH: 72, // `H`\n  uppercaseI: 73, // `I`\n  uppercaseJ: 74, // `J`\n  uppercaseK: 75, // `K`\n  uppercaseL: 76, // `L`\n  uppercaseM: 77, // `M`\n  uppercaseN: 78, // `N`\n  uppercaseO: 79, // `O`\n  uppercaseP: 80, // `P`\n  uppercaseQ: 81, // `Q`\n  uppercaseR: 82, // `R`\n  uppercaseS: 83, // `S`\n  uppercaseT: 84, // `T`\n  uppercaseU: 85, // `U`\n  uppercaseV: 86, // `V`\n  uppercaseW: 87, // `W`\n  uppercaseX: 88, // `X`\n  uppercaseY: 89, // `Y`\n  uppercaseZ: 90, // `Z`\n  leftSquareBracket: 91, // `[`\n  backslash: 92, // `\\`\n  rightSquareBracket: 93, // `]`\n  caret: 94, // `^`\n  underscore: 95, // `_`\n  graveAccent: 96, // `` ` ``\n  lowercaseA: 97, // `a`\n  lowercaseB: 98, // `b`\n  lowercaseC: 99, // `c`\n  lowercaseD: 100, // `d`\n  lowercaseE: 101, // `e`\n  lowercaseF: 102, // `f`\n  lowercaseG: 103, // `g`\n  lowercaseH: 104, // `h`\n  lowercaseI: 105, // `i`\n  lowercaseJ: 106, // `j`\n  lowercaseK: 107, // `k`\n  lowercaseL: 108, // `l`\n  lowercaseM: 109, // `m`\n  lowercaseN: 110, // `n`\n  lowercaseO: 111, // `o`\n  lowercaseP: 112, // `p`\n  lowercaseQ: 113, // `q`\n  lowercaseR: 114, // `r`\n  lowercaseS: 115, // `s`\n  lowercaseT: 116, // `t`\n  lowercaseU: 117, // `u`\n  lowercaseV: 118, // `v`\n  lowercaseW: 119, // `w`\n  lowercaseX: 120, // `x`\n  lowercaseY: 121, // `y`\n  lowercaseZ: 122, // `z`\n  leftCurlyBrace: 123, // `{`\n  verticalBar: 124, // `|`\n  rightCurlyBrace: 125, // `}`\n  tilde: 126, // `~`\n  del: 127,\n  // Unicode Specials block.\n  byteOrderMarker: 65279,\n  // Unicode Specials block.\n  replacementCharacter: 65533 // `�`\n})\n","/**\n * This module is compiled away!\n *\n * Parsing markdown comes with a couple of constants, such as minimum or maximum\n * sizes of certain sequences.\n * Additionally, there are a couple symbols used inside micromark.\n * These are all defined here, but compiled away by scripts.\n */\nexport const constants = /** @type {const} */ ({\n  attentionSideBefore: 1, // Symbol to mark an attention sequence as before content: `*a`\n  attentionSideAfter: 2, // Symbol to mark an attention sequence as after content: `a*`\n  atxHeadingOpeningFenceSizeMax: 6, // 6 number signs is fine, 7 isn’t.\n  autolinkDomainSizeMax: 63, // 63 characters is fine, 64 is too many.\n  autolinkSchemeSizeMax: 32, // 32 characters is fine, 33 is too many.\n  cdataOpeningString: 'CDATA[', // And preceded by `<![`.\n  characterGroupWhitespace: 1, // Symbol used to indicate a character is whitespace\n  characterGroupPunctuation: 2, // Symbol used to indicate a character is punctuation\n  characterReferenceDecimalSizeMax: 7, // `&#9999999;`.\n  characterReferenceHexadecimalSizeMax: 6, // `&#xff9999;`.\n  characterReferenceNamedSizeMax: 31, // `&CounterClockwiseContourIntegral;`.\n  codeFencedSequenceSizeMin: 3, // At least 3 ticks or tildes are needed.\n  contentTypeDocument: 'document',\n  contentTypeFlow: 'flow',\n  contentTypeContent: 'content',\n  contentTypeString: 'string',\n  contentTypeText: 'text',\n  hardBreakPrefixSizeMin: 2, // At least 2 trailing spaces are needed.\n  htmlRaw: 1, // Symbol for `<script>`\n  htmlComment: 2, // Symbol for `<!---->`\n  htmlInstruction: 3, // Symbol for `<?php?>`\n  htmlDeclaration: 4, // Symbol for `<!doctype>`\n  htmlCdata: 5, // Symbol for `<![CDATA[]]>`\n  htmlBasic: 6, // Symbol for `<div`\n  htmlComplete: 7, // Symbol for `<x>`\n  htmlRawSizeMax: 8, // Length of `textarea`.\n  linkResourceDestinationBalanceMax: 32, // See: <https://spec.commonmark.org/0.30/#link-destination>, <https://github.com/remarkjs/react-markdown/issues/658#issuecomment-984345577>\n  linkReferenceSizeMax: 999, // See: <https://spec.commonmark.org/0.30/#link-label>\n  listItemValueSizeMax: 10, // See: <https://spec.commonmark.org/0.30/#ordered-list-marker>\n  numericBaseDecimal: 10,\n  numericBaseHexadecimal: 0x10,\n  tabSize: 4, // Tabs have a hard-coded size of 4, per CommonMark.\n  thematicBreakMarkerCountMin: 3, // At least 3 asterisks, dashes, or underscores are needed.\n  v8MaxSafeChunkSize: 10000 // V8 (and potentially others) have problems injecting giant arrays into other arrays, hence we operate in chunks.\n})\n","/**\n * This module is compiled away!\n *\n * Here is the list of all types of tokens exposed by micromark, with a short\n * explanation of what they include and where they are found.\n * In picking names, generally, the rule is to be as explicit as possible\n * instead of reusing names.\n * For example, there is a `definitionDestination` and a `resourceDestination`,\n * instead of one shared name.\n */\n\n// Note: when changing the next record, you must also change `TokenTypeMap`\n// in `micromark-util-types/index.d.ts`.\nexport const types = /** @type {const} */ ({\n  // Generic type for data, such as in a title, a destination, etc.\n  data: 'data',\n\n  // Generic type for syntactic whitespace (tabs, virtual spaces, spaces).\n  // Such as, between a fenced code fence and an info string.\n  whitespace: 'whitespace',\n\n  // Generic type for line endings (line feed, carriage return, carriage return +\n  // line feed).\n  lineEnding: 'lineEnding',\n\n  // A line ending, but ending a blank line.\n  lineEndingBlank: 'lineEndingBlank',\n\n  // Generic type for whitespace (tabs, virtual spaces, spaces) at the start of a\n  // line.\n  linePrefix: 'linePrefix',\n\n  // Generic type for whitespace (tabs, virtual spaces, spaces) at the end of a\n  // line.\n  lineSuffix: 'lineSuffix',\n\n  // Whole ATX heading:\n  //\n  // ```markdown\n  // #\n  // ## Alpha\n  // ### Bravo ###\n  // ```\n  //\n  // Includes `atxHeadingSequence`, `whitespace`, `atxHeadingText`.\n  atxHeading: 'atxHeading',\n\n  // Sequence of number signs in an ATX heading (`###`).\n  atxHeadingSequence: 'atxHeadingSequence',\n\n  // Content in an ATX heading (`alpha`).\n  // Includes text.\n  atxHeadingText: 'atxHeadingText',\n\n  // Whole autolink (`<https://example.com>` or `<admin@example.com>`)\n  // Includes `autolinkMarker` and `autolinkProtocol` or `autolinkEmail`.\n  autolink: 'autolink',\n\n  // Email autolink w/o markers (`admin@example.com`)\n  autolinkEmail: 'autolinkEmail',\n\n  // Marker around an `autolinkProtocol` or `autolinkEmail` (`<` or `>`).\n  autolinkMarker: 'autolinkMarker',\n\n  // Protocol autolink w/o markers (`https://example.com`)\n  autolinkProtocol: 'autolinkProtocol',\n\n  // A whole character escape (`\\-`).\n  // Includes `escapeMarker` and `characterEscapeValue`.\n  characterEscape: 'characterEscape',\n\n  // The escaped character (`-`).\n  characterEscapeValue: 'characterEscapeValue',\n\n  // A whole character reference (`&amp;`, `&#8800;`, or `&#x1D306;`).\n  // Includes `characterReferenceMarker`, an optional\n  // `characterReferenceMarkerNumeric`, in which case an optional\n  // `characterReferenceMarkerHexadecimal`, and a `characterReferenceValue`.\n  characterReference: 'characterReference',\n\n  // The start or end marker (`&` or `;`).\n  characterReferenceMarker: 'characterReferenceMarker',\n\n  // Mark reference as numeric (`#`).\n  characterReferenceMarkerNumeric: 'characterReferenceMarkerNumeric',\n\n  // Mark reference as numeric (`x` or `X`).\n  characterReferenceMarkerHexadecimal: 'characterReferenceMarkerHexadecimal',\n\n  // Value of character reference w/o markers (`amp`, `8800`, or `1D306`).\n  characterReferenceValue: 'characterReferenceValue',\n\n  // Whole fenced code:\n  //\n  // ````markdown\n  // ```js\n  // alert(1)\n  // ```\n  // ````\n  codeFenced: 'codeFenced',\n\n  // A fenced code fence, including whitespace, sequence, info, and meta\n  // (` ```js `).\n  codeFencedFence: 'codeFencedFence',\n\n  // Sequence of grave accent or tilde characters (` ``` `) in a fence.\n  codeFencedFenceSequence: 'codeFencedFenceSequence',\n\n  // Info word (`js`) in a fence.\n  // Includes string.\n  codeFencedFenceInfo: 'codeFencedFenceInfo',\n\n  // Meta words (`highlight=\"1\"`) in a fence.\n  // Includes string.\n  codeFencedFenceMeta: 'codeFencedFenceMeta',\n\n  // A line of code.\n  codeFlowValue: 'codeFlowValue',\n\n  // Whole indented code:\n  //\n  // ```markdown\n  //     alert(1)\n  // ```\n  //\n  // Includes `lineEnding`, `linePrefix`, and `codeFlowValue`.\n  codeIndented: 'codeIndented',\n\n  // A text code (``` `alpha` ```).\n  // Includes `codeTextSequence`, `codeTextData`, `lineEnding`, and can include\n  // `codeTextPadding`.\n  codeText: 'codeText',\n\n  codeTextData: 'codeTextData',\n\n  // A space or line ending right after or before a tick.\n  codeTextPadding: 'codeTextPadding',\n\n  // A text code fence (` `` `).\n  codeTextSequence: 'codeTextSequence',\n\n  // Whole content:\n  //\n  // ```markdown\n  // [a]: b\n  // c\n  // =\n  // d\n  // ```\n  //\n  // Includes `paragraph` and `definition`.\n  content: 'content',\n  // Whole definition:\n  //\n  // ```markdown\n  // [micromark]: https://github.com/micromark/micromark\n  // ```\n  //\n  // Includes `definitionLabel`, `definitionMarker`, `whitespace`,\n  // `definitionDestination`, and optionally `lineEnding` and `definitionTitle`.\n  definition: 'definition',\n\n  // Destination of a definition (`https://github.com/micromark/micromark` or\n  // `<https://github.com/micromark/micromark>`).\n  // Includes `definitionDestinationLiteral` or `definitionDestinationRaw`.\n  definitionDestination: 'definitionDestination',\n\n  // Enclosed destination of a definition\n  // (`<https://github.com/micromark/micromark>`).\n  // Includes `definitionDestinationLiteralMarker` and optionally\n  // `definitionDestinationString`.\n  definitionDestinationLiteral: 'definitionDestinationLiteral',\n\n  // Markers of an enclosed definition destination (`<` or `>`).\n  definitionDestinationLiteralMarker: 'definitionDestinationLiteralMarker',\n\n  // Unenclosed destination of a definition\n  // (`https://github.com/micromark/micromark`).\n  // Includes `definitionDestinationString`.\n  definitionDestinationRaw: 'definitionDestinationRaw',\n\n  // Text in an destination (`https://github.com/micromark/micromark`).\n  // Includes string.\n  definitionDestinationString: 'definitionDestinationString',\n\n  // Label of a definition (`[micromark]`).\n  // Includes `definitionLabelMarker` and `definitionLabelString`.\n  definitionLabel: 'definitionLabel',\n\n  // Markers of a definition label (`[` or `]`).\n  definitionLabelMarker: 'definitionLabelMarker',\n\n  // Value of a definition label (`micromark`).\n  // Includes string.\n  definitionLabelString: 'definitionLabelString',\n\n  // Marker between a label and a destination (`:`).\n  definitionMarker: 'definitionMarker',\n\n  // Title of a definition (`\"x\"`, `'y'`, or `(z)`).\n  // Includes `definitionTitleMarker` and optionally `definitionTitleString`.\n  definitionTitle: 'definitionTitle',\n\n  // Marker around a title of a definition (`\"`, `'`, `(`, or `)`).\n  definitionTitleMarker: 'definitionTitleMarker',\n\n  // Data without markers in a title (`z`).\n  // Includes string.\n  definitionTitleString: 'definitionTitleString',\n\n  // Emphasis (`*alpha*`).\n  // Includes `emphasisSequence` and `emphasisText`.\n  emphasis: 'emphasis',\n\n  // Sequence of emphasis markers (`*` or `_`).\n  emphasisSequence: 'emphasisSequence',\n\n  // Emphasis text (`alpha`).\n  // Includes text.\n  emphasisText: 'emphasisText',\n\n  // The character escape marker (`\\`).\n  escapeMarker: 'escapeMarker',\n\n  // A hard break created with a backslash (`\\\\n`).\n  // Note: does not include the line ending.\n  hardBreakEscape: 'hardBreakEscape',\n\n  // A hard break created with trailing spaces (`  \\n`).\n  // Does not include the line ending.\n  hardBreakTrailing: 'hardBreakTrailing',\n\n  // Flow HTML:\n  //\n  // ```markdown\n  // <div\n  // ```\n  //\n  // Inlcudes `lineEnding`, `htmlFlowData`.\n  htmlFlow: 'htmlFlow',\n\n  htmlFlowData: 'htmlFlowData',\n\n  // HTML in text (the tag in `a <i> b`).\n  // Includes `lineEnding`, `htmlTextData`.\n  htmlText: 'htmlText',\n\n  htmlTextData: 'htmlTextData',\n\n  // Whole image (`![alpha](bravo)`, `![alpha][bravo]`, `![alpha][]`, or\n  // `![alpha]`).\n  // Includes `label` and an optional `resource` or `reference`.\n  image: 'image',\n\n  // Whole link label (`[*alpha*]`).\n  // Includes `labelLink` or `labelImage`, `labelText`, and `labelEnd`.\n  label: 'label',\n\n  // Text in an label (`*alpha*`).\n  // Includes text.\n  labelText: 'labelText',\n\n  // Start a link label (`[`).\n  // Includes a `labelMarker`.\n  labelLink: 'labelLink',\n\n  // Start an image label (`![`).\n  // Includes `labelImageMarker` and `labelMarker`.\n  labelImage: 'labelImage',\n\n  // Marker of a label (`[` or `]`).\n  labelMarker: 'labelMarker',\n\n  // Marker to start an image (`!`).\n  labelImageMarker: 'labelImageMarker',\n\n  // End a label (`]`).\n  // Includes `labelMarker`.\n  labelEnd: 'labelEnd',\n\n  // Whole link (`[alpha](bravo)`, `[alpha][bravo]`, `[alpha][]`, or `[alpha]`).\n  // Includes `label` and an optional `resource` or `reference`.\n  link: 'link',\n\n  // Whole paragraph:\n  //\n  // ```markdown\n  // alpha\n  // bravo.\n  // ```\n  //\n  // Includes text.\n  paragraph: 'paragraph',\n\n  // A reference (`[alpha]` or `[]`).\n  // Includes `referenceMarker` and an optional `referenceString`.\n  reference: 'reference',\n\n  // A reference marker (`[` or `]`).\n  referenceMarker: 'referenceMarker',\n\n  // Reference text (`alpha`).\n  // Includes string.\n  referenceString: 'referenceString',\n\n  // A resource (`(https://example.com \"alpha\")`).\n  // Includes `resourceMarker`, an optional `resourceDestination` with an optional\n  // `whitespace` and `resourceTitle`.\n  resource: 'resource',\n\n  // A resource destination (`https://example.com`).\n  // Includes `resourceDestinationLiteral` or `resourceDestinationRaw`.\n  resourceDestination: 'resourceDestination',\n\n  // A literal resource destination (`<https://example.com>`).\n  // Includes `resourceDestinationLiteralMarker` and optionally\n  // `resourceDestinationString`.\n  resourceDestinationLiteral: 'resourceDestinationLiteral',\n\n  // A resource destination marker (`<` or `>`).\n  resourceDestinationLiteralMarker: 'resourceDestinationLiteralMarker',\n\n  // A raw resource destination (`https://example.com`).\n  // Includes `resourceDestinationString`.\n  resourceDestinationRaw: 'resourceDestinationRaw',\n\n  // Resource destination text (`https://example.com`).\n  // Includes string.\n  resourceDestinationString: 'resourceDestinationString',\n\n  // A resource marker (`(` or `)`).\n  resourceMarker: 'resourceMarker',\n\n  // A resource title (`\"alpha\"`, `'alpha'`, or `(alpha)`).\n  // Includes `resourceTitleMarker` and optionally `resourceTitleString`.\n  resourceTitle: 'resourceTitle',\n\n  // A resource title marker (`\"`, `'`, `(`, or `)`).\n  resourceTitleMarker: 'resourceTitleMarker',\n\n  // Resource destination title (`alpha`).\n  // Includes string.\n  resourceTitleString: 'resourceTitleString',\n\n  // Whole setext heading:\n  //\n  // ```markdown\n  // alpha\n  // bravo\n  // =====\n  // ```\n  //\n  // Includes `setextHeadingText`, `lineEnding`, `linePrefix`, and\n  // `setextHeadingLine`.\n  setextHeading: 'setextHeading',\n\n  // Content in a setext heading (`alpha\\nbravo`).\n  // Includes text.\n  setextHeadingText: 'setextHeadingText',\n\n  // Underline in a setext heading, including whitespace suffix (`==`).\n  // Includes `setextHeadingLineSequence`.\n  setextHeadingLine: 'setextHeadingLine',\n\n  // Sequence of equals or dash characters in underline in a setext heading (`-`).\n  setextHeadingLineSequence: 'setextHeadingLineSequence',\n\n  // Strong (`**alpha**`).\n  // Includes `strongSequence` and `strongText`.\n  strong: 'strong',\n\n  // Sequence of strong markers (`**` or `__`).\n  strongSequence: 'strongSequence',\n\n  // Strong text (`alpha`).\n  // Includes text.\n  strongText: 'strongText',\n\n  // Whole thematic break:\n  //\n  // ```markdown\n  // * * *\n  // ```\n  //\n  // Includes `thematicBreakSequence` and `whitespace`.\n  thematicBreak: 'thematicBreak',\n\n  // A sequence of one or more thematic break markers (`***`).\n  thematicBreakSequence: 'thematicBreakSequence',\n\n  // Whole block quote:\n  //\n  // ```markdown\n  // > a\n  // >\n  // > b\n  // ```\n  //\n  // Includes `blockQuotePrefix` and flow.\n  blockQuote: 'blockQuote',\n  // The `>` or `> ` of a block quote.\n  blockQuotePrefix: 'blockQuotePrefix',\n  // The `>` of a block quote prefix.\n  blockQuoteMarker: 'blockQuoteMarker',\n  // The optional ` ` of a block quote prefix.\n  blockQuotePrefixWhitespace: 'blockQuotePrefixWhitespace',\n\n  // Whole unordered list:\n  //\n  // ```markdown\n  // - a\n  //   b\n  // ```\n  //\n  // Includes `listItemPrefix`, flow, and optionally  `listItemIndent` on further\n  // lines.\n  listOrdered: 'listOrdered',\n\n  // Whole ordered list:\n  //\n  // ```markdown\n  // 1. a\n  //    b\n  // ```\n  //\n  // Includes `listItemPrefix`, flow, and optionally  `listItemIndent` on further\n  // lines.\n  listUnordered: 'listUnordered',\n\n  // The indent of further list item lines.\n  listItemIndent: 'listItemIndent',\n\n  // A marker, as in, `*`, `+`, `-`, `.`, or `)`.\n  listItemMarker: 'listItemMarker',\n\n  // The thing that starts a list item, such as `1. `.\n  // Includes `listItemValue` if ordered, `listItemMarker`, and\n  // `listItemPrefixWhitespace` (unless followed by a line ending).\n  listItemPrefix: 'listItemPrefix',\n\n  // The whitespace after a marker.\n  listItemPrefixWhitespace: 'listItemPrefixWhitespace',\n\n  // The numerical value of an ordered item.\n  listItemValue: 'listItemValue',\n\n  // Internal types used for subtokenizers, compiled away\n  chunkDocument: 'chunkDocument',\n  chunkContent: 'chunkContent',\n  chunkFlow: 'chunkFlow',\n  chunkText: 'chunkText',\n  chunkString: 'chunkString'\n})\n","/**\n * This module is compiled away!\n *\n * While micromark works based on character codes, this module includes the\n * string versions of ’em.\n * The C0 block, except for LF, CR, HT, and w/ the replacement character added,\n * are available here.\n */\nexport const values = /** @type {const} */ ({\n  ht: '\\t',\n  lf: '\\n',\n  cr: '\\r',\n  space: ' ',\n  exclamationMark: '!',\n  quotationMark: '\"',\n  numberSign: '#',\n  dollarSign: '$',\n  percentSign: '%',\n  ampersand: '&',\n  apostrophe: \"'\",\n  leftParenthesis: '(',\n  rightParenthesis: ')',\n  asterisk: '*',\n  plusSign: '+',\n  comma: ',',\n  dash: '-',\n  dot: '.',\n  slash: '/',\n  digit0: '0',\n  digit1: '1',\n  digit2: '2',\n  digit3: '3',\n  digit4: '4',\n  digit5: '5',\n  digit6: '6',\n  digit7: '7',\n  digit8: '8',\n  digit9: '9',\n  colon: ':',\n  semicolon: ';',\n  lessThan: '<',\n  equalsTo: '=',\n  greaterThan: '>',\n  questionMark: '?',\n  atSign: '@',\n  uppercaseA: 'A',\n  uppercaseB: 'B',\n  uppercaseC: 'C',\n  uppercaseD: 'D',\n  uppercaseE: 'E',\n  uppercaseF: 'F',\n  uppercaseG: 'G',\n  uppercaseH: 'H',\n  uppercaseI: 'I',\n  uppercaseJ: 'J',\n  uppercaseK: 'K',\n  uppercaseL: 'L',\n  uppercaseM: 'M',\n  uppercaseN: 'N',\n  uppercaseO: 'O',\n  uppercaseP: 'P',\n  uppercaseQ: 'Q',\n  uppercaseR: 'R',\n  uppercaseS: 'S',\n  uppercaseT: 'T',\n  uppercaseU: 'U',\n  uppercaseV: 'V',\n  uppercaseW: 'W',\n  uppercaseX: 'X',\n  uppercaseY: 'Y',\n  uppercaseZ: 'Z',\n  leftSquareBracket: '[',\n  backslash: '\\\\',\n  rightSquareBracket: ']',\n  caret: '^',\n  underscore: '_',\n  graveAccent: '`',\n  lowercaseA: 'a',\n  lowercaseB: 'b',\n  lowercaseC: 'c',\n  lowercaseD: 'd',\n  lowercaseE: 'e',\n  lowercaseF: 'f',\n  lowercaseG: 'g',\n  lowercaseH: 'h',\n  lowercaseI: 'i',\n  lowercaseJ: 'j',\n  lowercaseK: 'k',\n  lowercaseL: 'l',\n  lowercaseM: 'm',\n  lowercaseN: 'n',\n  lowercaseO: 'o',\n  lowercaseP: 'p',\n  lowercaseQ: 'q',\n  lowercaseR: 'r',\n  lowercaseS: 's',\n  lowercaseT: 't',\n  lowercaseU: 'u',\n  lowercaseV: 'v',\n  lowercaseW: 'w',\n  lowercaseX: 'x',\n  lowercaseY: 'y',\n  lowercaseZ: 'z',\n  leftCurlyBrace: '{',\n  verticalBar: '|',\n  rightCurlyBrace: '}',\n  tilde: '~',\n  replacementCharacter: '�'\n})\n","/**\n * @typedef {import('micromark-util-types').Extension} Extension\n */\n\nimport {\n  attention,\n  autolink,\n  blockQuote,\n  characterEscape,\n  characterReference,\n  codeFenced,\n  codeIndented,\n  codeText,\n  definition,\n  hardBreakEscape,\n  headingAtx,\n  htmlFlow,\n  htmlText,\n  labelEnd,\n  labelStartImage,\n  labelStartLink,\n  lineEnding,\n  list,\n  setextUnderline,\n  thematicBreak\n} from 'micromark-core-commonmark'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {resolver as resolveText} from './initialize/text.js'\n\n/** @satisfies {Extension['document']} */\nexport const document = {\n  [codes.asterisk]: list,\n  [codes.plusSign]: list,\n  [codes.dash]: list,\n  [codes.digit0]: list,\n  [codes.digit1]: list,\n  [codes.digit2]: list,\n  [codes.digit3]: list,\n  [codes.digit4]: list,\n  [codes.digit5]: list,\n  [codes.digit6]: list,\n  [codes.digit7]: list,\n  [codes.digit8]: list,\n  [codes.digit9]: list,\n  [codes.greaterThan]: blockQuote\n}\n\n/** @satisfies {Extension['contentInitial']} */\nexport const contentInitial = {\n  [codes.leftSquareBracket]: definition\n}\n\n/** @satisfies {Extension['flowInitial']} */\nexport const flowInitial = {\n  [codes.horizontalTab]: codeIndented,\n  [codes.virtualSpace]: codeIndented,\n  [codes.space]: codeIndented\n}\n\n/** @satisfies {Extension['flow']} */\nexport const flow = {\n  [codes.numberSign]: headingAtx,\n  [codes.asterisk]: thematicBreak,\n  [codes.dash]: [setextUnderline, thematicBreak],\n  [codes.lessThan]: htmlFlow,\n  [codes.equalsTo]: setextUnderline,\n  [codes.underscore]: thematicBreak,\n  [codes.graveAccent]: codeFenced,\n  [codes.tilde]: codeFenced\n}\n\n/** @satisfies {Extension['string']} */\nexport const string = {\n  [codes.ampersand]: characterReference,\n  [codes.backslash]: characterEscape\n}\n\n/** @satisfies {Extension['text']} */\nexport const text = {\n  [codes.carriageReturn]: lineEnding,\n  [codes.lineFeed]: lineEnding,\n  [codes.carriageReturnLineFeed]: lineEnding,\n  [codes.exclamationMark]: labelStartImage,\n  [codes.ampersand]: characterReference,\n  [codes.asterisk]: attention,\n  [codes.lessThan]: [autolink, htmlText],\n  [codes.leftSquareBracket]: labelStartLink,\n  [codes.backslash]: [hardBreakEscape, characterEscape],\n  [codes.rightSquareBracket]: labelEnd,\n  [codes.underscore]: attention,\n  [codes.graveAccent]: codeText\n}\n\n/** @satisfies {Extension['insideSpan']} */\nexport const insideSpan = {null: [attention, resolveText]}\n\n/** @satisfies {Extension['attentionMarkers']} */\nexport const attentionMarkers = {null: [codes.asterisk, codes.underscore]}\n\n/** @satisfies {Extension['disable']} */\nexport const disable = {null: []}\n","/**\n * @typedef {import('micromark-util-types').Chunk} Chunk\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').ConstructRecord} ConstructRecord\n * @typedef {import('micromark-util-types').Effects} Effects\n * @typedef {import('micromark-util-types').InitialConstruct} InitialConstruct\n * @typedef {import('micromark-util-types').ParseContext} ParseContext\n * @typedef {import('micromark-util-types').Point} Point\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').TokenType} TokenType\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n */\n\n/**\n * @callback Restore\n * @returns {void}\n *\n * @typedef Info\n * @property {Restore} restore\n * @property {number} from\n *\n * @callback ReturnHandle\n *   Handle a successful run.\n * @param {Construct} construct\n * @param {Info} info\n * @returns {void}\n */\n\nimport createDebug from 'debug'\nimport {markdownLineEnding} from 'micromark-util-character'\nimport {push, splice} from 'micromark-util-chunked'\nimport {resolveAll} from 'micromark-util-resolve-all'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {values} from 'micromark-util-symbol/values.js'\nimport {ok as assert} from 'uvu/assert'\n\nconst debug = createDebug('micromark')\n\n/**\n * Create a tokenizer.\n * Tokenizers deal with one type of data (e.g., containers, flow, text).\n * The parser is the object dealing with it all.\n * `initialize` works like other constructs, except that only its `tokenize`\n * function is used, in which case it doesn’t receive an `ok` or `nok`.\n * `from` can be given to set the point before the first character, although\n * when further lines are indented, they must be set with `defineSkip`.\n *\n * @param {ParseContext} parser\n * @param {InitialConstruct} initialize\n * @param {Omit<Point, '_bufferIndex' | '_index'> | undefined} [from]\n * @returns {TokenizeContext}\n */\nexport function createTokenizer(parser, initialize, from) {\n  /** @type {Point} */\n  let point = Object.assign(\n    from ? Object.assign({}, from) : {line: 1, column: 1, offset: 0},\n    {_index: 0, _bufferIndex: -1}\n  )\n  /** @type {Record<string, number>} */\n  const columnStart = {}\n  /** @type {Array<Construct>} */\n  const resolveAllConstructs = []\n  /** @type {Array<Chunk>} */\n  let chunks = []\n  /** @type {Array<Token>} */\n  let stack = []\n  /** @type {boolean | undefined} */\n  let consumed = true\n\n  /**\n   * Tools used for tokenizing.\n   *\n   * @type {Effects}\n   */\n  const effects = {\n    consume,\n    enter,\n    exit,\n    attempt: constructFactory(onsuccessfulconstruct),\n    check: constructFactory(onsuccessfulcheck),\n    interrupt: constructFactory(onsuccessfulcheck, {interrupt: true})\n  }\n\n  /**\n   * State and tools for resolving and serializing.\n   *\n   * @type {TokenizeContext}\n   */\n  const context = {\n    previous: codes.eof,\n    code: codes.eof,\n    containerState: {},\n    events: [],\n    parser,\n    sliceStream,\n    sliceSerialize,\n    now,\n    defineSkip,\n    write\n  }\n\n  /**\n   * The state function.\n   *\n   * @type {State | void}\n   */\n  let state = initialize.tokenize.call(context, effects)\n\n  /**\n   * Track which character we expect to be consumed, to catch bugs.\n   *\n   * @type {Code}\n   */\n  let expectedCode\n\n  if (initialize.resolveAll) {\n    resolveAllConstructs.push(initialize)\n  }\n\n  return context\n\n  /** @type {TokenizeContext['write']} */\n  function write(slice) {\n    chunks = push(chunks, slice)\n\n    main()\n\n    // Exit if we’re not done, resolve might change stuff.\n    if (chunks[chunks.length - 1] !== codes.eof) {\n      return []\n    }\n\n    addResult(initialize, 0)\n\n    // Otherwise, resolve, and exit.\n    context.events = resolveAll(resolveAllConstructs, context.events, context)\n\n    return context.events\n  }\n\n  //\n  // Tools.\n  //\n\n  /** @type {TokenizeContext['sliceSerialize']} */\n  function sliceSerialize(token, expandTabs) {\n    return serializeChunks(sliceStream(token), expandTabs)\n  }\n\n  /** @type {TokenizeContext['sliceStream']} */\n  function sliceStream(token) {\n    return sliceChunks(chunks, token)\n  }\n\n  /** @type {TokenizeContext['now']} */\n  function now() {\n    // This is a hot path, so we clone manually instead of `Object.assign({}, point)`\n    const {line, column, offset, _index, _bufferIndex} = point\n    return {line, column, offset, _index, _bufferIndex}\n  }\n\n  /** @type {TokenizeContext['defineSkip']} */\n  function defineSkip(value) {\n    columnStart[value.line] = value.column\n    accountForPotentialSkip()\n    debug('position: define skip: `%j`', point)\n  }\n\n  //\n  // State management.\n  //\n\n  /**\n   * Main loop (note that `_index` and `_bufferIndex` in `point` are modified by\n   * `consume`).\n   * Here is where we walk through the chunks, which either include strings of\n   * several characters, or numerical character codes.\n   * The reason to do this in a loop instead of a call is so the stack can\n   * drain.\n   *\n   * @returns {void}\n   */\n  function main() {\n    /** @type {number} */\n    let chunkIndex\n\n    while (point._index < chunks.length) {\n      const chunk = chunks[point._index]\n\n      // If we’re in a buffer chunk, loop through it.\n      if (typeof chunk === 'string') {\n        chunkIndex = point._index\n\n        if (point._bufferIndex < 0) {\n          point._bufferIndex = 0\n        }\n\n        while (\n          point._index === chunkIndex &&\n          point._bufferIndex < chunk.length\n        ) {\n          go(chunk.charCodeAt(point._bufferIndex))\n        }\n      } else {\n        go(chunk)\n      }\n    }\n  }\n\n  /**\n   * Deal with one code.\n   *\n   * @param {Code} code\n   * @returns {void}\n   */\n  function go(code) {\n    assert(consumed === true, 'expected character to be consumed')\n    consumed = undefined\n    debug('main: passing `%s` to %s', code, state && state.name)\n    expectedCode = code\n    assert(typeof state === 'function', 'expected state')\n    state = state(code)\n  }\n\n  /** @type {Effects['consume']} */\n  function consume(code) {\n    assert(code === expectedCode, 'expected given code to equal expected code')\n\n    debug('consume: `%s`', code)\n\n    assert(\n      consumed === undefined,\n      'expected code to not have been consumed: this might be because `return x(code)` instead of `return x` was used'\n    )\n    assert(\n      code === null\n        ? context.events.length === 0 ||\n            context.events[context.events.length - 1][0] === 'exit'\n        : context.events[context.events.length - 1][0] === 'enter',\n      'expected last token to be open'\n    )\n\n    if (markdownLineEnding(code)) {\n      point.line++\n      point.column = 1\n      point.offset += code === codes.carriageReturnLineFeed ? 2 : 1\n      accountForPotentialSkip()\n      debug('position: after eol: `%j`', point)\n    } else if (code !== codes.virtualSpace) {\n      point.column++\n      point.offset++\n    }\n\n    // Not in a string chunk.\n    if (point._bufferIndex < 0) {\n      point._index++\n    } else {\n      point._bufferIndex++\n\n      // At end of string chunk.\n      // @ts-expect-error Points w/ non-negative `_bufferIndex` reference\n      // strings.\n      if (point._bufferIndex === chunks[point._index].length) {\n        point._bufferIndex = -1\n        point._index++\n      }\n    }\n\n    // Expose the previous character.\n    context.previous = code\n\n    // Mark as consumed.\n    consumed = true\n  }\n\n  /** @type {Effects['enter']} */\n  function enter(type, fields) {\n    /** @type {Token} */\n    // @ts-expect-error Patch instead of assign required fields to help GC.\n    const token = fields || {}\n    token.type = type\n    token.start = now()\n\n    assert(typeof type === 'string', 'expected string type')\n    assert(type.length > 0, 'expected non-empty string')\n    debug('enter: `%s`', type)\n\n    context.events.push(['enter', token, context])\n\n    stack.push(token)\n\n    return token\n  }\n\n  /** @type {Effects['exit']} */\n  function exit(type) {\n    assert(typeof type === 'string', 'expected string type')\n    assert(type.length > 0, 'expected non-empty string')\n\n    const token = stack.pop()\n    assert(token, 'cannot close w/o open tokens')\n    token.end = now()\n\n    assert(type === token.type, 'expected exit token to match current token')\n\n    assert(\n      !(\n        token.start._index === token.end._index &&\n        token.start._bufferIndex === token.end._bufferIndex\n      ),\n      'expected non-empty token (`' + type + '`)'\n    )\n\n    debug('exit: `%s`', token.type)\n    context.events.push(['exit', token, context])\n\n    return token\n  }\n\n  /**\n   * Use results.\n   *\n   * @type {ReturnHandle}\n   */\n  function onsuccessfulconstruct(construct, info) {\n    addResult(construct, info.from)\n  }\n\n  /**\n   * Discard results.\n   *\n   * @type {ReturnHandle}\n   */\n  function onsuccessfulcheck(_, info) {\n    info.restore()\n  }\n\n  /**\n   * Factory to attempt/check/interrupt.\n   *\n   * @param {ReturnHandle} onreturn\n   * @param {{interrupt?: boolean | undefined} | undefined} [fields]\n   */\n  function constructFactory(onreturn, fields) {\n    return hook\n\n    /**\n     * Handle either an object mapping codes to constructs, a list of\n     * constructs, or a single construct.\n     *\n     * @param {Array<Construct> | Construct | ConstructRecord} constructs\n     * @param {State} returnState\n     * @param {State | undefined} [bogusState]\n     * @returns {State}\n     */\n    function hook(constructs, returnState, bogusState) {\n      /** @type {Array<Construct>} */\n      let listOfConstructs\n      /** @type {number} */\n      let constructIndex\n      /** @type {Construct} */\n      let currentConstruct\n      /** @type {Info} */\n      let info\n\n      return Array.isArray(constructs)\n        ? /* c8 ignore next 1 */\n          handleListOfConstructs(constructs)\n        : 'tokenize' in constructs\n        ? // @ts-expect-error Looks like a construct.\n          handleListOfConstructs([constructs])\n        : handleMapOfConstructs(constructs)\n\n      /**\n       * Handle a list of construct.\n       *\n       * @param {ConstructRecord} map\n       * @returns {State}\n       */\n      function handleMapOfConstructs(map) {\n        return start\n\n        /** @type {State} */\n        function start(code) {\n          const def = code !== null && map[code]\n          const all = code !== null && map.null\n          const list = [\n            // To do: add more extension tests.\n            /* c8 ignore next 2 */\n            ...(Array.isArray(def) ? def : def ? [def] : []),\n            ...(Array.isArray(all) ? all : all ? [all] : [])\n          ]\n\n          return handleListOfConstructs(list)(code)\n        }\n      }\n\n      /**\n       * Handle a list of construct.\n       *\n       * @param {Array<Construct>} list\n       * @returns {State}\n       */\n      function handleListOfConstructs(list) {\n        listOfConstructs = list\n        constructIndex = 0\n\n        if (list.length === 0) {\n          assert(bogusState, 'expected `bogusState` to be given')\n          return bogusState\n        }\n\n        return handleConstruct(list[constructIndex])\n      }\n\n      /**\n       * Handle a single construct.\n       *\n       * @param {Construct} construct\n       * @returns {State}\n       */\n      function handleConstruct(construct) {\n        return start\n\n        /** @type {State} */\n        function start(code) {\n          // To do: not needed to store if there is no bogus state, probably?\n          // Currently doesn’t work because `inspect` in document does a check\n          // w/o a bogus, which doesn’t make sense. But it does seem to help perf\n          // by not storing.\n          info = store()\n          currentConstruct = construct\n\n          if (!construct.partial) {\n            context.currentConstruct = construct\n          }\n\n          // Always populated by defaults.\n          assert(\n            context.parser.constructs.disable.null,\n            'expected `disable.null` to be populated'\n          )\n\n          if (\n            construct.name &&\n            context.parser.constructs.disable.null.includes(construct.name)\n          ) {\n            return nok(code)\n          }\n\n          return construct.tokenize.call(\n            // If we do have fields, create an object w/ `context` as its\n            // prototype.\n            // This allows a “live binding”, which is needed for `interrupt`.\n            fields ? Object.assign(Object.create(context), fields) : context,\n            effects,\n            ok,\n            nok\n          )(code)\n        }\n      }\n\n      /** @type {State} */\n      function ok(code) {\n        assert(code === expectedCode, 'expected code')\n        consumed = true\n        onreturn(currentConstruct, info)\n        return returnState\n      }\n\n      /** @type {State} */\n      function nok(code) {\n        assert(code === expectedCode, 'expected code')\n        consumed = true\n        info.restore()\n\n        if (++constructIndex < listOfConstructs.length) {\n          return handleConstruct(listOfConstructs[constructIndex])\n        }\n\n        return bogusState\n      }\n    }\n  }\n\n  /**\n   * @param {Construct} construct\n   * @param {number} from\n   * @returns {void}\n   */\n  function addResult(construct, from) {\n    if (construct.resolveAll && !resolveAllConstructs.includes(construct)) {\n      resolveAllConstructs.push(construct)\n    }\n\n    if (construct.resolve) {\n      splice(\n        context.events,\n        from,\n        context.events.length - from,\n        construct.resolve(context.events.slice(from), context)\n      )\n    }\n\n    if (construct.resolveTo) {\n      context.events = construct.resolveTo(context.events, context)\n    }\n\n    assert(\n      construct.partial ||\n        context.events.length === 0 ||\n        context.events[context.events.length - 1][0] === 'exit',\n      'expected last token to end'\n    )\n  }\n\n  /**\n   * Store state.\n   *\n   * @returns {Info}\n   */\n  function store() {\n    const startPoint = now()\n    const startPrevious = context.previous\n    const startCurrentConstruct = context.currentConstruct\n    const startEventsIndex = context.events.length\n    const startStack = Array.from(stack)\n\n    return {restore, from: startEventsIndex}\n\n    /**\n     * Restore state.\n     *\n     * @returns {void}\n     */\n    function restore() {\n      point = startPoint\n      context.previous = startPrevious\n      context.currentConstruct = startCurrentConstruct\n      context.events.length = startEventsIndex\n      stack = startStack\n      accountForPotentialSkip()\n      debug('position: restore: `%j`', point)\n    }\n  }\n\n  /**\n   * Move the current point a bit forward in the line when it’s on a column\n   * skip.\n   *\n   * @returns {void}\n   */\n  function accountForPotentialSkip() {\n    if (point.line in columnStart && point.column < 2) {\n      point.column = columnStart[point.line]\n      point.offset += columnStart[point.line] - 1\n    }\n  }\n}\n\n/**\n * Get the chunks from a slice of chunks in the range of a token.\n *\n * @param {Array<Chunk>} chunks\n * @param {Pick<Token, 'end' | 'start'>} token\n * @returns {Array<Chunk>}\n */\nfunction sliceChunks(chunks, token) {\n  const startIndex = token.start._index\n  const startBufferIndex = token.start._bufferIndex\n  const endIndex = token.end._index\n  const endBufferIndex = token.end._bufferIndex\n  /** @type {Array<Chunk>} */\n  let view\n\n  if (startIndex === endIndex) {\n    assert(endBufferIndex > -1, 'expected non-negative end buffer index')\n    assert(startBufferIndex > -1, 'expected non-negative start buffer index')\n    // @ts-expect-error `_bufferIndex` is used on string chunks.\n    view = [chunks[startIndex].slice(startBufferIndex, endBufferIndex)]\n  } else {\n    view = chunks.slice(startIndex, endIndex)\n\n    if (startBufferIndex > -1) {\n      const head = view[0]\n      if (typeof head === 'string') {\n        view[0] = head.slice(startBufferIndex)\n      } else {\n        assert(startBufferIndex === 0, 'expected `startBufferIndex` to be `0`')\n        view.shift()\n      }\n    }\n\n    if (endBufferIndex > 0) {\n      // @ts-expect-error `_bufferIndex` is used on string chunks.\n      view.push(chunks[endIndex].slice(0, endBufferIndex))\n    }\n  }\n\n  return view\n}\n\n/**\n * Get the string value of a slice of chunks.\n *\n * @param {Array<Chunk>} chunks\n * @param {boolean | undefined} [expandTabs=false]\n * @returns {string}\n */\nfunction serializeChunks(chunks, expandTabs) {\n  let index = -1\n  /** @type {Array<string>} */\n  const result = []\n  /** @type {boolean | undefined} */\n  let atTab\n\n  while (++index < chunks.length) {\n    const chunk = chunks[index]\n    /** @type {string} */\n    let value\n\n    if (typeof chunk === 'string') {\n      value = chunk\n    } else\n      switch (chunk) {\n        case codes.carriageReturn: {\n          value = values.cr\n\n          break\n        }\n\n        case codes.lineFeed: {\n          value = values.lf\n\n          break\n        }\n\n        case codes.carriageReturnLineFeed: {\n          value = values.cr + values.lf\n\n          break\n        }\n\n        case codes.horizontalTab: {\n          value = expandTabs ? values.space : values.ht\n\n          break\n        }\n\n        case codes.virtualSpace: {\n          if (!expandTabs && atTab) continue\n          value = values.space\n\n          break\n        }\n\n        default: {\n          assert(typeof chunk === 'number', 'expected number')\n          // Currently only replacement character.\n          value = String.fromCharCode(chunk)\n        }\n      }\n\n    atTab = chunk === codes.horizontalTab\n    result.push(value)\n  }\n\n  return result.join('')\n}\n","/**\n * @typedef {import('micromark-util-types').InitialConstruct} InitialConstruct\n * @typedef {import('micromark-util-types').Initializer} Initializer\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding} from 'micromark-util-character'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {constants} from 'micromark-util-symbol/constants.js'\nimport {types} from 'micromark-util-symbol/types.js'\nimport {ok as assert} from 'uvu/assert'\n\n/** @type {InitialConstruct} */\nexport const content = {tokenize: initializeContent}\n\n/**\n * @this {TokenizeContext}\n * @type {Initializer}\n */\nfunction initializeContent(effects) {\n  const contentStart = effects.attempt(\n    this.parser.constructs.contentInitial,\n    afterContentStartConstruct,\n    paragraphInitial\n  )\n  /** @type {Token} */\n  let previous\n\n  return contentStart\n\n  /** @type {State} */\n  function afterContentStartConstruct(code) {\n    assert(\n      code === codes.eof || markdownLineEnding(code),\n      'expected eol or eof'\n    )\n\n    if (code === codes.eof) {\n      effects.consume(code)\n      return\n    }\n\n    effects.enter(types.lineEnding)\n    effects.consume(code)\n    effects.exit(types.lineEnding)\n    return factorySpace(effects, contentStart, types.linePrefix)\n  }\n\n  /** @type {State} */\n  function paragraphInitial(code) {\n    assert(\n      code !== codes.eof && !markdownLineEnding(code),\n      'expected anything other than a line ending or EOF'\n    )\n    effects.enter(types.paragraph)\n    return lineStart(code)\n  }\n\n  /** @type {State} */\n  function lineStart(code) {\n    const token = effects.enter(types.chunkText, {\n      contentType: constants.contentTypeText,\n      previous\n    })\n\n    if (previous) {\n      previous.next = token\n    }\n\n    previous = token\n\n    return data(code)\n  }\n\n  /** @type {State} */\n  function data(code) {\n    if (code === codes.eof) {\n      effects.exit(types.chunkText)\n      effects.exit(types.paragraph)\n      effects.consume(code)\n      return\n    }\n\n    if (markdownLineEnding(code)) {\n      effects.consume(code)\n      effects.exit(types.chunkText)\n      return lineStart\n    }\n\n    // Data.\n    effects.consume(code)\n    return data\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').ContainerState} ContainerState\n * @typedef {import('micromark-util-types').InitialConstruct} InitialConstruct\n * @typedef {import('micromark-util-types').Initializer} Initializer\n * @typedef {import('micromark-util-types').Point} Point\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\n/**\n * @typedef {[Construct, ContainerState]} StackItem\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding} from 'micromark-util-character'\nimport {splice} from 'micromark-util-chunked'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {constants} from 'micromark-util-symbol/constants.js'\nimport {types} from 'micromark-util-symbol/types.js'\nimport {ok as assert} from 'uvu/assert'\n\n/** @type {InitialConstruct} */\nexport const document = {tokenize: initializeDocument}\n\n/** @type {Construct} */\nconst containerConstruct = {tokenize: tokenizeContainer}\n\n/**\n * @this {TokenizeContext}\n * @type {Initializer}\n */\nfunction initializeDocument(effects) {\n  const self = this\n  /** @type {Array<StackItem>} */\n  const stack = []\n  let continued = 0\n  /** @type {TokenizeContext | undefined} */\n  let childFlow\n  /** @type {Token | undefined} */\n  let childToken\n  /** @type {number} */\n  let lineStartOffset\n\n  return start\n\n  /** @type {State} */\n  function start(code) {\n    // First we iterate through the open blocks, starting with the root\n    // document, and descending through last children down to the last open\n    // block.\n    // Each block imposes a condition that the line must satisfy if the block is\n    // to remain open.\n    // For example, a block quote requires a `>` character.\n    // A paragraph requires a non-blank line.\n    // In this phase we may match all or just some of the open blocks.\n    // But we cannot close unmatched blocks yet, because we may have a lazy\n    // continuation line.\n    if (continued < stack.length) {\n      const item = stack[continued]\n      self.containerState = item[1]\n      assert(\n        item[0].continuation,\n        'expected `continuation` to be defined on container construct'\n      )\n      return effects.attempt(\n        item[0].continuation,\n        documentContinue,\n        checkNewContainers\n      )(code)\n    }\n\n    // Done.\n    return checkNewContainers(code)\n  }\n\n  /** @type {State} */\n  function documentContinue(code) {\n    assert(\n      self.containerState,\n      'expected `containerState` to be defined after continuation'\n    )\n\n    continued++\n\n    // Note: this field is called `_closeFlow` but it also closes containers.\n    // Perhaps a good idea to rename it but it’s already used in the wild by\n    // extensions.\n    if (self.containerState._closeFlow) {\n      self.containerState._closeFlow = undefined\n\n      if (childFlow) {\n        closeFlow()\n      }\n\n      // Note: this algorithm for moving events around is similar to the\n      // algorithm when dealing with lazy lines in `writeToChild`.\n      const indexBeforeExits = self.events.length\n      let indexBeforeFlow = indexBeforeExits\n      /** @type {Point | undefined} */\n      let point\n\n      // Find the flow chunk.\n      while (indexBeforeFlow--) {\n        if (\n          self.events[indexBeforeFlow][0] === 'exit' &&\n          self.events[indexBeforeFlow][1].type === types.chunkFlow\n        ) {\n          point = self.events[indexBeforeFlow][1].end\n          break\n        }\n      }\n\n      assert(point, 'could not find previous flow chunk')\n\n      exitContainers(continued)\n\n      // Fix positions.\n      let index = indexBeforeExits\n\n      while (index < self.events.length) {\n        self.events[index][1].end = Object.assign({}, point)\n        index++\n      }\n\n      // Inject the exits earlier (they’re still also at the end).\n      splice(\n        self.events,\n        indexBeforeFlow + 1,\n        0,\n        self.events.slice(indexBeforeExits)\n      )\n\n      // Discard the duplicate exits.\n      self.events.length = index\n\n      return checkNewContainers(code)\n    }\n\n    return start(code)\n  }\n\n  /** @type {State} */\n  function checkNewContainers(code) {\n    // Next, after consuming the continuation markers for existing blocks, we\n    // look for new block starts (e.g. `>` for a block quote).\n    // If we encounter a new block start, we close any blocks unmatched in\n    // step 1 before creating the new block as a child of the last matched\n    // block.\n    if (continued === stack.length) {\n      // No need to `check` whether there’s a container, of `exitContainers`\n      // would be moot.\n      // We can instead immediately `attempt` to parse one.\n      if (!childFlow) {\n        return documentContinued(code)\n      }\n\n      // If we have concrete content, such as block HTML or fenced code,\n      // we can’t have containers “pierce” into them, so we can immediately\n      // start.\n      if (childFlow.currentConstruct && childFlow.currentConstruct.concrete) {\n        return flowStart(code)\n      }\n\n      // If we do have flow, it could still be a blank line,\n      // but we’d be interrupting it w/ a new container if there’s a current\n      // construct.\n      // To do: next major: remove `_gfmTableDynamicInterruptHack` (no longer\n      // needed in micromark-extension-gfm-table@1.0.6).\n      self.interrupt = Boolean(\n        childFlow.currentConstruct && !childFlow._gfmTableDynamicInterruptHack\n      )\n    }\n\n    // Check if there is a new container.\n    self.containerState = {}\n    return effects.check(\n      containerConstruct,\n      thereIsANewContainer,\n      thereIsNoNewContainer\n    )(code)\n  }\n\n  /** @type {State} */\n  function thereIsANewContainer(code) {\n    if (childFlow) closeFlow()\n    exitContainers(continued)\n    return documentContinued(code)\n  }\n\n  /** @type {State} */\n  function thereIsNoNewContainer(code) {\n    self.parser.lazy[self.now().line] = continued !== stack.length\n    lineStartOffset = self.now().offset\n    return flowStart(code)\n  }\n\n  /** @type {State} */\n  function documentContinued(code) {\n    // Try new containers.\n    self.containerState = {}\n    return effects.attempt(\n      containerConstruct,\n      containerContinue,\n      flowStart\n    )(code)\n  }\n\n  /** @type {State} */\n  function containerContinue(code) {\n    assert(\n      self.currentConstruct,\n      'expected `currentConstruct` to be defined on tokenizer'\n    )\n    assert(\n      self.containerState,\n      'expected `containerState` to be defined on tokenizer'\n    )\n    continued++\n    stack.push([self.currentConstruct, self.containerState])\n    // Try another.\n    return documentContinued(code)\n  }\n\n  /** @type {State} */\n  function flowStart(code) {\n    if (code === codes.eof) {\n      if (childFlow) closeFlow()\n      exitContainers(0)\n      effects.consume(code)\n      return\n    }\n\n    childFlow = childFlow || self.parser.flow(self.now())\n    effects.enter(types.chunkFlow, {\n      contentType: constants.contentTypeFlow,\n      previous: childToken,\n      _tokenizer: childFlow\n    })\n\n    return flowContinue(code)\n  }\n\n  /** @type {State} */\n  function flowContinue(code) {\n    if (code === codes.eof) {\n      writeToChild(effects.exit(types.chunkFlow), true)\n      exitContainers(0)\n      effects.consume(code)\n      return\n    }\n\n    if (markdownLineEnding(code)) {\n      effects.consume(code)\n      writeToChild(effects.exit(types.chunkFlow))\n      // Get ready for the next line.\n      continued = 0\n      self.interrupt = undefined\n      return start\n    }\n\n    effects.consume(code)\n    return flowContinue\n  }\n\n  /**\n   * @param {Token} token\n   * @param {boolean | undefined} [eof]\n   * @returns {void}\n   */\n  function writeToChild(token, eof) {\n    assert(childFlow, 'expected `childFlow` to be defined when continuing')\n    const stream = self.sliceStream(token)\n    if (eof) stream.push(null)\n    token.previous = childToken\n    if (childToken) childToken.next = token\n    childToken = token\n    childFlow.defineSkip(token.start)\n    childFlow.write(stream)\n\n    // Alright, so we just added a lazy line:\n    //\n    // ```markdown\n    // > a\n    // b.\n    //\n    // Or:\n    //\n    // > ~~~c\n    // d\n    //\n    // Or:\n    //\n    // > | e |\n    // f\n    // ```\n    //\n    // The construct in the second example (fenced code) does not accept lazy\n    // lines, so it marked itself as done at the end of its first line, and\n    // then the content construct parses `d`.\n    // Most constructs in markdown match on the first line: if the first line\n    // forms a construct, a non-lazy line can’t “unmake” it.\n    //\n    // The construct in the third example is potentially a GFM table, and\n    // those are *weird*.\n    // It *could* be a table, from the first line, if the following line\n    // matches a condition.\n    // In this case, that second line is lazy, which “unmakes” the first line\n    // and turns the whole into one content block.\n    //\n    // We’ve now parsed the non-lazy and the lazy line, and can figure out\n    // whether the lazy line started a new flow block.\n    // If it did, we exit the current containers between the two flow blocks.\n    if (self.parser.lazy[token.start.line]) {\n      let index = childFlow.events.length\n\n      while (index--) {\n        if (\n          // The token starts before the line ending…\n          childFlow.events[index][1].start.offset < lineStartOffset &&\n          // …and either is not ended yet…\n          (!childFlow.events[index][1].end ||\n            // …or ends after it.\n            childFlow.events[index][1].end.offset > lineStartOffset)\n        ) {\n          // Exit: there’s still something open, which means it’s a lazy line\n          // part of something.\n          return\n        }\n      }\n\n      // Note: this algorithm for moving events around is similar to the\n      // algorithm when closing flow in `documentContinue`.\n      const indexBeforeExits = self.events.length\n      let indexBeforeFlow = indexBeforeExits\n      /** @type {boolean | undefined} */\n      let seen\n      /** @type {Point | undefined} */\n      let point\n\n      // Find the previous chunk (the one before the lazy line).\n      while (indexBeforeFlow--) {\n        if (\n          self.events[indexBeforeFlow][0] === 'exit' &&\n          self.events[indexBeforeFlow][1].type === types.chunkFlow\n        ) {\n          if (seen) {\n            point = self.events[indexBeforeFlow][1].end\n            break\n          }\n\n          seen = true\n        }\n      }\n\n      assert(point, 'could not find previous flow chunk')\n\n      exitContainers(continued)\n\n      // Fix positions.\n      index = indexBeforeExits\n\n      while (index < self.events.length) {\n        self.events[index][1].end = Object.assign({}, point)\n        index++\n      }\n\n      // Inject the exits earlier (they’re still also at the end).\n      splice(\n        self.events,\n        indexBeforeFlow + 1,\n        0,\n        self.events.slice(indexBeforeExits)\n      )\n\n      // Discard the duplicate exits.\n      self.events.length = index\n    }\n  }\n\n  /**\n   * @param {number} size\n   * @returns {void}\n   */\n  function exitContainers(size) {\n    let index = stack.length\n\n    // Exit open containers.\n    while (index-- > size) {\n      const entry = stack[index]\n      self.containerState = entry[1]\n      assert(\n        entry[0].exit,\n        'expected `exit` to be defined on container construct'\n      )\n      entry[0].exit.call(self, effects)\n    }\n\n    stack.length = size\n  }\n\n  function closeFlow() {\n    assert(\n      self.containerState,\n      'expected `containerState` to be defined when closing flow'\n    )\n    assert(childFlow, 'expected `childFlow` to be defined when closing it')\n    childFlow.write([codes.eof])\n    childToken = undefined\n    childFlow = undefined\n    self.containerState._closeFlow = undefined\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeContainer(effects, ok, nok) {\n  // Always populated by defaults.\n  assert(\n    this.parser.constructs.disable.null,\n    'expected `disable.null` to be populated'\n  )\n  return factorySpace(\n    effects,\n    effects.attempt(this.parser.constructs.document, ok, nok),\n    types.linePrefix,\n    this.parser.constructs.disable.null.includes('codeIndented')\n      ? undefined\n      : constants.tabSize\n  )\n}\n","/**\n * @typedef {import('micromark-util-types').InitialConstruct} InitialConstruct\n * @typedef {import('micromark-util-types').Initializer} Initializer\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n */\n\nimport {blankLine, content} from 'micromark-core-commonmark'\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding} from 'micromark-util-character'\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {types} from 'micromark-util-symbol/types.js'\nimport {ok as assert} from 'uvu/assert'\n\n/** @type {InitialConstruct} */\nexport const flow = {tokenize: initializeFlow}\n\n/**\n * @this {TokenizeContext}\n * @type {Initializer}\n */\nfunction initializeFlow(effects) {\n  const self = this\n  const initial = effects.attempt(\n    // Try to parse a blank line.\n    blankLine,\n    atBlankEnding,\n    // Try to parse initial flow (essentially, only code).\n    effects.attempt(\n      this.parser.constructs.flowInitial,\n      afterConstruct,\n      factorySpace(\n        effects,\n        effects.attempt(\n          this.parser.constructs.flow,\n          afterConstruct,\n          effects.attempt(content, afterConstruct)\n        ),\n        types.linePrefix\n      )\n    )\n  )\n\n  return initial\n\n  /** @type {State} */\n  function atBlankEnding(code) {\n    assert(\n      code === codes.eof || markdownLineEnding(code),\n      'expected eol or eof'\n    )\n\n    if (code === codes.eof) {\n      effects.consume(code)\n      return\n    }\n\n    effects.enter(types.lineEndingBlank)\n    effects.consume(code)\n    effects.exit(types.lineEndingBlank)\n    self.currentConstruct = undefined\n    return initial\n  }\n\n  /** @type {State} */\n  function afterConstruct(code) {\n    assert(\n      code === codes.eof || markdownLineEnding(code),\n      'expected eol or eof'\n    )\n\n    if (code === codes.eof) {\n      effects.consume(code)\n      return\n    }\n\n    effects.enter(types.lineEnding)\n    effects.consume(code)\n    effects.exit(types.lineEnding)\n    self.currentConstruct = undefined\n    return initial\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').InitialConstruct} InitialConstruct\n * @typedef {import('micromark-util-types').Initializer} Initializer\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n */\n\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {constants} from 'micromark-util-symbol/constants.js'\nimport {types} from 'micromark-util-symbol/types.js'\nimport {ok as assert} from 'uvu/assert'\n\nexport const resolver = {resolveAll: createResolver()}\nexport const string = initializeFactory('string')\nexport const text = initializeFactory('text')\n\n/**\n * @param {'string' | 'text'} field\n * @returns {InitialConstruct}\n */\nfunction initializeFactory(field) {\n  return {\n    tokenize: initializeText,\n    resolveAll: createResolver(\n      field === 'text' ? resolveAllLineSuffixes : undefined\n    )\n  }\n\n  /**\n   * @this {TokenizeContext}\n   * @type {Initializer}\n   */\n  function initializeText(effects) {\n    const self = this\n    const constructs = this.parser.constructs[field]\n    const text = effects.attempt(constructs, start, notText)\n\n    return start\n\n    /** @type {State} */\n    function start(code) {\n      return atBreak(code) ? text(code) : notText(code)\n    }\n\n    /** @type {State} */\n    function notText(code) {\n      if (code === codes.eof) {\n        effects.consume(code)\n        return\n      }\n\n      effects.enter(types.data)\n      effects.consume(code)\n      return data\n    }\n\n    /** @type {State} */\n    function data(code) {\n      if (atBreak(code)) {\n        effects.exit(types.data)\n        return text(code)\n      }\n\n      // Data.\n      effects.consume(code)\n      return data\n    }\n\n    /**\n     * @param {Code} code\n     * @returns {boolean}\n     */\n    function atBreak(code) {\n      if (code === codes.eof) {\n        return true\n      }\n\n      const list = constructs[code]\n      let index = -1\n\n      if (list) {\n        // Always populated by defaults.\n        assert(Array.isArray(list), 'expected `disable.null` to be populated')\n\n        while (++index < list.length) {\n          const item = list[index]\n          if (!item.previous || item.previous.call(self, self.previous)) {\n            return true\n          }\n        }\n      }\n\n      return false\n    }\n  }\n}\n\n/**\n * @param {Resolver | undefined} [extraResolver]\n * @returns {Resolver}\n */\nfunction createResolver(extraResolver) {\n  return resolveAllText\n\n  /** @type {Resolver} */\n  function resolveAllText(events, context) {\n    let index = -1\n    /** @type {number | undefined} */\n    let enter\n\n    // A rather boring computation (to merge adjacent `data` events) which\n    // improves mm performance by 29%.\n    while (++index <= events.length) {\n      if (enter === undefined) {\n        if (events[index] && events[index][1].type === types.data) {\n          enter = index\n          index++\n        }\n      } else if (!events[index] || events[index][1].type !== types.data) {\n        // Don’t do anything if there is one data token.\n        if (index !== enter + 2) {\n          events[enter][1].end = events[index - 1][1].end\n          events.splice(enter + 2, index - enter - 2)\n          index = enter + 2\n        }\n\n        enter = undefined\n      }\n    }\n\n    return extraResolver ? extraResolver(events, context) : events\n  }\n}\n\n/**\n * A rather ugly set of instructions which again looks at chunks in the input\n * stream.\n * The reason to do this here is that it is *much* faster to parse in reverse.\n * And that we can’t hook into `null` to split the line suffix before an EOF.\n * To do: figure out if we can make this into a clean utility, or even in core.\n * As it will be useful for GFMs literal autolink extension (and maybe even\n * tables?)\n *\n * @type {Resolver}\n */\nfunction resolveAllLineSuffixes(events, context) {\n  let eventIndex = 0 // Skip first.\n\n  while (++eventIndex <= events.length) {\n    if (\n      (eventIndex === events.length ||\n        events[eventIndex][1].type === types.lineEnding) &&\n      events[eventIndex - 1][1].type === types.data\n    ) {\n      const data = events[eventIndex - 1][1]\n      const chunks = context.sliceStream(data)\n      let index = chunks.length\n      let bufferIndex = -1\n      let size = 0\n      /** @type {boolean | undefined} */\n      let tabs\n\n      while (index--) {\n        const chunk = chunks[index]\n\n        if (typeof chunk === 'string') {\n          bufferIndex = chunk.length\n\n          while (chunk.charCodeAt(bufferIndex - 1) === codes.space) {\n            size++\n            bufferIndex--\n          }\n\n          if (bufferIndex) break\n          bufferIndex = -1\n        }\n        // Number\n        else if (chunk === codes.horizontalTab) {\n          tabs = true\n          size++\n        } else if (chunk === codes.virtualSpace) {\n          // Empty\n        } else {\n          // Replacement character, exit.\n          index++\n          break\n        }\n      }\n\n      if (size) {\n        const token = {\n          type:\n            eventIndex === events.length ||\n            tabs ||\n            size < constants.hardBreakPrefixSizeMin\n              ? types.lineSuffix\n              : types.hardBreakTrailing,\n          start: {\n            line: data.end.line,\n            column: data.end.column - size,\n            offset: data.end.offset - size,\n            _index: data.start._index + index,\n            _bufferIndex: index\n              ? bufferIndex\n              : data.start._bufferIndex + bufferIndex\n          },\n          end: Object.assign({}, data.end)\n        }\n\n        data.end = Object.assign({}, token.start)\n\n        if (data.start.offset === data.end.offset) {\n          Object.assign(data, token)\n        } else {\n          events.splice(\n            eventIndex,\n            0,\n            ['enter', token, context],\n            ['exit', token, context]\n          )\n          eventIndex += 2\n        }\n      }\n\n      eventIndex++\n    }\n  }\n\n  return events\n}\n","/**\n * @typedef {import('micromark-util-types').Create} Create\n * @typedef {import('micromark-util-types').FullNormalizedExtension} FullNormalizedExtension\n * @typedef {import('micromark-util-types').InitialConstruct} InitialConstruct\n * @typedef {import('micromark-util-types').ParseContext} ParseContext\n * @typedef {import('micromark-util-types').ParseOptions} ParseOptions\n */\n\nimport {combineExtensions} from 'micromark-util-combine-extensions'\nimport {content} from './initialize/content.js'\nimport {document} from './initialize/document.js'\nimport {flow} from './initialize/flow.js'\nimport {text, string} from './initialize/text.js'\nimport {createTokenizer} from './create-tokenizer.js'\nimport * as defaultConstructs from './constructs.js'\n\n/**\n * @param {ParseOptions | null | undefined} [options]\n * @returns {ParseContext}\n */\nexport function parse(options) {\n  const settings = options || {}\n  const constructs = /** @type {FullNormalizedExtension} */ (\n    combineExtensions([defaultConstructs, ...(settings.extensions || [])])\n  )\n\n  /** @type {ParseContext} */\n  const parser = {\n    defined: [],\n    lazy: {},\n    constructs,\n    content: create(content),\n    document: create(document),\n    flow: create(flow),\n    string: create(string),\n    text: create(text)\n  }\n\n  return parser\n\n  /**\n   * @param {InitialConstruct} initial\n   */\n  function create(initial) {\n    return creator\n    /** @type {Create} */\n    function creator(from) {\n      return createTokenizer(parser, initial, from)\n    }\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Event} Event\n */\n\nimport {subtokenize} from 'micromark-util-subtokenize'\n\n/**\n * @param {Array<Event>} events\n * @returns {Array<Event>}\n */\nexport function postprocess(events) {\n  while (!subtokenize(events)) {\n    // Empty\n  }\n\n  return events\n}\n","/**\n * @typedef {import('micromark-util-types').Chunk} Chunk\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Encoding} Encoding\n * @typedef {import('micromark-util-types').Value} Value\n */\n\n/**\n * @callback Preprocessor\n * @param {Value} value\n * @param {Encoding | null | undefined} [encoding]\n * @param {boolean | null | undefined} [end=false]\n * @returns {Array<Chunk>}\n */\n\nimport {codes} from 'micromark-util-symbol/codes.js'\nimport {constants} from 'micromark-util-symbol/constants.js'\n\nconst search = /[\\0\\t\\n\\r]/g\n\n/**\n * @returns {Preprocessor}\n */\nexport function preprocess() {\n  let column = 1\n  let buffer = ''\n  /** @type {boolean | undefined} */\n  let start = true\n  /** @type {boolean | undefined} */\n  let atCarriageReturn\n\n  return preprocessor\n\n  /** @type {Preprocessor} */\n  function preprocessor(value, encoding, end) {\n    /** @type {Array<Chunk>} */\n    const chunks = []\n    /** @type {RegExpMatchArray | null} */\n    let match\n    /** @type {number} */\n    let next\n    /** @type {number} */\n    let startPosition\n    /** @type {number} */\n    let endPosition\n    /** @type {Code} */\n    let code\n\n    // @ts-expect-error `Buffer` does allow an encoding.\n    value = buffer + value.toString(encoding)\n    startPosition = 0\n    buffer = ''\n\n    if (start) {\n      // To do: `markdown-rs` actually parses BOMs (byte order mark).\n      if (value.charCodeAt(0) === codes.byteOrderMarker) {\n        startPosition++\n      }\n\n      start = undefined\n    }\n\n    while (startPosition < value.length) {\n      search.lastIndex = startPosition\n      match = search.exec(value)\n      endPosition =\n        match && match.index !== undefined ? match.index : value.length\n      code = value.charCodeAt(endPosition)\n\n      if (!match) {\n        buffer = value.slice(startPosition)\n        break\n      }\n\n      if (\n        code === codes.lf &&\n        startPosition === endPosition &&\n        atCarriageReturn\n      ) {\n        chunks.push(codes.carriageReturnLineFeed)\n        atCarriageReturn = undefined\n      } else {\n        if (atCarriageReturn) {\n          chunks.push(codes.carriageReturn)\n          atCarriageReturn = undefined\n        }\n\n        if (startPosition < endPosition) {\n          chunks.push(value.slice(startPosition, endPosition))\n          column += endPosition - startPosition\n        }\n\n        switch (code) {\n          case codes.nul: {\n            chunks.push(codes.replacementCharacter)\n            column++\n\n            break\n          }\n\n          case codes.ht: {\n            next = Math.ceil(column / constants.tabSize) * constants.tabSize\n            chunks.push(codes.horizontalTab)\n            while (column++ < next) chunks.push(codes.virtualSpace)\n\n            break\n          }\n\n          case codes.lf: {\n            chunks.push(codes.lineFeed)\n            column = 1\n\n            break\n          }\n\n          default: {\n            atCarriageReturn = true\n            column = 1\n          }\n        }\n      }\n\n      startPosition = endPosition + 1\n    }\n\n    if (end) {\n      if (atCarriageReturn) chunks.push(codes.carriageReturn)\n      if (buffer) chunks.push(buffer)\n      chunks.push(codes.eof)\n    }\n\n    return chunks\n  }\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function (val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","import { urlAlphabet } from './url-alphabet/index.js'\nlet random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\nlet customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  let step = -~((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let j = step | 0\n      while (j--) {\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nlet customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size, random)\nlet nanoid = (size = 21) =>\n  crypto.getRandomValues(new Uint8Array(size)).reduce((id, byte) => {\n    byte &= 63\n    if (byte < 36) {\n      id += byte.toString(36)\n    } else if (byte < 62) {\n      id += (byte - 26).toString(36).toUpperCase()\n    } else if (byte > 62) {\n      id += '-'\n    } else {\n      id += '_'\n    }\n    return id\n  }, '')\nexport { nanoid, customAlphabet, customRandom, urlAlphabet, random }\n","let urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\nexport { urlAlphabet }\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n  var loggedTypeFailures = {};\n  var has = require('./lib/has');\n\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) { /**/ }\n  };\n}\n\n/**\n * Assert that the values match with the type specs.\n * Error messages are memorized and will only be shown once.\n *\n * @param {object} typeSpecs Map of name to a ReactPropType\n * @param {object} values Runtime values that need to be type-checked\n * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n * @param {string} componentName Name of the component for error messages.\n * @param {?Function} getStack Returns the component stack.\n * @private\n */\nfunction checkPropTypes(typeSpecs, values, location, componentName, getStack) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var typeSpecName in typeSpecs) {\n      if (has(typeSpecs, typeSpecName)) {\n        var error;\n        // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            var err = Error(\n              (componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' +\n              'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.' +\n              'This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.'\n            );\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret);\n        } catch (ex) {\n          error = ex;\n        }\n        if (error && !(error instanceof Error)) {\n          printWarning(\n            (componentName || 'React class') + ': type specification of ' +\n            location + ' `' + typeSpecName + '` is invalid; the type checker ' +\n            'function must return `null` or an `Error` but returned a ' + typeof error + '. ' +\n            'You may have forgotten to pass an argument to the type checker ' +\n            'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' +\n            'shape all require an argument).'\n          );\n        }\n        if (error instanceof Error && !(error.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error.message] = true;\n\n          var stack = getStack ? getStack() : '';\n\n          printWarning(\n            'Failed ' + location + ' type: ' + error.message + (stack != null ? stack : '')\n          );\n        }\n      }\n    }\n  }\n}\n\n/**\n * Resets warning cache when testing.\n *\n * @private\n */\ncheckPropTypes.resetWarningCache = function() {\n  if (process.env.NODE_ENV !== 'production') {\n    loggedTypeFailures = {};\n  }\n}\n\nmodule.exports = checkPropTypes;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactIs = require('react-is');\nvar assign = require('object-assign');\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\nvar has = require('./lib/has');\nvar checkPropTypes = require('./checkPropTypes');\n\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\nfunction emptyFunctionThatReturnsNull() {\n  return null;\n}\n\nmodule.exports = function(isValidElement, throwOnDirectAccess) {\n  /* global Symbol */\n  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator'; // Before Symbol spec.\n\n  /**\n   * Returns the iterator method function contained on the iterable object.\n   *\n   * Be sure to invoke the function with the iterable as context:\n   *\n   *     var iteratorFn = getIteratorFn(myIterable);\n   *     if (iteratorFn) {\n   *       var iterator = iteratorFn.call(myIterable);\n   *       ...\n   *     }\n   *\n   * @param {?object} maybeIterable\n   * @return {?function}\n   */\n  function getIteratorFn(maybeIterable) {\n    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n\n  /**\n   * Collection of methods that allow declaration and validation of props that are\n   * supplied to React components. Example usage:\n   *\n   *   var Props = require('ReactPropTypes');\n   *   var MyArticle = React.createClass({\n   *     propTypes: {\n   *       // An optional string prop named \"description\".\n   *       description: Props.string,\n   *\n   *       // A required enum prop named \"category\".\n   *       category: Props.oneOf(['News','Photos']).isRequired,\n   *\n   *       // A prop named \"dialog\" that requires an instance of Dialog.\n   *       dialog: Props.instanceOf(Dialog).isRequired\n   *     },\n   *     render: function() { ... }\n   *   });\n   *\n   * A more formal specification of how these methods are used:\n   *\n   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)\n   *   decl := ReactPropTypes.{type}(.isRequired)?\n   *\n   * Each and every declaration produces a function with the same signature. This\n   * allows the creation of custom validation functions. For example:\n   *\n   *  var MyLink = React.createClass({\n   *    propTypes: {\n   *      // An optional string or URI prop named \"href\".\n   *      href: function(props, propName, componentName) {\n   *        var propValue = props[propName];\n   *        if (propValue != null && typeof propValue !== 'string' &&\n   *            !(propValue instanceof URI)) {\n   *          return new Error(\n   *            'Expected a string or an URI for ' + propName + ' in ' +\n   *            componentName\n   *          );\n   *        }\n   *      }\n   *    },\n   *    render: function() {...}\n   *  });\n   *\n   * @internal\n   */\n\n  var ANONYMOUS = '<<anonymous>>';\n\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithThrowingShims.js`.\n  var ReactPropTypes = {\n    array: createPrimitiveTypeChecker('array'),\n    bigint: createPrimitiveTypeChecker('bigint'),\n    bool: createPrimitiveTypeChecker('boolean'),\n    func: createPrimitiveTypeChecker('function'),\n    number: createPrimitiveTypeChecker('number'),\n    object: createPrimitiveTypeChecker('object'),\n    string: createPrimitiveTypeChecker('string'),\n    symbol: createPrimitiveTypeChecker('symbol'),\n\n    any: createAnyTypeChecker(),\n    arrayOf: createArrayOfTypeChecker,\n    element: createElementTypeChecker(),\n    elementType: createElementTypeTypeChecker(),\n    instanceOf: createInstanceTypeChecker,\n    node: createNodeChecker(),\n    objectOf: createObjectOfTypeChecker,\n    oneOf: createEnumTypeChecker,\n    oneOfType: createUnionTypeChecker,\n    shape: createShapeTypeChecker,\n    exact: createStrictShapeTypeChecker,\n  };\n\n  /**\n   * inlined Object.is polyfill to avoid requiring consumers ship their own\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n   */\n  /*eslint-disable no-self-compare*/\n  function is(x, y) {\n    // SameValue algorithm\n    if (x === y) {\n      // Steps 1-5, 7-10\n      // Steps 6.b-6.e: +0 != -0\n      return x !== 0 || 1 / x === 1 / y;\n    } else {\n      // Step 6.a: NaN == NaN\n      return x !== x && y !== y;\n    }\n  }\n  /*eslint-enable no-self-compare*/\n\n  /**\n   * We use an Error-like object for backward compatibility as people may call\n   * PropTypes directly and inspect their output. However, we don't use real\n   * Errors anymore. We don't inspect their stack anyway, and creating them\n   * is prohibitively expensive if they are created too often, such as what\n   * happens in oneOfType() for any type before the one that matched.\n   */\n  function PropTypeError(message, data) {\n    this.message = message;\n    this.data = data && typeof data === 'object' ? data: {};\n    this.stack = '';\n  }\n  // Make `instanceof Error` still work for returned errors.\n  PropTypeError.prototype = Error.prototype;\n\n  function createChainableTypeChecker(validate) {\n    if (process.env.NODE_ENV !== 'production') {\n      var manualPropTypeCallCache = {};\n      var manualPropTypeWarningCount = 0;\n    }\n    function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {\n      componentName = componentName || ANONYMOUS;\n      propFullName = propFullName || propName;\n\n      if (secret !== ReactPropTypesSecret) {\n        if (throwOnDirectAccess) {\n          // New behavior only for users of `prop-types` package\n          var err = new Error(\n            'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n            'Use `PropTypes.checkPropTypes()` to call them. ' +\n            'Read more at http://fb.me/use-check-prop-types'\n          );\n          err.name = 'Invariant Violation';\n          throw err;\n        } else if (process.env.NODE_ENV !== 'production' && typeof console !== 'undefined') {\n          // Old behavior for people using React.PropTypes\n          var cacheKey = componentName + ':' + propName;\n          if (\n            !manualPropTypeCallCache[cacheKey] &&\n            // Avoid spamming the console because they are often not actionable except for lib authors\n            manualPropTypeWarningCount < 3\n          ) {\n            printWarning(\n              'You are manually calling a React.PropTypes validation ' +\n              'function for the `' + propFullName + '` prop on `' + componentName + '`. This is deprecated ' +\n              'and will throw in the standalone `prop-types` package. ' +\n              'You may be seeing this warning due to a third-party PropTypes ' +\n              'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.'\n            );\n            manualPropTypeCallCache[cacheKey] = true;\n            manualPropTypeWarningCount++;\n          }\n        }\n      }\n      if (props[propName] == null) {\n        if (isRequired) {\n          if (props[propName] === null) {\n            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));\n          }\n          return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));\n        }\n        return null;\n      } else {\n        return validate(props, propName, componentName, location, propFullName);\n      }\n    }\n\n    var chainedCheckType = checkType.bind(null, false);\n    chainedCheckType.isRequired = checkType.bind(null, true);\n\n    return chainedCheckType;\n  }\n\n  function createPrimitiveTypeChecker(expectedType) {\n    function validate(props, propName, componentName, location, propFullName, secret) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== expectedType) {\n        // `propValue` being instance of, say, date/regexp, pass the 'object'\n        // check, but we can offer a more precise error message here rather than\n        // 'of type `object`'.\n        var preciseType = getPreciseType(propValue);\n\n        return new PropTypeError(\n          'Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'),\n          {expectedType: expectedType}\n        );\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createAnyTypeChecker() {\n    return createChainableTypeChecker(emptyFunctionThatReturnsNull);\n  }\n\n  function createArrayOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');\n      }\n      var propValue = props[propName];\n      if (!Array.isArray(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));\n      }\n      for (var i = 0; i < propValue.length; i++) {\n        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret);\n        if (error instanceof Error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!isValidElement(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!ReactIs.isValidElementType(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement type.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createInstanceTypeChecker(expectedClass) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!(props[propName] instanceof expectedClass)) {\n        var expectedClassName = expectedClass.name || ANONYMOUS;\n        var actualClassName = getClassName(props[propName]);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createEnumTypeChecker(expectedValues) {\n    if (!Array.isArray(expectedValues)) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (arguments.length > 1) {\n          printWarning(\n            'Invalid arguments supplied to oneOf, expected an array, got ' + arguments.length + ' arguments. ' +\n            'A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).'\n          );\n        } else {\n          printWarning('Invalid argument supplied to oneOf, expected an array.');\n        }\n      }\n      return emptyFunctionThatReturnsNull;\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      for (var i = 0; i < expectedValues.length; i++) {\n        if (is(propValue, expectedValues[i])) {\n          return null;\n        }\n      }\n\n      var valuesString = JSON.stringify(expectedValues, function replacer(key, value) {\n        var type = getPreciseType(value);\n        if (type === 'symbol') {\n          return String(value);\n        }\n        return value;\n      });\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + String(propValue) + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createObjectOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');\n      }\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));\n      }\n      for (var key in propValue) {\n        if (has(propValue, key)) {\n          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n          if (error instanceof Error) {\n            return error;\n          }\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createUnionTypeChecker(arrayOfTypeCheckers) {\n    if (!Array.isArray(arrayOfTypeCheckers)) {\n      process.env.NODE_ENV !== 'production' ? printWarning('Invalid argument supplied to oneOfType, expected an instance of array.') : void 0;\n      return emptyFunctionThatReturnsNull;\n    }\n\n    for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n      var checker = arrayOfTypeCheckers[i];\n      if (typeof checker !== 'function') {\n        printWarning(\n          'Invalid argument supplied to oneOfType. Expected an array of check functions, but ' +\n          'received ' + getPostfixForTypeWarning(checker) + ' at index ' + i + '.'\n        );\n        return emptyFunctionThatReturnsNull;\n      }\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var expectedTypes = [];\n      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n        var checker = arrayOfTypeCheckers[i];\n        var checkerResult = checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret);\n        if (checkerResult == null) {\n          return null;\n        }\n        if (checkerResult.data && has(checkerResult.data, 'expectedType')) {\n          expectedTypes.push(checkerResult.data.expectedType);\n        }\n      }\n      var expectedTypesMessage = (expectedTypes.length > 0) ? ', expected one of type [' + expectedTypes.join(', ') + ']': '';\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`' + expectedTypesMessage + '.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createNodeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!isNode(props[propName])) {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function invalidValidatorError(componentName, location, propFullName, key, type) {\n    return new PropTypeError(\n      (componentName || 'React class') + ': ' + location + ' type `' + propFullName + '.' + key + '` is invalid; ' +\n      'it must be a function, usually from the `prop-types` package, but received `' + type + '`.'\n    );\n  }\n\n  function createShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      for (var key in shapeTypes) {\n        var checker = shapeTypes[key];\n        if (typeof checker !== 'function') {\n          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createStrictShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      // We need to check all keys in case some are required but missing from props.\n      var allKeys = assign({}, props[propName], shapeTypes);\n      for (var key in allKeys) {\n        var checker = shapeTypes[key];\n        if (has(shapeTypes, key) && typeof checker !== 'function') {\n          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));\n        }\n        if (!checker) {\n          return new PropTypeError(\n            'Invalid ' + location + ' `' + propFullName + '` key `' + key + '` supplied to `' + componentName + '`.' +\n            '\\nBad object: ' + JSON.stringify(props[propName], null, '  ') +\n            '\\nValid keys: ' + JSON.stringify(Object.keys(shapeTypes), null, '  ')\n          );\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function isNode(propValue) {\n    switch (typeof propValue) {\n      case 'number':\n      case 'string':\n      case 'undefined':\n        return true;\n      case 'boolean':\n        return !propValue;\n      case 'object':\n        if (Array.isArray(propValue)) {\n          return propValue.every(isNode);\n        }\n        if (propValue === null || isValidElement(propValue)) {\n          return true;\n        }\n\n        var iteratorFn = getIteratorFn(propValue);\n        if (iteratorFn) {\n          var iterator = iteratorFn.call(propValue);\n          var step;\n          if (iteratorFn !== propValue.entries) {\n            while (!(step = iterator.next()).done) {\n              if (!isNode(step.value)) {\n                return false;\n              }\n            }\n          } else {\n            // Iterator will provide entry [k,v] tuples rather than values.\n            while (!(step = iterator.next()).done) {\n              var entry = step.value;\n              if (entry) {\n                if (!isNode(entry[1])) {\n                  return false;\n                }\n              }\n            }\n          }\n        } else {\n          return false;\n        }\n\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  function isSymbol(propType, propValue) {\n    // Native Symbol.\n    if (propType === 'symbol') {\n      return true;\n    }\n\n    // falsy value can't be a Symbol\n    if (!propValue) {\n      return false;\n    }\n\n    // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'\n    if (propValue['@@toStringTag'] === 'Symbol') {\n      return true;\n    }\n\n    // Fallback for non-spec compliant Symbols which are polyfilled.\n    if (typeof Symbol === 'function' && propValue instanceof Symbol) {\n      return true;\n    }\n\n    return false;\n  }\n\n  // Equivalent of `typeof` but with special handling for array and regexp.\n  function getPropType(propValue) {\n    var propType = typeof propValue;\n    if (Array.isArray(propValue)) {\n      return 'array';\n    }\n    if (propValue instanceof RegExp) {\n      // Old webkits (at least until Android 4.0) return 'function' rather than\n      // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n      // passes PropTypes.object.\n      return 'object';\n    }\n    if (isSymbol(propType, propValue)) {\n      return 'symbol';\n    }\n    return propType;\n  }\n\n  // This handles more types than `getPropType`. Only used for error messages.\n  // See `createPrimitiveTypeChecker`.\n  function getPreciseType(propValue) {\n    if (typeof propValue === 'undefined' || propValue === null) {\n      return '' + propValue;\n    }\n    var propType = getPropType(propValue);\n    if (propType === 'object') {\n      if (propValue instanceof Date) {\n        return 'date';\n      } else if (propValue instanceof RegExp) {\n        return 'regexp';\n      }\n    }\n    return propType;\n  }\n\n  // Returns a string that is postfixed to a warning about an invalid type.\n  // For example, \"undefined\" or \"of type array\"\n  function getPostfixForTypeWarning(value) {\n    var type = getPreciseType(value);\n    switch (type) {\n      case 'array':\n      case 'object':\n        return 'an ' + type;\n      case 'boolean':\n      case 'date':\n      case 'regexp':\n        return 'a ' + type;\n      default:\n        return type;\n    }\n  }\n\n  // Returns class name of the object, if any.\n  function getClassName(propValue) {\n    if (!propValue.constructor || !propValue.constructor.name) {\n      return ANONYMOUS;\n    }\n    return propValue.constructor.name;\n  }\n\n  ReactPropTypes.checkPropTypes = checkPropTypes;\n  ReactPropTypes.resetWarningCache = checkPropTypes.resetWarningCache;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","module.exports = Function.call.bind(Object.prototype.hasOwnProperty);\n","/**\n * @typedef {import('./lib/util/info.js').Info} Info\n * @typedef {import('./lib/util/schema.js').Schema} Schema\n */\n\nimport {merge} from './lib/util/merge.js'\nimport {xlink} from './lib/xlink.js'\nimport {xml} from './lib/xml.js'\nimport {xmlns} from './lib/xmlns.js'\nimport {aria} from './lib/aria.js'\nimport {html as htmlBase} from './lib/html.js'\nimport {svg as svgBase} from './lib/svg.js'\n\nexport {find} from './lib/find.js'\nexport {hastToReact} from './lib/hast-to-react.js'\nexport {normalize} from './lib/normalize.js'\nexport const html = merge([xml, xlink, xmlns, aria, htmlBase], 'html')\nexport const svg = merge([xml, xlink, xmlns, aria, svgBase], 'svg')\n","import {booleanish, number, spaceSeparated} from './util/types.js'\nimport {create} from './util/create.js'\n\nexport const aria = create({\n  transform(_, prop) {\n    return prop === 'role' ? prop : 'aria-' + prop.slice(4).toLowerCase()\n  },\n  properties: {\n    ariaActiveDescendant: null,\n    ariaAtomic: booleanish,\n    ariaAutoComplete: null,\n    ariaBusy: booleanish,\n    ariaChecked: booleanish,\n    ariaColCount: number,\n    ariaColIndex: number,\n    ariaColSpan: number,\n    ariaControls: spaceSeparated,\n    ariaCurrent: null,\n    ariaDescribedBy: spaceSeparated,\n    ariaDetails: null,\n    ariaDisabled: booleanish,\n    ariaDropEffect: spaceSeparated,\n    ariaErrorMessage: null,\n    ariaExpanded: booleanish,\n    ariaFlowTo: spaceSeparated,\n    ariaGrabbed: booleanish,\n    ariaHasPopup: null,\n    ariaHidden: booleanish,\n    ariaInvalid: null,\n    ariaKeyShortcuts: null,\n    ariaLabel: null,\n    ariaLabelledBy: spaceSeparated,\n    ariaLevel: number,\n    ariaLive: null,\n    ariaModal: booleanish,\n    ariaMultiLine: booleanish,\n    ariaMultiSelectable: booleanish,\n    ariaOrientation: null,\n    ariaOwns: spaceSeparated,\n    ariaPlaceholder: null,\n    ariaPosInSet: number,\n    ariaPressed: booleanish,\n    ariaReadOnly: booleanish,\n    ariaRelevant: null,\n    ariaRequired: booleanish,\n    ariaRoleDescription: spaceSeparated,\n    ariaRowCount: number,\n    ariaRowIndex: number,\n    ariaRowSpan: number,\n    ariaSelected: booleanish,\n    ariaSetSize: number,\n    ariaSort: null,\n    ariaValueMax: number,\n    ariaValueMin: number,\n    ariaValueNow: number,\n    ariaValueText: null,\n    role: null\n  }\n})\n","/**\n * @typedef {import('./util/schema.js').Schema} Schema\n */\n\nimport {normalize} from './normalize.js'\nimport {DefinedInfo} from './util/defined-info.js'\nimport {Info} from './util/info.js'\n\nconst valid = /^data[-\\w.:]+$/i\nconst dash = /-[a-z]/g\nconst cap = /[A-Z]/g\n\n/**\n * @param {Schema} schema\n * @param {string} value\n * @returns {Info}\n */\nexport function find(schema, value) {\n  const normal = normalize(value)\n  let prop = value\n  let Type = Info\n\n  if (normal in schema.normal) {\n    return schema.property[schema.normal[normal]]\n  }\n\n  if (normal.length > 4 && normal.slice(0, 4) === 'data' && valid.test(value)) {\n    // Attribute or property.\n    if (value.charAt(4) === '-') {\n      // Turn it into a property.\n      const rest = value.slice(5).replace(dash, camelcase)\n      prop = 'data' + rest.charAt(0).toUpperCase() + rest.slice(1)\n    } else {\n      // Turn it into an attribute.\n      const rest = value.slice(4)\n\n      if (!dash.test(rest)) {\n        let dashes = rest.replace(cap, kebab)\n\n        if (dashes.charAt(0) !== '-') {\n          dashes = '-' + dashes\n        }\n\n        value = 'data' + dashes\n      }\n    }\n\n    Type = DefinedInfo\n  }\n\n  return new Type(prop, value)\n}\n\n/**\n * @param {string} $0\n * @returns {string}\n */\nfunction kebab($0) {\n  return '-' + $0.toLowerCase()\n}\n\n/**\n * @param {string} $0\n * @returns {string}\n */\nfunction camelcase($0) {\n  return $0.charAt(1).toUpperCase()\n}\n","/**\n * `hast` is close to `React`, but differs in a couple of cases.\n *\n * To get a React property from a hast property, check if it is in\n * `hastToReact`, if it is, then use the corresponding value,\n * otherwise, use the hast property.\n *\n * @type {Record<string, string>}\n */\nexport const hastToReact = {\n  classId: 'classID',\n  dataType: 'datatype',\n  itemId: 'itemID',\n  strokeDashArray: 'strokeDasharray',\n  strokeDashOffset: 'strokeDashoffset',\n  strokeLineCap: 'strokeLinecap',\n  strokeLineJoin: 'strokeLinejoin',\n  strokeMiterLimit: 'strokeMiterlimit',\n  typeOf: 'typeof',\n  xLinkActuate: 'xlinkActuate',\n  xLinkArcRole: 'xlinkArcrole',\n  xLinkHref: 'xlinkHref',\n  xLinkRole: 'xlinkRole',\n  xLinkShow: 'xlinkShow',\n  xLinkTitle: 'xlinkTitle',\n  xLinkType: 'xlinkType',\n  xmlnsXLink: 'xmlnsXlink'\n}\n","import {\n  boolean,\n  overloadedBoolean,\n  booleanish,\n  number,\n  spaceSeparated,\n  commaSeparated\n} from './util/types.js'\nimport {create} from './util/create.js'\nimport {caseInsensitiveTransform} from './util/case-insensitive-transform.js'\n\nexport const html = create({\n  space: 'html',\n  attributes: {\n    acceptcharset: 'accept-charset',\n    classname: 'class',\n    htmlfor: 'for',\n    httpequiv: 'http-equiv'\n  },\n  transform: caseInsensitiveTransform,\n  mustUseProperty: ['checked', 'multiple', 'muted', 'selected'],\n  properties: {\n    // Standard Properties.\n    abbr: null,\n    accept: commaSeparated,\n    acceptCharset: spaceSeparated,\n    accessKey: spaceSeparated,\n    action: null,\n    allow: null,\n    allowFullScreen: boolean,\n    allowPaymentRequest: boolean,\n    allowUserMedia: boolean,\n    alt: null,\n    as: null,\n    async: boolean,\n    autoCapitalize: null,\n    autoComplete: spaceSeparated,\n    autoFocus: boolean,\n    autoPlay: boolean,\n    blocking: spaceSeparated,\n    capture: null,\n    charSet: null,\n    checked: boolean,\n    cite: null,\n    className: spaceSeparated,\n    cols: number,\n    colSpan: null,\n    content: null,\n    contentEditable: booleanish,\n    controls: boolean,\n    controlsList: spaceSeparated,\n    coords: number | commaSeparated,\n    crossOrigin: null,\n    data: null,\n    dateTime: null,\n    decoding: null,\n    default: boolean,\n    defer: boolean,\n    dir: null,\n    dirName: null,\n    disabled: boolean,\n    download: overloadedBoolean,\n    draggable: booleanish,\n    encType: null,\n    enterKeyHint: null,\n    fetchPriority: null,\n    form: null,\n    formAction: null,\n    formEncType: null,\n    formMethod: null,\n    formNoValidate: boolean,\n    formTarget: null,\n    headers: spaceSeparated,\n    height: number,\n    hidden: boolean,\n    high: number,\n    href: null,\n    hrefLang: null,\n    htmlFor: spaceSeparated,\n    httpEquiv: spaceSeparated,\n    id: null,\n    imageSizes: null,\n    imageSrcSet: null,\n    inert: boolean,\n    inputMode: null,\n    integrity: null,\n    is: null,\n    isMap: boolean,\n    itemId: null,\n    itemProp: spaceSeparated,\n    itemRef: spaceSeparated,\n    itemScope: boolean,\n    itemType: spaceSeparated,\n    kind: null,\n    label: null,\n    lang: null,\n    language: null,\n    list: null,\n    loading: null,\n    loop: boolean,\n    low: number,\n    manifest: null,\n    max: null,\n    maxLength: number,\n    media: null,\n    method: null,\n    min: null,\n    minLength: number,\n    multiple: boolean,\n    muted: boolean,\n    name: null,\n    nonce: null,\n    noModule: boolean,\n    noValidate: boolean,\n    onAbort: null,\n    onAfterPrint: null,\n    onAuxClick: null,\n    onBeforeMatch: null,\n    onBeforePrint: null,\n    onBeforeToggle: null,\n    onBeforeUnload: null,\n    onBlur: null,\n    onCancel: null,\n    onCanPlay: null,\n    onCanPlayThrough: null,\n    onChange: null,\n    onClick: null,\n    onClose: null,\n    onContextLost: null,\n    onContextMenu: null,\n    onContextRestored: null,\n    onCopy: null,\n    onCueChange: null,\n    onCut: null,\n    onDblClick: null,\n    onDrag: null,\n    onDragEnd: null,\n    onDragEnter: null,\n    onDragExit: null,\n    onDragLeave: null,\n    onDragOver: null,\n    onDragStart: null,\n    onDrop: null,\n    onDurationChange: null,\n    onEmptied: null,\n    onEnded: null,\n    onError: null,\n    onFocus: null,\n    onFormData: null,\n    onHashChange: null,\n    onInput: null,\n    onInvalid: null,\n    onKeyDown: null,\n    onKeyPress: null,\n    onKeyUp: null,\n    onLanguageChange: null,\n    onLoad: null,\n    onLoadedData: null,\n    onLoadedMetadata: null,\n    onLoadEnd: null,\n    onLoadStart: null,\n    onMessage: null,\n    onMessageError: null,\n    onMouseDown: null,\n    onMouseEnter: null,\n    onMouseLeave: null,\n    onMouseMove: null,\n    onMouseOut: null,\n    onMouseOver: null,\n    onMouseUp: null,\n    onOffline: null,\n    onOnline: null,\n    onPageHide: null,\n    onPageShow: null,\n    onPaste: null,\n    onPause: null,\n    onPlay: null,\n    onPlaying: null,\n    onPopState: null,\n    onProgress: null,\n    onRateChange: null,\n    onRejectionHandled: null,\n    onReset: null,\n    onResize: null,\n    onScroll: null,\n    onScrollEnd: null,\n    onSecurityPolicyViolation: null,\n    onSeeked: null,\n    onSeeking: null,\n    onSelect: null,\n    onSlotChange: null,\n    onStalled: null,\n    onStorage: null,\n    onSubmit: null,\n    onSuspend: null,\n    onTimeUpdate: null,\n    onToggle: null,\n    onUnhandledRejection: null,\n    onUnload: null,\n    onVolumeChange: null,\n    onWaiting: null,\n    onWheel: null,\n    open: boolean,\n    optimum: number,\n    pattern: null,\n    ping: spaceSeparated,\n    placeholder: null,\n    playsInline: boolean,\n    popover: null,\n    popoverTarget: null,\n    popoverTargetAction: null,\n    poster: null,\n    preload: null,\n    readOnly: boolean,\n    referrerPolicy: null,\n    rel: spaceSeparated,\n    required: boolean,\n    reversed: boolean,\n    rows: number,\n    rowSpan: number,\n    sandbox: spaceSeparated,\n    scope: null,\n    scoped: boolean,\n    seamless: boolean,\n    selected: boolean,\n    shadowRootClonable: boolean,\n    shadowRootDelegatesFocus: boolean,\n    shadowRootMode: null,\n    shape: null,\n    size: number,\n    sizes: null,\n    slot: null,\n    span: number,\n    spellCheck: booleanish,\n    src: null,\n    srcDoc: null,\n    srcLang: null,\n    srcSet: null,\n    start: number,\n    step: null,\n    style: null,\n    tabIndex: number,\n    target: null,\n    title: null,\n    translate: null,\n    type: null,\n    typeMustMatch: boolean,\n    useMap: null,\n    value: booleanish,\n    width: number,\n    wrap: null,\n    writingSuggestions: null,\n\n    // Legacy.\n    // See: https://html.spec.whatwg.org/#other-elements,-attributes-and-apis\n    align: null, // Several. Use CSS `text-align` instead,\n    aLink: null, // `<body>`. Use CSS `a:active {color}` instead\n    archive: spaceSeparated, // `<object>`. List of URIs to archives\n    axis: null, // `<td>` and `<th>`. Use `scope` on `<th>`\n    background: null, // `<body>`. Use CSS `background-image` instead\n    bgColor: null, // `<body>` and table elements. Use CSS `background-color` instead\n    border: number, // `<table>`. Use CSS `border-width` instead,\n    borderColor: null, // `<table>`. Use CSS `border-color` instead,\n    bottomMargin: number, // `<body>`\n    cellPadding: null, // `<table>`\n    cellSpacing: null, // `<table>`\n    char: null, // Several table elements. When `align=char`, sets the character to align on\n    charOff: null, // Several table elements. When `char`, offsets the alignment\n    classId: null, // `<object>`\n    clear: null, // `<br>`. Use CSS `clear` instead\n    code: null, // `<object>`\n    codeBase: null, // `<object>`\n    codeType: null, // `<object>`\n    color: null, // `<font>` and `<hr>`. Use CSS instead\n    compact: boolean, // Lists. Use CSS to reduce space between items instead\n    declare: boolean, // `<object>`\n    event: null, // `<script>`\n    face: null, // `<font>`. Use CSS instead\n    frame: null, // `<table>`\n    frameBorder: null, // `<iframe>`. Use CSS `border` instead\n    hSpace: number, // `<img>` and `<object>`\n    leftMargin: number, // `<body>`\n    link: null, // `<body>`. Use CSS `a:link {color: *}` instead\n    longDesc: null, // `<frame>`, `<iframe>`, and `<img>`. Use an `<a>`\n    lowSrc: null, // `<img>`. Use a `<picture>`\n    marginHeight: number, // `<body>`\n    marginWidth: number, // `<body>`\n    noResize: boolean, // `<frame>`\n    noHref: boolean, // `<area>`. Use no href instead of an explicit `nohref`\n    noShade: boolean, // `<hr>`. Use background-color and height instead of borders\n    noWrap: boolean, // `<td>` and `<th>`\n    object: null, // `<applet>`\n    profile: null, // `<head>`\n    prompt: null, // `<isindex>`\n    rev: null, // `<link>`\n    rightMargin: number, // `<body>`\n    rules: null, // `<table>`\n    scheme: null, // `<meta>`\n    scrolling: booleanish, // `<frame>`. Use overflow in the child context\n    standby: null, // `<object>`\n    summary: null, // `<table>`\n    text: null, // `<body>`. Use CSS `color` instead\n    topMargin: number, // `<body>`\n    valueType: null, // `<param>`\n    version: null, // `<html>`. Use a doctype.\n    vAlign: null, // Several. Use CSS `vertical-align` instead\n    vLink: null, // `<body>`. Use CSS `a:visited {color}` instead\n    vSpace: number, // `<img>` and `<object>`\n\n    // Non-standard Properties.\n    allowTransparency: null,\n    autoCorrect: null,\n    autoSave: null,\n    disablePictureInPicture: boolean,\n    disableRemotePlayback: boolean,\n    prefix: null,\n    property: null,\n    results: number,\n    security: null,\n    unselectable: null\n  }\n})\n","/**\n * @param {string} value\n * @returns {string}\n */\nexport function normalize(value) {\n  return value.toLowerCase()\n}\n","import {\n  boolean,\n  number,\n  spaceSeparated,\n  commaSeparated,\n  commaOrSpaceSeparated\n} from './util/types.js'\nimport {create} from './util/create.js'\nimport {caseSensitiveTransform} from './util/case-sensitive-transform.js'\n\nexport const svg = create({\n  space: 'svg',\n  attributes: {\n    accentHeight: 'accent-height',\n    alignmentBaseline: 'alignment-baseline',\n    arabicForm: 'arabic-form',\n    baselineShift: 'baseline-shift',\n    capHeight: 'cap-height',\n    className: 'class',\n    clipPath: 'clip-path',\n    clipRule: 'clip-rule',\n    colorInterpolation: 'color-interpolation',\n    colorInterpolationFilters: 'color-interpolation-filters',\n    colorProfile: 'color-profile',\n    colorRendering: 'color-rendering',\n    crossOrigin: 'crossorigin',\n    dataType: 'datatype',\n    dominantBaseline: 'dominant-baseline',\n    enableBackground: 'enable-background',\n    fillOpacity: 'fill-opacity',\n    fillRule: 'fill-rule',\n    floodColor: 'flood-color',\n    floodOpacity: 'flood-opacity',\n    fontFamily: 'font-family',\n    fontSize: 'font-size',\n    fontSizeAdjust: 'font-size-adjust',\n    fontStretch: 'font-stretch',\n    fontStyle: 'font-style',\n    fontVariant: 'font-variant',\n    fontWeight: 'font-weight',\n    glyphName: 'glyph-name',\n    glyphOrientationHorizontal: 'glyph-orientation-horizontal',\n    glyphOrientationVertical: 'glyph-orientation-vertical',\n    hrefLang: 'hreflang',\n    horizAdvX: 'horiz-adv-x',\n    horizOriginX: 'horiz-origin-x',\n    horizOriginY: 'horiz-origin-y',\n    imageRendering: 'image-rendering',\n    letterSpacing: 'letter-spacing',\n    lightingColor: 'lighting-color',\n    markerEnd: 'marker-end',\n    markerMid: 'marker-mid',\n    markerStart: 'marker-start',\n    navDown: 'nav-down',\n    navDownLeft: 'nav-down-left',\n    navDownRight: 'nav-down-right',\n    navLeft: 'nav-left',\n    navNext: 'nav-next',\n    navPrev: 'nav-prev',\n    navRight: 'nav-right',\n    navUp: 'nav-up',\n    navUpLeft: 'nav-up-left',\n    navUpRight: 'nav-up-right',\n    onAbort: 'onabort',\n    onActivate: 'onactivate',\n    onAfterPrint: 'onafterprint',\n    onBeforePrint: 'onbeforeprint',\n    onBegin: 'onbegin',\n    onCancel: 'oncancel',\n    onCanPlay: 'oncanplay',\n    onCanPlayThrough: 'oncanplaythrough',\n    onChange: 'onchange',\n    onClick: 'onclick',\n    onClose: 'onclose',\n    onCopy: 'oncopy',\n    onCueChange: 'oncuechange',\n    onCut: 'oncut',\n    onDblClick: 'ondblclick',\n    onDrag: 'ondrag',\n    onDragEnd: 'ondragend',\n    onDragEnter: 'ondragenter',\n    onDragExit: 'ondragexit',\n    onDragLeave: 'ondragleave',\n    onDragOver: 'ondragover',\n    onDragStart: 'ondragstart',\n    onDrop: 'ondrop',\n    onDurationChange: 'ondurationchange',\n    onEmptied: 'onemptied',\n    onEnd: 'onend',\n    onEnded: 'onended',\n    onError: 'onerror',\n    onFocus: 'onfocus',\n    onFocusIn: 'onfocusin',\n    onFocusOut: 'onfocusout',\n    onHashChange: 'onhashchange',\n    onInput: 'oninput',\n    onInvalid: 'oninvalid',\n    onKeyDown: 'onkeydown',\n    onKeyPress: 'onkeypress',\n    onKeyUp: 'onkeyup',\n    onLoad: 'onload',\n    onLoadedData: 'onloadeddata',\n    onLoadedMetadata: 'onloadedmetadata',\n    onLoadStart: 'onloadstart',\n    onMessage: 'onmessage',\n    onMouseDown: 'onmousedown',\n    onMouseEnter: 'onmouseenter',\n    onMouseLeave: 'onmouseleave',\n    onMouseMove: 'onmousemove',\n    onMouseOut: 'onmouseout',\n    onMouseOver: 'onmouseover',\n    onMouseUp: 'onmouseup',\n    onMouseWheel: 'onmousewheel',\n    onOffline: 'onoffline',\n    onOnline: 'ononline',\n    onPageHide: 'onpagehide',\n    onPageShow: 'onpageshow',\n    onPaste: 'onpaste',\n    onPause: 'onpause',\n    onPlay: 'onplay',\n    onPlaying: 'onplaying',\n    onPopState: 'onpopstate',\n    onProgress: 'onprogress',\n    onRateChange: 'onratechange',\n    onRepeat: 'onrepeat',\n    onReset: 'onreset',\n    onResize: 'onresize',\n    onScroll: 'onscroll',\n    onSeeked: 'onseeked',\n    onSeeking: 'onseeking',\n    onSelect: 'onselect',\n    onShow: 'onshow',\n    onStalled: 'onstalled',\n    onStorage: 'onstorage',\n    onSubmit: 'onsubmit',\n    onSuspend: 'onsuspend',\n    onTimeUpdate: 'ontimeupdate',\n    onToggle: 'ontoggle',\n    onUnload: 'onunload',\n    onVolumeChange: 'onvolumechange',\n    onWaiting: 'onwaiting',\n    onZoom: 'onzoom',\n    overlinePosition: 'overline-position',\n    overlineThickness: 'overline-thickness',\n    paintOrder: 'paint-order',\n    panose1: 'panose-1',\n    pointerEvents: 'pointer-events',\n    referrerPolicy: 'referrerpolicy',\n    renderingIntent: 'rendering-intent',\n    shapeRendering: 'shape-rendering',\n    stopColor: 'stop-color',\n    stopOpacity: 'stop-opacity',\n    strikethroughPosition: 'strikethrough-position',\n    strikethroughThickness: 'strikethrough-thickness',\n    strokeDashArray: 'stroke-dasharray',\n    strokeDashOffset: 'stroke-dashoffset',\n    strokeLineCap: 'stroke-linecap',\n    strokeLineJoin: 'stroke-linejoin',\n    strokeMiterLimit: 'stroke-miterlimit',\n    strokeOpacity: 'stroke-opacity',\n    strokeWidth: 'stroke-width',\n    tabIndex: 'tabindex',\n    textAnchor: 'text-anchor',\n    textDecoration: 'text-decoration',\n    textRendering: 'text-rendering',\n    transformOrigin: 'transform-origin',\n    typeOf: 'typeof',\n    underlinePosition: 'underline-position',\n    underlineThickness: 'underline-thickness',\n    unicodeBidi: 'unicode-bidi',\n    unicodeRange: 'unicode-range',\n    unitsPerEm: 'units-per-em',\n    vAlphabetic: 'v-alphabetic',\n    vHanging: 'v-hanging',\n    vIdeographic: 'v-ideographic',\n    vMathematical: 'v-mathematical',\n    vectorEffect: 'vector-effect',\n    vertAdvY: 'vert-adv-y',\n    vertOriginX: 'vert-origin-x',\n    vertOriginY: 'vert-origin-y',\n    wordSpacing: 'word-spacing',\n    writingMode: 'writing-mode',\n    xHeight: 'x-height',\n    // These were camelcased in Tiny. Now lowercased in SVG 2\n    playbackOrder: 'playbackorder',\n    timelineBegin: 'timelinebegin'\n  },\n  transform: caseSensitiveTransform,\n  properties: {\n    about: commaOrSpaceSeparated,\n    accentHeight: number,\n    accumulate: null,\n    additive: null,\n    alignmentBaseline: null,\n    alphabetic: number,\n    amplitude: number,\n    arabicForm: null,\n    ascent: number,\n    attributeName: null,\n    attributeType: null,\n    azimuth: number,\n    bandwidth: null,\n    baselineShift: null,\n    baseFrequency: null,\n    baseProfile: null,\n    bbox: null,\n    begin: null,\n    bias: number,\n    by: null,\n    calcMode: null,\n    capHeight: number,\n    className: spaceSeparated,\n    clip: null,\n    clipPath: null,\n    clipPathUnits: null,\n    clipRule: null,\n    color: null,\n    colorInterpolation: null,\n    colorInterpolationFilters: null,\n    colorProfile: null,\n    colorRendering: null,\n    content: null,\n    contentScriptType: null,\n    contentStyleType: null,\n    crossOrigin: null,\n    cursor: null,\n    cx: null,\n    cy: null,\n    d: null,\n    dataType: null,\n    defaultAction: null,\n    descent: number,\n    diffuseConstant: number,\n    direction: null,\n    display: null,\n    dur: null,\n    divisor: number,\n    dominantBaseline: null,\n    download: boolean,\n    dx: null,\n    dy: null,\n    edgeMode: null,\n    editable: null,\n    elevation: number,\n    enableBackground: null,\n    end: null,\n    event: null,\n    exponent: number,\n    externalResourcesRequired: null,\n    fill: null,\n    fillOpacity: number,\n    fillRule: null,\n    filter: null,\n    filterRes: null,\n    filterUnits: null,\n    floodColor: null,\n    floodOpacity: null,\n    focusable: null,\n    focusHighlight: null,\n    fontFamily: null,\n    fontSize: null,\n    fontSizeAdjust: null,\n    fontStretch: null,\n    fontStyle: null,\n    fontVariant: null,\n    fontWeight: null,\n    format: null,\n    fr: null,\n    from: null,\n    fx: null,\n    fy: null,\n    g1: commaSeparated,\n    g2: commaSeparated,\n    glyphName: commaSeparated,\n    glyphOrientationHorizontal: null,\n    glyphOrientationVertical: null,\n    glyphRef: null,\n    gradientTransform: null,\n    gradientUnits: null,\n    handler: null,\n    hanging: number,\n    hatchContentUnits: null,\n    hatchUnits: null,\n    height: null,\n    href: null,\n    hrefLang: null,\n    horizAdvX: number,\n    horizOriginX: number,\n    horizOriginY: number,\n    id: null,\n    ideographic: number,\n    imageRendering: null,\n    initialVisibility: null,\n    in: null,\n    in2: null,\n    intercept: number,\n    k: number,\n    k1: number,\n    k2: number,\n    k3: number,\n    k4: number,\n    kernelMatrix: commaOrSpaceSeparated,\n    kernelUnitLength: null,\n    keyPoints: null, // SEMI_COLON_SEPARATED\n    keySplines: null, // SEMI_COLON_SEPARATED\n    keyTimes: null, // SEMI_COLON_SEPARATED\n    kerning: null,\n    lang: null,\n    lengthAdjust: null,\n    letterSpacing: null,\n    lightingColor: null,\n    limitingConeAngle: number,\n    local: null,\n    markerEnd: null,\n    markerMid: null,\n    markerStart: null,\n    markerHeight: null,\n    markerUnits: null,\n    markerWidth: null,\n    mask: null,\n    maskContentUnits: null,\n    maskUnits: null,\n    mathematical: null,\n    max: null,\n    media: null,\n    mediaCharacterEncoding: null,\n    mediaContentEncodings: null,\n    mediaSize: number,\n    mediaTime: null,\n    method: null,\n    min: null,\n    mode: null,\n    name: null,\n    navDown: null,\n    navDownLeft: null,\n    navDownRight: null,\n    navLeft: null,\n    navNext: null,\n    navPrev: null,\n    navRight: null,\n    navUp: null,\n    navUpLeft: null,\n    navUpRight: null,\n    numOctaves: null,\n    observer: null,\n    offset: null,\n    onAbort: null,\n    onActivate: null,\n    onAfterPrint: null,\n    onBeforePrint: null,\n    onBegin: null,\n    onCancel: null,\n    onCanPlay: null,\n    onCanPlayThrough: null,\n    onChange: null,\n    onClick: null,\n    onClose: null,\n    onCopy: null,\n    onCueChange: null,\n    onCut: null,\n    onDblClick: null,\n    onDrag: null,\n    onDragEnd: null,\n    onDragEnter: null,\n    onDragExit: null,\n    onDragLeave: null,\n    onDragOver: null,\n    onDragStart: null,\n    onDrop: null,\n    onDurationChange: null,\n    onEmptied: null,\n    onEnd: null,\n    onEnded: null,\n    onError: null,\n    onFocus: null,\n    onFocusIn: null,\n    onFocusOut: null,\n    onHashChange: null,\n    onInput: null,\n    onInvalid: null,\n    onKeyDown: null,\n    onKeyPress: null,\n    onKeyUp: null,\n    onLoad: null,\n    onLoadedData: null,\n    onLoadedMetadata: null,\n    onLoadStart: null,\n    onMessage: null,\n    onMouseDown: null,\n    onMouseEnter: null,\n    onMouseLeave: null,\n    onMouseMove: null,\n    onMouseOut: null,\n    onMouseOver: null,\n    onMouseUp: null,\n    onMouseWheel: null,\n    onOffline: null,\n    onOnline: null,\n    onPageHide: null,\n    onPageShow: null,\n    onPaste: null,\n    onPause: null,\n    onPlay: null,\n    onPlaying: null,\n    onPopState: null,\n    onProgress: null,\n    onRateChange: null,\n    onRepeat: null,\n    onReset: null,\n    onResize: null,\n    onScroll: null,\n    onSeeked: null,\n    onSeeking: null,\n    onSelect: null,\n    onShow: null,\n    onStalled: null,\n    onStorage: null,\n    onSubmit: null,\n    onSuspend: null,\n    onTimeUpdate: null,\n    onToggle: null,\n    onUnload: null,\n    onVolumeChange: null,\n    onWaiting: null,\n    onZoom: null,\n    opacity: null,\n    operator: null,\n    order: null,\n    orient: null,\n    orientation: null,\n    origin: null,\n    overflow: null,\n    overlay: null,\n    overlinePosition: number,\n    overlineThickness: number,\n    paintOrder: null,\n    panose1: null,\n    path: null,\n    pathLength: number,\n    patternContentUnits: null,\n    patternTransform: null,\n    patternUnits: null,\n    phase: null,\n    ping: spaceSeparated,\n    pitch: null,\n    playbackOrder: null,\n    pointerEvents: null,\n    points: null,\n    pointsAtX: number,\n    pointsAtY: number,\n    pointsAtZ: number,\n    preserveAlpha: null,\n    preserveAspectRatio: null,\n    primitiveUnits: null,\n    propagate: null,\n    property: commaOrSpaceSeparated,\n    r: null,\n    radius: null,\n    referrerPolicy: null,\n    refX: null,\n    refY: null,\n    rel: commaOrSpaceSeparated,\n    rev: commaOrSpaceSeparated,\n    renderingIntent: null,\n    repeatCount: null,\n    repeatDur: null,\n    requiredExtensions: commaOrSpaceSeparated,\n    requiredFeatures: commaOrSpaceSeparated,\n    requiredFonts: commaOrSpaceSeparated,\n    requiredFormats: commaOrSpaceSeparated,\n    resource: null,\n    restart: null,\n    result: null,\n    rotate: null,\n    rx: null,\n    ry: null,\n    scale: null,\n    seed: null,\n    shapeRendering: null,\n    side: null,\n    slope: null,\n    snapshotTime: null,\n    specularConstant: number,\n    specularExponent: number,\n    spreadMethod: null,\n    spacing: null,\n    startOffset: null,\n    stdDeviation: null,\n    stemh: null,\n    stemv: null,\n    stitchTiles: null,\n    stopColor: null,\n    stopOpacity: null,\n    strikethroughPosition: number,\n    strikethroughThickness: number,\n    string: null,\n    stroke: null,\n    strokeDashArray: commaOrSpaceSeparated,\n    strokeDashOffset: null,\n    strokeLineCap: null,\n    strokeLineJoin: null,\n    strokeMiterLimit: number,\n    strokeOpacity: number,\n    strokeWidth: null,\n    style: null,\n    surfaceScale: number,\n    syncBehavior: null,\n    syncBehaviorDefault: null,\n    syncMaster: null,\n    syncTolerance: null,\n    syncToleranceDefault: null,\n    systemLanguage: commaOrSpaceSeparated,\n    tabIndex: number,\n    tableValues: null,\n    target: null,\n    targetX: number,\n    targetY: number,\n    textAnchor: null,\n    textDecoration: null,\n    textRendering: null,\n    textLength: null,\n    timelineBegin: null,\n    title: null,\n    transformBehavior: null,\n    type: null,\n    typeOf: commaOrSpaceSeparated,\n    to: null,\n    transform: null,\n    transformOrigin: null,\n    u1: null,\n    u2: null,\n    underlinePosition: number,\n    underlineThickness: number,\n    unicode: null,\n    unicodeBidi: null,\n    unicodeRange: null,\n    unitsPerEm: number,\n    values: null,\n    vAlphabetic: number,\n    vMathematical: number,\n    vectorEffect: null,\n    vHanging: number,\n    vIdeographic: number,\n    version: null,\n    vertAdvY: number,\n    vertOriginX: number,\n    vertOriginY: number,\n    viewBox: null,\n    viewTarget: null,\n    visibility: null,\n    width: null,\n    widths: null,\n    wordSpacing: null,\n    writingMode: null,\n    x: null,\n    x1: null,\n    x2: null,\n    xChannelSelector: null,\n    xHeight: number,\n    y: null,\n    y1: null,\n    y2: null,\n    yChannelSelector: null,\n    z: null,\n    zoomAndPan: null\n  }\n})\n","import {caseSensitiveTransform} from './case-sensitive-transform.js'\n\n/**\n * @param {Record<string, string>} attributes\n * @param {string} property\n * @returns {string}\n */\nexport function caseInsensitiveTransform(attributes, property) {\n  return caseSensitiveTransform(attributes, property.toLowerCase())\n}\n","/**\n * @param {Record<string, string>} attributes\n * @param {string} attribute\n * @returns {string}\n */\nexport function caseSensitiveTransform(attributes, attribute) {\n  return attribute in attributes ? attributes[attribute] : attribute\n}\n","/**\n * @typedef {import('./schema.js').Properties} Properties\n * @typedef {import('./schema.js').Normal} Normal\n *\n * @typedef {Record<string, string>} Attributes\n *\n * @typedef {Object} Definition\n * @property {Record<string, number|null>} properties\n * @property {(attributes: Attributes, property: string) => string} transform\n * @property {string} [space]\n * @property {Attributes} [attributes]\n * @property {Array<string>} [mustUseProperty]\n */\n\nimport {normalize} from '../normalize.js'\nimport {Schema} from './schema.js'\nimport {DefinedInfo} from './defined-info.js'\n\nconst own = {}.hasOwnProperty\n\n/**\n * @param {Definition} definition\n * @returns {Schema}\n */\nexport function create(definition) {\n  /** @type {Properties} */\n  const property = {}\n  /** @type {Normal} */\n  const normal = {}\n  /** @type {string} */\n  let prop\n\n  for (prop in definition.properties) {\n    if (own.call(definition.properties, prop)) {\n      const value = definition.properties[prop]\n      const info = new DefinedInfo(\n        prop,\n        definition.transform(definition.attributes || {}, prop),\n        value,\n        definition.space\n      )\n\n      if (\n        definition.mustUseProperty &&\n        definition.mustUseProperty.includes(prop)\n      ) {\n        info.mustUseProperty = true\n      }\n\n      property[prop] = info\n\n      normal[normalize(prop)] = prop\n      normal[normalize(info.attribute)] = prop\n    }\n  }\n\n  return new Schema(property, normal, definition.space)\n}\n","import {Info} from './info.js'\nimport * as types from './types.js'\n\n/** @type {Array<keyof types>} */\n// @ts-expect-error: hush.\nconst checks = Object.keys(types)\n\nexport class DefinedInfo extends Info {\n  /**\n   * @constructor\n   * @param {string} property\n   * @param {string} attribute\n   * @param {number|null} [mask]\n   * @param {string} [space]\n   */\n  constructor(property, attribute, mask, space) {\n    let index = -1\n\n    super(property, attribute)\n\n    mark(this, 'space', space)\n\n    if (typeof mask === 'number') {\n      while (++index < checks.length) {\n        const check = checks[index]\n        mark(this, checks[index], (mask & types[check]) === types[check])\n      }\n    }\n  }\n}\n\nDefinedInfo.prototype.defined = true\n\n/**\n * @param {DefinedInfo} values\n * @param {string} key\n * @param {unknown} value\n */\nfunction mark(values, key, value) {\n  if (value) {\n    // @ts-expect-error: assume `value` matches the expected value of `key`.\n    values[key] = value\n  }\n}\n","export class Info {\n  /**\n   * @constructor\n   * @param {string} property\n   * @param {string} attribute\n   */\n  constructor(property, attribute) {\n    /** @type {string} */\n    this.property = property\n    /** @type {string} */\n    this.attribute = attribute\n  }\n}\n\n/** @type {string|null} */\nInfo.prototype.space = null\nInfo.prototype.boolean = false\nInfo.prototype.booleanish = false\nInfo.prototype.overloadedBoolean = false\nInfo.prototype.number = false\nInfo.prototype.commaSeparated = false\nInfo.prototype.spaceSeparated = false\nInfo.prototype.commaOrSpaceSeparated = false\nInfo.prototype.mustUseProperty = false\nInfo.prototype.defined = false\n","/**\n * @typedef {import('./schema.js').Properties} Properties\n * @typedef {import('./schema.js').Normal} Normal\n */\n\nimport {Schema} from './schema.js'\n\n/**\n * @param {Schema[]} definitions\n * @param {string} [space]\n * @returns {Schema}\n */\nexport function merge(definitions, space) {\n  /** @type {Properties} */\n  const property = {}\n  /** @type {Normal} */\n  const normal = {}\n  let index = -1\n\n  while (++index < definitions.length) {\n    Object.assign(property, definitions[index].property)\n    Object.assign(normal, definitions[index].normal)\n  }\n\n  return new Schema(property, normal, space)\n}\n","/**\n * @typedef {import('./info.js').Info} Info\n * @typedef {Record<string, Info>} Properties\n * @typedef {Record<string, string>} Normal\n */\n\nexport class Schema {\n  /**\n   * @constructor\n   * @param {Properties} property\n   * @param {Normal} normal\n   * @param {string} [space]\n   */\n  constructor(property, normal, space) {\n    this.property = property\n    this.normal = normal\n    if (space) {\n      this.space = space\n    }\n  }\n}\n\n/** @type {Properties} */\nSchema.prototype.property = {}\n/** @type {Normal} */\nSchema.prototype.normal = {}\n/** @type {string|null} */\nSchema.prototype.space = null\n","let powers = 0\n\nexport const boolean = increment()\nexport const booleanish = increment()\nexport const overloadedBoolean = increment()\nexport const number = increment()\nexport const spaceSeparated = increment()\nexport const commaSeparated = increment()\nexport const commaOrSpaceSeparated = increment()\n\nfunction increment() {\n  return 2 ** ++powers\n}\n","import {create} from './util/create.js'\n\nexport const xlink = create({\n  space: 'xlink',\n  transform(_, prop) {\n    return 'xlink:' + prop.slice(5).toLowerCase()\n  },\n  properties: {\n    xLinkActuate: null,\n    xLinkArcRole: null,\n    xLinkHref: null,\n    xLinkRole: null,\n    xLinkShow: null,\n    xLinkTitle: null,\n    xLinkType: null\n  }\n})\n","import {create} from './util/create.js'\n\nexport const xml = create({\n  space: 'xml',\n  transform(_, prop) {\n    return 'xml:' + prop.slice(3).toLowerCase()\n  },\n  properties: {xmlLang: null, xmlBase: null, xmlSpace: null}\n})\n","import {create} from './util/create.js'\nimport {caseInsensitiveTransform} from './util/case-insensitive-transform.js'\n\nexport const xmlns = create({\n  space: 'xmlns',\n  attributes: {xmlnsxlink: 'xmlns:xlink'},\n  transform: caseInsensitiveTransform,\n  properties: {xmlns: null, xmlnsXLink: null}\n})\n","/** @license React v16.13.1\n * react-is.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n'use strict';\n\n// The Symbol used to tag the ReactElement-like types. If there is no native Symbol\n// nor polyfill, then a plain number is used for performance.\nvar hasSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = hasSymbol ? Symbol.for('react.element') : 0xeac7;\nvar REACT_PORTAL_TYPE = hasSymbol ? Symbol.for('react.portal') : 0xeaca;\nvar REACT_FRAGMENT_TYPE = hasSymbol ? Symbol.for('react.fragment') : 0xeacb;\nvar REACT_STRICT_MODE_TYPE = hasSymbol ? Symbol.for('react.strict_mode') : 0xeacc;\nvar REACT_PROFILER_TYPE = hasSymbol ? Symbol.for('react.profiler') : 0xead2;\nvar REACT_PROVIDER_TYPE = hasSymbol ? Symbol.for('react.provider') : 0xeacd;\nvar REACT_CONTEXT_TYPE = hasSymbol ? Symbol.for('react.context') : 0xeace; // TODO: We don't use AsyncMode or ConcurrentMode anymore. They were temporary\n// (unstable) APIs that have been removed. Can we remove the symbols?\n\nvar REACT_ASYNC_MODE_TYPE = hasSymbol ? Symbol.for('react.async_mode') : 0xeacf;\nvar REACT_CONCURRENT_MODE_TYPE = hasSymbol ? Symbol.for('react.concurrent_mode') : 0xeacf;\nvar REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;\nvar REACT_SUSPENSE_TYPE = hasSymbol ? Symbol.for('react.suspense') : 0xead1;\nvar REACT_SUSPENSE_LIST_TYPE = hasSymbol ? Symbol.for('react.suspense_list') : 0xead8;\nvar REACT_MEMO_TYPE = hasSymbol ? Symbol.for('react.memo') : 0xead3;\nvar REACT_LAZY_TYPE = hasSymbol ? Symbol.for('react.lazy') : 0xead4;\nvar REACT_BLOCK_TYPE = hasSymbol ? Symbol.for('react.block') : 0xead9;\nvar REACT_FUNDAMENTAL_TYPE = hasSymbol ? Symbol.for('react.fundamental') : 0xead5;\nvar REACT_RESPONDER_TYPE = hasSymbol ? Symbol.for('react.responder') : 0xead6;\nvar REACT_SCOPE_TYPE = hasSymbol ? Symbol.for('react.scope') : 0xead7;\n\nfunction isValidElementType(type) {\n  return typeof type === 'string' || typeof type === 'function' || // Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.\n  type === REACT_FRAGMENT_TYPE || type === REACT_CONCURRENT_MODE_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || typeof type === 'object' && type !== null && (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_RESPONDER_TYPE || type.$$typeof === REACT_SCOPE_TYPE || type.$$typeof === REACT_BLOCK_TYPE);\n}\n\nfunction typeOf(object) {\n  if (typeof object === 'object' && object !== null) {\n    var $$typeof = object.$$typeof;\n\n    switch ($$typeof) {\n      case REACT_ELEMENT_TYPE:\n        var type = object.type;\n\n        switch (type) {\n          case REACT_ASYNC_MODE_TYPE:\n          case REACT_CONCURRENT_MODE_TYPE:\n          case REACT_FRAGMENT_TYPE:\n          case REACT_PROFILER_TYPE:\n          case REACT_STRICT_MODE_TYPE:\n          case REACT_SUSPENSE_TYPE:\n            return type;\n\n          default:\n            var $$typeofType = type && type.$$typeof;\n\n            switch ($$typeofType) {\n              case REACT_CONTEXT_TYPE:\n              case REACT_FORWARD_REF_TYPE:\n              case REACT_LAZY_TYPE:\n              case REACT_MEMO_TYPE:\n              case REACT_PROVIDER_TYPE:\n                return $$typeofType;\n\n              default:\n                return $$typeof;\n            }\n\n        }\n\n      case REACT_PORTAL_TYPE:\n        return $$typeof;\n    }\n  }\n\n  return undefined;\n} // AsyncMode is deprecated along with isAsyncMode\n\nvar AsyncMode = REACT_ASYNC_MODE_TYPE;\nvar ConcurrentMode = REACT_CONCURRENT_MODE_TYPE;\nvar ContextConsumer = REACT_CONTEXT_TYPE;\nvar ContextProvider = REACT_PROVIDER_TYPE;\nvar Element = REACT_ELEMENT_TYPE;\nvar ForwardRef = REACT_FORWARD_REF_TYPE;\nvar Fragment = REACT_FRAGMENT_TYPE;\nvar Lazy = REACT_LAZY_TYPE;\nvar Memo = REACT_MEMO_TYPE;\nvar Portal = REACT_PORTAL_TYPE;\nvar Profiler = REACT_PROFILER_TYPE;\nvar StrictMode = REACT_STRICT_MODE_TYPE;\nvar Suspense = REACT_SUSPENSE_TYPE;\nvar hasWarnedAboutDeprecatedIsAsyncMode = false; // AsyncMode should be deprecated\n\nfunction isAsyncMode(object) {\n  {\n    if (!hasWarnedAboutDeprecatedIsAsyncMode) {\n      hasWarnedAboutDeprecatedIsAsyncMode = true; // Using console['warn'] to evade Babel and ESLint\n\n      console['warn']('The ReactIs.isAsyncMode() alias has been deprecated, ' + 'and will be removed in React 17+. Update your code to use ' + 'ReactIs.isConcurrentMode() instead. It has the exact same API.');\n    }\n  }\n\n  return isConcurrentMode(object) || typeOf(object) === REACT_ASYNC_MODE_TYPE;\n}\nfunction isConcurrentMode(object) {\n  return typeOf(object) === REACT_CONCURRENT_MODE_TYPE;\n}\nfunction isContextConsumer(object) {\n  return typeOf(object) === REACT_CONTEXT_TYPE;\n}\nfunction isContextProvider(object) {\n  return typeOf(object) === REACT_PROVIDER_TYPE;\n}\nfunction isElement(object) {\n  return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n}\nfunction isForwardRef(object) {\n  return typeOf(object) === REACT_FORWARD_REF_TYPE;\n}\nfunction isFragment(object) {\n  return typeOf(object) === REACT_FRAGMENT_TYPE;\n}\nfunction isLazy(object) {\n  return typeOf(object) === REACT_LAZY_TYPE;\n}\nfunction isMemo(object) {\n  return typeOf(object) === REACT_MEMO_TYPE;\n}\nfunction isPortal(object) {\n  return typeOf(object) === REACT_PORTAL_TYPE;\n}\nfunction isProfiler(object) {\n  return typeOf(object) === REACT_PROFILER_TYPE;\n}\nfunction isStrictMode(object) {\n  return typeOf(object) === REACT_STRICT_MODE_TYPE;\n}\nfunction isSuspense(object) {\n  return typeOf(object) === REACT_SUSPENSE_TYPE;\n}\n\nexports.AsyncMode = AsyncMode;\nexports.ConcurrentMode = ConcurrentMode;\nexports.ContextConsumer = ContextConsumer;\nexports.ContextProvider = ContextProvider;\nexports.Element = Element;\nexports.ForwardRef = ForwardRef;\nexports.Fragment = Fragment;\nexports.Lazy = Lazy;\nexports.Memo = Memo;\nexports.Portal = Portal;\nexports.Profiler = Profiler;\nexports.StrictMode = StrictMode;\nexports.Suspense = Suspense;\nexports.isAsyncMode = isAsyncMode;\nexports.isConcurrentMode = isConcurrentMode;\nexports.isContextConsumer = isContextConsumer;\nexports.isContextProvider = isContextProvider;\nexports.isElement = isElement;\nexports.isForwardRef = isForwardRef;\nexports.isFragment = isFragment;\nexports.isLazy = isLazy;\nexports.isMemo = isMemo;\nexports.isPortal = isPortal;\nexports.isProfiler = isProfiler;\nexports.isStrictMode = isStrictMode;\nexports.isSuspense = isSuspense;\nexports.isValidElementType = isValidElementType;\nexports.typeOf = typeOf;\n  })();\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}\n","/**\n * @typedef {import('./lib/react-markdown.js').ReactMarkdownOptions} Options\n * @typedef {import('./lib/ast-to-react.js').Components} Components\n */\n\nexport {uriTransformer} from './lib/uri-transformer.js'\n\nexport {ReactMarkdown as default} from './lib/react-markdown.js'\n","/**\n * @template T\n * @typedef {import('react').ComponentType<T>} ComponentType<T>\n */\n\n/**\n * @template T\n * @typedef {import('react').ComponentPropsWithoutRef<T>} ComponentPropsWithoutRef<T>\n */\n\n/**\n * @typedef {import('react').ReactNode} ReactNode\n * @typedef {import('unist').Position} Position\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast').ElementContent} ElementContent\n * @typedef {import('hast').Root} Root\n * @typedef {import('hast').Text} Text\n * @typedef {import('hast').Comment} Comment\n * @typedef {import('hast').DocType} Doctype\n * @typedef {import('property-information').Info} Info\n * @typedef {import('property-information').Schema} Schema\n * @typedef {import('./complex-types').ReactMarkdownProps} ReactMarkdownProps\n *\n * @typedef Raw\n * @property {'raw'} type\n * @property {string} value\n *\n * @typedef Context\n * @property {Options} options\n * @property {Schema} schema\n * @property {number} listDepth\n *\n * @callback TransformLink\n * @param {string} href\n * @param {Array<ElementContent>} children\n * @param {string?} title\n * @returns {string}\n *\n * @callback TransformImage\n * @param {string} src\n * @param {string} alt\n * @param {string?} title\n * @returns {string}\n *\n * @typedef {import('react').HTMLAttributeAnchorTarget} TransformLinkTargetType\n *\n * @callback TransformLinkTarget\n * @param {string} href\n * @param {Array<ElementContent>} children\n * @param {string?} title\n * @returns {TransformLinkTargetType|undefined}\n *\n * @typedef {keyof JSX.IntrinsicElements} ReactMarkdownNames\n *\n * To do: is `data-sourcepos` typeable?\n *\n * @typedef {ComponentPropsWithoutRef<'code'> & ReactMarkdownProps & {inline?: boolean}} CodeProps\n * @typedef {ComponentPropsWithoutRef<'h1'> & ReactMarkdownProps & {level: number}} HeadingProps\n * @typedef {ComponentPropsWithoutRef<'li'> & ReactMarkdownProps & {checked: boolean|null, index: number, ordered: boolean}} LiProps\n * @typedef {ComponentPropsWithoutRef<'ol'> & ReactMarkdownProps & {depth: number, ordered: true}} OrderedListProps\n * @typedef {ComponentPropsWithoutRef<'table'> & ReactMarkdownProps & {style?: Record<string, unknown>, isHeader: boolean}} TableCellProps\n * @typedef {ComponentPropsWithoutRef<'tr'> & ReactMarkdownProps & {isHeader: boolean}} TableRowProps\n * @typedef {ComponentPropsWithoutRef<'ul'> & ReactMarkdownProps & {depth: number, ordered: false}} UnorderedListProps\n *\n * @typedef {ComponentType<CodeProps>} CodeComponent\n * @typedef {ComponentType<HeadingProps>} HeadingComponent\n * @typedef {ComponentType<LiProps>} LiComponent\n * @typedef {ComponentType<OrderedListProps>} OrderedListComponent\n * @typedef {ComponentType<TableCellProps>} TableCellComponent\n * @typedef {ComponentType<TableRowProps>} TableRowComponent\n * @typedef {ComponentType<UnorderedListProps>} UnorderedListComponent\n *\n * @typedef SpecialComponents\n * @property {CodeComponent|ReactMarkdownNames} code\n * @property {HeadingComponent|ReactMarkdownNames} h1\n * @property {HeadingComponent|ReactMarkdownNames} h2\n * @property {HeadingComponent|ReactMarkdownNames} h3\n * @property {HeadingComponent|ReactMarkdownNames} h4\n * @property {HeadingComponent|ReactMarkdownNames} h5\n * @property {HeadingComponent|ReactMarkdownNames} h6\n * @property {LiComponent|ReactMarkdownNames} li\n * @property {OrderedListComponent|ReactMarkdownNames} ol\n * @property {TableCellComponent|ReactMarkdownNames} td\n * @property {TableCellComponent|ReactMarkdownNames} th\n * @property {TableRowComponent|ReactMarkdownNames} tr\n * @property {UnorderedListComponent|ReactMarkdownNames} ul\n *\n * @typedef {Partial<Omit<import('./complex-types').NormalComponents, keyof SpecialComponents> & SpecialComponents>} Components\n *\n * @typedef Options\n * @property {boolean} [sourcePos=false]\n * @property {boolean} [rawSourcePos=false]\n * @property {boolean} [skipHtml=false]\n * @property {boolean} [includeElementIndex=false]\n * @property {null|false|TransformLink} [transformLinkUri]\n * @property {TransformImage} [transformImageUri]\n * @property {TransformLinkTargetType|TransformLinkTarget} [linkTarget]\n * @property {Components} [components]\n */\n\nimport React from 'react'\nimport ReactIs from 'react-is'\nimport {whitespace} from 'hast-util-whitespace'\nimport {svg, find, hastToReact} from 'property-information'\nimport {stringify as spaces} from 'space-separated-tokens'\nimport {stringify as commas} from 'comma-separated-tokens'\nimport style from 'style-to-object'\n\nconst own = {}.hasOwnProperty\n\n// The table-related elements that must not contain whitespace text according\n// to React.\nconst tableElements = new Set(['table', 'thead', 'tbody', 'tfoot', 'tr'])\n\n/**\n * @param {Context} context\n * @param {Element|Root} node\n */\nexport function childrenToReact(context, node) {\n  /** @type {Array<ReactNode>} */\n  const children = []\n  let childIndex = -1\n  /** @type {Comment|Doctype|Element|Raw|Text} */\n  let child\n\n  while (++childIndex < node.children.length) {\n    child = node.children[childIndex]\n\n    if (child.type === 'element') {\n      children.push(toReact(context, child, childIndex, node))\n    } else if (child.type === 'text') {\n      // Currently, a warning is triggered by react for *any* white space in\n      // tables.\n      // So we drop it.\n      // See: <https://github.com/facebook/react/pull/7081>.\n      // See: <https://github.com/facebook/react/pull/7515>.\n      // See: <https://github.com/remarkjs/remark-react/issues/64>.\n      // See: <https://github.com/remarkjs/react-markdown/issues/576>.\n      if (\n        node.type !== 'element' ||\n        !tableElements.has(node.tagName) ||\n        !whitespace(child)\n      ) {\n        children.push(child.value)\n      }\n    } else if (child.type === 'raw' && !context.options.skipHtml) {\n      // Default behavior is to show (encoded) HTML.\n      children.push(child.value)\n    }\n  }\n\n  return children\n}\n\n/**\n * @param {Context} context\n * @param {Element} node\n * @param {number} index\n * @param {Element|Root} parent\n */\nfunction toReact(context, node, index, parent) {\n  const options = context.options\n  const parentSchema = context.schema\n  /** @type {ReactMarkdownNames} */\n  // @ts-expect-error assume a known HTML/SVG element.\n  const name = node.tagName\n  /** @type {Record<string, unknown>} */\n  const properties = {}\n  let schema = parentSchema\n  /** @type {string} */\n  let property\n\n  if (parentSchema.space === 'html' && name === 'svg') {\n    schema = svg\n    context.schema = schema\n  }\n\n  if (node.properties) {\n    for (property in node.properties) {\n      if (own.call(node.properties, property)) {\n        addProperty(properties, property, node.properties[property], context)\n      }\n    }\n  }\n\n  if (name === 'ol' || name === 'ul') {\n    context.listDepth++\n  }\n\n  const children = childrenToReact(context, node)\n\n  if (name === 'ol' || name === 'ul') {\n    context.listDepth--\n  }\n\n  // Restore parent schema.\n  context.schema = parentSchema\n\n  // Nodes created by plugins do not have positional info, in which case we use\n  // an object that matches the position interface.\n  const position = node.position || {\n    start: {line: null, column: null, offset: null},\n    end: {line: null, column: null, offset: null}\n  }\n  const component =\n    options.components && own.call(options.components, name)\n      ? options.components[name]\n      : name\n  const basic = typeof component === 'string' || component === React.Fragment\n\n  if (!ReactIs.isValidElementType(component)) {\n    throw new TypeError(\n      `Component for name \\`${name}\\` not defined or is not renderable`\n    )\n  }\n\n  properties.key = [\n    name,\n    position.start.line,\n    position.start.column,\n    index\n  ].join('-')\n\n  if (name === 'a' && options.linkTarget) {\n    properties.target =\n      typeof options.linkTarget === 'function'\n        ? options.linkTarget(\n            String(properties.href || ''),\n            node.children,\n            typeof properties.title === 'string' ? properties.title : null\n          )\n        : options.linkTarget\n  }\n\n  if (name === 'a' && options.transformLinkUri) {\n    properties.href = options.transformLinkUri(\n      String(properties.href || ''),\n      node.children,\n      typeof properties.title === 'string' ? properties.title : null\n    )\n  }\n\n  if (\n    !basic &&\n    name === 'code' &&\n    parent.type === 'element' &&\n    parent.tagName !== 'pre'\n  ) {\n    properties.inline = true\n  }\n\n  if (\n    !basic &&\n    (name === 'h1' ||\n      name === 'h2' ||\n      name === 'h3' ||\n      name === 'h4' ||\n      name === 'h5' ||\n      name === 'h6')\n  ) {\n    properties.level = Number.parseInt(name.charAt(1), 10)\n  }\n\n  if (name === 'img' && options.transformImageUri) {\n    properties.src = options.transformImageUri(\n      String(properties.src || ''),\n      String(properties.alt || ''),\n      typeof properties.title === 'string' ? properties.title : null\n    )\n  }\n\n  if (!basic && name === 'li' && parent.type === 'element') {\n    const input = getInputElement(node)\n    properties.checked =\n      input && input.properties ? Boolean(input.properties.checked) : null\n    properties.index = getElementsBeforeCount(parent, node)\n    properties.ordered = parent.tagName === 'ol'\n  }\n\n  if (!basic && (name === 'ol' || name === 'ul')) {\n    properties.ordered = name === 'ol'\n    properties.depth = context.listDepth\n  }\n\n  if (name === 'td' || name === 'th') {\n    if (properties.align) {\n      if (!properties.style) properties.style = {}\n      // @ts-expect-error assume `style` is an object\n      properties.style.textAlign = properties.align\n      delete properties.align\n    }\n\n    if (!basic) {\n      properties.isHeader = name === 'th'\n    }\n  }\n\n  if (!basic && name === 'tr' && parent.type === 'element') {\n    properties.isHeader = Boolean(parent.tagName === 'thead')\n  }\n\n  // If `sourcePos` is given, pass source information (line/column info from markdown source).\n  if (options.sourcePos) {\n    properties['data-sourcepos'] = flattenPosition(position)\n  }\n\n  if (!basic && options.rawSourcePos) {\n    properties.sourcePosition = node.position\n  }\n\n  // If `includeElementIndex` is given, pass node index info to components.\n  if (!basic && options.includeElementIndex) {\n    properties.index = getElementsBeforeCount(parent, node)\n    properties.siblingCount = getElementsBeforeCount(parent)\n  }\n\n  if (!basic) {\n    properties.node = node\n  }\n\n  // Ensure no React warnings are emitted for void elements w/ children.\n  return children.length > 0\n    ? React.createElement(component, properties, children)\n    : React.createElement(component, properties)\n}\n\n/**\n * @param {Element|Root} node\n * @returns {Element?}\n */\nfunction getInputElement(node) {\n  let index = -1\n\n  while (++index < node.children.length) {\n    const child = node.children[index]\n\n    if (child.type === 'element' && child.tagName === 'input') {\n      return child\n    }\n  }\n\n  return null\n}\n\n/**\n * @param {Element|Root} parent\n * @param {Element} [node]\n * @returns {number}\n */\nfunction getElementsBeforeCount(parent, node) {\n  let index = -1\n  let count = 0\n\n  while (++index < parent.children.length) {\n    if (parent.children[index] === node) break\n    if (parent.children[index].type === 'element') count++\n  }\n\n  return count\n}\n\n/**\n * @param {Record<string, unknown>} props\n * @param {string} prop\n * @param {unknown} value\n * @param {Context} ctx\n */\nfunction addProperty(props, prop, value, ctx) {\n  const info = find(ctx.schema, prop)\n  let result = value\n\n  // Ignore nullish and `NaN` values.\n  // eslint-disable-next-line no-self-compare\n  if (result === null || result === undefined || result !== result) {\n    return\n  }\n\n  // Accept `array`.\n  // Most props are space-separated.\n  if (Array.isArray(result)) {\n    result = info.commaSeparated ? commas(result) : spaces(result)\n  }\n\n  if (info.property === 'style' && typeof result === 'string') {\n    result = parseStyle(result)\n  }\n\n  if (info.space && info.property) {\n    props[\n      own.call(hastToReact, info.property)\n        ? hastToReact[info.property]\n        : info.property\n    ] = result\n  } else if (info.attribute) {\n    props[info.attribute] = result\n  }\n}\n\n/**\n * @param {string} value\n * @returns {Record<string, string>}\n */\nfunction parseStyle(value) {\n  /** @type {Record<string, string>} */\n  const result = {}\n\n  try {\n    style(value, iterator)\n  } catch {\n    // Silent.\n  }\n\n  return result\n\n  /**\n   * @param {string} name\n   * @param {string} v\n   */\n  function iterator(name, v) {\n    const k = name.slice(0, 4) === '-ms-' ? `ms-${name.slice(4)}` : name\n    result[k.replace(/-([a-z])/g, styleReplacer)] = v\n  }\n}\n\n/**\n * @param {unknown} _\n * @param {string} $1\n */\nfunction styleReplacer(_, $1) {\n  return $1.toUpperCase()\n}\n\n/**\n * @param {Position|{start: {line: null, column: null, offset: null}, end: {line: null, column: null, offset: null}}} pos\n * @returns {string}\n */\nfunction flattenPosition(pos) {\n  return [\n    pos.start.line,\n    ':',\n    pos.start.column,\n    '-',\n    pos.end.line,\n    ':',\n    pos.end.column\n  ]\n    .map((d) => String(d))\n    .join('')\n}\n","/**\n * @typedef {import('react').ReactNode} ReactNode\n * @typedef {import('react').ReactElement<{}>} ReactElement\n * @typedef {import('unified').PluggableList} PluggableList\n * @typedef {import('hast').Root} Root\n * @typedef {import('./rehype-filter.js').Options} FilterOptions\n * @typedef {import('./ast-to-react.js').Options} TransformOptions\n *\n * @typedef CoreOptions\n * @property {string} children\n *\n * @typedef PluginOptions\n * @property {PluggableList} [plugins=[]] **deprecated**: use `remarkPlugins` instead\n * @property {PluggableList} [remarkPlugins=[]]\n * @property {PluggableList} [rehypePlugins=[]]\n *\n * @typedef LayoutOptions\n * @property {string} [className]\n *\n * @typedef {CoreOptions & PluginOptions & LayoutOptions & FilterOptions & TransformOptions} ReactMarkdownOptions\n *\n * @typedef Deprecation\n * @property {string} id\n * @property {string} [to]\n */\n\nimport React from 'react'\nimport {VFile} from 'vfile'\nimport {unified} from 'unified'\nimport remarkParse from 'remark-parse'\nimport remarkRehype from 'remark-rehype'\nimport PropTypes from 'prop-types'\nimport {html} from 'property-information'\nimport rehypeFilter from './rehype-filter.js'\nimport {uriTransformer} from './uri-transformer.js'\nimport {childrenToReact} from './ast-to-react.js'\n\nconst own = {}.hasOwnProperty\nconst changelog =\n  'https://github.com/remarkjs/react-markdown/blob/main/changelog.md'\n\n/** @type {Record<string, Deprecation>} */\nconst deprecated = {\n  renderers: {to: 'components', id: 'change-renderers-to-components'},\n  astPlugins: {id: 'remove-buggy-html-in-markdown-parser'},\n  allowDangerousHtml: {id: 'remove-buggy-html-in-markdown-parser'},\n  escapeHtml: {id: 'remove-buggy-html-in-markdown-parser'},\n  source: {to: 'children', id: 'change-source-to-children'},\n  allowNode: {\n    to: 'allowElement',\n    id: 'replace-allownode-allowedtypes-and-disallowedtypes'\n  },\n  allowedTypes: {\n    to: 'allowedElements',\n    id: 'replace-allownode-allowedtypes-and-disallowedtypes'\n  },\n  disallowedTypes: {\n    to: 'disallowedElements',\n    id: 'replace-allownode-allowedtypes-and-disallowedtypes'\n  },\n  includeNodeIndex: {\n    to: 'includeElementIndex',\n    id: 'change-includenodeindex-to-includeelementindex'\n  }\n}\n\n/**\n * React component to render markdown.\n *\n * @param {ReactMarkdownOptions} options\n * @returns {ReactElement}\n */\nexport function ReactMarkdown(options) {\n  for (const key in deprecated) {\n    if (own.call(deprecated, key) && own.call(options, key)) {\n      const deprecation = deprecated[key]\n      console.warn(\n        `[react-markdown] Warning: please ${\n          deprecation.to ? `use \\`${deprecation.to}\\` instead of` : 'remove'\n        } \\`${key}\\` (see <${changelog}#${deprecation.id}> for more info)`\n      )\n      delete deprecated[key]\n    }\n  }\n\n  const processor = unified()\n    .use(remarkParse)\n    // TODO: deprecate `plugins` in v8.0.0.\n    .use(options.remarkPlugins || options.plugins || [])\n    .use(remarkRehype, {allowDangerousHtml: true})\n    .use(options.rehypePlugins || [])\n    .use(rehypeFilter, options)\n\n  const file = new VFile()\n\n  if (typeof options.children === 'string') {\n    file.value = options.children\n  } else if (options.children !== undefined && options.children !== null) {\n    console.warn(\n      `[react-markdown] Warning: please pass a string as \\`children\\` (not: \\`${options.children}\\`)`\n    )\n  }\n\n  const hastNode = processor.runSync(processor.parse(file), file)\n\n  if (hastNode.type !== 'root') {\n    throw new TypeError('Expected a `root` node')\n  }\n\n  /** @type {ReactElement} */\n  let result = React.createElement(\n    React.Fragment,\n    {},\n    childrenToReact({options, schema: html, listDepth: 0}, hastNode)\n  )\n\n  if (options.className) {\n    result = React.createElement('div', {className: options.className}, result)\n  }\n\n  return result\n}\n\nReactMarkdown.defaultProps = {transformLinkUri: uriTransformer}\n\nReactMarkdown.propTypes = {\n  // Core options:\n  children: PropTypes.string,\n  // Layout options:\n  className: PropTypes.string,\n  // Filter options:\n  allowElement: PropTypes.func,\n  allowedElements: PropTypes.arrayOf(PropTypes.string),\n  disallowedElements: PropTypes.arrayOf(PropTypes.string),\n  unwrapDisallowed: PropTypes.bool,\n  // Plugin options:\n  remarkPlugins: PropTypes.arrayOf(\n    PropTypes.oneOfType([\n      PropTypes.object,\n      PropTypes.func,\n      PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.object, PropTypes.func]))\n    ])\n  ),\n  rehypePlugins: PropTypes.arrayOf(\n    PropTypes.oneOfType([\n      PropTypes.object,\n      PropTypes.func,\n      PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.object, PropTypes.func]))\n    ])\n  ),\n  // Transform options:\n  sourcePos: PropTypes.bool,\n  rawSourcePos: PropTypes.bool,\n  skipHtml: PropTypes.bool,\n  includeElementIndex: PropTypes.bool,\n  transformLinkUri: PropTypes.oneOfType([PropTypes.func, PropTypes.bool]),\n  linkTarget: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  transformImageUri: PropTypes.func,\n  components: PropTypes.object\n}\n","import {visit} from 'unist-util-visit'\n\n/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('hast').Root} Root\n * @typedef {import('hast').Element} Element\n *\n * @callback AllowElement\n * @param {Element} element\n * @param {number} index\n * @param {Element|Root} parent\n * @returns {boolean|undefined}\n *\n * @typedef Options\n * @property {Array<string>} [allowedElements]\n * @property {Array<string>} [disallowedElements=[]]\n * @property {AllowElement} [allowElement]\n * @property {boolean} [unwrapDisallowed=false]\n */\n\n/**\n * @type {import('unified').Plugin<[Options], Root>}\n */\nexport default function rehypeFilter(options) {\n  if (options.allowedElements && options.disallowedElements) {\n    throw new TypeError(\n      'Only one of `allowedElements` and `disallowedElements` should be defined'\n    )\n  }\n\n  if (\n    options.allowedElements ||\n    options.disallowedElements ||\n    options.allowElement\n  ) {\n    return (tree) => {\n      visit(tree, 'element', (node, index, parent_) => {\n        const parent = /** @type {Element|Root} */ (parent_)\n        /** @type {boolean|undefined} */\n        let remove\n\n        if (options.allowedElements) {\n          remove = !options.allowedElements.includes(node.tagName)\n        } else if (options.disallowedElements) {\n          remove = options.disallowedElements.includes(node.tagName)\n        }\n\n        if (!remove && options.allowElement && typeof index === 'number') {\n          remove = !options.allowElement(node, index, parent)\n        }\n\n        if (remove && typeof index === 'number') {\n          if (options.unwrapDisallowed && node.children) {\n            parent.children.splice(index, 1, ...node.children)\n          } else {\n            parent.children.splice(index, 1)\n          }\n\n          return index\n        }\n\n        return undefined\n      })\n    }\n  }\n}\n","const protocols = ['http', 'https', 'mailto', 'tel']\n\n/**\n * @param {string} uri\n * @returns {string}\n */\nexport function uriTransformer(uri) {\n  const url = (uri || '').trim()\n  const first = url.charAt(0)\n\n  if (first === '#' || first === '/') {\n    return url\n  }\n\n  const colon = url.indexOf(':')\n  if (colon === -1) {\n    return url\n  }\n\n  let index = -1\n\n  while (++index < protocols.length) {\n    const protocol = protocols[index]\n\n    if (\n      colon === protocol.length &&\n      url.slice(0, protocol.length).toLowerCase() === protocol\n    ) {\n      return url\n    }\n  }\n\n  index = url.indexOf('?')\n  if (index !== -1 && colon > index) {\n    return url\n  }\n\n  index = url.indexOf('#')\n  if (index !== -1 && colon > index) {\n    return url\n  }\n\n  // eslint-disable-next-line no-script-url\n  return 'javascript:void(0)'\n}\n","/** @license React v17.0.2\n * react-is.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n'use strict';\n\n// ATTENTION\n// When adding new symbols to this file,\n// Please consider also adding to 'react-devtools-shared/src/backend/ReactSymbols'\n// The Symbol used to tag the ReactElement-like types. If there is no native Symbol\n// nor polyfill, then a plain number is used for performance.\nvar REACT_ELEMENT_TYPE = 0xeac7;\nvar REACT_PORTAL_TYPE = 0xeaca;\nvar REACT_FRAGMENT_TYPE = 0xeacb;\nvar REACT_STRICT_MODE_TYPE = 0xeacc;\nvar REACT_PROFILER_TYPE = 0xead2;\nvar REACT_PROVIDER_TYPE = 0xeacd;\nvar REACT_CONTEXT_TYPE = 0xeace;\nvar REACT_FORWARD_REF_TYPE = 0xead0;\nvar REACT_SUSPENSE_TYPE = 0xead1;\nvar REACT_SUSPENSE_LIST_TYPE = 0xead8;\nvar REACT_MEMO_TYPE = 0xead3;\nvar REACT_LAZY_TYPE = 0xead4;\nvar REACT_BLOCK_TYPE = 0xead9;\nvar REACT_SERVER_BLOCK_TYPE = 0xeada;\nvar REACT_FUNDAMENTAL_TYPE = 0xead5;\nvar REACT_SCOPE_TYPE = 0xead7;\nvar REACT_OPAQUE_ID_TYPE = 0xeae0;\nvar REACT_DEBUG_TRACING_MODE_TYPE = 0xeae1;\nvar REACT_OFFSCREEN_TYPE = 0xeae2;\nvar REACT_LEGACY_HIDDEN_TYPE = 0xeae3;\n\nif (typeof Symbol === 'function' && Symbol.for) {\n  var symbolFor = Symbol.for;\n  REACT_ELEMENT_TYPE = symbolFor('react.element');\n  REACT_PORTAL_TYPE = symbolFor('react.portal');\n  REACT_FRAGMENT_TYPE = symbolFor('react.fragment');\n  REACT_STRICT_MODE_TYPE = symbolFor('react.strict_mode');\n  REACT_PROFILER_TYPE = symbolFor('react.profiler');\n  REACT_PROVIDER_TYPE = symbolFor('react.provider');\n  REACT_CONTEXT_TYPE = symbolFor('react.context');\n  REACT_FORWARD_REF_TYPE = symbolFor('react.forward_ref');\n  REACT_SUSPENSE_TYPE = symbolFor('react.suspense');\n  REACT_SUSPENSE_LIST_TYPE = symbolFor('react.suspense_list');\n  REACT_MEMO_TYPE = symbolFor('react.memo');\n  REACT_LAZY_TYPE = symbolFor('react.lazy');\n  REACT_BLOCK_TYPE = symbolFor('react.block');\n  REACT_SERVER_BLOCK_TYPE = symbolFor('react.server.block');\n  REACT_FUNDAMENTAL_TYPE = symbolFor('react.fundamental');\n  REACT_SCOPE_TYPE = symbolFor('react.scope');\n  REACT_OPAQUE_ID_TYPE = symbolFor('react.opaque.id');\n  REACT_DEBUG_TRACING_MODE_TYPE = symbolFor('react.debug_trace_mode');\n  REACT_OFFSCREEN_TYPE = symbolFor('react.offscreen');\n  REACT_LEGACY_HIDDEN_TYPE = symbolFor('react.legacy_hidden');\n}\n\n// Filter certain DOM attributes (e.g. src, href) if their values are empty strings.\n\nvar enableScopeAPI = false; // Experimental Create Event Handle API.\n\nfunction isValidElementType(type) {\n  if (typeof type === 'string' || typeof type === 'function') {\n    return true;\n  } // Note: typeof might be other than 'symbol' or 'number' (e.g. if it's a polyfill).\n\n\n  if (type === REACT_FRAGMENT_TYPE || type === REACT_PROFILER_TYPE || type === REACT_DEBUG_TRACING_MODE_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || type === REACT_LEGACY_HIDDEN_TYPE || enableScopeAPI ) {\n    return true;\n  }\n\n  if (typeof type === 'object' && type !== null) {\n    if (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_BLOCK_TYPE || type[0] === REACT_SERVER_BLOCK_TYPE) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction typeOf(object) {\n  if (typeof object === 'object' && object !== null) {\n    var $$typeof = object.$$typeof;\n\n    switch ($$typeof) {\n      case REACT_ELEMENT_TYPE:\n        var type = object.type;\n\n        switch (type) {\n          case REACT_FRAGMENT_TYPE:\n          case REACT_PROFILER_TYPE:\n          case REACT_STRICT_MODE_TYPE:\n          case REACT_SUSPENSE_TYPE:\n          case REACT_SUSPENSE_LIST_TYPE:\n            return type;\n\n          default:\n            var $$typeofType = type && type.$$typeof;\n\n            switch ($$typeofType) {\n              case REACT_CONTEXT_TYPE:\n              case REACT_FORWARD_REF_TYPE:\n              case REACT_LAZY_TYPE:\n              case REACT_MEMO_TYPE:\n              case REACT_PROVIDER_TYPE:\n                return $$typeofType;\n\n              default:\n                return $$typeof;\n            }\n\n        }\n\n      case REACT_PORTAL_TYPE:\n        return $$typeof;\n    }\n  }\n\n  return undefined;\n}\nvar ContextConsumer = REACT_CONTEXT_TYPE;\nvar ContextProvider = REACT_PROVIDER_TYPE;\nvar Element = REACT_ELEMENT_TYPE;\nvar ForwardRef = REACT_FORWARD_REF_TYPE;\nvar Fragment = REACT_FRAGMENT_TYPE;\nvar Lazy = REACT_LAZY_TYPE;\nvar Memo = REACT_MEMO_TYPE;\nvar Portal = REACT_PORTAL_TYPE;\nvar Profiler = REACT_PROFILER_TYPE;\nvar StrictMode = REACT_STRICT_MODE_TYPE;\nvar Suspense = REACT_SUSPENSE_TYPE;\nvar hasWarnedAboutDeprecatedIsAsyncMode = false;\nvar hasWarnedAboutDeprecatedIsConcurrentMode = false; // AsyncMode should be deprecated\n\nfunction isAsyncMode(object) {\n  {\n    if (!hasWarnedAboutDeprecatedIsAsyncMode) {\n      hasWarnedAboutDeprecatedIsAsyncMode = true; // Using console['warn'] to evade Babel and ESLint\n\n      console['warn']('The ReactIs.isAsyncMode() alias has been deprecated, ' + 'and will be removed in React 18+.');\n    }\n  }\n\n  return false;\n}\nfunction isConcurrentMode(object) {\n  {\n    if (!hasWarnedAboutDeprecatedIsConcurrentMode) {\n      hasWarnedAboutDeprecatedIsConcurrentMode = true; // Using console['warn'] to evade Babel and ESLint\n\n      console['warn']('The ReactIs.isConcurrentMode() alias has been deprecated, ' + 'and will be removed in React 18+.');\n    }\n  }\n\n  return false;\n}\nfunction isContextConsumer(object) {\n  return typeOf(object) === REACT_CONTEXT_TYPE;\n}\nfunction isContextProvider(object) {\n  return typeOf(object) === REACT_PROVIDER_TYPE;\n}\nfunction isElement(object) {\n  return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n}\nfunction isForwardRef(object) {\n  return typeOf(object) === REACT_FORWARD_REF_TYPE;\n}\nfunction isFragment(object) {\n  return typeOf(object) === REACT_FRAGMENT_TYPE;\n}\nfunction isLazy(object) {\n  return typeOf(object) === REACT_LAZY_TYPE;\n}\nfunction isMemo(object) {\n  return typeOf(object) === REACT_MEMO_TYPE;\n}\nfunction isPortal(object) {\n  return typeOf(object) === REACT_PORTAL_TYPE;\n}\nfunction isProfiler(object) {\n  return typeOf(object) === REACT_PROFILER_TYPE;\n}\nfunction isStrictMode(object) {\n  return typeOf(object) === REACT_STRICT_MODE_TYPE;\n}\nfunction isSuspense(object) {\n  return typeOf(object) === REACT_SUSPENSE_TYPE;\n}\n\nexports.ContextConsumer = ContextConsumer;\nexports.ContextProvider = ContextProvider;\nexports.Element = Element;\nexports.ForwardRef = ForwardRef;\nexports.Fragment = Fragment;\nexports.Lazy = Lazy;\nexports.Memo = Memo;\nexports.Portal = Portal;\nexports.Profiler = Profiler;\nexports.StrictMode = StrictMode;\nexports.Suspense = Suspense;\nexports.isAsyncMode = isAsyncMode;\nexports.isConcurrentMode = isConcurrentMode;\nexports.isContextConsumer = isContextConsumer;\nexports.isContextProvider = isContextProvider;\nexports.isElement = isElement;\nexports.isForwardRef = isForwardRef;\nexports.isFragment = isFragment;\nexports.isLazy = isLazy;\nexports.isMemo = isMemo;\nexports.isPortal = isPortal;\nexports.isProfiler = isProfiler;\nexports.isStrictMode = isStrictMode;\nexports.isSuspense = isSuspense;\nexports.isValidElementType = isValidElementType;\nexports.typeOf = typeOf;\n  })();\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}\n","/**\n * @typedef {import('mdast').Root} Root\n * @typedef {import('mdast-util-from-markdown').Options} Options\n */\n\nimport {fromMarkdown} from 'mdast-util-from-markdown'\n\n/**\n * @this {import('unified').Processor}\n * @type {import('unified').Plugin<[Options?] | void[], string, Root>}\n */\nexport default function remarkParse(options) {\n  /** @type {import('unified').ParserFunction<Root>} */\n  const parser = (doc) => {\n    // Assume options.\n    const settings = /** @type {Options} */ (this.data('settings'))\n\n    return fromMarkdown(\n      doc,\n      Object.assign({}, settings, options, {\n        // Note: these options are not in the readme.\n        // The goal is for them to be set by plugins on `data` instead of being\n        // passed by users.\n        extensions: this.data('micromarkExtensions') || [],\n        mdastExtensions: this.data('fromMarkdownExtensions') || []\n      })\n    )\n  }\n\n  Object.assign(this, {Parser: parser})\n}\n","/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('hast').Root} HastRoot\n * @typedef {import('mdast').Root} MdastRoot\n * @typedef {import('mdast-util-to-hast').Options} Options\n * @typedef {import('unified').Processor<any, any, any, any>} Processor\n *\n * @typedef {import('mdast-util-to-hast')} DoNotTouchAsThisImportIncludesRawInTree\n */\n\nimport {toHast} from 'mdast-util-to-hast'\n\n// Note: the `<MdastRoot, HastRoot>` overload doesn’t seem to work :'(\n\n/**\n * Plugin to bridge or mutate to rehype.\n *\n * If a destination is given, runs the destination with the new hast tree\n * (bridge-mode).\n * Without destination, returns the hast tree: further plugins run on that tree\n * (mutate-mode).\n *\n * @param destination\n *   Optional unified processor.\n * @param options\n *   Options passed to `mdast-util-to-hast`.\n */\nconst remarkRehype =\n  /** @type {(import('unified').Plugin<[Processor, Options?]|[Options]|[], MdastRoot>)} */\n  (\n    function (destination, options) {\n      return destination && 'run' in destination\n        ? bridge(destination, options)\n        : mutate(destination)\n    }\n  )\n\nexport default remarkRehype\n\n/**\n * Bridge-mode.\n * Runs the destination with the new hast tree.\n *\n * @type {import('unified').Plugin<[Processor, Options?], MdastRoot>}\n */\nfunction bridge(destination, options) {\n  return (node, file, next) => {\n    destination.run(toHast(node, options), file, (error) => {\n      next(error)\n    })\n  }\n}\n\n/**\n * Mutate-mode.\n * Further transformers run on the nlcst tree.\n *\n * @type {import('unified').Plugin<[Options?]|void[], MdastRoot, HastRoot>}\n */\nfunction mutate(options) {\n  // @ts-expect-error: assume a corresponding node is returned for `toHast`.\n  return (node) => toHast(node, options)\n}\n","'use strict';\nmodule.exports = require('./lib/index');\n","'use strict';\n\nvar randomFromSeed = require('./random/random-from-seed');\n\nvar ORIGINAL = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-';\nvar alphabet;\nvar previousSeed;\n\nvar shuffled;\n\nfunction reset() {\n    shuffled = false;\n}\n\nfunction setCharacters(_alphabet_) {\n    if (!_alphabet_) {\n        if (alphabet !== ORIGINAL) {\n            alphabet = ORIGINAL;\n            reset();\n        }\n        return;\n    }\n\n    if (_alphabet_ === alphabet) {\n        return;\n    }\n\n    if (_alphabet_.length !== ORIGINAL.length) {\n        throw new Error('Custom alphabet for shortid must be ' + ORIGINAL.length + ' unique characters. You submitted ' + _alphabet_.length + ' characters: ' + _alphabet_);\n    }\n\n    var unique = _alphabet_.split('').filter(function(item, ind, arr){\n       return ind !== arr.lastIndexOf(item);\n    });\n\n    if (unique.length) {\n        throw new Error('Custom alphabet for shortid must be ' + ORIGINAL.length + ' unique characters. These characters were not unique: ' + unique.join(', '));\n    }\n\n    alphabet = _alphabet_;\n    reset();\n}\n\nfunction characters(_alphabet_) {\n    setCharacters(_alphabet_);\n    return alphabet;\n}\n\nfunction setSeed(seed) {\n    randomFromSeed.seed(seed);\n    if (previousSeed !== seed) {\n        reset();\n        previousSeed = seed;\n    }\n}\n\nfunction shuffle() {\n    if (!alphabet) {\n        setCharacters(ORIGINAL);\n    }\n\n    var sourceArray = alphabet.split('');\n    var targetArray = [];\n    var r = randomFromSeed.nextValue();\n    var characterIndex;\n\n    while (sourceArray.length > 0) {\n        r = randomFromSeed.nextValue();\n        characterIndex = Math.floor(r * sourceArray.length);\n        targetArray.push(sourceArray.splice(characterIndex, 1)[0]);\n    }\n    return targetArray.join('');\n}\n\nfunction getShuffled() {\n    if (shuffled) {\n        return shuffled;\n    }\n    shuffled = shuffle();\n    return shuffled;\n}\n\n/**\n * lookup shuffled letter\n * @param index\n * @returns {string}\n */\nfunction lookup(index) {\n    var alphabetShuffled = getShuffled();\n    return alphabetShuffled[index];\n}\n\nfunction get () {\n  return alphabet || ORIGINAL;\n}\n\nmodule.exports = {\n    get: get,\n    characters: characters,\n    seed: setSeed,\n    lookup: lookup,\n    shuffled: getShuffled\n};\n","'use strict';\n\nvar generate = require('./generate');\nvar alphabet = require('./alphabet');\n\n// Ignore all milliseconds before a certain time to reduce the size of the date entropy without sacrificing uniqueness.\n// This number should be updated every year or so to keep the generated id short.\n// To regenerate `new Date() - 0` and bump the version. Always bump the version!\nvar REDUCE_TIME = 1567752802062;\n\n// don't change unless we change the algos or REDUCE_TIME\n// must be an integer and less than 16\nvar version = 7;\n\n// Counter is used when shortid is called multiple times in one second.\nvar counter;\n\n// Remember the last time shortid was called in case counter is needed.\nvar previousSeconds;\n\n/**\n * Generate unique id\n * Returns string id\n */\nfunction build(clusterWorkerId) {\n    var str = '';\n\n    var seconds = Math.floor((Date.now() - REDUCE_TIME) * 0.001);\n\n    if (seconds === previousSeconds) {\n        counter++;\n    } else {\n        counter = 0;\n        previousSeconds = seconds;\n    }\n\n    str = str + generate(version);\n    str = str + generate(clusterWorkerId);\n    if (counter > 0) {\n        str = str + generate(counter);\n    }\n    str = str + generate(seconds);\n    return str;\n}\n\nmodule.exports = build;\n","'use strict';\n\nvar alphabet = require('./alphabet');\nvar random = require('./random/random-byte');\nvar customRandom = require('nanoid').customRandom;\n\nfunction generate(number) {\n    var loopCounter = 0;\n    var done;\n\n    var str = '';\n\n    while (!done) {\n        str = str + customRandom(alphabet.get(), 1, random)();\n        done = number < (Math.pow(16, loopCounter + 1 ) );\n        loopCounter++;\n    }\n    return str;\n}\n\nmodule.exports = generate;\n","'use strict';\n\nvar alphabet = require('./alphabet');\nvar build = require('./build');\nvar isValid = require('./is-valid');\n\n// if you are using cluster or multiple servers use this to make each instance\n// has a unique value for worker\n// Note: I don't know if this is automatically set when using third\n// party cluster solutions such as pm2.\nvar clusterWorkerId = require('./util/cluster-worker-id') || 0;\n\n/**\n * Set the seed.\n * Highly recommended if you don't want people to try to figure out your id schema.\n * exposed as shortid.seed(int)\n * @param seed Integer value to seed the random alphabet.  ALWAYS USE THE SAME SEED or you might get overlaps.\n */\nfunction seed(seedValue) {\n    alphabet.seed(seedValue);\n    return module.exports;\n}\n\n/**\n * Set the cluster worker or machine id\n * exposed as shortid.worker(int)\n * @param workerId worker must be positive integer.  Number less than 16 is recommended.\n * returns shortid module so it can be chained.\n */\nfunction worker(workerId) {\n    clusterWorkerId = workerId;\n    return module.exports;\n}\n\n/**\n *\n * sets new characters to use in the alphabet\n * returns the shuffled alphabet\n */\nfunction characters(newCharacters) {\n    if (newCharacters !== undefined) {\n        alphabet.characters(newCharacters);\n    }\n\n    return alphabet.shuffled();\n}\n\n/**\n * Generate unique id\n * Returns string id\n */\nfunction generate() {\n  return build(clusterWorkerId);\n}\n\n// Export all other functions as properties of the generate function\nmodule.exports = generate;\nmodule.exports.generate = generate;\nmodule.exports.seed = seed;\nmodule.exports.worker = worker;\nmodule.exports.characters = characters;\nmodule.exports.isValid = isValid;\n","'use strict';\nvar alphabet = require('./alphabet');\n\nfunction isShortId(id) {\n    if (!id || typeof id !== 'string' || id.length < 6 ) {\n        return false;\n    }\n\n    var nonAlphabetic = new RegExp('[^' +\n      alphabet.get().replace(/[|\\\\{}()[\\]^$+*?.-]/g, '\\\\$&') +\n    ']');\n    return !nonAlphabetic.test(id);\n}\n\nmodule.exports = isShortId;\n","'use strict';\n\nvar crypto = typeof window === 'object' && (window.crypto || window.msCrypto); // IE 11 uses window.msCrypto\n\nvar randomByte;\n\nif (!crypto || !crypto.getRandomValues) {\n    randomByte = function(size) {\n        var bytes = [];\n        for (var i = 0; i < size; i++) {\n            bytes.push(Math.floor(Math.random() * 256));\n        }\n        return bytes;\n    };\n} else {\n    randomByte = function(size) {\n        return crypto.getRandomValues(new Uint8Array(size));\n    };\n}\n\nmodule.exports = randomByte;\n","'use strict';\n\n// Found this seed-based random generator somewhere\n// Based on The Central Randomizer 1.3 (C) 1997 by Paul Houle (houle@msc.cornell.edu)\n\nvar seed = 1;\n\n/**\n * return a random number based on a seed\n * @param seed\n * @returns {number}\n */\nfunction getNextValue() {\n    seed = (seed * 9301 + 49297) % 233280;\n    return seed/(233280.0);\n}\n\nfunction setSeed(_seed_) {\n    seed = _seed_;\n}\n\nmodule.exports = {\n    nextValue: getNextValue,\n    seed: setSeed\n};\n","'use strict';\n\nmodule.exports = 0;\n","/**\n * Parse space-separated tokens to an array of strings.\n *\n * @param {string} value\n *   Space-separated tokens.\n * @returns {Array<string>}\n *   List of tokens.\n */\nexport function parse(value) {\n  const input = String(value || '').trim()\n  return input ? input.split(/[ \\t\\n\\r\\f]+/g) : []\n}\n\n/**\n * Serialize an array of strings as space separated-tokens.\n *\n * @param {Array<string|number>} values\n *   List of tokens.\n * @returns {string}\n *   Space-separated tokens.\n */\nexport function stringify(values) {\n  return values.join(' ').trim()\n}\n","var parse = require('inline-style-parser');\n\n/**\n * Parses inline style to object.\n *\n * @example\n * // returns { 'line-height': '42' }\n * StyleToObject('line-height: 42;');\n *\n * @param  {String}      style      - The inline style.\n * @param  {Function}    [iterator] - The iterator function.\n * @return {null|Object}\n */\nfunction StyleToObject(style, iterator) {\n  var output = null;\n  if (!style || typeof style !== 'string') {\n    return output;\n  }\n\n  var declaration;\n  var declarations = parse(style);\n  var hasIterator = typeof iterator === 'function';\n  var property;\n  var value;\n\n  for (var i = 0, len = declarations.length; i < len; i++) {\n    declaration = declarations[i];\n    property = declaration.property;\n    value = declaration.value;\n\n    if (hasIterator) {\n      iterator(property, value, declaration);\n    } else if (value) {\n      output || (output = {});\n      output[property] = value;\n    }\n  }\n\n  return output;\n}\n\nmodule.exports = StyleToObject;\n","/*!\n * Tmp\n *\n * Copyright (c) 2011-2017 KARASZI Istvan <github@spam.raszi.hu>\n *\n * MIT Licensed\n */\n\n/*\n * Module dependencies.\n */\nconst fs = require('fs');\nconst os = require('os');\nconst path = require('path');\nconst crypto = require('crypto');\nconst _c = { fs: fs.constants, os: os.constants };\n\n/*\n * The working inner variables.\n */\nconst // the random characters to choose from\n  RANDOM_CHARS = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz',\n  TEMPLATE_PATTERN = /XXXXXX/,\n  DEFAULT_TRIES = 3,\n  CREATE_FLAGS = (_c.O_CREAT || _c.fs.O_CREAT) | (_c.O_EXCL || _c.fs.O_EXCL) | (_c.O_RDWR || _c.fs.O_RDWR),\n  // constants are off on the windows platform and will not match the actual errno codes\n  IS_WIN32 = os.platform() === 'win32',\n  EBADF = _c.EBADF || _c.os.errno.EBADF,\n  ENOENT = _c.ENOENT || _c.os.errno.ENOENT,\n  DIR_MODE = 0o700 /* 448 */,\n  FILE_MODE = 0o600 /* 384 */,\n  EXIT = 'exit',\n  // this will hold the objects need to be removed on exit\n  _removeObjects = [],\n  // API change in fs.rmdirSync leads to error when passing in a second parameter, e.g. the callback\n  FN_RMDIR_SYNC = fs.rmdirSync.bind(fs);\n\nlet _gracefulCleanup = false;\n\n/**\n * Recursively remove a directory and its contents.\n *\n * @param {string} dirPath path of directory to remove\n * @param {Function} callback\n * @private\n */\nfunction rimraf(dirPath, callback) {\n  return fs.rm(dirPath, { recursive: true }, callback);\n}\n\n/**\n * Recursively remove a directory and its contents, synchronously.\n *\n * @param {string} dirPath path of directory to remove\n * @private\n */\nfunction FN_RIMRAF_SYNC(dirPath) {\n  return fs.rmSync(dirPath, { recursive: true });\n}\n\n/**\n * Gets a temporary file name.\n *\n * @param {(Options|tmpNameCallback)} options options or callback\n * @param {?tmpNameCallback} callback the callback function\n */\nfunction tmpName(options, callback) {\n  const args = _parseArguments(options, callback),\n    opts = args[0],\n    cb = args[1];\n\n  _assertAndSanitizeOptions(opts, function (err, sanitizedOptions) {\n    if (err) return cb(err);\n\n    let tries = sanitizedOptions.tries;\n    (function _getUniqueName() {\n      try {\n        const name = _generateTmpName(sanitizedOptions);\n\n        // check whether the path exists then retry if needed\n        fs.stat(name, function (err) {\n          /* istanbul ignore else */\n          if (!err) {\n            /* istanbul ignore else */\n            if (tries-- > 0) return _getUniqueName();\n\n            return cb(new Error('Could not get a unique tmp filename, max tries reached ' + name));\n          }\n\n          cb(null, name);\n        });\n      } catch (err) {\n        cb(err);\n      }\n    })();\n  });\n}\n\n/**\n * Synchronous version of tmpName.\n *\n * @param {Object} options\n * @returns {string} the generated random name\n * @throws {Error} if the options are invalid or could not generate a filename\n */\nfunction tmpNameSync(options) {\n  const args = _parseArguments(options),\n    opts = args[0];\n\n  const sanitizedOptions = _assertAndSanitizeOptionsSync(opts);\n\n  let tries = sanitizedOptions.tries;\n  do {\n    const name = _generateTmpName(sanitizedOptions);\n    try {\n      fs.statSync(name);\n    } catch (e) {\n      return name;\n    }\n  } while (tries-- > 0);\n\n  throw new Error('Could not get a unique tmp filename, max tries reached');\n}\n\n/**\n * Creates and opens a temporary file.\n *\n * @param {(Options|null|undefined|fileCallback)} options the config options or the callback function or null or undefined\n * @param {?fileCallback} callback\n */\nfunction file(options, callback) {\n  const args = _parseArguments(options, callback),\n    opts = args[0],\n    cb = args[1];\n\n  // gets a temporary filename\n  tmpName(opts, function _tmpNameCreated(err, name) {\n    /* istanbul ignore else */\n    if (err) return cb(err);\n\n    // create and open the file\n    fs.open(name, CREATE_FLAGS, opts.mode || FILE_MODE, function _fileCreated(err, fd) {\n      /* istanbu ignore else */\n      if (err) return cb(err);\n\n      if (opts.discardDescriptor) {\n        return fs.close(fd, function _discardCallback(possibleErr) {\n          // the chance of getting an error on close here is rather low and might occur in the most edgiest cases only\n          return cb(possibleErr, name, undefined, _prepareTmpFileRemoveCallback(name, -1, opts, false));\n        });\n      } else {\n        // detachDescriptor passes the descriptor whereas discardDescriptor closes it, either way, we no longer care\n        // about the descriptor\n        const discardOrDetachDescriptor = opts.discardDescriptor || opts.detachDescriptor;\n        cb(null, name, fd, _prepareTmpFileRemoveCallback(name, discardOrDetachDescriptor ? -1 : fd, opts, false));\n      }\n    });\n  });\n}\n\n/**\n * Synchronous version of file.\n *\n * @param {Options} options\n * @returns {FileSyncObject} object consists of name, fd and removeCallback\n * @throws {Error} if cannot create a file\n */\nfunction fileSync(options) {\n  const args = _parseArguments(options),\n    opts = args[0];\n\n  const discardOrDetachDescriptor = opts.discardDescriptor || opts.detachDescriptor;\n  const name = tmpNameSync(opts);\n  let fd = fs.openSync(name, CREATE_FLAGS, opts.mode || FILE_MODE);\n  /* istanbul ignore else */\n  if (opts.discardDescriptor) {\n    fs.closeSync(fd);\n    fd = undefined;\n  }\n\n  return {\n    name: name,\n    fd: fd,\n    removeCallback: _prepareTmpFileRemoveCallback(name, discardOrDetachDescriptor ? -1 : fd, opts, true)\n  };\n}\n\n/**\n * Creates a temporary directory.\n *\n * @param {(Options|dirCallback)} options the options or the callback function\n * @param {?dirCallback} callback\n */\nfunction dir(options, callback) {\n  const args = _parseArguments(options, callback),\n    opts = args[0],\n    cb = args[1];\n\n  // gets a temporary filename\n  tmpName(opts, function _tmpNameCreated(err, name) {\n    /* istanbul ignore else */\n    if (err) return cb(err);\n\n    // create the directory\n    fs.mkdir(name, opts.mode || DIR_MODE, function _dirCreated(err) {\n      /* istanbul ignore else */\n      if (err) return cb(err);\n\n      cb(null, name, _prepareTmpDirRemoveCallback(name, opts, false));\n    });\n  });\n}\n\n/**\n * Synchronous version of dir.\n *\n * @param {Options} options\n * @returns {DirSyncObject} object consists of name and removeCallback\n * @throws {Error} if it cannot create a directory\n */\nfunction dirSync(options) {\n  const args = _parseArguments(options),\n    opts = args[0];\n\n  const name = tmpNameSync(opts);\n  fs.mkdirSync(name, opts.mode || DIR_MODE);\n\n  return {\n    name: name,\n    removeCallback: _prepareTmpDirRemoveCallback(name, opts, true)\n  };\n}\n\n/**\n * Removes files asynchronously.\n *\n * @param {Object} fdPath\n * @param {Function} next\n * @private\n */\nfunction _removeFileAsync(fdPath, next) {\n  const _handler = function (err) {\n    if (err && !_isENOENT(err)) {\n      // reraise any unanticipated error\n      return next(err);\n    }\n    next();\n  };\n\n  if (0 <= fdPath[0])\n    fs.close(fdPath[0], function () {\n      fs.unlink(fdPath[1], _handler);\n    });\n  else fs.unlink(fdPath[1], _handler);\n}\n\n/**\n * Removes files synchronously.\n *\n * @param {Object} fdPath\n * @private\n */\nfunction _removeFileSync(fdPath) {\n  let rethrownException = null;\n  try {\n    if (0 <= fdPath[0]) fs.closeSync(fdPath[0]);\n  } catch (e) {\n    // reraise any unanticipated error\n    if (!_isEBADF(e) && !_isENOENT(e)) throw e;\n  } finally {\n    try {\n      fs.unlinkSync(fdPath[1]);\n    } catch (e) {\n      // reraise any unanticipated error\n      if (!_isENOENT(e)) rethrownException = e;\n    }\n  }\n  if (rethrownException !== null) {\n    throw rethrownException;\n  }\n}\n\n/**\n * Prepares the callback for removal of the temporary file.\n *\n * Returns either a sync callback or a async callback depending on whether\n * fileSync or file was called, which is expressed by the sync parameter.\n *\n * @param {string} name the path of the file\n * @param {number} fd file descriptor\n * @param {Object} opts\n * @param {boolean} sync\n * @returns {fileCallback | fileCallbackSync}\n * @private\n */\nfunction _prepareTmpFileRemoveCallback(name, fd, opts, sync) {\n  const removeCallbackSync = _prepareRemoveCallback(_removeFileSync, [fd, name], sync);\n  const removeCallback = _prepareRemoveCallback(_removeFileAsync, [fd, name], sync, removeCallbackSync);\n\n  if (!opts.keep) _removeObjects.unshift(removeCallbackSync);\n\n  return sync ? removeCallbackSync : removeCallback;\n}\n\n/**\n * Prepares the callback for removal of the temporary directory.\n *\n * Returns either a sync callback or a async callback depending on whether\n * tmpFileSync or tmpFile was called, which is expressed by the sync parameter.\n *\n * @param {string} name\n * @param {Object} opts\n * @param {boolean} sync\n * @returns {Function} the callback\n * @private\n */\nfunction _prepareTmpDirRemoveCallback(name, opts, sync) {\n  const removeFunction = opts.unsafeCleanup ? rimraf : fs.rmdir.bind(fs);\n  const removeFunctionSync = opts.unsafeCleanup ? FN_RIMRAF_SYNC : FN_RMDIR_SYNC;\n  const removeCallbackSync = _prepareRemoveCallback(removeFunctionSync, name, sync);\n  const removeCallback = _prepareRemoveCallback(removeFunction, name, sync, removeCallbackSync);\n  if (!opts.keep) _removeObjects.unshift(removeCallbackSync);\n\n  return sync ? removeCallbackSync : removeCallback;\n}\n\n/**\n * Creates a guarded function wrapping the removeFunction call.\n *\n * The cleanup callback is save to be called multiple times.\n * Subsequent invocations will be ignored.\n *\n * @param {Function} removeFunction\n * @param {string} fileOrDirName\n * @param {boolean} sync\n * @param {cleanupCallbackSync?} cleanupCallbackSync\n * @returns {cleanupCallback | cleanupCallbackSync}\n * @private\n */\nfunction _prepareRemoveCallback(removeFunction, fileOrDirName, sync, cleanupCallbackSync) {\n  let called = false;\n\n  // if sync is true, the next parameter will be ignored\n  return function _cleanupCallback(next) {\n    /* istanbul ignore else */\n    if (!called) {\n      // remove cleanupCallback from cache\n      const toRemove = cleanupCallbackSync || _cleanupCallback;\n      const index = _removeObjects.indexOf(toRemove);\n      /* istanbul ignore else */\n      if (index >= 0) _removeObjects.splice(index, 1);\n\n      called = true;\n      if (sync || removeFunction === FN_RMDIR_SYNC || removeFunction === FN_RIMRAF_SYNC) {\n        return removeFunction(fileOrDirName);\n      } else {\n        return removeFunction(fileOrDirName, next || function () {});\n      }\n    }\n  };\n}\n\n/**\n * The garbage collector.\n *\n * @private\n */\nfunction _garbageCollector() {\n  /* istanbul ignore else */\n  if (!_gracefulCleanup) return;\n\n  // the function being called removes itself from _removeObjects,\n  // loop until _removeObjects is empty\n  while (_removeObjects.length) {\n    try {\n      _removeObjects[0]();\n    } catch (e) {\n      // already removed?\n    }\n  }\n}\n\n/**\n * Random name generator based on crypto.\n * Adapted from http://blog.tompawlak.org/how-to-generate-random-values-nodejs-javascript\n *\n * @param {number} howMany\n * @returns {string} the generated random name\n * @private\n */\nfunction _randomChars(howMany) {\n  let value = [],\n    rnd = null;\n\n  // make sure that we do not fail because we ran out of entropy\n  try {\n    rnd = crypto.randomBytes(howMany);\n  } catch (e) {\n    rnd = crypto.pseudoRandomBytes(howMany);\n  }\n\n  for (let i = 0; i < howMany; i++) {\n    value.push(RANDOM_CHARS[rnd[i] % RANDOM_CHARS.length]);\n  }\n\n  return value.join('');\n}\n\n/**\n * Checks whether the `obj` parameter is defined or not.\n *\n * @param {Object} obj\n * @returns {boolean} true if the object is undefined\n * @private\n */\nfunction _isUndefined(obj) {\n  return typeof obj === 'undefined';\n}\n\n/**\n * Parses the function arguments.\n *\n * This function helps to have optional arguments.\n *\n * @param {(Options|null|undefined|Function)} options\n * @param {?Function} callback\n * @returns {Array} parsed arguments\n * @private\n */\nfunction _parseArguments(options, callback) {\n  /* istanbul ignore else */\n  if (typeof options === 'function') {\n    return [{}, options];\n  }\n\n  /* istanbul ignore else */\n  if (_isUndefined(options)) {\n    return [{}, callback];\n  }\n\n  // copy options so we do not leak the changes we make internally\n  const actualOptions = {};\n  for (const key of Object.getOwnPropertyNames(options)) {\n    actualOptions[key] = options[key];\n  }\n\n  return [actualOptions, callback];\n}\n\n/**\n * Resolve the specified path name in respect to tmpDir.\n *\n * The specified name might include relative path components, e.g. ../\n * so we need to resolve in order to be sure that is is located inside tmpDir\n *\n * @private\n */\nfunction _resolvePath(name, tmpDir, cb) {\n  const pathToResolve = path.isAbsolute(name) ? name : path.join(tmpDir, name);\n\n  fs.stat(pathToResolve, function (err) {\n    if (err) {\n      fs.realpath(path.dirname(pathToResolve), function (err, parentDir) {\n        if (err) return cb(err);\n\n        cb(null, path.join(parentDir, path.basename(pathToResolve)));\n      });\n    } else {\n      fs.realpath(pathToResolve, cb);\n    }\n  });\n}\n\n/**\n * Resolve the specified path name in respect to tmpDir.\n *\n * The specified name might include relative path components, e.g. ../\n * so we need to resolve in order to be sure that is is located inside tmpDir\n *\n * @private\n */\nfunction _resolvePathSync(name, tmpDir) {\n  const pathToResolve = path.isAbsolute(name) ? name : path.join(tmpDir, name);\n\n  try {\n    fs.statSync(pathToResolve);\n    return fs.realpathSync(pathToResolve);\n  } catch (_err) {\n    const parentDir = fs.realpathSync(path.dirname(pathToResolve));\n\n    return path.join(parentDir, path.basename(pathToResolve));\n  }\n}\n\n/**\n * Generates a new temporary name.\n *\n * @param {Object} opts\n * @returns {string} the new random name according to opts\n * @private\n */\nfunction _generateTmpName(opts) {\n  const tmpDir = opts.tmpdir;\n\n  /* istanbul ignore else */\n  if (!_isUndefined(opts.name)) {\n    return path.join(tmpDir, opts.dir, opts.name);\n  }\n\n  /* istanbul ignore else */\n  if (!_isUndefined(opts.template)) {\n    return path.join(tmpDir, opts.dir, opts.template).replace(TEMPLATE_PATTERN, _randomChars(6));\n  }\n\n  // prefix and postfix\n  const name = [\n    opts.prefix ? opts.prefix : 'tmp',\n    '-',\n    process.pid,\n    '-',\n    _randomChars(12),\n    opts.postfix ? '-' + opts.postfix : ''\n  ].join('');\n\n  return path.join(tmpDir, opts.dir, name);\n}\n\n/**\n * Asserts and sanitizes the basic options.\n *\n * @private\n */\nfunction _assertOptionsBase(options) {\n  if (!_isUndefined(options.name)) {\n    const name = options.name;\n\n    // assert that name is not absolute and does not contain a path\n    if (path.isAbsolute(name)) throw new Error(`name option must not contain an absolute path, found \"${name}\".`);\n\n    // must not fail on valid .<name> or ..<name> or similar such constructs\n    const basename = path.basename(name);\n    if (basename === '..' || basename === '.' || basename !== name)\n      throw new Error(`name option must not contain a path, found \"${name}\".`);\n  }\n\n  /* istanbul ignore else */\n  if (!_isUndefined(options.template) && !options.template.match(TEMPLATE_PATTERN)) {\n    throw new Error(`Invalid template, found \"${options.template}\".`);\n  }\n\n  /* istanbul ignore else */\n  if ((!_isUndefined(options.tries) && isNaN(options.tries)) || options.tries < 0) {\n    throw new Error(`Invalid tries, found \"${options.tries}\".`);\n  }\n\n  // if a name was specified we will try once\n  options.tries = _isUndefined(options.name) ? options.tries || DEFAULT_TRIES : 1;\n  options.keep = !!options.keep;\n  options.detachDescriptor = !!options.detachDescriptor;\n  options.discardDescriptor = !!options.discardDescriptor;\n  options.unsafeCleanup = !!options.unsafeCleanup;\n\n  // for completeness' sake only, also keep (multiple) blanks if the user, purportedly sane, requests us to\n  options.prefix = _isUndefined(options.prefix) ? '' : options.prefix;\n  options.postfix = _isUndefined(options.postfix) ? '' : options.postfix;\n}\n\n/**\n * Gets the relative directory to tmpDir.\n *\n * @private\n */\nfunction _getRelativePath(option, name, tmpDir, cb) {\n  if (_isUndefined(name)) return cb(null);\n\n  _resolvePath(name, tmpDir, function (err, resolvedPath) {\n    if (err) return cb(err);\n\n    const relativePath = path.relative(tmpDir, resolvedPath);\n\n    if (!resolvedPath.startsWith(tmpDir)) {\n      return cb(new Error(`${option} option must be relative to \"${tmpDir}\", found \"${relativePath}\".`));\n    }\n\n    cb(null, relativePath);\n  });\n}\n\n/**\n * Gets the relative path to tmpDir.\n *\n * @private\n */\nfunction _getRelativePathSync(option, name, tmpDir) {\n  if (_isUndefined(name)) return;\n\n  const resolvedPath = _resolvePathSync(name, tmpDir);\n  const relativePath = path.relative(tmpDir, resolvedPath);\n\n  if (!resolvedPath.startsWith(tmpDir)) {\n    throw new Error(`${option} option must be relative to \"${tmpDir}\", found \"${relativePath}\".`);\n  }\n\n  return relativePath;\n}\n\n/**\n * Asserts whether the specified options are valid, also sanitizes options and provides sane defaults for missing\n * options.\n *\n * @private\n */\nfunction _assertAndSanitizeOptions(options, cb) {\n  _getTmpDir(options, function (err, tmpDir) {\n    if (err) return cb(err);\n\n    options.tmpdir = tmpDir;\n\n    try {\n      _assertOptionsBase(options, tmpDir);\n    } catch (err) {\n      return cb(err);\n    }\n\n    // sanitize dir, also keep (multiple) blanks if the user, purportedly sane, requests us to\n    _getRelativePath('dir', options.dir, tmpDir, function (err, dir) {\n      if (err) return cb(err);\n\n      options.dir = _isUndefined(dir) ? '' : dir;\n\n      // sanitize further if template is relative to options.dir\n      _getRelativePath('template', options.template, tmpDir, function (err, template) {\n        if (err) return cb(err);\n\n        options.template = template;\n\n        cb(null, options);\n      });\n    });\n  });\n}\n\n/**\n * Asserts whether the specified options are valid, also sanitizes options and provides sane defaults for missing\n * options.\n *\n * @private\n */\nfunction _assertAndSanitizeOptionsSync(options) {\n  const tmpDir = (options.tmpdir = _getTmpDirSync(options));\n\n  _assertOptionsBase(options, tmpDir);\n\n  const dir = _getRelativePathSync('dir', options.dir, tmpDir);\n  options.dir = _isUndefined(dir) ? '' : dir;\n\n  options.template = _getRelativePathSync('template', options.template, tmpDir);\n\n  return options;\n}\n\n/**\n * Helper for testing against EBADF to compensate changes made to Node 7.x under Windows.\n *\n * @private\n */\nfunction _isEBADF(error) {\n  return _isExpectedError(error, -EBADF, 'EBADF');\n}\n\n/**\n * Helper for testing against ENOENT to compensate changes made to Node 7.x under Windows.\n *\n * @private\n */\nfunction _isENOENT(error) {\n  return _isExpectedError(error, -ENOENT, 'ENOENT');\n}\n\n/**\n * Helper to determine whether the expected error code matches the actual code and errno,\n * which will differ between the supported node versions.\n *\n * - Node >= 7.0:\n *   error.code {string}\n *   error.errno {number} any numerical value will be negated\n *\n * CAVEAT\n *\n * On windows, the errno for EBADF is -4083 but os.constants.errno.EBADF is different and we must assume that ENOENT\n * is no different here.\n *\n * @param {SystemError} error\n * @param {number} errno\n * @param {string} code\n * @private\n */\nfunction _isExpectedError(error, errno, code) {\n  return IS_WIN32 ? error.code === code : error.code === code && error.errno === errno;\n}\n\n/**\n * Sets the graceful cleanup.\n *\n * If graceful cleanup is set, tmp will remove all controlled temporary objects on process exit, otherwise the\n * temporary objects will remain in place, waiting to be cleaned up on system restart or otherwise scheduled temporary\n * object removals.\n */\nfunction setGracefulCleanup() {\n  _gracefulCleanup = true;\n}\n\n/**\n * Returns the currently configured tmp dir from os.tmpdir().\n *\n * @private\n */\nfunction _getTmpDir(options, cb) {\n  return fs.realpath((options && options.tmpdir) || os.tmpdir(), cb);\n}\n\n/**\n * Returns the currently configured tmp dir from os.tmpdir().\n *\n * @private\n */\nfunction _getTmpDirSync(options) {\n  return fs.realpathSync((options && options.tmpdir) || os.tmpdir());\n}\n\n// Install process exit listener\nprocess.addListener(EXIT, _garbageCollector);\n\n/**\n * Configuration options.\n *\n * @typedef {Object} Options\n * @property {?boolean} keep the temporary object (file or dir) will not be garbage collected\n * @property {?number} tries the number of tries before give up the name generation\n * @property (?int) mode the access mode, defaults are 0o700 for directories and 0o600 for files\n * @property {?string} template the \"mkstemp\" like filename template\n * @property {?string} name fixed name relative to tmpdir or the specified dir option\n * @property {?string} dir tmp directory relative to the root tmp directory in use\n * @property {?string} prefix prefix for the generated name\n * @property {?string} postfix postfix for the generated name\n * @property {?string} tmpdir the root tmp directory which overrides the os tmpdir\n * @property {?boolean} unsafeCleanup recursively removes the created temporary directory, even when it's not empty\n * @property {?boolean} detachDescriptor detaches the file descriptor, caller is responsible for closing the file, tmp will no longer try closing the file during garbage collection\n * @property {?boolean} discardDescriptor discards the file descriptor (closes file, fd is -1), tmp will no longer try closing the file during garbage collection\n */\n\n/**\n * @typedef {Object} FileSyncObject\n * @property {string} name the name of the file\n * @property {string} fd the file descriptor or -1 if the fd has been discarded\n * @property {fileCallback} removeCallback the callback function to remove the file\n */\n\n/**\n * @typedef {Object} DirSyncObject\n * @property {string} name the name of the directory\n * @property {fileCallback} removeCallback the callback function to remove the directory\n */\n\n/**\n * @callback tmpNameCallback\n * @param {?Error} err the error object if anything goes wrong\n * @param {string} name the temporary file name\n */\n\n/**\n * @callback fileCallback\n * @param {?Error} err the error object if anything goes wrong\n * @param {string} name the temporary file name\n * @param {number} fd the file descriptor or -1 if the fd had been discarded\n * @param {cleanupCallback} fn the cleanup callback function\n */\n\n/**\n * @callback fileCallbackSync\n * @param {?Error} err the error object if anything goes wrong\n * @param {string} name the temporary file name\n * @param {number} fd the file descriptor or -1 if the fd had been discarded\n * @param {cleanupCallbackSync} fn the cleanup callback function\n */\n\n/**\n * @callback dirCallback\n * @param {?Error} err the error object if anything goes wrong\n * @param {string} name the temporary file name\n * @param {cleanupCallback} fn the cleanup callback function\n */\n\n/**\n * @callback dirCallbackSync\n * @param {?Error} err the error object if anything goes wrong\n * @param {string} name the temporary file name\n * @param {cleanupCallbackSync} fn the cleanup callback function\n */\n\n/**\n * Removes the temporary created file or directory.\n *\n * @callback cleanupCallback\n * @param {simpleCallback} [next] function to call whenever the tmp object needs to be removed\n */\n\n/**\n * Removes the temporary created file or directory.\n *\n * @callback cleanupCallbackSync\n */\n\n/**\n * Callback function for function composition.\n * @see {@link https://github.com/raszi/node-tmp/issues/57|raszi/node-tmp#57}\n *\n * @callback simpleCallback\n */\n\n// exporting all the needed methods\n\n// evaluate _getTmpDir() lazily, mainly for simplifying testing but it also will\n// allow users to reconfigure the temporary directory\nObject.defineProperty(module.exports, 'tmpdir', {\n  enumerable: true,\n  configurable: false,\n  get: function () {\n    return _getTmpDirSync();\n  }\n});\n\nmodule.exports.dir = dir;\nmodule.exports.dirSync = dirSync;\n\nmodule.exports.file = file;\nmodule.exports.fileSync = fileSync;\n\nmodule.exports.tmpName = tmpName;\nmodule.exports.tmpNameSync = tmpNameSync;\n\nmodule.exports.setGracefulCleanup = setGracefulCleanup;\n","// To do: remove `void`s\n// To do: remove `null` from output of our APIs, allow it as user APIs.\n\n/**\n * @typedef {(error?: Error | null | undefined, ...output: Array<any>) => void} Callback\n *   Callback.\n *\n * @typedef {(...input: Array<any>) => any} Middleware\n *   Ware.\n *\n * @typedef Pipeline\n *   Pipeline.\n * @property {Run} run\n *   Run the pipeline.\n * @property {Use} use\n *   Add middleware.\n *\n * @typedef {(...input: Array<any>) => void} Run\n *   Call all middleware.\n *\n *   Calls `done` on completion with either an error or the output of the\n *   last middleware.\n *\n *   > 👉 **Note**: as the length of input defines whether async functions get a\n *   > `next` function,\n *   > it’s recommended to keep `input` at one value normally.\n\n *\n * @typedef {(fn: Middleware) => Pipeline} Use\n *   Add middleware.\n */\n\n/**\n * Create new middleware.\n *\n * @returns {Pipeline}\n *   Pipeline.\n */\nexport function trough() {\n  /** @type {Array<Middleware>} */\n  const fns = []\n  /** @type {Pipeline} */\n  const pipeline = {run, use}\n\n  return pipeline\n\n  /** @type {Run} */\n  function run(...values) {\n    let middlewareIndex = -1\n    /** @type {Callback} */\n    const callback = values.pop()\n\n    if (typeof callback !== 'function') {\n      throw new TypeError('Expected function as last argument, not ' + callback)\n    }\n\n    next(null, ...values)\n\n    /**\n     * Run the next `fn`, or we’re done.\n     *\n     * @param {Error | null | undefined} error\n     * @param {Array<any>} output\n     */\n    function next(error, ...output) {\n      const fn = fns[++middlewareIndex]\n      let index = -1\n\n      if (error) {\n        callback(error)\n        return\n      }\n\n      // Copy non-nullish input into values.\n      while (++index < values.length) {\n        if (output[index] === null || output[index] === undefined) {\n          output[index] = values[index]\n        }\n      }\n\n      // Save the newly created `output` for the next call.\n      values = output\n\n      // Next or done.\n      if (fn) {\n        wrap(fn, next)(...output)\n      } else {\n        callback(null, ...output)\n      }\n    }\n  }\n\n  /** @type {Use} */\n  function use(middelware) {\n    if (typeof middelware !== 'function') {\n      throw new TypeError(\n        'Expected `middelware` to be a function, not ' + middelware\n      )\n    }\n\n    fns.push(middelware)\n    return pipeline\n  }\n}\n\n/**\n * Wrap `middleware` into a uniform interface.\n *\n * You can pass all input to the resulting function.\n * `callback` is then called with the output of `middleware`.\n *\n * If `middleware` accepts more arguments than the later given in input,\n * an extra `done` function is passed to it after that input,\n * which must be called by `middleware`.\n *\n * The first value in `input` is the main input value.\n * All other input values are the rest input values.\n * The values given to `callback` are the input values,\n * merged with every non-nullish output value.\n *\n * * if `middleware` throws an error,\n *   returns a promise that is rejected,\n *   or calls the given `done` function with an error,\n *   `callback` is called with that error\n * * if `middleware` returns a value or returns a promise that is resolved,\n *   that value is the main output value\n * * if `middleware` calls `done`,\n *   all non-nullish values except for the first one (the error) overwrite the\n *   output values\n *\n * @param {Middleware} middleware\n *   Function to wrap.\n * @param {Callback} callback\n *   Callback called with the output of `middleware`.\n * @returns {Run}\n *   Wrapped middleware.\n */\nexport function wrap(middleware, callback) {\n  /** @type {boolean} */\n  let called\n\n  return wrapped\n\n  /**\n   * Call `middleware`.\n   * @this {any}\n   * @param {Array<any>} parameters\n   * @returns {void}\n   */\n  function wrapped(...parameters) {\n    const fnExpectsCallback = middleware.length > parameters.length\n    /** @type {any} */\n    let result\n\n    if (fnExpectsCallback) {\n      parameters.push(done)\n    }\n\n    try {\n      result = middleware.apply(this, parameters)\n    } catch (error) {\n      const exception = /** @type {Error} */ (error)\n\n      // Well, this is quite the pickle.\n      // `middleware` received a callback and called it synchronously, but that\n      // threw an error.\n      // The only thing left to do is to throw the thing instead.\n      if (fnExpectsCallback && called) {\n        throw exception\n      }\n\n      return done(exception)\n    }\n\n    if (!fnExpectsCallback) {\n      if (result && result.then && typeof result.then === 'function') {\n        result.then(then, done)\n      } else if (result instanceof Error) {\n        done(result)\n      } else {\n        then(result)\n      }\n    }\n  }\n\n  /**\n   * Call `callback`, only once.\n   *\n   * @type {Callback}\n   */\n  function done(error, ...output) {\n    if (!called) {\n      called = true\n      callback(error, ...output)\n    }\n  }\n\n  /**\n   * Call `done` with one value.\n   *\n   * @param {any} [value]\n   */\n  function then(value) {\n    done(null, value)\n  }\n}\n","/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('vfile').VFileCompatible} VFileCompatible\n * @typedef {import('vfile').VFileValue} VFileValue\n * @typedef {import('..').Processor} Processor\n * @typedef {import('..').Plugin} Plugin\n * @typedef {import('..').Preset} Preset\n * @typedef {import('..').Pluggable} Pluggable\n * @typedef {import('..').PluggableList} PluggableList\n * @typedef {import('..').Transformer} Transformer\n * @typedef {import('..').Parser} Parser\n * @typedef {import('..').Compiler} Compiler\n * @typedef {import('..').RunCallback} RunCallback\n * @typedef {import('..').ProcessCallback} ProcessCallback\n *\n * @typedef Context\n * @property {Node} tree\n * @property {VFile} file\n */\n\nimport {bail} from 'bail'\nimport isBuffer from 'is-buffer'\nimport extend from 'extend'\nimport isPlainObj from 'is-plain-obj'\nimport {trough} from 'trough'\nimport {VFile} from 'vfile'\n\n// Expose a frozen processor.\nexport const unified = base().freeze()\n\nconst own = {}.hasOwnProperty\n\n// Function to create the first processor.\n/**\n * @returns {Processor}\n */\nfunction base() {\n  const transformers = trough()\n  /** @type {Processor['attachers']} */\n  const attachers = []\n  /** @type {Record<string, unknown>} */\n  let namespace = {}\n  /** @type {boolean|undefined} */\n  let frozen\n  let freezeIndex = -1\n\n  // Data management.\n  // @ts-expect-error: overloads are handled.\n  processor.data = data\n  processor.Parser = undefined\n  processor.Compiler = undefined\n\n  // Lock.\n  processor.freeze = freeze\n\n  // Plugins.\n  processor.attachers = attachers\n  // @ts-expect-error: overloads are handled.\n  processor.use = use\n\n  // API.\n  processor.parse = parse\n  processor.stringify = stringify\n  // @ts-expect-error: overloads are handled.\n  processor.run = run\n  processor.runSync = runSync\n  // @ts-expect-error: overloads are handled.\n  processor.process = process\n  processor.processSync = processSync\n\n  // Expose.\n  return processor\n\n  // Create a new processor based on the processor in the current scope.\n  /** @type {Processor} */\n  function processor() {\n    const destination = base()\n    let index = -1\n\n    while (++index < attachers.length) {\n      destination.use(...attachers[index])\n    }\n\n    destination.data(extend(true, {}, namespace))\n\n    return destination\n  }\n\n  /**\n   * @param {string|Record<string, unknown>} [key]\n   * @param {unknown} [value]\n   * @returns {unknown}\n   */\n  function data(key, value) {\n    if (typeof key === 'string') {\n      // Set `key`.\n      if (arguments.length === 2) {\n        assertUnfrozen('data', frozen)\n        namespace[key] = value\n        return processor\n      }\n\n      // Get `key`.\n      return (own.call(namespace, key) && namespace[key]) || null\n    }\n\n    // Set space.\n    if (key) {\n      assertUnfrozen('data', frozen)\n      namespace = key\n      return processor\n    }\n\n    // Get space.\n    return namespace\n  }\n\n  /** @type {Processor['freeze']} */\n  function freeze() {\n    if (frozen) {\n      return processor\n    }\n\n    while (++freezeIndex < attachers.length) {\n      const [attacher, ...options] = attachers[freezeIndex]\n\n      if (options[0] === false) {\n        continue\n      }\n\n      if (options[0] === true) {\n        options[0] = undefined\n      }\n\n      /** @type {Transformer|void} */\n      const transformer = attacher.call(processor, ...options)\n\n      if (typeof transformer === 'function') {\n        transformers.use(transformer)\n      }\n    }\n\n    frozen = true\n    freezeIndex = Number.POSITIVE_INFINITY\n\n    return processor\n  }\n\n  /**\n   * @param {Pluggable|null|undefined} [value]\n   * @param {...unknown} options\n   * @returns {Processor}\n   */\n  function use(value, ...options) {\n    /** @type {Record<string, unknown>|undefined} */\n    let settings\n\n    assertUnfrozen('use', frozen)\n\n    if (value === null || value === undefined) {\n      // Empty.\n    } else if (typeof value === 'function') {\n      addPlugin(value, ...options)\n    } else if (typeof value === 'object') {\n      if (Array.isArray(value)) {\n        addList(value)\n      } else {\n        addPreset(value)\n      }\n    } else {\n      throw new TypeError('Expected usable value, not `' + value + '`')\n    }\n\n    if (settings) {\n      namespace.settings = Object.assign(namespace.settings || {}, settings)\n    }\n\n    return processor\n\n    /**\n     * @param {import('..').Pluggable<unknown[]>} value\n     * @returns {void}\n     */\n    function add(value) {\n      if (typeof value === 'function') {\n        addPlugin(value)\n      } else if (typeof value === 'object') {\n        if (Array.isArray(value)) {\n          const [plugin, ...options] = value\n          addPlugin(plugin, ...options)\n        } else {\n          addPreset(value)\n        }\n      } else {\n        throw new TypeError('Expected usable value, not `' + value + '`')\n      }\n    }\n\n    /**\n     * @param {Preset} result\n     * @returns {void}\n     */\n    function addPreset(result) {\n      addList(result.plugins)\n\n      if (result.settings) {\n        settings = Object.assign(settings || {}, result.settings)\n      }\n    }\n\n    /**\n     * @param {PluggableList|null|undefined} [plugins]\n     * @returns {void}\n     */\n    function addList(plugins) {\n      let index = -1\n\n      if (plugins === null || plugins === undefined) {\n        // Empty.\n      } else if (Array.isArray(plugins)) {\n        while (++index < plugins.length) {\n          const thing = plugins[index]\n          add(thing)\n        }\n      } else {\n        throw new TypeError('Expected a list of plugins, not `' + plugins + '`')\n      }\n    }\n\n    /**\n     * @param {Plugin} plugin\n     * @param {...unknown} [value]\n     * @returns {void}\n     */\n    function addPlugin(plugin, value) {\n      let index = -1\n      /** @type {Processor['attachers'][number]|undefined} */\n      let entry\n\n      while (++index < attachers.length) {\n        if (attachers[index][0] === plugin) {\n          entry = attachers[index]\n          break\n        }\n      }\n\n      if (entry) {\n        if (isPlainObj(entry[1]) && isPlainObj(value)) {\n          value = extend(true, entry[1], value)\n        }\n\n        entry[1] = value\n      } else {\n        // @ts-expect-error: fine.\n        attachers.push([...arguments])\n      }\n    }\n  }\n\n  /** @type {Processor['parse']} */\n  function parse(doc) {\n    processor.freeze()\n    const file = vfile(doc)\n    const Parser = processor.Parser\n    assertParser('parse', Parser)\n\n    if (newable(Parser, 'parse')) {\n      // @ts-expect-error: `newable` checks this.\n      return new Parser(String(file), file).parse()\n    }\n\n    // @ts-expect-error: `newable` checks this.\n    return Parser(String(file), file) // eslint-disable-line new-cap\n  }\n\n  /** @type {Processor['stringify']} */\n  function stringify(node, doc) {\n    processor.freeze()\n    const file = vfile(doc)\n    const Compiler = processor.Compiler\n    assertCompiler('stringify', Compiler)\n    assertNode(node)\n\n    if (newable(Compiler, 'compile')) {\n      // @ts-expect-error: `newable` checks this.\n      return new Compiler(node, file).compile()\n    }\n\n    // @ts-expect-error: `newable` checks this.\n    return Compiler(node, file) // eslint-disable-line new-cap\n  }\n\n  /**\n   * @param {Node} node\n   * @param {VFileCompatible|RunCallback} [doc]\n   * @param {RunCallback} [callback]\n   * @returns {Promise<Node>|void}\n   */\n  function run(node, doc, callback) {\n    assertNode(node)\n    processor.freeze()\n\n    if (!callback && typeof doc === 'function') {\n      callback = doc\n      doc = undefined\n    }\n\n    if (!callback) {\n      return new Promise(executor)\n    }\n\n    executor(null, callback)\n\n    /**\n     * @param {null|((node: Node) => void)} resolve\n     * @param {(error: Error) => void} reject\n     * @returns {void}\n     */\n    function executor(resolve, reject) {\n      // @ts-expect-error: `doc` can’t be a callback anymore, we checked.\n      transformers.run(node, vfile(doc), done)\n\n      /**\n       * @param {Error|null} error\n       * @param {Node} tree\n       * @param {VFile} file\n       * @returns {void}\n       */\n      function done(error, tree, file) {\n        tree = tree || node\n        if (error) {\n          reject(error)\n        } else if (resolve) {\n          resolve(tree)\n        } else {\n          // @ts-expect-error: `callback` is defined if `resolve` is not.\n          callback(null, tree, file)\n        }\n      }\n    }\n  }\n\n  /** @type {Processor['runSync']} */\n  function runSync(node, file) {\n    /** @type {Node|undefined} */\n    let result\n    /** @type {boolean|undefined} */\n    let complete\n\n    processor.run(node, file, done)\n\n    assertDone('runSync', 'run', complete)\n\n    // @ts-expect-error: we either bailed on an error or have a tree.\n    return result\n\n    /**\n     * @param {Error|null} [error]\n     * @param {Node} [tree]\n     * @returns {void}\n     */\n    function done(error, tree) {\n      bail(error)\n      result = tree\n      complete = true\n    }\n  }\n\n  /**\n   * @param {VFileCompatible} doc\n   * @param {ProcessCallback} [callback]\n   * @returns {Promise<VFile>|undefined}\n   */\n  function process(doc, callback) {\n    processor.freeze()\n    assertParser('process', processor.Parser)\n    assertCompiler('process', processor.Compiler)\n\n    if (!callback) {\n      return new Promise(executor)\n    }\n\n    executor(null, callback)\n\n    /**\n     * @param {null|((file: VFile) => void)} resolve\n     * @param {(error?: Error|null|undefined) => void} reject\n     * @returns {void}\n     */\n    function executor(resolve, reject) {\n      const file = vfile(doc)\n\n      processor.run(processor.parse(file), file, (error, tree, file) => {\n        if (error || !tree || !file) {\n          done(error)\n        } else {\n          /** @type {unknown} */\n          const result = processor.stringify(tree, file)\n\n          if (result === undefined || result === null) {\n            // Empty.\n          } else if (looksLikeAVFileValue(result)) {\n            file.value = result\n          } else {\n            file.result = result\n          }\n\n          done(error, file)\n        }\n      })\n\n      /**\n       * @param {Error|null|undefined} [error]\n       * @param {VFile|undefined} [file]\n       * @returns {void}\n       */\n      function done(error, file) {\n        if (error || !file) {\n          reject(error)\n        } else if (resolve) {\n          resolve(file)\n        } else {\n          // @ts-expect-error: `callback` is defined if `resolve` is not.\n          callback(null, file)\n        }\n      }\n    }\n  }\n\n  /** @type {Processor['processSync']} */\n  function processSync(doc) {\n    /** @type {boolean|undefined} */\n    let complete\n\n    processor.freeze()\n    assertParser('processSync', processor.Parser)\n    assertCompiler('processSync', processor.Compiler)\n\n    const file = vfile(doc)\n\n    processor.process(file, done)\n\n    assertDone('processSync', 'process', complete)\n\n    return file\n\n    /**\n     * @param {Error|null|undefined} [error]\n     * @returns {void}\n     */\n    function done(error) {\n      complete = true\n      bail(error)\n    }\n  }\n}\n\n/**\n * Check if `value` is a constructor.\n *\n * @param {unknown} value\n * @param {string} name\n * @returns {boolean}\n */\nfunction newable(value, name) {\n  return (\n    typeof value === 'function' &&\n    // Prototypes do exist.\n    // type-coverage:ignore-next-line\n    value.prototype &&\n    // A function with keys in its prototype is probably a constructor.\n    // Classes’ prototype methods are not enumerable, so we check if some value\n    // exists in the prototype.\n    // type-coverage:ignore-next-line\n    (keys(value.prototype) || name in value.prototype)\n  )\n}\n\n/**\n * Check if `value` is an object with keys.\n *\n * @param {Record<string, unknown>} value\n * @returns {boolean}\n */\nfunction keys(value) {\n  /** @type {string} */\n  let key\n\n  for (key in value) {\n    if (own.call(value, key)) {\n      return true\n    }\n  }\n\n  return false\n}\n\n/**\n * Assert a parser is available.\n *\n * @param {string} name\n * @param {unknown} value\n * @returns {asserts value is Parser}\n */\nfunction assertParser(name, value) {\n  if (typeof value !== 'function') {\n    throw new TypeError('Cannot `' + name + '` without `Parser`')\n  }\n}\n\n/**\n * Assert a compiler is available.\n *\n * @param {string} name\n * @param {unknown} value\n * @returns {asserts value is Compiler}\n */\nfunction assertCompiler(name, value) {\n  if (typeof value !== 'function') {\n    throw new TypeError('Cannot `' + name + '` without `Compiler`')\n  }\n}\n\n/**\n * Assert the processor is not frozen.\n *\n * @param {string} name\n * @param {unknown} frozen\n * @returns {asserts frozen is false}\n */\nfunction assertUnfrozen(name, frozen) {\n  if (frozen) {\n    throw new Error(\n      'Cannot call `' +\n        name +\n        '` on a frozen processor.\\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.'\n    )\n  }\n}\n\n/**\n * Assert `node` is a unist node.\n *\n * @param {unknown} node\n * @returns {asserts node is Node}\n */\nfunction assertNode(node) {\n  // `isPlainObj` unfortunately uses `any` instead of `unknown`.\n  // type-coverage:ignore-next-line\n  if (!isPlainObj(node) || typeof node.type !== 'string') {\n    throw new TypeError('Expected node, got `' + node + '`')\n    // Fine.\n  }\n}\n\n/**\n * Assert that `complete` is `true`.\n *\n * @param {string} name\n * @param {string} asyncName\n * @param {unknown} complete\n * @returns {asserts complete is true}\n */\nfunction assertDone(name, asyncName, complete) {\n  if (!complete) {\n    throw new Error(\n      '`' + name + '` finished async. Use `' + asyncName + '` instead'\n    )\n  }\n}\n\n/**\n * @param {VFileCompatible} [value]\n * @returns {VFile}\n */\nfunction vfile(value) {\n  return looksLikeAVFile(value) ? value : new VFile(value)\n}\n\n/**\n * @param {VFileCompatible} [value]\n * @returns {value is VFile}\n */\nfunction looksLikeAVFile(value) {\n  return Boolean(\n    value &&\n      typeof value === 'object' &&\n      'message' in value &&\n      'messages' in value\n  )\n}\n\n/**\n * @param {unknown} [value]\n * @returns {value is VFileValue}\n */\nfunction looksLikeAVFileValue(value) {\n  return typeof value === 'string' || isBuffer(value)\n}\n","/**\n * @typedef {import('unist').Node} Node\n */\n\n/**\n * @typedef {Array<Node> | string} ChildrenOrValue\n *   List to use as `children` or value to use as `value`.\n *\n * @typedef {Record<string, unknown>} Props\n *   Other fields to add to the node.\n */\n\n/**\n * Build a node.\n *\n * @param type\n *   Node type.\n * @param props\n *   Fields assigned to node.\n * @param value\n *   Children of node or value of `node` (cast to string).\n * @returns\n *   Built node.\n */\nexport const u =\n  /**\n   * @type {(\n   *   (<T extends string>(type: T) => {type: T}) &\n   *   (<T extends string, P extends Props>(type: T, props: P) => {type: T} & P) &\n   *   (<T extends string>(type: T, value: string) => {type: T, value: string}) &\n   *   (<T extends string, P extends Props>(type: T, props: P, value: string) => {type: T, value: string} & P) &\n   *   (<T extends string, C extends Array<Node>>(type: T, children: C) => {type: T, children: C}) &\n   *   (<T extends string, P extends Props, C extends Array<Node>>(type: T, props: P, children: C) => {type: T, children: C} & P)\n   * )}\n   */\n  (\n    /**\n     * @param {string} type\n     * @param {Props | ChildrenOrValue | null | undefined} [props]\n     * @param {ChildrenOrValue | null | undefined} [value]\n     * @returns {Node}\n     */\n    function (type, props, value) {\n      /** @type {Node} */\n      const node = {type: String(type)}\n\n      if (\n        (value === undefined || value === null) &&\n        (typeof props === 'string' || Array.isArray(props))\n      ) {\n        value = props\n      } else {\n        Object.assign(node, props)\n      }\n\n      if (Array.isArray(value)) {\n        // @ts-expect-error: create a parent.\n        node.children = value\n      } else if (value !== undefined && value !== null) {\n        // @ts-expect-error: create a literal.\n        node.value = String(value)\n      }\n\n      return node\n    }\n  )\n","/**\n * @typedef PointLike\n * @property {number | null | undefined} [line]\n * @property {number | null | undefined} [column]\n * @property {number | null | undefined} [offset]\n *\n * @typedef PositionLike\n * @property {PointLike | null | undefined} [start]\n * @property {PointLike | null | undefined} [end]\n *\n * @typedef NodeLike\n * @property {PositionLike | null | undefined} [position]\n */\n\n/**\n * Check if `node` is generated.\n *\n * @param {NodeLike | null | undefined} [node]\n *   Node to check.\n * @returns {boolean}\n *   Whether `node` is generated (does not have positional info).\n */\nexport function generated(node) {\n  return (\n    !node ||\n    !node.position ||\n    !node.position.start ||\n    !node.position.start.line ||\n    !node.position.start.column ||\n    !node.position.end ||\n    !node.position.end.line ||\n    !node.position.end.column\n  )\n}\n","/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('unist').Parent} Parent\n */\n\n/**\n * @typedef {Record<string, unknown>} Props\n * @typedef {null | undefined | string | Props | TestFunctionAnything | Array<string | Props | TestFunctionAnything>} Test\n *   Check for an arbitrary node, unaware of TypeScript inferral.\n *\n * @callback TestFunctionAnything\n *   Check if a node passes a test, unaware of TypeScript inferral.\n * @param {unknown} this\n *   The given context.\n * @param {Node} node\n *   A node.\n * @param {number | null | undefined} [index]\n *   The node’s position in its parent.\n * @param {Parent | null | undefined} [parent]\n *   The node’s parent.\n * @returns {boolean | void}\n *   Whether this node passes the test.\n */\n\n/**\n * @template {Node} Kind\n *   Node type.\n * @typedef {Kind['type'] | Partial<Kind> | TestFunctionPredicate<Kind> | Array<Kind['type'] | Partial<Kind> | TestFunctionPredicate<Kind>>} PredicateTest\n *   Check for a node that can be inferred by TypeScript.\n */\n\n/**\n * Check if a node passes a certain test.\n *\n * @template {Node} Kind\n *   Node type.\n * @callback TestFunctionPredicate\n *   Complex test function for a node that can be inferred by TypeScript.\n * @param {Node} node\n *   A node.\n * @param {number | null | undefined} [index]\n *   The node’s position in its parent.\n * @param {Parent | null | undefined} [parent]\n *   The node’s parent.\n * @returns {node is Kind}\n *   Whether this node passes the test.\n */\n\n/**\n * @callback AssertAnything\n *   Check that an arbitrary value is a node, unaware of TypeScript inferral.\n * @param {unknown} [node]\n *   Anything (typically a node).\n * @param {number | null | undefined} [index]\n *   The node’s position in its parent.\n * @param {Parent | null | undefined} [parent]\n *   The node’s parent.\n * @returns {boolean}\n *   Whether this is a node and passes a test.\n */\n\n/**\n * Check if a node is a node and passes a certain node test.\n *\n * @template {Node} Kind\n *   Node type.\n * @callback AssertPredicate\n *   Check that an arbitrary value is a specific node, aware of TypeScript.\n * @param {unknown} [node]\n *   Anything (typically a node).\n * @param {number | null | undefined} [index]\n *   The node’s position in its parent.\n * @param {Parent | null | undefined} [parent]\n *   The node’s parent.\n * @returns {node is Kind}\n *   Whether this is a node and passes a test.\n */\n\n/**\n * Check if `node` is a `Node` and whether it passes the given test.\n *\n * @param node\n *   Thing to check, typically `Node`.\n * @param test\n *   A check for a specific node.\n * @param index\n *   The node’s position in its parent.\n * @param parent\n *   The node’s parent.\n * @returns\n *   Whether `node` is a node and passes a test.\n */\nexport const is =\n  /**\n   * @type {(\n   *   (() => false) &\n   *   (<Kind extends Node = Node>(node: unknown, test: PredicateTest<Kind>, index: number, parent: Parent, context?: unknown) => node is Kind) &\n   *   (<Kind extends Node = Node>(node: unknown, test: PredicateTest<Kind>, index?: null | undefined, parent?: null | undefined, context?: unknown) => node is Kind) &\n   *   ((node: unknown, test: Test, index: number, parent: Parent, context?: unknown) => boolean) &\n   *   ((node: unknown, test?: Test, index?: null | undefined, parent?: null | undefined, context?: unknown) => boolean)\n   * )}\n   */\n  (\n    /**\n     * @param {unknown} [node]\n     * @param {Test} [test]\n     * @param {number | null | undefined} [index]\n     * @param {Parent | null | undefined} [parent]\n     * @param {unknown} [context]\n     * @returns {boolean}\n     */\n    // eslint-disable-next-line max-params\n    function is(node, test, index, parent, context) {\n      const check = convert(test)\n\n      if (\n        index !== undefined &&\n        index !== null &&\n        (typeof index !== 'number' ||\n          index < 0 ||\n          index === Number.POSITIVE_INFINITY)\n      ) {\n        throw new Error('Expected positive finite index')\n      }\n\n      if (\n        parent !== undefined &&\n        parent !== null &&\n        (!is(parent) || !parent.children)\n      ) {\n        throw new Error('Expected parent node')\n      }\n\n      if (\n        (parent === undefined || parent === null) !==\n        (index === undefined || index === null)\n      ) {\n        throw new Error('Expected both parent and index')\n      }\n\n      // @ts-expect-error Looks like a node.\n      return node && node.type && typeof node.type === 'string'\n        ? Boolean(check.call(context, node, index, parent))\n        : false\n    }\n  )\n\n/**\n * Generate an assertion from a test.\n *\n * Useful if you’re going to test many nodes, for example when creating a\n * utility where something else passes a compatible test.\n *\n * The created function is a bit faster because it expects valid input only:\n * a `node`, `index`, and `parent`.\n *\n * @param test\n *   *   when nullish, checks if `node` is a `Node`.\n *   *   when `string`, works like passing `(node) => node.type === test`.\n *   *   when `function` checks if function passed the node is true.\n *   *   when `object`, checks that all keys in test are in node, and that they have (strictly) equal values.\n *   *   when `array`, checks if any one of the subtests pass.\n * @returns\n *   An assertion.\n */\nexport const convert =\n  /**\n   * @type {(\n   *   (<Kind extends Node>(test: PredicateTest<Kind>) => AssertPredicate<Kind>) &\n   *   ((test?: Test) => AssertAnything)\n   * )}\n   */\n  (\n    /**\n     * @param {Test} [test]\n     * @returns {AssertAnything}\n     */\n    function (test) {\n      if (test === undefined || test === null) {\n        return ok\n      }\n\n      if (typeof test === 'string') {\n        return typeFactory(test)\n      }\n\n      if (typeof test === 'object') {\n        return Array.isArray(test) ? anyFactory(test) : propsFactory(test)\n      }\n\n      if (typeof test === 'function') {\n        return castFactory(test)\n      }\n\n      throw new Error('Expected function, string, or object as test')\n    }\n  )\n\n/**\n * @param {Array<string | Props | TestFunctionAnything>} tests\n * @returns {AssertAnything}\n */\nfunction anyFactory(tests) {\n  /** @type {Array<AssertAnything>} */\n  const checks = []\n  let index = -1\n\n  while (++index < tests.length) {\n    checks[index] = convert(tests[index])\n  }\n\n  return castFactory(any)\n\n  /**\n   * @this {unknown}\n   * @param {Array<unknown>} parameters\n   * @returns {boolean}\n   */\n  function any(...parameters) {\n    let index = -1\n\n    while (++index < checks.length) {\n      if (checks[index].call(this, ...parameters)) return true\n    }\n\n    return false\n  }\n}\n\n/**\n * Turn an object into a test for a node with a certain fields.\n *\n * @param {Props} check\n * @returns {AssertAnything}\n */\nfunction propsFactory(check) {\n  return castFactory(all)\n\n  /**\n   * @param {Node} node\n   * @returns {boolean}\n   */\n  function all(node) {\n    /** @type {string} */\n    let key\n\n    for (key in check) {\n      // @ts-expect-error: hush, it sure works as an index.\n      if (node[key] !== check[key]) return false\n    }\n\n    return true\n  }\n}\n\n/**\n * Turn a string into a test for a node with a certain type.\n *\n * @param {string} check\n * @returns {AssertAnything}\n */\nfunction typeFactory(check) {\n  return castFactory(type)\n\n  /**\n   * @param {Node} node\n   */\n  function type(node) {\n    return node && node.type === check\n  }\n}\n\n/**\n * Turn a custom test into a test for a node that passes that test.\n *\n * @param {TestFunctionAnything} check\n * @returns {AssertAnything}\n */\nfunction castFactory(check) {\n  return assertion\n\n  /**\n   * @this {unknown}\n   * @param {unknown} node\n   * @param {Array<unknown>} parameters\n   * @returns {boolean}\n   */\n  function assertion(node, ...parameters) {\n    return Boolean(\n      node &&\n        typeof node === 'object' &&\n        'type' in node &&\n        // @ts-expect-error: fine.\n        Boolean(check.call(this, node, ...parameters))\n    )\n  }\n}\n\nfunction ok() {\n  return true\n}\n","/**\n * @typedef {import('unist').Position} Position\n * @typedef {import('unist').Node} Node\n * @typedef {import('unist').Point} Point\n */\n\n/**\n * @typedef NodeLike\n * @property {string} type\n * @property {PositionLike | null | undefined} [position]\n *\n * @typedef PositionLike\n * @property {PointLike | null | undefined} [start]\n * @property {PointLike | null | undefined} [end]\n *\n * @typedef PointLike\n * @property {number | null | undefined} [line]\n * @property {number | null | undefined} [column]\n * @property {number | null | undefined} [offset]\n */\n\n/**\n * Get the starting point of `node`.\n *\n * @param node\n *   Node.\n * @returns\n *   Point.\n */\nexport const pointStart = point('start')\n\n/**\n * Get the ending point of `node`.\n *\n * @param node\n *   Node.\n * @returns\n *   Point.\n */\nexport const pointEnd = point('end')\n\n/**\n * Get the positional info of `node`.\n *\n * @param {NodeLike | Node | null | undefined} [node]\n *   Node.\n * @returns {Position}\n *   Position.\n */\nexport function position(node) {\n  return {start: pointStart(node), end: pointEnd(node)}\n}\n\n/**\n * Get the positional info of `node`.\n *\n * @param {'start' | 'end'} type\n *   Side.\n * @returns\n *   Getter.\n */\nfunction point(type) {\n  return point\n\n  /**\n   * Get the point info of `node` at a bound side.\n   *\n   * @param {NodeLike | Node | null | undefined} [node]\n   * @returns {Point}\n   */\n  function point(node) {\n    const point = (node && node.position && node.position[type]) || {}\n\n    // To do: next major: don’t return points when invalid.\n    return {\n      // @ts-expect-error: in practice, null is allowed.\n      line: point.line || null,\n      // @ts-expect-error: in practice, null is allowed.\n      column: point.column || null,\n      // @ts-expect-error: in practice, null is allowed.\n      offset: point.offset > -1 ? point.offset : null\n    }\n  }\n}\n","/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('unist').Point} Point\n * @typedef {import('unist').Position} Position\n */\n\n/**\n * @typedef NodeLike\n * @property {string} type\n * @property {PositionLike | null | undefined} [position]\n *\n * @typedef PositionLike\n * @property {PointLike | null | undefined} [start]\n * @property {PointLike | null | undefined} [end]\n *\n * @typedef PointLike\n * @property {number | null | undefined} [line]\n * @property {number | null | undefined} [column]\n * @property {number | null | undefined} [offset]\n */\n\n/**\n * Serialize the positional info of a point, position (start and end points),\n * or node.\n *\n * @param {Node | NodeLike | Position | PositionLike | Point | PointLike | null | undefined} [value]\n *   Node, position, or point.\n * @returns {string}\n *   Pretty printed positional info of a node (`string`).\n *\n *   In the format of a range `ls:cs-le:ce` (when given `node` or `position`)\n *   or a point `l:c` (when given `point`), where `l` stands for line, `c` for\n *   column, `s` for `start`, and `e` for end.\n *   An empty string (`''`) is returned if the given value is neither `node`,\n *   `position`, nor `point`.\n */\nexport function stringifyPosition(value) {\n  // Nothing.\n  if (!value || typeof value !== 'object') {\n    return ''\n  }\n\n  // Node.\n  if ('position' in value || 'type' in value) {\n    return position(value.position)\n  }\n\n  // Position.\n  if ('start' in value || 'end' in value) {\n    return position(value)\n  }\n\n  // Point.\n  if ('line' in value || 'column' in value) {\n    return point(value)\n  }\n\n  // ?\n  return ''\n}\n\n/**\n * @param {Point | PointLike | null | undefined} point\n * @returns {string}\n */\nfunction point(point) {\n  return index(point && point.line) + ':' + index(point && point.column)\n}\n\n/**\n * @param {Position | PositionLike | null | undefined} pos\n * @returns {string}\n */\nfunction position(pos) {\n  return point(pos && pos.start) + '-' + point(pos && pos.end)\n}\n\n/**\n * @param {number | null | undefined} value\n * @returns {number}\n */\nfunction index(value) {\n  return value && typeof value === 'number' ? value : 1\n}\n","/**\n * @param {string} d\n * @returns {string}\n */\nexport function color(d) {\n  return d\n}\n","/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('unist').Parent} Parent\n * @typedef {import('unist-util-is').Test} Test\n */\n\n/**\n * @typedef {boolean | 'skip'} Action\n *   Union of the action types.\n *\n * @typedef {number} Index\n *   Move to the sibling at `index` next (after node itself is completely\n *   traversed).\n *\n *   Useful if mutating the tree, such as removing the node the visitor is\n *   currently on, or any of its previous siblings.\n *   Results less than 0 or greater than or equal to `children.length` stop\n *   traversing the parent.\n *\n * @typedef {[(Action | null | undefined | void)?, (Index | null | undefined)?]} ActionTuple\n *   List with one or two values, the first an action, the second an index.\n *\n * @typedef {Action | ActionTuple | Index | null | undefined | void} VisitorResult\n *   Any value that can be returned from a visitor.\n */\n\n/**\n * @template {Node} [Visited=Node]\n *   Visited node type.\n * @template {Parent} [Ancestor=Parent]\n *   Ancestor type.\n * @callback Visitor\n *   Handle a node (matching `test`, if given).\n *\n *   Visitors are free to transform `node`.\n *   They can also transform the parent of node (the last of `ancestors`).\n *\n *   Replacing `node` itself, if `SKIP` is not returned, still causes its\n *   descendants to be walked (which is a bug).\n *\n *   When adding or removing previous siblings of `node` (or next siblings, in\n *   case of reverse), the `Visitor` should return a new `Index` to specify the\n *   sibling to traverse after `node` is traversed.\n *   Adding or removing next siblings of `node` (or previous siblings, in case\n *   of reverse) is handled as expected without needing to return a new `Index`.\n *\n *   Removing the children property of an ancestor still results in them being\n *   traversed.\n * @param {Visited} node\n *   Found node.\n * @param {Array<Ancestor>} ancestors\n *   Ancestors of `node`.\n * @returns {VisitorResult}\n *   What to do next.\n *\n *   An `Index` is treated as a tuple of `[CONTINUE, Index]`.\n *   An `Action` is treated as a tuple of `[Action]`.\n *\n *   Passing a tuple back only makes sense if the `Action` is `SKIP`.\n *   When the `Action` is `EXIT`, that action can be returned.\n *   When the `Action` is `CONTINUE`, `Index` can be returned.\n */\n\n/**\n * @template {Node} [Tree=Node]\n *   Tree type.\n * @template {Test} [Check=string]\n *   Test type.\n * @typedef {Visitor<import('./complex-types.js').Matches<import('./complex-types.js').InclusiveDescendant<Tree>, Check>, Extract<import('./complex-types.js').InclusiveDescendant<Tree>, Parent>>} BuildVisitor\n *   Build a typed `Visitor` function from a tree and a test.\n *\n *   It will infer which values are passed as `node` and which as `parents`.\n */\n\nimport {convert} from 'unist-util-is'\nimport {color} from './color.js'\n\n/**\n * Continue traversing as normal.\n */\nexport const CONTINUE = true\n\n/**\n * Stop traversing immediately.\n */\nexport const EXIT = false\n\n/**\n * Do not traverse this node’s children.\n */\nexport const SKIP = 'skip'\n\n/**\n * Visit nodes, with ancestral information.\n *\n * This algorithm performs *depth-first* *tree traversal* in *preorder*\n * (**NLR**) or if `reverse` is given, in *reverse preorder* (**NRL**).\n *\n * You can choose for which nodes `visitor` is called by passing a `test`.\n * For complex tests, you should test yourself in `visitor`, as it will be\n * faster and will have improved type information.\n *\n * Walking the tree is an intensive task.\n * Make use of the return values of the visitor when possible.\n * Instead of walking a tree multiple times, walk it once, use `unist-util-is`\n * to check if a node matches, and then perform different operations.\n *\n * You can change the tree.\n * See `Visitor` for more info.\n *\n * @param tree\n *   Tree to traverse.\n * @param test\n *   `unist-util-is`-compatible test\n * @param visitor\n *   Handle each node.\n * @param reverse\n *   Traverse in reverse preorder (NRL) instead of the default preorder (NLR).\n * @returns\n *   Nothing.\n */\nexport const visitParents =\n  /**\n   * @type {(\n   *   (<Tree extends Node, Check extends Test>(tree: Tree, test: Check, visitor: BuildVisitor<Tree, Check>, reverse?: boolean | null | undefined) => void) &\n   *   (<Tree extends Node>(tree: Tree, visitor: BuildVisitor<Tree>, reverse?: boolean | null | undefined) => void)\n   * )}\n   */\n  (\n    /**\n     * @param {Node} tree\n     * @param {Test} test\n     * @param {Visitor<Node>} visitor\n     * @param {boolean | null | undefined} [reverse]\n     * @returns {void}\n     */\n    function (tree, test, visitor, reverse) {\n      if (typeof test === 'function' && typeof visitor !== 'function') {\n        reverse = visitor\n        // @ts-expect-error no visitor given, so `visitor` is test.\n        visitor = test\n        test = null\n      }\n\n      const is = convert(test)\n      const step = reverse ? -1 : 1\n\n      factory(tree, undefined, [])()\n\n      /**\n       * @param {Node} node\n       * @param {number | undefined} index\n       * @param {Array<Parent>} parents\n       */\n      function factory(node, index, parents) {\n        /** @type {Record<string, unknown>} */\n        // @ts-expect-error: hush\n        const value = node && typeof node === 'object' ? node : {}\n\n        if (typeof value.type === 'string') {\n          const name =\n            // `hast`\n            typeof value.tagName === 'string'\n              ? value.tagName\n              : // `xast`\n              typeof value.name === 'string'\n              ? value.name\n              : undefined\n\n          Object.defineProperty(visit, 'name', {\n            value:\n              'node (' + color(node.type + (name ? '<' + name + '>' : '')) + ')'\n          })\n        }\n\n        return visit\n\n        function visit() {\n          /** @type {ActionTuple} */\n          let result = []\n          /** @type {ActionTuple} */\n          let subresult\n          /** @type {number} */\n          let offset\n          /** @type {Array<Parent>} */\n          let grandparents\n\n          if (!test || is(node, index, parents[parents.length - 1] || null)) {\n            result = toResult(visitor(node, parents))\n\n            if (result[0] === EXIT) {\n              return result\n            }\n          }\n\n          // @ts-expect-error looks like a parent.\n          if (node.children && result[0] !== SKIP) {\n            // @ts-expect-error looks like a parent.\n            offset = (reverse ? node.children.length : -1) + step\n            // @ts-expect-error looks like a parent.\n            grandparents = parents.concat(node)\n\n            // @ts-expect-error looks like a parent.\n            while (offset > -1 && offset < node.children.length) {\n              // @ts-expect-error looks like a parent.\n              subresult = factory(node.children[offset], offset, grandparents)()\n\n              if (subresult[0] === EXIT) {\n                return subresult\n              }\n\n              offset =\n                typeof subresult[1] === 'number' ? subresult[1] : offset + step\n            }\n          }\n\n          return result\n        }\n      }\n    }\n  )\n\n/**\n * Turn a return value into a clean result.\n *\n * @param {VisitorResult} value\n *   Valid return values from visitors.\n * @returns {ActionTuple}\n *   Clean result.\n */\nfunction toResult(value) {\n  if (Array.isArray(value)) {\n    return value\n  }\n\n  if (typeof value === 'number') {\n    return [CONTINUE, value]\n  }\n\n  return [value]\n}\n","/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('unist').Parent} Parent\n * @typedef {import('unist-util-is').Test} Test\n * @typedef {import('unist-util-visit-parents').VisitorResult} VisitorResult\n */\n\n/**\n * Check if `Child` can be a child of `Ancestor`.\n *\n * Returns the ancestor when `Child` can be a child of `Ancestor`, or returns\n * `never`.\n *\n * @template {Node} Ancestor\n *   Node type.\n * @template {Node} Child\n *   Node type.\n * @typedef {(\n *   Ancestor extends Parent\n *     ? Child extends Ancestor['children'][number]\n *       ? Ancestor\n *       : never\n *     : never\n * )} ParentsOf\n */\n\n/**\n * @template {Node} [Visited=Node]\n *   Visited node type.\n * @template {Parent} [Ancestor=Parent]\n *   Ancestor type.\n * @callback Visitor\n *   Handle a node (matching `test`, if given).\n *\n *   Visitors are free to transform `node`.\n *   They can also transform `parent`.\n *\n *   Replacing `node` itself, if `SKIP` is not returned, still causes its\n *   descendants to be walked (which is a bug).\n *\n *   When adding or removing previous siblings of `node` (or next siblings, in\n *   case of reverse), the `Visitor` should return a new `Index` to specify the\n *   sibling to traverse after `node` is traversed.\n *   Adding or removing next siblings of `node` (or previous siblings, in case\n *   of reverse) is handled as expected without needing to return a new `Index`.\n *\n *   Removing the children property of `parent` still results in them being\n *   traversed.\n * @param {Visited} node\n *   Found node.\n * @param {Visited extends Node ? number | null : never} index\n *   Index of `node` in `parent`.\n * @param {Ancestor extends Node ? Ancestor | null : never} parent\n *   Parent of `node`.\n * @returns {VisitorResult}\n *   What to do next.\n *\n *   An `Index` is treated as a tuple of `[CONTINUE, Index]`.\n *   An `Action` is treated as a tuple of `[Action]`.\n *\n *   Passing a tuple back only makes sense if the `Action` is `SKIP`.\n *   When the `Action` is `EXIT`, that action can be returned.\n *   When the `Action` is `CONTINUE`, `Index` can be returned.\n */\n\n/**\n * Build a typed `Visitor` function from a node and all possible parents.\n *\n * It will infer which values are passed as `node` and which as `parent`.\n *\n * @template {Node} Visited\n *   Node type.\n * @template {Parent} Ancestor\n *   Parent type.\n * @typedef {Visitor<Visited, ParentsOf<Ancestor, Visited>>} BuildVisitorFromMatch\n */\n\n/**\n * Build a typed `Visitor` function from a list of descendants and a test.\n *\n * It will infer which values are passed as `node` and which as `parent`.\n *\n * @template {Node} Descendant\n *   Node type.\n * @template {Test} Check\n *   Test type.\n * @typedef {(\n *   BuildVisitorFromMatch<\n *     import('unist-util-visit-parents/complex-types.js').Matches<Descendant, Check>,\n *     Extract<Descendant, Parent>\n *   >\n * )} BuildVisitorFromDescendants\n */\n\n/**\n * Build a typed `Visitor` function from a tree and a test.\n *\n * It will infer which values are passed as `node` and which as `parent`.\n *\n * @template {Node} [Tree=Node]\n *   Node type.\n * @template {Test} [Check=string]\n *   Test type.\n * @typedef {(\n *   BuildVisitorFromDescendants<\n *     import('unist-util-visit-parents/complex-types.js').InclusiveDescendant<Tree>,\n *     Check\n *   >\n * )} BuildVisitor\n */\n\nimport {visitParents} from 'unist-util-visit-parents'\n\n/**\n * Visit nodes.\n *\n * This algorithm performs *depth-first* *tree traversal* in *preorder*\n * (**NLR**) or if `reverse` is given, in *reverse preorder* (**NRL**).\n *\n * You can choose for which nodes `visitor` is called by passing a `test`.\n * For complex tests, you should test yourself in `visitor`, as it will be\n * faster and will have improved type information.\n *\n * Walking the tree is an intensive task.\n * Make use of the return values of the visitor when possible.\n * Instead of walking a tree multiple times, walk it once, use `unist-util-is`\n * to check if a node matches, and then perform different operations.\n *\n * You can change the tree.\n * See `Visitor` for more info.\n *\n * @param tree\n *   Tree to traverse.\n * @param test\n *   `unist-util-is`-compatible test\n * @param visitor\n *   Handle each node.\n * @param reverse\n *   Traverse in reverse preorder (NRL) instead of the default preorder (NLR).\n * @returns\n *   Nothing.\n */\nexport const visit =\n  /**\n   * @type {(\n   *   (<Tree extends Node, Check extends Test>(tree: Tree, test: Check, visitor: BuildVisitor<Tree, Check>, reverse?: boolean | null | undefined) => void) &\n   *   (<Tree extends Node>(tree: Tree, visitor: BuildVisitor<Tree>, reverse?: boolean | null | undefined) => void)\n   * )}\n   */\n  (\n    /**\n     * @param {Node} tree\n     * @param {Test} test\n     * @param {Visitor} visitor\n     * @param {boolean | null | undefined} [reverse]\n     * @returns {void}\n     */\n    function (tree, test, visitor, reverse) {\n      if (typeof test === 'function' && typeof visitor !== 'function') {\n        reverse = visitor\n        visitor = test\n        test = null\n      }\n\n      visitParents(tree, test, overload, reverse)\n\n      /**\n       * @param {Node} node\n       * @param {Array<Parent>} parents\n       */\n      function overload(node, parents) {\n        const parent = parents[parents.length - 1]\n        return visitor(\n          node,\n          parent ? parent.children.indexOf(node) : null,\n          parent\n        )\n      }\n    }\n  )\n\nexport {CONTINUE, EXIT, SKIP} from 'unist-util-visit-parents'\n","import { dequal } from 'dequal';\nimport { compare, lines } from 'uvu/diff';\n\nfunction dedent(str) {\n\tstr = str.replace(/\\r?\\n/g, '\\n');\n  let arr = str.match(/^[ \\t]*(?=\\S)/gm);\n  let i = 0, min = 1/0, len = (arr||[]).length;\n  for (; i < len; i++) min = Math.min(min, arr[i].length);\n  return len && min ? str.replace(new RegExp(`^[ \\\\t]{${min}}`, 'gm'), '') : str;\n}\n\nexport class Assertion extends Error {\n\tconstructor(opts={}) {\n\t\tsuper(opts.message);\n\t\tthis.name = 'Assertion';\n\t\tthis.code = 'ERR_ASSERTION';\n\t\tif (Error.captureStackTrace) {\n\t\t\tError.captureStackTrace(this, this.constructor);\n\t\t}\n\t\tthis.details = opts.details || false;\n\t\tthis.generated = !!opts.generated;\n\t\tthis.operator = opts.operator;\n\t\tthis.expects = opts.expects;\n\t\tthis.actual = opts.actual;\n\t}\n}\n\nfunction assert(bool, actual, expects, operator, detailer, backup, msg) {\n\tif (bool) return;\n\tlet message = msg || backup;\n\tif (msg instanceof Error) throw msg;\n\tlet details = detailer && detailer(actual, expects);\n\tthrow new Assertion({ actual, expects, operator, message, details, generated: !msg });\n}\n\nexport function ok(val, msg) {\n\tassert(!!val, false, true, 'ok', false, 'Expected value to be truthy', msg);\n}\n\nexport function is(val, exp, msg) {\n\tassert(val === exp, val, exp, 'is', compare, 'Expected values to be strictly equal:', msg);\n}\n\nexport function equal(val, exp, msg) {\n\tassert(dequal(val, exp), val, exp, 'equal', compare, 'Expected values to be deeply equal:', msg);\n}\n\nexport function unreachable(msg) {\n\tassert(false, true, false, 'unreachable', false, 'Expected not to be reached!', msg);\n}\n\nexport function type(val, exp, msg) {\n\tlet tmp = typeof val;\n\tassert(tmp === exp, tmp, exp, 'type', false, `Expected \"${tmp}\" to be \"${exp}\"`, msg);\n}\n\nexport function instance(val, exp, msg) {\n\tlet name = '`' + (exp.name || exp.constructor.name) + '`';\n\tassert(val instanceof exp, val, exp, 'instance', false, `Expected value to be an instance of ${name}`, msg);\n}\n\nexport function match(val, exp, msg) {\n\tif (typeof exp === 'string') {\n\t\tassert(val.includes(exp), val, exp, 'match', false, `Expected value to include \"${exp}\" substring`, msg);\n\t} else {\n\t\tassert(exp.test(val), val, exp, 'match', false, `Expected value to match \\`${String(exp)}\\` pattern`, msg);\n\t}\n}\n\nexport function snapshot(val, exp, msg) {\n\tval=dedent(val); exp=dedent(exp);\n\tassert(val === exp, val, exp, 'snapshot', lines, 'Expected value to match snapshot:', msg);\n}\n\nconst lineNums = (x, y) => lines(x, y, 1);\nexport function fixture(val, exp, msg) {\n\tval=dedent(val); exp=dedent(exp);\n\tassert(val === exp, val, exp, 'fixture', lineNums, 'Expected value to match fixture:', msg);\n}\n\nexport function throws(blk, exp, msg) {\n\tif (!msg && typeof exp === 'string') {\n\t\tmsg = exp; exp = null;\n\t}\n\n\ttry {\n\t\tblk();\n\t\tassert(false, false, true, 'throws', false, 'Expected function to throw', msg);\n\t} catch (err) {\n\t\tif (err instanceof Assertion) throw err;\n\n\t\tif (typeof exp === 'function') {\n\t\t\tassert(exp(err), false, true, 'throws', false, 'Expected function to throw matching exception', msg);\n\t\t} else if (exp instanceof RegExp) {\n\t\t\tassert(exp.test(err.message), false, true, 'throws', false, `Expected function to throw exception matching \\`${String(exp)}\\` pattern`, msg);\n\t\t}\n\t}\n}\n\n// ---\n\nexport function not(val, msg) {\n\tassert(!val, true, false, 'not', false, 'Expected value to be falsey', msg);\n}\n\nnot.ok = not;\n\nis.not = function (val, exp, msg) {\n\tassert(val !== exp, val, exp, 'is.not', false, 'Expected values not to be strictly equal', msg);\n}\n\nnot.equal = function (val, exp, msg) {\n\tassert(!dequal(val, exp), val, exp, 'not.equal', false, 'Expected values not to be deeply equal', msg);\n}\n\nnot.type = function (val, exp, msg) {\n\tlet tmp = typeof val;\n\tassert(tmp !== exp, tmp, exp, 'not.type', false, `Expected \"${tmp}\" not to be \"${exp}\"`, msg);\n}\n\nnot.instance = function (val, exp, msg) {\n\tlet name = '`' + (exp.name || exp.constructor.name) + '`';\n\tassert(!(val instanceof exp), val, exp, 'not.instance', false, `Expected value not to be an instance of ${name}`, msg);\n}\n\nnot.snapshot = function (val, exp, msg) {\n\tval=dedent(val); exp=dedent(exp);\n\tassert(val !== exp, val, exp, 'not.snapshot', false, 'Expected value not to match snapshot', msg);\n}\n\nnot.fixture = function (val, exp, msg) {\n\tval=dedent(val); exp=dedent(exp);\n\tassert(val !== exp, val, exp, 'not.fixture', false, 'Expected value not to match fixture', msg);\n}\n\nnot.match = function (val, exp, msg) {\n\tif (typeof exp === 'string') {\n\t\tassert(!val.includes(exp), val, exp, 'not.match', false, `Expected value not to include \"${exp}\" substring`, msg);\n\t} else {\n\t\tassert(!exp.test(val), val, exp, 'not.match', false, `Expected value not to match \\`${String(exp)}\\` pattern`, msg);\n\t}\n}\n\nnot.throws = function (blk, exp, msg) {\n\tif (!msg && typeof exp === 'string') {\n\t\tmsg = exp; exp = null;\n\t}\n\n\ttry {\n\t\tblk();\n\t} catch (err) {\n\t\tif (typeof exp === 'function') {\n\t\t\tassert(!exp(err), true, false, 'not.throws', false, 'Expected function not to throw matching exception', msg);\n\t\t} else if (exp instanceof RegExp) {\n\t\t\tassert(!exp.test(err.message), true, false, 'not.throws', false, `Expected function not to throw exception matching \\`${String(exp)}\\` pattern`, msg);\n\t\t} else if (!exp) {\n\t\t\tassert(false, true, false, 'not.throws', false, 'Expected function not to throw', msg);\n\t\t}\n\t}\n}\n","import kleur from 'kleur';\nimport * as diff from 'diff';\n\nconst colors = {\n\t'--': kleur.red,\n\t'··': kleur.grey,\n\t'++': kleur.green,\n};\n\nconst TITLE = kleur.dim().italic;\nconst TAB=kleur.dim('→'), SPACE=kleur.dim('·'), NL=kleur.dim('↵');\nconst LOG = (sym, str) => colors[sym](sym + PRETTY(str)) + '\\n';\nconst LINE = (num, x) => kleur.dim('L' + String(num).padStart(x, '0') + ' ');\nconst PRETTY = str => str.replace(/[ ]/g, SPACE).replace(/\\t/g, TAB).replace(/(\\r?\\n)/g, NL);\n\nfunction line(obj, prev, pad) {\n\tlet char = obj.removed ? '--' : obj.added ? '++' : '··';\n\tlet arr = obj.value.replace(/\\r?\\n$/, '').split('\\n');\n\tlet i=0, tmp, out='';\n\n\tif (obj.added) out += colors[char]().underline(TITLE('Expected:')) + '\\n';\n\telse if (obj.removed) out += colors[char]().underline(TITLE('Actual:')) + '\\n';\n\n\tfor (; i < arr.length; i++) {\n\t\ttmp = arr[i];\n\t\tif (tmp != null) {\n\t\t\tif (prev) out += LINE(prev + i, pad);\n\t\t\tout += LOG(char, tmp || '\\n');\n\t\t}\n\t}\n\n\treturn out;\n}\n\n// TODO: want better diffing\n//~> complex items bail outright\nexport function arrays(input, expect) {\n\tlet arr = diff.diffArrays(input, expect);\n\tlet i=0, j=0, k=0, tmp, val, char, isObj, str;\n\tlet out = LOG('··', '[');\n\n\tfor (; i < arr.length; i++) {\n\t\tchar = (tmp = arr[i]).removed ? '--' : tmp.added ? '++' : '··';\n\n\t\tif (tmp.added) {\n\t\t\tout += colors[char]().underline(TITLE('Expected:')) + '\\n';\n\t\t} else if (tmp.removed) {\n\t\t\tout += colors[char]().underline(TITLE('Actual:')) + '\\n';\n\t\t}\n\n\t\tfor (j=0; j < tmp.value.length; j++) {\n\t\t\tisObj = (tmp.value[j] && typeof tmp.value[j] === 'object');\n\t\t\tval = stringify(tmp.value[j]).split(/\\r?\\n/g);\n\t\t\tfor (k=0; k < val.length;) {\n\t\t\t\tstr = '  ' + val[k++] + (isObj ? '' : ',');\n\t\t\t\tif (isObj && k === val.length && (j + 1) < tmp.value.length) str += ',';\n\t\t\t\tout += LOG(char, str);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn out + LOG('··', ']');\n}\n\nexport function lines(input, expect, linenum = 0) {\n\tlet i=0, tmp, output='';\n\tlet arr = diff.diffLines(input, expect);\n\tlet pad = String(expect.split(/\\r?\\n/g).length - linenum).length;\n\n\tfor (; i < arr.length; i++) {\n\t\toutput += line(tmp = arr[i], linenum, pad);\n\t\tif (linenum && !tmp.removed) linenum += tmp.count;\n\t}\n\n\treturn output;\n}\n\nexport function chars(input, expect) {\n\tlet arr = diff.diffChars(input, expect);\n\tlet i=0, output='', tmp;\n\n\tlet l1 = input.length;\n\tlet l2 = expect.length;\n\n\tlet p1 = PRETTY(input);\n\tlet p2 = PRETTY(expect);\n\n\ttmp = arr[i];\n\n\tif (l1 === l2) {\n\t\t// no length offsets\n\t} else if (tmp.removed && arr[i + 1]) {\n\t\tlet del = tmp.count - arr[i + 1].count;\n\t\tif (del == 0) {\n\t\t\t// wash~\n\t\t} else if (del > 0) {\n\t\t\texpect = ' '.repeat(del) + expect;\n\t\t\tp2 = ' '.repeat(del) + p2;\n\t\t\tl2 += del;\n\t\t} else if (del < 0) {\n\t\t\tinput = ' '.repeat(-del) + input;\n\t\t\tp1 = ' '.repeat(-del) + p1;\n\t\t\tl1 += -del;\n\t\t}\n\t}\n\n\toutput += direct(p1, p2, l1, l2);\n\n\tif (l1 === l2) {\n\t\tfor (tmp='  '; i < l1; i++) {\n\t\t\ttmp += input[i] === expect[i] ? ' ' : '^';\n\t\t}\n\t} else {\n\t\tfor (tmp='  '; i < arr.length; i++) {\n\t\t\ttmp += ((arr[i].added || arr[i].removed) ? '^' : ' ').repeat(Math.max(arr[i].count, 0));\n\t\t\tif (i + 1 < arr.length && ((arr[i].added && arr[i+1].removed) || (arr[i].removed && arr[i+1].added))) {\n\t\t\t\tarr[i + 1].count -= arr[i].count;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn output + kleur.red(tmp);\n}\n\nexport function direct(input, expect, lenA = String(input).length, lenB = String(expect).length) {\n\tlet gutter = 4;\n\tlet lenC = Math.max(lenA, lenB);\n\tlet typeA=typeof input, typeB=typeof expect;\n\n\tif (typeA !== typeB) {\n\t\tgutter = 2;\n\n\t\tlet delA = gutter + lenC - lenA;\n\t\tlet delB = gutter + lenC - lenB;\n\n\t\tinput += ' '.repeat(delA) + kleur.dim(`[${typeA}]`);\n\t\texpect += ' '.repeat(delB) + kleur.dim(`[${typeB}]`);\n\n\t\tlenA += delA + typeA.length + 2;\n\t\tlenB += delB + typeB.length + 2;\n\t\tlenC = Math.max(lenA, lenB);\n\t}\n\n\tlet output = colors['++']('++' + expect + ' '.repeat(gutter + lenC - lenB) + TITLE('(Expected)')) + '\\n';\n\treturn output + colors['--']('--' + input + ' '.repeat(gutter + lenC - lenA) + TITLE('(Actual)')) + '\\n';\n}\n\nexport function sort(input, expect) {\n\tvar k, i=0, tmp, isArr = Array.isArray(input);\n\tvar keys=[], out=isArr ? Array(input.length) : {};\n\n\tif (isArr) {\n\t\tfor (i=0; i < out.length; i++) {\n\t\t\ttmp = input[i];\n\t\t\tif (!tmp || typeof tmp !== 'object') out[i] = tmp;\n\t\t\telse out[i] = sort(tmp, expect[i]); // might not be right\n\t\t}\n\t} else {\n\t\tfor (k in expect)\n\t\t\tkeys.push(k);\n\n\t\tfor (; i < keys.length; i++) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(input, k = keys[i])) {\n\t\t\t\tif (!(tmp = input[k]) || typeof tmp !== 'object') out[k] = tmp;\n\t\t\t\telse out[k] = sort(tmp, expect[k]);\n\t\t\t}\n\t\t}\n\n\t\tfor (k in input) {\n\t\t\tif (!out.hasOwnProperty(k)) {\n\t\t\t\tout[k] = input[k]; // expect didnt have\n\t\t\t}\n\t\t}\n\t}\n\n\treturn out;\n}\n\nexport function circular() {\n\tvar cache = new Set;\n\treturn function print(key, val) {\n\t\tif (val === void 0) return '[__VOID__]';\n\t\tif (typeof val === 'number' && val !== val) return '[__NAN__]';\n\t\tif (typeof val === 'bigint') return val.toString();\n\t\tif (!val || typeof val !== 'object') return val;\n\t\tif (cache.has(val)) return '[Circular]';\n\t\tcache.add(val); return val;\n\t}\n}\n\nexport function stringify(input) {\n\treturn JSON.stringify(input, circular(), 2).replace(/\"\\[__NAN__\\]\"/g, 'NaN').replace(/\"\\[__VOID__\\]\"/g, 'undefined');\n}\n\nexport function compare(input, expect) {\n\tif (Array.isArray(expect) && Array.isArray(input)) return arrays(input, expect);\n\tif (expect instanceof RegExp) return chars(''+input, ''+expect);\n\n\tlet isA = input && typeof input == 'object';\n\tlet isB = expect && typeof expect == 'object';\n\n\tif (isA && isB) input = sort(input, expect);\n\tif (isB) expect = stringify(expect);\n\tif (isA) input = stringify(input);\n\n\tif (expect && typeof expect == 'object') {\n\t\tinput = stringify(sort(input, expect));\n\t\texpect = stringify(expect);\n\t}\n\n\tisA = typeof input == 'string';\n\tisB = typeof expect == 'string';\n\n\tif (isA && /\\r?\\n/.test(input)) return lines(input, ''+expect);\n\tif (isB && /\\r?\\n/.test(expect)) return lines(''+input, expect);\n\tif (isA && isB) return chars(input, expect);\n\n\treturn direct(input, expect);\n}\n","/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('unist').Position} Position\n * @typedef {import('unist').Point} Point\n * @typedef {object & {type: string, position?: Position | undefined}} NodeLike\n */\n\nimport {stringifyPosition} from 'unist-util-stringify-position'\n\n/**\n * Message.\n */\nexport class VFileMessage extends Error {\n  /**\n   * Create a message for `reason` at `place` from `origin`.\n   *\n   * When an error is passed in as `reason`, the `stack` is copied.\n   *\n   * @param {string | Error | VFileMessage} reason\n   *   Reason for message, uses the stack and message of the error if given.\n   *\n   *   > 👉 **Note**: you should use markdown.\n   * @param {Node | NodeLike | Position | Point | null | undefined} [place]\n   *   Place in file where the message occurred.\n   * @param {string | null | undefined} [origin]\n   *   Place in code where the message originates (example:\n   *   `'my-package:my-rule'` or `'my-rule'`).\n   * @returns\n   *   Instance of `VFileMessage`.\n   */\n  // To do: next major: expose `undefined` everywhere instead of `null`.\n  constructor(reason, place, origin) {\n    /** @type {[string | null, string | null]} */\n    const parts = [null, null]\n    /** @type {Position} */\n    let position = {\n      // @ts-expect-error: we always follows the structure of `position`.\n      start: {line: null, column: null},\n      // @ts-expect-error: \"\n      end: {line: null, column: null}\n    }\n\n    super()\n\n    if (typeof place === 'string') {\n      origin = place\n      place = undefined\n    }\n\n    if (typeof origin === 'string') {\n      const index = origin.indexOf(':')\n\n      if (index === -1) {\n        parts[1] = origin\n      } else {\n        parts[0] = origin.slice(0, index)\n        parts[1] = origin.slice(index + 1)\n      }\n    }\n\n    if (place) {\n      // Node.\n      if ('type' in place || 'position' in place) {\n        if (place.position) {\n          // To do: next major: deep clone.\n          // @ts-expect-error: looks like a position.\n          position = place.position\n        }\n      }\n      // Position.\n      else if ('start' in place || 'end' in place) {\n        // @ts-expect-error: looks like a position.\n        // To do: next major: deep clone.\n        position = place\n      }\n      // Point.\n      else if ('line' in place || 'column' in place) {\n        // To do: next major: deep clone.\n        position.start = place\n      }\n    }\n\n    // Fields from `Error`.\n    /**\n     * Serialized positional info of error.\n     *\n     * On normal errors, this would be something like `ParseError`, buit in\n     * `VFile` messages we use this space to show where an error happened.\n     */\n    this.name = stringifyPosition(place) || '1:1'\n\n    /**\n     * Reason for message.\n     *\n     * @type {string}\n     */\n    this.message = typeof reason === 'object' ? reason.message : reason\n\n    /**\n     * Stack of message.\n     *\n     * This is used by normal errors to show where something happened in\n     * programming code, irrelevant for `VFile` messages,\n     *\n     * @type {string}\n     */\n    this.stack = ''\n\n    if (typeof reason === 'object' && reason.stack) {\n      this.stack = reason.stack\n    }\n\n    /**\n     * Reason for message.\n     *\n     * > 👉 **Note**: you should use markdown.\n     *\n     * @type {string}\n     */\n    this.reason = this.message\n\n    /* eslint-disable no-unused-expressions */\n    /**\n     * State of problem.\n     *\n     * * `true` — marks associated file as no longer processable (error)\n     * * `false` — necessitates a (potential) change (warning)\n     * * `null | undefined` — for things that might not need changing (info)\n     *\n     * @type {boolean | null | undefined}\n     */\n    this.fatal\n\n    /**\n     * Starting line of error.\n     *\n     * @type {number | null}\n     */\n    this.line = position.start.line\n\n    /**\n     * Starting column of error.\n     *\n     * @type {number | null}\n     */\n    this.column = position.start.column\n\n    /**\n     * Full unist position.\n     *\n     * @type {Position | null}\n     */\n    this.position = position\n\n    /**\n     * Namespace of message (example: `'my-package'`).\n     *\n     * @type {string | null}\n     */\n    this.source = parts[0]\n\n    /**\n     * Category of message (example: `'my-rule'`).\n     *\n     * @type {string | null}\n     */\n    this.ruleId = parts[1]\n\n    /**\n     * Path of a file (used throughout the `VFile` ecosystem).\n     *\n     * @type {string | null}\n     */\n    this.file\n\n    // The following fields are “well known”.\n    // Not standard.\n    // Feel free to add other non-standard fields to your messages.\n\n    /**\n     * Specify the source value that’s being reported, which is deemed\n     * incorrect.\n     *\n     * @type {string | null}\n     */\n    this.actual\n\n    /**\n     * Suggest acceptable values that can be used instead of `actual`.\n     *\n     * @type {Array<string> | null}\n     */\n    this.expected\n\n    /**\n     * Link to docs for the message.\n     *\n     * > 👉 **Note**: this must be an absolute URL that can be passed as `x`\n     * > to `new URL(x)`.\n     *\n     * @type {string | null}\n     */\n    this.url\n\n    /**\n     * Long form description of the message (you should use markdown).\n     *\n     * @type {string | null}\n     */\n    this.note\n    /* eslint-enable no-unused-expressions */\n  }\n}\n\nVFileMessage.prototype.file = ''\nVFileMessage.prototype.name = ''\nVFileMessage.prototype.reason = ''\nVFileMessage.prototype.message = ''\nVFileMessage.prototype.stack = ''\nVFileMessage.prototype.fatal = null\nVFileMessage.prototype.column = null\nVFileMessage.prototype.line = null\nVFileMessage.prototype.source = null\nVFileMessage.prototype.ruleId = null\nVFileMessage.prototype.position = null\n","/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('unist').Position} Position\n * @typedef {import('unist').Point} Point\n * @typedef {import('./minurl.shared.js').URL} URL\n * @typedef {import('../index.js').Data} Data\n * @typedef {import('../index.js').Value} Value\n */\n\n/**\n * @typedef {Record<string, unknown> & {type: string, position?: Position | undefined}} NodeLike\n *\n * @typedef {'ascii' | 'utf8' | 'utf-8' | 'utf16le' | 'ucs2' | 'ucs-2' | 'base64' | 'base64url' | 'latin1' | 'binary' | 'hex'} BufferEncoding\n *   Encodings supported by the buffer class.\n *\n *   This is a copy of the types from Node, copied to prevent Node globals from\n *   being needed.\n *   Copied from: <https://github.com/DefinitelyTyped/DefinitelyTyped/blob/90a4ec8/types/node/buffer.d.ts#L170>\n *\n * @typedef {Options | URL | Value | VFile} Compatible\n *   Things that can be passed to the constructor.\n *\n * @typedef VFileCoreOptions\n *   Set multiple values.\n * @property {Value | null | undefined} [value]\n *   Set `value`.\n * @property {string | null | undefined} [cwd]\n *   Set `cwd`.\n * @property {Array<string> | null | undefined} [history]\n *   Set `history`.\n * @property {URL | string | null | undefined} [path]\n *   Set `path`.\n * @property {string | null | undefined} [basename]\n *   Set `basename`.\n * @property {string | null | undefined} [stem]\n *   Set `stem`.\n * @property {string | null | undefined} [extname]\n *   Set `extname`.\n * @property {string | null | undefined} [dirname]\n *   Set `dirname`.\n * @property {Data | null | undefined} [data]\n *   Set `data`.\n *\n * @typedef Map\n *   Raw source map.\n *\n *   See:\n *   <https://github.com/mozilla/source-map/blob/58819f0/source-map.d.ts#L15-L23>.\n * @property {number} version\n *   Which version of the source map spec this map is following.\n * @property {Array<string>} sources\n *   An array of URLs to the original source files.\n * @property {Array<string>} names\n *   An array of identifiers which can be referenced by individual mappings.\n * @property {string | undefined} [sourceRoot]\n *   The URL root from which all sources are relative.\n * @property {Array<string> | undefined} [sourcesContent]\n *   An array of contents of the original source files.\n * @property {string} mappings\n *   A string of base64 VLQs which contain the actual mappings.\n * @property {string} file\n *   The generated file this source map is associated with.\n *\n * @typedef {{[key: string]: unknown} & VFileCoreOptions} Options\n *   Configuration.\n *\n *   A bunch of keys that will be shallow copied over to the new file.\n *\n * @typedef {Record<string, unknown>} ReporterSettings\n *   Configuration for reporters.\n */\n\n/**\n * @template {ReporterSettings} Settings\n *   Options type.\n * @callback Reporter\n *   Type for a reporter.\n * @param {Array<VFile>} files\n *   Files to report.\n * @param {Settings} options\n *   Configuration.\n * @returns {string}\n *   Report.\n */\n\nimport bufferLike from 'is-buffer'\nimport {VFileMessage} from 'vfile-message'\nimport {path} from './minpath.js'\nimport {proc} from './minproc.js'\nimport {urlToPath, isUrl} from './minurl.js'\n\n/**\n * Order of setting (least specific to most), we need this because otherwise\n * `{stem: 'a', path: '~/b.js'}` would throw, as a path is needed before a\n * stem can be set.\n *\n * @type {Array<'basename' | 'dirname' | 'extname' | 'history' | 'path' | 'stem'>}\n */\nconst order = ['history', 'path', 'basename', 'stem', 'extname', 'dirname']\n\nexport class VFile {\n  /**\n   * Create a new virtual file.\n   *\n   * `options` is treated as:\n   *\n   * *   `string` or `Buffer` — `{value: options}`\n   * *   `URL` — `{path: options}`\n   * *   `VFile` — shallow copies its data over to the new file\n   * *   `object` — all fields are shallow copied over to the new file\n   *\n   * Path related fields are set in the following order (least specific to\n   * most specific): `history`, `path`, `basename`, `stem`, `extname`,\n   * `dirname`.\n   *\n   * You cannot set `dirname` or `extname` without setting either `history`,\n   * `path`, `basename`, or `stem` too.\n   *\n   * @param {Compatible | null | undefined} [value]\n   *   File value.\n   * @returns\n   *   New instance.\n   */\n  constructor(value) {\n    /** @type {Options | VFile} */\n    let options\n\n    if (!value) {\n      options = {}\n    } else if (typeof value === 'string' || buffer(value)) {\n      options = {value}\n    } else if (isUrl(value)) {\n      options = {path: value}\n    } else {\n      options = value\n    }\n\n    /**\n     * Place to store custom information (default: `{}`).\n     *\n     * It’s OK to store custom data directly on the file but moving it to\n     * `data` is recommended.\n     *\n     * @type {Data}\n     */\n    this.data = {}\n\n    /**\n     * List of messages associated with the file.\n     *\n     * @type {Array<VFileMessage>}\n     */\n    this.messages = []\n\n    /**\n     * List of filepaths the file moved between.\n     *\n     * The first is the original path and the last is the current path.\n     *\n     * @type {Array<string>}\n     */\n    this.history = []\n\n    /**\n     * Base of `path` (default: `process.cwd()` or `'/'` in browsers).\n     *\n     * @type {string}\n     */\n    this.cwd = proc.cwd()\n\n    /* eslint-disable no-unused-expressions */\n    /**\n     * Raw value.\n     *\n     * @type {Value}\n     */\n    this.value\n\n    // The below are non-standard, they are “well-known”.\n    // As in, used in several tools.\n\n    /**\n     * Whether a file was saved to disk.\n     *\n     * This is used by vfile reporters.\n     *\n     * @type {boolean}\n     */\n    this.stored\n\n    /**\n     * Custom, non-string, compiled, representation.\n     *\n     * This is used by unified to store non-string results.\n     * One example is when turning markdown into React nodes.\n     *\n     * @type {unknown}\n     */\n    this.result\n\n    /**\n     * Source map.\n     *\n     * This type is equivalent to the `RawSourceMap` type from the `source-map`\n     * module.\n     *\n     * @type {Map | null | undefined}\n     */\n    this.map\n    /* eslint-enable no-unused-expressions */\n\n    // Set path related properties in the correct order.\n    let index = -1\n\n    while (++index < order.length) {\n      const prop = order[index]\n\n      // Note: we specifically use `in` instead of `hasOwnProperty` to accept\n      // `vfile`s too.\n      if (\n        prop in options &&\n        options[prop] !== undefined &&\n        options[prop] !== null\n      ) {\n        // @ts-expect-error: TS doesn’t understand basic reality.\n        this[prop] = prop === 'history' ? [...options[prop]] : options[prop]\n      }\n    }\n\n    /** @type {string} */\n    let prop\n\n    // Set non-path related properties.\n    for (prop in options) {\n      // @ts-expect-error: fine to set other things.\n      if (!order.includes(prop)) {\n        // @ts-expect-error: fine to set other things.\n        this[prop] = options[prop]\n      }\n    }\n  }\n\n  /**\n   * Get the full path (example: `'~/index.min.js'`).\n   *\n   * @returns {string}\n   */\n  get path() {\n    return this.history[this.history.length - 1]\n  }\n\n  /**\n   * Set the full path (example: `'~/index.min.js'`).\n   *\n   * Cannot be nullified.\n   * You can set a file URL (a `URL` object with a `file:` protocol) which will\n   * be turned into a path with `url.fileURLToPath`.\n   *\n   * @param {string | URL} path\n   */\n  set path(path) {\n    if (isUrl(path)) {\n      path = urlToPath(path)\n    }\n\n    assertNonEmpty(path, 'path')\n\n    if (this.path !== path) {\n      this.history.push(path)\n    }\n  }\n\n  /**\n   * Get the parent path (example: `'~'`).\n   */\n  get dirname() {\n    return typeof this.path === 'string' ? path.dirname(this.path) : undefined\n  }\n\n  /**\n   * Set the parent path (example: `'~'`).\n   *\n   * Cannot be set if there’s no `path` yet.\n   */\n  set dirname(dirname) {\n    assertPath(this.basename, 'dirname')\n    this.path = path.join(dirname || '', this.basename)\n  }\n\n  /**\n   * Get the basename (including extname) (example: `'index.min.js'`).\n   */\n  get basename() {\n    return typeof this.path === 'string' ? path.basename(this.path) : undefined\n  }\n\n  /**\n   * Set basename (including extname) (`'index.min.js'`).\n   *\n   * Cannot contain path separators (`'/'` on unix, macOS, and browsers, `'\\'`\n   * on windows).\n   * Cannot be nullified (use `file.path = file.dirname` instead).\n   */\n  set basename(basename) {\n    assertNonEmpty(basename, 'basename')\n    assertPart(basename, 'basename')\n    this.path = path.join(this.dirname || '', basename)\n  }\n\n  /**\n   * Get the extname (including dot) (example: `'.js'`).\n   */\n  get extname() {\n    return typeof this.path === 'string' ? path.extname(this.path) : undefined\n  }\n\n  /**\n   * Set the extname (including dot) (example: `'.js'`).\n   *\n   * Cannot contain path separators (`'/'` on unix, macOS, and browsers, `'\\'`\n   * on windows).\n   * Cannot be set if there’s no `path` yet.\n   */\n  set extname(extname) {\n    assertPart(extname, 'extname')\n    assertPath(this.dirname, 'extname')\n\n    if (extname) {\n      if (extname.charCodeAt(0) !== 46 /* `.` */) {\n        throw new Error('`extname` must start with `.`')\n      }\n\n      if (extname.includes('.', 1)) {\n        throw new Error('`extname` cannot contain multiple dots')\n      }\n    }\n\n    this.path = path.join(this.dirname, this.stem + (extname || ''))\n  }\n\n  /**\n   * Get the stem (basename w/o extname) (example: `'index.min'`).\n   */\n  get stem() {\n    return typeof this.path === 'string'\n      ? path.basename(this.path, this.extname)\n      : undefined\n  }\n\n  /**\n   * Set the stem (basename w/o extname) (example: `'index.min'`).\n   *\n   * Cannot contain path separators (`'/'` on unix, macOS, and browsers, `'\\'`\n   * on windows).\n   * Cannot be nullified (use `file.path = file.dirname` instead).\n   */\n  set stem(stem) {\n    assertNonEmpty(stem, 'stem')\n    assertPart(stem, 'stem')\n    this.path = path.join(this.dirname || '', stem + (this.extname || ''))\n  }\n\n  /**\n   * Serialize the file.\n   *\n   * @param {BufferEncoding | null | undefined} [encoding='utf8']\n   *   Character encoding to understand `value` as when it’s a `Buffer`\n   *   (default: `'utf8'`).\n   * @returns {string}\n   *   Serialized file.\n   */\n  toString(encoding) {\n    return (this.value || '').toString(encoding || undefined)\n  }\n\n  /**\n   * Create a warning message associated with the file.\n   *\n   * Its `fatal` is set to `false` and `file` is set to the current file path.\n   * Its added to `file.messages`.\n   *\n   * @param {string | Error | VFileMessage} reason\n   *   Reason for message, uses the stack and message of the error if given.\n   * @param {Node | NodeLike | Position | Point | null | undefined} [place]\n   *   Place in file where the message occurred.\n   * @param {string | null | undefined} [origin]\n   *   Place in code where the message originates (example:\n   *   `'my-package:my-rule'` or `'my-rule'`).\n   * @returns {VFileMessage}\n   *   Message.\n   */\n  message(reason, place, origin) {\n    const message = new VFileMessage(reason, place, origin)\n\n    if (this.path) {\n      message.name = this.path + ':' + message.name\n      message.file = this.path\n    }\n\n    message.fatal = false\n\n    this.messages.push(message)\n\n    return message\n  }\n\n  /**\n   * Create an info message associated with the file.\n   *\n   * Its `fatal` is set to `null` and `file` is set to the current file path.\n   * Its added to `file.messages`.\n   *\n   * @param {string | Error | VFileMessage} reason\n   *   Reason for message, uses the stack and message of the error if given.\n   * @param {Node | NodeLike | Position | Point | null | undefined} [place]\n   *   Place in file where the message occurred.\n   * @param {string | null | undefined} [origin]\n   *   Place in code where the message originates (example:\n   *   `'my-package:my-rule'` or `'my-rule'`).\n   * @returns {VFileMessage}\n   *   Message.\n   */\n  info(reason, place, origin) {\n    const message = this.message(reason, place, origin)\n\n    message.fatal = null\n\n    return message\n  }\n\n  /**\n   * Create a fatal error associated with the file.\n   *\n   * Its `fatal` is set to `true` and `file` is set to the current file path.\n   * Its added to `file.messages`.\n   *\n   * > 👉 **Note**: a fatal error means that a file is no longer processable.\n   *\n   * @param {string | Error | VFileMessage} reason\n   *   Reason for message, uses the stack and message of the error if given.\n   * @param {Node | NodeLike | Position | Point | null | undefined} [place]\n   *   Place in file where the message occurred.\n   * @param {string | null | undefined} [origin]\n   *   Place in code where the message originates (example:\n   *   `'my-package:my-rule'` or `'my-rule'`).\n   * @returns {never}\n   *   Message.\n   * @throws {VFileMessage}\n   *   Message.\n   */\n  fail(reason, place, origin) {\n    const message = this.message(reason, place, origin)\n\n    message.fatal = true\n\n    throw message\n  }\n}\n\n/**\n * Assert that `part` is not a path (as in, does not contain `path.sep`).\n *\n * @param {string | null | undefined} part\n *   File path part.\n * @param {string} name\n *   Part name.\n * @returns {void}\n *   Nothing.\n */\nfunction assertPart(part, name) {\n  if (part && part.includes(path.sep)) {\n    throw new Error(\n      '`' + name + '` cannot be a path: did not expect `' + path.sep + '`'\n    )\n  }\n}\n\n/**\n * Assert that `part` is not empty.\n *\n * @param {string | undefined} part\n *   Thing.\n * @param {string} name\n *   Part name.\n * @returns {asserts part is string}\n *   Nothing.\n */\nfunction assertNonEmpty(part, name) {\n  if (!part) {\n    throw new Error('`' + name + '` cannot be empty')\n  }\n}\n\n/**\n * Assert `path` exists.\n *\n * @param {string | undefined} path\n *   Path.\n * @param {string} name\n *   Dependency name.\n * @returns {asserts path is string}\n *   Nothing.\n */\nfunction assertPath(path, name) {\n  if (!path) {\n    throw new Error('Setting `' + name + '` requires `path` to be set too')\n  }\n}\n\n/**\n * Assert `value` is a buffer.\n *\n * @param {unknown} value\n *   thing.\n * @returns {value is Buffer}\n *   Whether `value` is a Node.js buffer.\n */\nfunction buffer(value) {\n  return bufferLike(value)\n}\n","// A derivative work based on:\n// <https://github.com/browserify/path-browserify>.\n// Which is licensed:\n//\n// MIT License\n//\n// Copyright (c) 2013 James Halliday\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy of\n// this software and associated documentation files (the \"Software\"), to deal in\n// the Software without restriction, including without limitation the rights to\n// use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\n// the Software, and to permit persons to whom the Software is furnished to do so,\n// subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\n// FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n// COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n// CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n// A derivative work based on:\n//\n// Parts of that are extracted from Node’s internal `path` module:\n// <https://github.com/nodejs/node/blob/master/lib/path.js>.\n// Which is licensed:\n//\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nexport const path = {basename, dirname, extname, join, sep: '/'}\n\n/* eslint-disable max-depth, complexity */\n\n/**\n * Get the basename from a path.\n *\n * @param {string} path\n *   File path.\n * @param {string | undefined} [ext]\n *   Extension to strip.\n * @returns {string}\n *   Stem or basename.\n */\nfunction basename(path, ext) {\n  if (ext !== undefined && typeof ext !== 'string') {\n    throw new TypeError('\"ext\" argument must be a string')\n  }\n\n  assertPath(path)\n  let start = 0\n  let end = -1\n  let index = path.length\n  /** @type {boolean | undefined} */\n  let seenNonSlash\n\n  if (ext === undefined || ext.length === 0 || ext.length > path.length) {\n    while (index--) {\n      if (path.charCodeAt(index) === 47 /* `/` */) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now.\n        if (seenNonSlash) {\n          start = index + 1\n          break\n        }\n      } else if (end < 0) {\n        // We saw the first non-path separator, mark this as the end of our\n        // path component.\n        seenNonSlash = true\n        end = index + 1\n      }\n    }\n\n    return end < 0 ? '' : path.slice(start, end)\n  }\n\n  if (ext === path) {\n    return ''\n  }\n\n  let firstNonSlashEnd = -1\n  let extIndex = ext.length - 1\n\n  while (index--) {\n    if (path.charCodeAt(index) === 47 /* `/` */) {\n      // If we reached a path separator that was not part of a set of path\n      // separators at the end of the string, stop now.\n      if (seenNonSlash) {\n        start = index + 1\n        break\n      }\n    } else {\n      if (firstNonSlashEnd < 0) {\n        // We saw the first non-path separator, remember this index in case\n        // we need it if the extension ends up not matching.\n        seenNonSlash = true\n        firstNonSlashEnd = index + 1\n      }\n\n      if (extIndex > -1) {\n        // Try to match the explicit extension.\n        if (path.charCodeAt(index) === ext.charCodeAt(extIndex--)) {\n          if (extIndex < 0) {\n            // We matched the extension, so mark this as the end of our path\n            // component\n            end = index\n          }\n        } else {\n          // Extension does not match, so our result is the entire path\n          // component\n          extIndex = -1\n          end = firstNonSlashEnd\n        }\n      }\n    }\n  }\n\n  if (start === end) {\n    end = firstNonSlashEnd\n  } else if (end < 0) {\n    end = path.length\n  }\n\n  return path.slice(start, end)\n}\n\n/**\n * Get the dirname from a path.\n *\n * @param {string} path\n *   File path.\n * @returns {string}\n *   File path.\n */\nfunction dirname(path) {\n  assertPath(path)\n\n  if (path.length === 0) {\n    return '.'\n  }\n\n  let end = -1\n  let index = path.length\n  /** @type {boolean | undefined} */\n  let unmatchedSlash\n\n  // Prefix `--` is important to not run on `0`.\n  while (--index) {\n    if (path.charCodeAt(index) === 47 /* `/` */) {\n      if (unmatchedSlash) {\n        end = index\n        break\n      }\n    } else if (!unmatchedSlash) {\n      // We saw the first non-path separator\n      unmatchedSlash = true\n    }\n  }\n\n  return end < 0\n    ? path.charCodeAt(0) === 47 /* `/` */\n      ? '/'\n      : '.'\n    : end === 1 && path.charCodeAt(0) === 47 /* `/` */\n    ? '//'\n    : path.slice(0, end)\n}\n\n/**\n * Get an extname from a path.\n *\n * @param {string} path\n *   File path.\n * @returns {string}\n *   Extname.\n */\nfunction extname(path) {\n  assertPath(path)\n\n  let index = path.length\n\n  let end = -1\n  let startPart = 0\n  let startDot = -1\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find.\n  let preDotState = 0\n  /** @type {boolean | undefined} */\n  let unmatchedSlash\n\n  while (index--) {\n    const code = path.charCodeAt(index)\n\n    if (code === 47 /* `/` */) {\n      // If we reached a path separator that was not part of a set of path\n      // separators at the end of the string, stop now.\n      if (unmatchedSlash) {\n        startPart = index + 1\n        break\n      }\n\n      continue\n    }\n\n    if (end < 0) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension.\n      unmatchedSlash = true\n      end = index + 1\n    }\n\n    if (code === 46 /* `.` */) {\n      // If this is our first dot, mark it as the start of our extension.\n      if (startDot < 0) {\n        startDot = index\n      } else if (preDotState !== 1) {\n        preDotState = 1\n      }\n    } else if (startDot > -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension.\n      preDotState = -1\n    }\n  }\n\n  if (\n    startDot < 0 ||\n    end < 0 ||\n    // We saw a non-dot character immediately before the dot.\n    preDotState === 0 ||\n    // The (right-most) trimmed path component is exactly `..`.\n    (preDotState === 1 && startDot === end - 1 && startDot === startPart + 1)\n  ) {\n    return ''\n  }\n\n  return path.slice(startDot, end)\n}\n\n/**\n * Join segments from a path.\n *\n * @param {Array<string>} segments\n *   Path segments.\n * @returns {string}\n *   File path.\n */\nfunction join(...segments) {\n  let index = -1\n  /** @type {string | undefined} */\n  let joined\n\n  while (++index < segments.length) {\n    assertPath(segments[index])\n\n    if (segments[index]) {\n      joined =\n        joined === undefined ? segments[index] : joined + '/' + segments[index]\n    }\n  }\n\n  return joined === undefined ? '.' : normalize(joined)\n}\n\n/**\n * Normalize a basic file path.\n *\n * @param {string} path\n *   File path.\n * @returns {string}\n *   File path.\n */\n// Note: `normalize` is not exposed as `path.normalize`, so some code is\n// manually removed from it.\nfunction normalize(path) {\n  assertPath(path)\n\n  const absolute = path.charCodeAt(0) === 47 /* `/` */\n\n  // Normalize the path according to POSIX rules.\n  let value = normalizeString(path, !absolute)\n\n  if (value.length === 0 && !absolute) {\n    value = '.'\n  }\n\n  if (value.length > 0 && path.charCodeAt(path.length - 1) === 47 /* / */) {\n    value += '/'\n  }\n\n  return absolute ? '/' + value : value\n}\n\n/**\n * Resolve `.` and `..` elements in a path with directory names.\n *\n * @param {string} path\n *   File path.\n * @param {boolean} allowAboveRoot\n *   Whether `..` can move above root.\n * @returns {string}\n *   File path.\n */\nfunction normalizeString(path, allowAboveRoot) {\n  let result = ''\n  let lastSegmentLength = 0\n  let lastSlash = -1\n  let dots = 0\n  let index = -1\n  /** @type {number | undefined} */\n  let code\n  /** @type {number} */\n  let lastSlashIndex\n\n  while (++index <= path.length) {\n    if (index < path.length) {\n      code = path.charCodeAt(index)\n    } else if (code === 47 /* `/` */) {\n      break\n    } else {\n      code = 47 /* `/` */\n    }\n\n    if (code === 47 /* `/` */) {\n      if (lastSlash === index - 1 || dots === 1) {\n        // Empty.\n      } else if (lastSlash !== index - 1 && dots === 2) {\n        if (\n          result.length < 2 ||\n          lastSegmentLength !== 2 ||\n          result.charCodeAt(result.length - 1) !== 46 /* `.` */ ||\n          result.charCodeAt(result.length - 2) !== 46 /* `.` */\n        ) {\n          if (result.length > 2) {\n            lastSlashIndex = result.lastIndexOf('/')\n\n            if (lastSlashIndex !== result.length - 1) {\n              if (lastSlashIndex < 0) {\n                result = ''\n                lastSegmentLength = 0\n              } else {\n                result = result.slice(0, lastSlashIndex)\n                lastSegmentLength = result.length - 1 - result.lastIndexOf('/')\n              }\n\n              lastSlash = index\n              dots = 0\n              continue\n            }\n          } else if (result.length > 0) {\n            result = ''\n            lastSegmentLength = 0\n            lastSlash = index\n            dots = 0\n            continue\n          }\n        }\n\n        if (allowAboveRoot) {\n          result = result.length > 0 ? result + '/..' : '..'\n          lastSegmentLength = 2\n        }\n      } else {\n        if (result.length > 0) {\n          result += '/' + path.slice(lastSlash + 1, index)\n        } else {\n          result = path.slice(lastSlash + 1, index)\n        }\n\n        lastSegmentLength = index - lastSlash - 1\n      }\n\n      lastSlash = index\n      dots = 0\n    } else if (code === 46 /* `.` */ && dots > -1) {\n      dots++\n    } else {\n      dots = -1\n    }\n  }\n\n  return result\n}\n\n/**\n * Make sure `path` is a string.\n *\n * @param {string} path\n *   File path.\n * @returns {asserts path is string}\n *   Nothing.\n */\nfunction assertPath(path) {\n  if (typeof path !== 'string') {\n    throw new TypeError(\n      'Path must be a string. Received ' + JSON.stringify(path)\n    )\n  }\n}\n\n/* eslint-enable max-depth, complexity */\n","// Somewhat based on:\n// <https://github.com/defunctzombie/node-process/blob/master/browser.js>.\n// But I don’t think one tiny line of code can be copyrighted. 😅\nexport const proc = {cwd}\n\nfunction cwd() {\n  return '/'\n}\n","/// <reference lib=\"dom\" />\n\nimport {isUrl} from './minurl.shared.js'\n\n// See: <https://github.com/nodejs/node/blob/fcf8ba4/lib/internal/url.js>\n\n/**\n * @param {string | URL} path\n *   File URL.\n * @returns {string}\n *   File URL.\n */\nexport function urlToPath(path) {\n  if (typeof path === 'string') {\n    path = new URL(path)\n  } else if (!isUrl(path)) {\n    /** @type {NodeJS.ErrnoException} */\n    const error = new TypeError(\n      'The \"path\" argument must be of type string or an instance of URL. Received `' +\n        path +\n        '`'\n    )\n    error.code = 'ERR_INVALID_ARG_TYPE'\n    throw error\n  }\n\n  if (path.protocol !== 'file:') {\n    /** @type {NodeJS.ErrnoException} */\n    const error = new TypeError('The URL must be of scheme file')\n    error.code = 'ERR_INVALID_URL_SCHEME'\n    throw error\n  }\n\n  return getPathFromURLPosix(path)\n}\n\n/**\n * Get a path from a POSIX URL.\n *\n * @param {URL} url\n *   URL.\n * @returns {string}\n *   File path.\n */\nfunction getPathFromURLPosix(url) {\n  if (url.hostname !== '') {\n    /** @type {NodeJS.ErrnoException} */\n    const error = new TypeError(\n      'File URL host must be \"localhost\" or empty on darwin'\n    )\n    error.code = 'ERR_INVALID_FILE_URL_HOST'\n    throw error\n  }\n\n  const pathname = url.pathname\n  let index = -1\n\n  while (++index < pathname.length) {\n    if (\n      pathname.charCodeAt(index) === 37 /* `%` */ &&\n      pathname.charCodeAt(index + 1) === 50 /* `2` */\n    ) {\n      const third = pathname.charCodeAt(index + 2)\n      if (third === 70 /* `F` */ || third === 102 /* `f` */) {\n        /** @type {NodeJS.ErrnoException} */\n        const error = new TypeError(\n          'File URL path must not include encoded / characters'\n        )\n        error.code = 'ERR_INVALID_FILE_URL_PATH'\n        throw error\n      }\n    }\n  }\n\n  return decodeURIComponent(pathname)\n}\n\nexport {isUrl} from './minurl.shared.js'\n","/**\n * @typedef URL\n * @property {string} hash\n * @property {string} host\n * @property {string} hostname\n * @property {string} href\n * @property {string} origin\n * @property {string} password\n * @property {string} pathname\n * @property {string} port\n * @property {string} protocol\n * @property {string} search\n * @property {any} searchParams\n * @property {string} username\n * @property {() => string} toString\n * @property {() => string} toJSON\n */\n\n/**\n * Check if `fileUrlOrPath` looks like a URL.\n *\n * @param {unknown} fileUrlOrPath\n *   File path or URL.\n * @returns {fileUrlOrPath is URL}\n *   Whether it’s a URL.\n */\n// From: <https://github.com/nodejs/node/blob/fcf8ba4/lib/internal/url.js#L1501>\nexport function isUrl(fileUrlOrPath) {\n  return (\n    fileUrlOrPath !== null &&\n    typeof fileUrlOrPath === 'object' &&\n    // @ts-expect-error: indexable.\n    fileUrlOrPath.href &&\n    // @ts-expect-error: indexable.\n    fileUrlOrPath.origin\n  )\n}\n","import { ICollection, IRevision } from '@nexusmods/nexus-api';\nimport { createAction } from 'redux-act';\n\nexport const updateCollectionInfo = createAction(\n  'UPDATE_COLLECTION_INFO',\n  (collectionId: string, collectionInfo: Partial<ICollection>, timestamp: number) =>\n    ({ collectionId, collectionInfo, timestamp }));\n\nexport const updateRevisionInfo = createAction(\n  'UPDATE_REVISION_INFO',\n  (revisionId: string, revisionInfo: Partial<IRevision>, timestamp: number) =>\n    ({ revisionId, revisionInfo, timestamp }));\n\nexport const updateSuccessRate = createAction(\n  'UPDATE_COLLECTION_HEALTH_RATE',\n  (revisionId: string, vote: 'positive' | 'negative', average: number, total: number) =>\n    ({ revisionId, vote, average, total }));\n\nexport const setPendingVote = createAction(\n  'SET_REVISION_PENDING_VOTE',\n  (revisionId: string, collectionSlug: string, revisionNumber: number, time: number) =>\n    ({ revisionId, collectionSlug, revisionNumber, time }));\n\nexport const clearPendingVote = createAction(\n  'CLEAR_REVISION_PENDING_VOTE',\n  (revisionId: string) => ({ revisionId }));\n","import { createAction } from 'redux-act';\r\n\r\nexport const startEditCollection = createAction('START_EDIT_COLLECTION',\r\n    (modId: string) => ({ modId }));\r\n\r\nexport const startAddModsToCollection = createAction('START_ADD_MODS_TO_COLLECTION',\r\n    (collectionId: string) => ({ collectionId }));\r\n\r\nexport const healthDownvoteDialog = createAction('HEALTH_DOWNVOTE_DIALOG',\r\n    (collectionModId: string) => ({ collectionModId }));","import { createAction } from 'redux-act';\n\nexport const setSortAdded = createAction('SORT_COLLECTION_ADDED',\n    (sorting: string) => ({ sorting }));\n\nexport const setSortWorkshop = createAction('SORT_COLLECTION_WORKSHOP',\n    (sorting: string) => ({ sorting }));\n","/* eslint-disable */\r\nimport { MOD_TYPE } from './constants';\r\nimport { createCollectionFromProfile, showQuickCollectionRestrictionsDialog } from './util/transformCollection';\r\n\r\nimport * as Redux from 'redux';\r\nimport { actions, selectors, types, util } from 'vortex-api';\r\n\r\nimport { uploadCollection } from './util/util';\r\n\r\nexport async function initFromProfile(api: types.IExtensionApi, profileId?: string) {\r\n  try {\r\n    let forcedName: string;\r\n    const isQuickCollection = profileId === undefined;\r\n    if (isQuickCollection && selectors.activeProfile(api.getState()) === undefined) {\r\n      // Should never happen - quick collection button shouldn't even appear if there's no active profile\r\n      //  but lets just put this here.\r\n      throw new util.ProcessCanceled('No active profile');\r\n    }\r\n    else if (isQuickCollection) {\r\n      profileId = selectors.activeProfile(api.getState()).id;\r\n      await showQuickCollectionRestrictionsDialog(api);\r\n      forcedName = `My mods: ${new Date().toLocaleDateString('en-GB', {\r\n        day: '2-digit',\r\n        month: 'short',\r\n        year: '2-digit',\r\n        hour: '2-digit',\r\n        minute: '2-digit',\r\n        second: '2-digit',\r\n      })}`;\r\n    }\r\n\r\n    const { id, name, updated, wantsToUpload } = await createCollectionFromProfile(api, profileId, forcedName);\r\n    if (isQuickCollection) {\r\n      const state = api.getState();\r\n      const activeGameId = selectors.activeGameId(state);\r\n      const mods: { [modId: string]: types.IMod } = util.getSafe(state, ['persistent', 'mods', activeGameId], {});\r\n      const hasRules = (mods[id]?.rules ?? []).length > 0;\r\n      if (!hasRules) {\r\n        await api.showDialog('error', 'Collection is empty', {\r\n          text: 'The generated quick collection is empty. Please ensure the Nexus Mods sourced mods you want to include are '\r\n              + 'enabled and deployed.',\r\n        }, [\r\n          { label: 'Close' },\r\n        ]);\r\n        return;\r\n      }\r\n    }\r\n    \r\n    api.store.dispatch(actions.setModEnabled(profileId, id, true));\r\n    if (wantsToUpload) {\r\n      await uploadCollection(api, profileId, id);\r\n    }\r\n    api.sendNotification({\r\n      type: 'success',\r\n      id: 'collection-created',\r\n      title: updated ? 'Collection updated' : 'Collection created',\r\n      message: name,\r\n      displayMS: util.calcDuration(name.length + 20),\r\n      actions: [\r\n        {\r\n          title: 'Edit',\r\n          action: dismiss => {\r\n            api.events.emit('edit-collection', id);\r\n            dismiss();\r\n          },\r\n        },\r\n      ],\r\n    });\r\n  } catch (err) {\r\n    if (!(err instanceof util.UserCanceled)) {\r\n      throw err;\r\n    }\r\n  }\r\n}\r\n\r\nconst collections = (mods: { [modId: string]: types.IMod }) => {\r\n  const isWorkshopCollection = mod => (mod.type === MOD_TYPE)\r\n          && (mod.attributes?.editable === true);\r\n  return Object.values(mods)\r\n    .filter(isWorkshopCollection)\r\n    .map(coll => new Set((coll.rules ?? []).map(rule => rule.reference.id)));\r\n};\r\n\r\nexport function addCollectionCondition(api: types.IExtensionApi, instanceIds: string[]) {\r\n  const state = api.getState();\r\n  const gameId = selectors.activeGameId(state);\r\n  const mods = state.persistent.mods[gameId];\r\n\r\n  return collections(mods).find(ruleSet => {\r\n    // only offer the option if there is at least one mod not assigned to a collection\r\n    return instanceIds.find(modId =>\r\n      (mods[modId].type !== MOD_TYPE) && !ruleSet.has(modId)) !== undefined;\r\n  }) !== undefined;\r\n}\r\n\r\nexport function removeCollectionCondition(api: types.IExtensionApi, instanceIds: string[]) {\r\n  const state = api.getState();\r\n  const gameId = selectors.activeGameId(state);\r\n  const mods = state.persistent.mods[gameId];\r\n  return collections(mods).find(ruleSet => {\r\n    // only offer the option if there is at least one mod assigned to a collection\r\n    return instanceIds.find(modId => ruleSet.has(modId)) !== undefined;\r\n  }) !== undefined;\r\n}\r\n\r\nexport function alreadyIncluded(rules, modId): boolean {\r\n  return rules?.find?.(rule => rule.reference.id === modId) !== undefined;\r\n}\r\n\r\nexport function addCollectionAction(api: types.IExtensionApi, instanceIdsIn: string[]) {\r\n  const state = api.getState();\r\n  const gameId = selectors.activeGameId(state);\r\n\r\n  const mods = state.persistent.mods[gameId];\r\n\r\n  // Not sure why this would happen but maybe if the table uses a cache\r\n  const instanceIds = instanceIdsIn.filter(modId => mods[modId] !== undefined);\r\n\r\n  const filtered = instanceIds.filter(modId => (mods[modId].type !== MOD_TYPE));\r\n\r\n  const collections = Object.keys(mods)\r\n    .filter(collectionId => {\r\n      if ((mods[collectionId].type !== MOD_TYPE)\r\n          || (mods[collectionId].attributes?.editable !== true)) {\r\n        return false;\r\n      }\r\n\r\n      const rules = mods[collectionId].rules ?? [];\r\n\r\n      // only offer the option if there is at least one mod selected that is not\r\n      // already in that collection\r\n      return filtered.find(modId => !alreadyIncluded(rules, modId)) !== undefined;\r\n    });\r\n\r\n  const sortAlphabetically = (modIds: string[]) => {\r\n    const temp = [...modIds];\r\n    temp.sort((a, b) => {\r\n      const modA = util.renderModName(mods[a]).toLowerCase();\r\n      const modB = util.renderModName(mods[b]).toLowerCase();\r\n      return modA.localeCompare(modB);\r\n    });\r\n    return temp;\r\n  };\r\n  return api.showDialog('question', 'Add Mods to Collection', {\r\n    text: 'Choose which collection you want the selected mods to be added',\r\n    message: sortAlphabetically(filtered).map(modId =>\r\n      util.renderModName(mods[modId], { version: true, variant: true })).join('\\n'),\r\n        choices: sortAlphabetically(collections).map((modId, idx) => ({\r\n      id: modId,\r\n      text: util.renderModName(mods[modId]),\r\n      value: idx === 0,\r\n    })),\r\n  }, [\r\n    { label: 'Cancel' },\r\n    { label: 'Add' },\r\n  ])\r\n    .then((result: types.IDialogResult) => {\r\n      if (result.action === 'Add') {\r\n        const collectionId = Object.keys(result.input).find(target => result.input[target]);\r\n        if (mods[collectionId] === undefined) {\r\n          // not entirely sure how this could happen\r\n          return;\r\n        }\r\n        const rules = mods[collectionId].rules ?? [];\r\n        util.batchDispatch(api.store, filtered.reduce((prev: Redux.Action[], modId: string) => {\r\n          if (!alreadyIncluded(rules, modId) && (mods[modId].type !== MOD_TYPE)) {\r\n            prev.push(actions.addModRule(gameId, collectionId, {\r\n              type: 'requires',\r\n              reference: {\r\n                id: modId,\r\n              },\r\n            }));\r\n          }\r\n          return prev;\r\n        }, []));\r\n      }\r\n    });\r\n}\r\n\r\nexport function removeCollectionAction(api: types.IExtensionApi, instanceIds: string[]) {\r\n  const state = api.getState();\r\n  const gameId = selectors.activeGameId(state);\r\n  const mods = state.persistent.mods[gameId];\r\n  const collections = Object.keys(mods)\r\n    .filter(collectionId => {\r\n      if ((mods[collectionId].type !== MOD_TYPE)\r\n          || (mods[collectionId].attributes?.editable !== true)) {\r\n        return false;\r\n      }\r\n\r\n      const rules = mods[collectionId].rules ?? [];\r\n\r\n      // only offer the option if there is at least one mod assigned to a collection\r\n      return instanceIds.find(modId => alreadyIncluded(rules, modId)) !== undefined;\r\n    });\r\n\r\n  return api.showDialog('question', 'Remove Mods from Collection', {\r\n    text: 'Please select the (modifiable) collection to remove the mods from',\r\n    message: instanceIds.map(modId => util.renderModName(mods[modId])).join('\\n'),\r\n    choices: collections.map((modId, idx) => ({\r\n      id: modId,\r\n      text: util.renderModName(mods[modId]),\r\n      value: idx === 0,\r\n    })),\r\n  }, [\r\n    { label: 'Cancel' },\r\n    { label: 'Remove' },\r\n  ])\r\n    .then((result: types.IDialogResult) => {\r\n      if (result.action === 'Remove') {\r\n        const collectionId = Object.keys(result.input).find(target => result.input[target]);\r\n        const rules = mods[collectionId].rules ?? [];\r\n\r\n        util.batchDispatch(api.store, instanceIds.reduce((prev: Redux.Action[], modId: string) => {\r\n          const ruleToRemove = rules.find(rule => rule.reference.id === modId);\r\n          if (ruleToRemove !== undefined) {\r\n            prev.push(actions.removeModRule(gameId, collectionId, ruleToRemove));\r\n          }\r\n          return prev;\r\n        }, []));\r\n      }\r\n    });\r\n}\r\n","import { BUNDLED_PATH, PATCHES_PATH } from './constants';\nimport { ICollection, ICollectionMod, ICollectionSourceInfo } from './types/ICollection';\nimport { modToCollection as modToCollection } from './util/transformCollection';\nimport { makeProgressFunction } from './util/util';\n\nimport { ICreateCollectionResult, IGraphErrorDetail } from '@nexusmods/nexus-api';\nimport * as PromiseBB from 'bluebird';\nimport * as _ from 'lodash';\nimport Zip = require('node-7z');\nimport * as path from 'path';\nimport { dir as tmpDir } from 'tmp';\nimport { actions, fs, log, selectors, types, util } from 'vortex-api';\n\nasync function withTmpDir(cb: (tmpPath: string) => Promise<void>): Promise<void> {\n  return new Promise<void>((resolve, reject) => {\n    tmpDir((err, tmpPath, cleanup) => {\n      if (err !== null) {\n        return reject(err);\n      } else {\n        cb(tmpPath)\n          .then(() => {\n            resolve();\n          })\n          .catch(tmpErr => {\n            reject(tmpErr);\n          })\n          .finally(() => {\n            try {\n              cleanup();\n            } catch (err) {\n              // cleanup failed\n              log('warn', 'Failed to clean up temp file', { path, err });\n            }\n          });\n      }\n    });\n  });\n}\n\nasync function zip(zipPath: string, sourcePath: string): Promise<void> {\n  const zipper = new Zip();\n  const files = await fs.readdirAsync(sourcePath);\n  await zipper.add(zipPath, files.map(fileName => path.join(sourcePath, fileName)));\n}\n\nasync function generateCollectionInfo(\n  api: types.IExtensionApi, gameId: string,\n  collection: types.IMod,\n  progress: (percent: number, text: string) => void,\n  error: (message: string, replace: any, mayIgnore: boolean) => void)\n  : Promise<ICollection> {\n\n  const state = api.getState();\n  const mods = state.persistent.mods[gameId];\n  const stagingPath = selectors.installPath(state);\n  return modToCollection(api, gameId, stagingPath, collection, mods, progress, error);\n}\n\nasync function writeCollectionToFile(state: types.IState, info: ICollection,\n                                     mod: types.IMod, outputPath: string) {\n  await fs.ensureDirWritableAsync(outputPath, () => PromiseBB.resolve());\n\n  await fs.writeFileAsync(\n    path.join(outputPath, 'collection.json'), JSON.stringify(info, undefined, 2));\n\n  const stagingPath = selectors.installPath(state);\n  const modPath = path.join(stagingPath, mod.installationPath);\n\n  try {\n    const tweaks = mod.enabledINITweaks ?? [];\n    for (const tweak of tweaks) {\n      await fs.copyAsync(path.join(modPath, 'INI Tweaks', tweak),\n                         path.join(outputPath, 'INI Tweaks', tweak));\n    }\n  } catch (err) {\n    if (err.code !== 'ENOENT') {\n      throw err;\n    } // else: no ini tweak, no problem\n  }\n\n  await fs.copyAsync(path.join(modPath, BUNDLED_PATH), path.join(outputPath, BUNDLED_PATH));\n  await fs.copyAsync(path.join(modPath, PATCHES_PATH), path.join(outputPath, PATCHES_PATH));\n\n  const zipPath = path.join(modPath, 'export',\n                            `collection_${mod.attributes?.version ?? '0'}.7z`);\n  try {\n    await fs.removeAsync(zipPath);\n  } catch (err) {\n    if (err.code !== 'ENOENT') {\n      throw err;\n    }\n  }\n  await zip(zipPath, outputPath);\n  await fs.removeAsync(outputPath);\n  return zipPath;\n}\n\nfunction filterInfoModSource(source: ICollectionSourceInfo): ICollectionSourceInfo {\n  return _.omit(source, ['instructions', 'fileSize', 'tag']);\n}\n\nfunction filterInfoMod(mod: ICollectionMod): ICollectionMod {\n  const res = _.omit(mod, ['hashes', 'choices', 'patches', 'details', 'instructions', 'phase', 'fileOverrides']);\n  res.source = filterInfoModSource(res.source);\n  return res;\n}\n\ntype RecursivePartial<T> = {\n  [P in keyof T]?:\n    T[P] extends (infer U)[] ? RecursivePartial<U>[] :\n    T[P] extends object ? RecursivePartial<T[P]> :\n    T[P];\n};\n\nfunction filterInfo(input: ICollection): RecursivePartial<ICollection> {\n  const info = _.omit(input.info, ['installInstructions']);\n  return {\n    info,\n    mods: input.mods.map(mod => filterInfoMod(mod)),\n  };\n}\n\nasync function queryErrorsContinue(api: types.IExtensionApi,\n                                   errors: Array<{message: string, replace: any}>) {\n  const res = await api.showDialog('error', 'Errors creating collection', {\n    text: 'There were errors creating the collection, do you want to proceed anyway?',\n    message: errors.map(err => api.translate(err.message, { replace: err.replace })).join('\\n'),\n  }, [\n    { label: 'Cancel' },\n    { label: 'Continue' },\n  ]);\n\n  if (res.action === 'Cancel') {\n    throw new util.UserCanceled();\n  }\n}\n\nfunction renderGraphLocateError(api: types.IExtensionApi, gameId: string, modId: string,\n                                det: IGraphErrorDetail): string {\n  const t = api.translate;\n  const state = api.getState();\n  const mods = state.persistent.mods[gameId];\n  switch (det.attribute) {\n    case 'modId': {\n      const missingMod = Object.values(mods).find(iter =>\n        iter.attributes?.modId?.toString?.() === det.value.toString());\n      if (missingMod !== undefined) {\n        return t('Mod not found on nexusmods.com: {{modName}} (modId: {{modId}}), '\n                 + 'it may have been removed.', { replace: {\n          modName: util.renderModName(missingMod),\n          modId: det.value,\n        } });\n      } else {\n        return t('Mod with id {{modId}} not found', { replace: { modId: det.value } });\n      }\n    }\n    case 'fileId': {\n      const missingMod = Object.values(mods).find(iter =>\n        iter.attributes?.fileId?.toString?.() === det.value.toString());\n      if (missingMod !== undefined) {\n        return t('Mod not found on nexusmods.com: {{modName}} '\n                 + '(modId: {{modId}}, fileId: {{fileId}}), '\n                 + 'it may have been removed.', { replace: {\n          modName: util.renderModName(missingMod, { version: true }),\n          modId: missingMod.attributes?.modId ?? 'Unknown',\n          fileId: missingMod.attributes?.fileId,\n        } });\n      } else {\n        return t('Mod with file id {{fileId}} not found', { replace: { fileId: det.value } });\n      }\n    }\n    default: {\n      return det.message;\n    }\n  }\n}\n\nfunction renderGraphErrorFallback(message: string, det: IGraphErrorDetail): string {\n  return det.message || message;\n}\n\nfunction renderGraphErrorDetail(api: types.IExtensionApi, gameId: string, modId: string,\n                                message: string, det: IGraphErrorDetail): string {\n  if ((det.type === 'LOCATE_ERROR') && !!det.value) {\n    return renderGraphLocateError(api, gameId, modId, det);\n  } else {\n    return renderGraphErrorFallback(message, det);\n  }\n}\n\nexport async function doExportToAPI(api: types.IExtensionApi,\n                                    gameId: string,\n                                    modId: string,\n                                    uploaderName: string)\n                                    : Promise<{ slug: string, revisionNumber: number }> {\n  const state: types.IState = api.store.getState();\n  const mod = state.persistent.mods[gameId][modId];\n\n  const { progress, progressEnd } = makeProgressFunction(api);\n\n  const errors: Array<{ message: string, replace: any }> = [];\n\n  let mayIgnore: boolean = true;\n\n  const onError = (message: string, replace: any, allowIgnore: boolean) => {\n    errors.push({ message, replace });\n    mayIgnore &&= allowIgnore;\n  };\n\n  let info: ICollection;\n\n  let collectionId: number;\n  let collectionSlug: string;\n  let revisionNumber: number;\n\n  try {\n    info = await generateCollectionInfo(api, gameId, mod, progress, onError);\n    if (errors.length > 0) {\n      if (mayIgnore) {\n        await queryErrorsContinue(api, errors);\n      } else {\n        throw new util.UserCanceled();\n      }\n    }\n    await withTmpDir(async tmpPath => {\n      const filePath = await writeCollectionToFile(state, info, mod, tmpPath);\n      collectionId = mod.attributes?.collectionId ?? undefined;\n      // collection api doesn't (currently) distinguish between uploader & author so\n      // the expectation is that the fields contain the same value anyway\n      const modUploader = mod.attributes?.uploader ?? mod.attributes?.author;\n      if ((collectionId !== undefined) && (modUploader !== uploaderName)) {\n        log('info', 'user doesn\\'t match original author, creating new collection');\n        collectionId = undefined;\n      }\n      const result: ICreateCollectionResult = await util.toPromise(cb =>\n        api.events.emit('submit-collection', filterInfo(info), filePath,\n                        collectionId, cb));\n      collectionId = result.collection.id;\n      collectionSlug = result.collection.slug;\n      api.store.dispatch(actions.setModAttribute(gameId, modId, 'collectionId', collectionId));\n      api.store.dispatch(actions.setModAttribute(gameId, modId, 'collectionSlug',\n                                                 result.collection.slug));\n      api.store.dispatch(actions.setModAttribute(gameId, modId, 'source', 'nexus'));\n      const revisionId = result.revision?.id ?? result['revisionId'];\n      revisionNumber = result.revision?.revisionNumber ?? result['revisionNumber'];\n      api.store.dispatch(actions.setModAttribute(gameId, modId, 'revisionId', revisionId));\n      api.store.dispatch(actions.setModAttribute(gameId, modId, 'revisionNumber', revisionNumber));\n      api.store.dispatch(actions.setModAttribute(gameId, modId, 'version',\n        ((revisionNumber ?? 0) + 1).toString()));\n    });\n    progressEnd();\n  } catch (err) {\n    progressEnd();\n    if (err.name === 'ModFileNotFound') {\n      const file = info.mods.find(iter => iter.source.fileId === err.fileId);\n      api.sendNotification({\n        type: 'error',\n        title: 'The server can\\'t find one of the files in the collection, '\n             + 'are mod id and file id for it set correctly?',\n        message: file !== undefined ? file.name : `id: ${err.fileId}`,\n      });\n      throw new util.ProcessCanceled('Mod file not found');\n    } else if (err.constructor.name === 'ParameterInvalid') {\n      api.sendNotification({\n        type: 'error',\n        title: 'The server rejected this collection',\n        message: err.message || '<No reason given>',\n      });\n      throw new util.ProcessCanceled('collection rejected');\n    } else if (err.constructor.name === 'GraphError') {\n      const message: string = err.message;\n      const details: IGraphErrorDetail[] = err['details'] ?? [];\n      api.sendNotification({\n        type: 'error',\n        message: 'The server rejected this collection',\n        actions: [\n          { title: 'More', action: () => {\n            api.showDialog('error', 'The server rejected this collection', {\n              text: details.length === 0 ? message : details.map(detail =>\n                renderGraphErrorDetail(api, gameId, modId, message, detail)).join('\\n'),\n            }, [\n              { label: 'Close' },\n            ]);\n          } },\n        ],\n      });\n      throw new util.ProcessCanceled('collection rejected');\n    } else if (err instanceof util.ProcessCanceled) {\n      api.showErrorNotification('Failed to upload collection', err, { allowReport: false });\n    } else {\n      throw err;\n    }\n  }\n\n  return { slug: collectionSlug, revisionNumber };\n}\n\nexport async function doExportToFile(api: types.IExtensionApi, gameId: string, modId: string) {\n  const state: types.IState = api.store.getState();\n  const mod = state.persistent.mods[gameId][modId];\n\n  const { progress, progressEnd } = makeProgressFunction(api);\n\n  const errors: Array<{ message: string, replace: any }> = [];\n\n  const onError = (message: string, replace: any) => {\n    errors.push({ message, replace });\n  };\n\n  try {\n    const stagingPath = selectors.installPathForGame(state, gameId);\n    const modPath = path.join(stagingPath, mod.installationPath);\n    const outputPath = path.join(modPath, 'build');\n    const info = await generateCollectionInfo(api, gameId, mod, progress, onError);\n    const zipPath = await writeCollectionToFile(state, info, mod, outputPath);\n    const dialogActions = [\n      {\n        title: 'Open', action: () => {\n          util.opn(path.join(stagingPath, mod.installationPath, 'export')).catch(() => null);\n        },\n      },\n    ];\n\n    if (errors.length > 0) {\n      const li = (input: string) => `[*]${input}`;\n      dialogActions.unshift({\n        title: 'Errors',\n        action: () => {\n          api.showDialog('error', 'Collection Export Errors', {\n            bbcode: '[list]'\n              + errors.map(err => li(api.translate(err.message, { replace: err.replace })))\n              + '[/list]',\n          }, [\n            { label: 'Close' },\n          ]);\n        },\n      });\n    }\n\n    api.sendNotification({\n      id: 'collection-exported',\n      title: errors.length > 0 ? 'Collection exported, there were errors' : 'Collection exported',\n      message: zipPath,\n      type: errors.length > 0 ? 'warning' : 'success',\n      actions: dialogActions,\n    });\n  } catch (err) {\n    api.showErrorNotification('Failed to export collection', err);\n  }\n  progressEnd();\n}\n","/* eslint-disable */\nimport { ICollection, ICollectionTool } from './types/ICollection';\n\nimport { findExtensions, IExtensionFeature } from './util/extension';\nimport { parseGameSpecifics } from './util/gameSupport';\nimport { collectionModToRule } from './util/transformCollection';\n\nimport { BUNDLED_PATH, MOD_TYPE } from './constants';\n\nimport * as _ from 'lodash';\nimport * as path from 'path';\nimport { actions, fs, log, selectors, types, util } from 'vortex-api';\nimport { readCollection } from './util/importCollection';\nimport { ICollectionConfig } from './types/ICollectionConfig';\nimport { parseConfig } from './util/collectionConfig';\n\n/**\n * supported test for use in registerInstaller\n */\nexport async function testSupported(files: string[], gameId: string)\n    : Promise<types.ISupportedResult> {\n  return {\n    supported: files.indexOf('collection.json') !== -1,\n    requiredFiles: ['collection.json'],\n  };\n}\n\n/**\n * installer function to be used with registerInstaller\n */\nexport function makeInstall(api: types.IExtensionApi) {\n  return async (files: string[],\n                destinationPath: string,\n                gameId: string,\n                progressDelegate: types.ProgressDelegate)\n                : Promise<types.IInstallResult> => {\n\n    const collection: ICollection =\n      await readCollection(api, path.join(destinationPath, 'collection.json'));\n\n    const config: ICollectionConfig = await parseConfig({ collection, gameId });\n    const configInstructions: types.IInstruction[] = Object.entries(config).reduce((accum, [key, value]) => {\n      const instr: types.IInstruction = { type: 'attribute', key, value, };\n      accum.push(instr)\n      return accum;\n    }, []);\n    const filesToCopy = files\n      .filter(filePath => !filePath.endsWith(path.sep)\n        && (filePath.split(path.sep)[0] !== BUNDLED_PATH));\n\n    const bundled = files\n      .filter(filePath => !filePath.endsWith(path.sep)\n        && (filePath.split(path.sep)[0] === BUNDLED_PATH));\n\n    const knownGames = selectors.knownGames(api.getState());\n\n    // Attempt to get the download for this collection to resolve the collection's name\n    //  which may have been modified on the website and is therefore different than the value\n    //  in the json file.\n    // We reverse the downloads array as it's likely that the user just downloaded this\n    //  from the website and therefore the download entry is somewhere at the bottom.\n    // (pointless optimisation ?)\n    const state = api.getState();\n    const downloads = Object.values(state.persistent.downloads.files).reverse();\n    const collectionDownload = downloads.find(down =>\n      (down.localPath !== undefined)\n      && (path.basename(destinationPath, '.installing')\n        === path.basename(down.localPath, path.extname(down.localPath))));\n\n    return Promise.resolve({\n      instructions: [\n        {\n          type: 'attribute' as any,\n          key: 'customFileName',\n          value: (collectionDownload?.modInfo?.name !== undefined)\n            ? collectionDownload.modInfo.name\n            : collection.info.name,\n        },\n        {\n          type: 'attribute',\n          key: 'installInstructions',\n          value: collection.info.installInstructions,\n        },\n        ...configInstructions,\n        {\n          type: 'setmodtype' as any,\n          value: MOD_TYPE,\n        },\n        ...filesToCopy.map(filePath => ({\n          type: 'copy' as any,\n          source: filePath,\n          destination: filePath,\n        })),\n        ...bundled.map(filePath => ({\n          type: 'copy' as any,\n          source: filePath,\n          destination: filePath,\n        })),\n        ...collection.mods.map(mod => (\n          {\n            type: 'rule' as any,\n            rule: collectionModToRule(knownGames, mod),\n          })),\n      ],\n    });\n  };\n}\n\nfunction applyCollectionRules(api: types.IExtensionApi,\n                              gameId: string,\n                              collection: ICollection,\n                              mods: { [modId: string]: types.IMod }) {\n  const batch = (collection.modRules ?? []).reduce((prev, rule) => {\n    const sourceMod = util.findModByRef(rule.source, mods);\n    if (sourceMod !== undefined) {\n      const destMod = util.findModByRef(rule.reference, mods);\n\n      let exists: boolean = false;\n      if (destMod !== undefined) {\n        // replace existing rules between these two mods\n        const exSourceRules = (sourceMod.rules ?? []).filter(iter =>\n          ['before', 'after'].includes(iter.type)\n          && util.testModReference(destMod, iter.reference));\n        exSourceRules.forEach(exSourceRule => {\n          const copy = JSON.parse(JSON.stringify(exSourceRule));\n          delete copy.reference.idHint;\n          if (!exists && _.isEqual(copy, rule)) {\n            exists = true;\n          } else {\n            prev.push(actions.removeModRule(gameId, sourceMod.id, exSourceRule));\n          }\n        });\n        const exDestRules = (destMod.rules ?? []).filter(iter =>\n          ['before', 'after'].includes(iter.type)\n          && util.testModReference(sourceMod, iter.reference));\n        exDestRules.forEach(exDestRule => {\n          prev.push(actions.removeModRule(gameId, destMod.id, exDestRule));\n        });\n        rule.reference = {\n          id: destMod.id,\n          idHint: destMod.id,\n          archiveId: destMod.archiveId,\n        };\n      }\n\n      if (!exists) {\n        log('info', 'add collection rule',\n            { gameId, sourceMod: sourceMod.id, rule: JSON.stringify(rule) });\n        prev.push(actions.addModRule(gameId, sourceMod.id, rule));\n      }\n    }\n    return prev;\n  }, []);\n\n  util.batchDispatch(api.store, batch);\n}\n\n/**\n * postprocess a collection. This is called after dependencies for the pack have been installed.\n * It may get called multiple times so it has to take care to not break if any data already\n * exists\n */\nexport async function postprocessCollection(api: types.IExtensionApi,\n                                            gameId: string,\n                                            collectionMod: types.IMod,\n                                            collection: ICollection,\n                                            mods: { [modId: string]: types.IMod }) {\n  log('info', 'postprocess collection');\n  applyCollectionRules(api, gameId, collection, mods);\n\n  try {\n    await util.toPromise(cb => api.events.emit('deploy-mods', cb));\n  } catch (err) {\n    log('warn', 'Failed to deploy during collection post processing');\n  }\n\n  const exts: IExtensionFeature[] = findExtensions(api.getState(), gameId);\n\n  for (const ext of exts) {\n    await ext.parse(gameId, collection, collectionMod);\n  }\n\n  await parseGameSpecifics(api, gameId, collection, collectionMod);\n}\n","export const MOD_TYPE = 'collection';\nexport const NAMESPACE = 'collection';\nexport const AUTHOR_UNKNOWN = '<Unknown User>';\nexport const AVATAR_FALLBACK = 'assets/images/noavatar.png';\n\nexport const NEXUS_DOMAIN = process.env['NEXUS_DOMAIN'] || 'nexusmods.com';\nexport const NEXUS_FLAMEWORK_SUBDOMAIN = process.env['FLAMEWORK_SUBDOMAIN'] || 'www';\nexport const NEXUS_NEXT_SUBDOMAIN = process.env['NEXT_SUBDOMAIN'] || 'next';\n\nexport const NEXUS_BASE_URL = process.env['NEXUS_BASE_URL'] || `https://${NEXUS_FLAMEWORK_SUBDOMAIN}.${NEXUS_DOMAIN}`;\n//export const NEXUS_NEXT_URL = process.env['NEXUS_NEXT_URL'] || `https://${NEXUS_NEXT_SUBDOMAIN}.${NEXUS_DOMAIN}`;\nexport const NEXUS_NEXT_URL = process.env['NEXUS_NEXT_URL'] || `https://${NEXUS_DOMAIN}/games`;\nexport const NEXUS_BASE_GAMES_URL = process.env['NEXUS_BASE_GAMES_URL'] || `https://${NEXUS_FLAMEWORK_SUBDOMAIN}.${NEXUS_DOMAIN}/games`;\nexport const NEXUS_PROTOCOL = 'https:';\n\nexport const PREMIUM_PATH = ['account', 'billing', 'premium'];\n\nexport const TOS_URL = 'https://help.nexusmods.com/article/115-guidelines-for-collections';\nexport const ADULT_CONTENT_URL = 'https://help.nexusmods.com/article/19-adult-content-guidelines';\n\nexport const BUNDLED_PATH = 'bundled';\nexport const PATCHES_PATH = 'patches';\n\nexport const INSTALLING_NOTIFICATION_ID = 'installing-collection-';\n\n// limits\nexport const MIN_COLLECTION_NAME_LENGTH = 3;\nexport const MAX_COLLECTION_NAME_LENGTH = 36;\n\n\nexport const INI_TWEAKS_PATH = 'Ini Tweaks';\n\n// Although the required property has been removed,\n//  we're keeping this for backwards compatibility as\n//  some released collections could still have it.\nexport const OPTIONAL_TWEAK_PREFIX = '(optional).';\n\n// time after installing a revision before we ask for a vote. in milliseconds\nexport const TIME_BEFORE_VOTE = 48 * 60 * 60 * 1000;\n// upon start, time before we first check whether a revision needs to be rated. in milliseconds\nexport const DELAY_FIRST_VOTE_REQUEST = 1 * 60 * 1000;\n\nexport const MAX_PATCH_SIZE = 0.2;\n// the patch overhead depends on how many locations were changed, this very roughly accounts for\n// the overhead we would see for a diff containing a single change.\n// This is to prevent the patch size limit from making binary patches to very small files\n// impossible\nexport const PATCH_OVERHEAD = 130;\n\n// how long we buffer collection/revision info from the api\nexport const CACHE_EXPIRE_MS = 1 * 60 * 60 * 1000;\n\n// number of revision (and collection) info items we keep at most\nexport const CACHE_LRU_COUNT = 50;\n\nexport const DEFAULT_INSTRUCTIONS = 'No additional instructions.';\nexport const INSTRUCTIONS_PLACEHOLDER = 'Enter instructions here (Markdown supported - Links, Bold, Italics)';\n","import { ICollection, IDownloadURL, IRevision } from '@nexusmods/nexus-api';\nimport * as Bluebird from 'bluebird';\nimport { actions, selectors, types, util } from 'vortex-api';\nimport InstallDriver from './util/InstallDriver';\nimport showChangelog from './views/InstallDialog/InstallChangelogDialog';\n\nasync function collectionUpdate(api: types.IExtensionApi, downloadGameId: string,\n                                collectionSlug: string, revisionNumber: string,\n                                oldModId: string) {\n  try {\n    const latest: IRevision =\n      (await api.emitAndAwait('get-nexus-collection-revision',\n                              collectionSlug, parseInt(revisionNumber, 10)))[0];\n    if (latest === undefined) {\n      throw new util.ProcessCanceled(\n        `Server returned no info on collection ${collectionSlug}, revision ${revisionNumber}`);\n    }\n    const collection: ICollection = latest.collection;\n    if (collectionSlug !== collection.slug) {\n      throw new Error(`Invalid collection \"${collectionSlug}\"`);\n    }\n\n    const state = api.getState();\n    const gameMode = selectors.activeGameId(state);\n\n    const oldMod = state.persistent.mods[gameMode][oldModId];\n    // oldMod might be undefined if the user manually removed the collection in the time\n    // it took us to download the new revision\n\n    if (!!latest.collectionChangelog?.description && (oldMod !== undefined)) {\n      await showChangelog(oldMod, gameMode, latest);\n    }\n\n    const modInfo = {\n      game: downloadGameId,\n      source: 'nexus',\n      name: collection?.name,\n      nexus: {\n        ids: {\n          gameId: downloadGameId,\n          collectionId: collection.id,\n          collectionSlug,\n          revisionId: latest.id,\n          revisionNumber: latest.revisionNumber,\n        },\n        revisionInfo: latest,\n      },\n    };\n    const downloadURLs: IDownloadURL[] =\n      (await api.emitAndAwait('resolve-collection-url', latest.downloadLink))[0];\n    let dlId: string;\n    try {\n      const fileName = util.sanitizeFilename(collection.name);\n      dlId = await util.toPromise(cb =>\n        api.events.emit(\n          'start-download', downloadURLs.map(iter => iter.URI), modInfo,\n          fileName + `-rev${latest.revisionNumber}.7z`, cb, 'never', { allowInstall: false }));\n    } catch (err) {\n      if (err.name === 'AlreadyDownloaded') {\n        const { files } = api.getState().persistent.downloads;\n        dlId = Object.keys(files).find(iter => files[iter].localPath === err.fileName);\n      }\n      if (dlId === undefined) {\n        throw err;\n      }\n    }\n\n    api.events.emit('analytics-track-click-event', 'Collections', 'Update Collection');\n\n    const oldRules = oldMod?.rules ?? [];\n\n    const newModId = await util.toPromise(cb =>\n      api.events.emit('start-install-download', dlId, undefined, cb));\n\n    // remove old revision and mods installed for the old revision that are no longer required\n\n    const mods = api.getState().persistent.mods[gameMode];\n\n    if (mods[newModId] === undefined) {\n      throw new util.ProcessCanceled('Download failed, update archive not found');\n    }\n\n    // candidates is any mod that is depended upon by the old revision that was installed\n    // as a dependency\n    const candidates = oldRules\n      .filter(rule => ['requires', 'recommends'].includes(rule.type))\n      .map(rule => util.findModByRef(rule.reference, mods))\n      .filter(mod => (mod !== undefined)\n                  && (mod.attributes?.['installedAsDependency'] === true));\n\n    const notCandidates = Object.values(mods)\n      .filter(mod => !candidates.includes(mod) && ![oldModId, newModId].includes(mod.id));\n\n    const references = (rules: types.IModRule[], mod: types.IMod) =>\n      (rules ?? []).find(rule => ['requires', 'recommends'].includes(rule.type)\n        && util.testModReference(mod, rule.reference)) !== undefined;\n\n    // for each dependency of the collection,\n    const obsolete = candidates\n      // see if there is a mod outside candidates that requires it but before anything we\n      // check the new version of the collection because that's the most likely to require it\n      .filter(mod => !references(mods[newModId].rules, mod))\n      .filter(mod => notCandidates\n        // that depends upon the candidate,\n        .find(other => references(other.rules, mod)) === undefined);\n\n    let ops = { remove: [], keep: [] };\n\n    if (obsolete.length > 0) {\n      const collectionName = collection?.name ?? util.renderModName(oldMod);\n      const result: types.IDialogResult = await api.showDialog(\n        'question', 'Remove mods from old revision?', {\n        text: 'There are {{count}} mods installed that are not present in the latest '\n            + 'revision of \"{{collectionName}}\". It is recommended that you remove the '\n            + 'unused mods to avoid compatibility issues going forward. '\n            + 'If you choose to keep the mods installed they will no longer be associated '\n            + 'with this Collection and will be managed as if they have been installed '\n            + 'individually. Would you like to remove the old mods now?',\n        parameters: {\n          count: obsolete.length,\n          collectionName,\n        },\n      }, [\n        { label: 'Keep All' },\n        { label: 'Review Mods' },\n        { label: 'Remove All' },\n      ]);\n\n      if (result.action === 'Keep All') {\n        ops.keep = obsolete.map(mod => mod.id);\n      } else if (result.action === 'Remove All') {\n        ops.remove = obsolete.map(mod => mod.id);\n      } else { // Review\n        const reviewResult: types.IDialogResult = await api.showDialog(\n          'question', 'Remove mods from old revision?', {\n            text: 'The following mods are not present in the latest revision of '\n                + '\"{{collectionName}}\". Please select the ones to remove.',\n            parameters: {\n              collectionName,\n            },\n            checkboxes: obsolete.map(mod =>\n              ({ id: mod.id, text: util.renderModName(mod), value: true })),\n          }, [\n            { label: 'Keep All' },\n            { label: 'Remove selected' },\n          ],\n        );\n        if (reviewResult.action === 'Keep All') {\n          ops.keep = obsolete.map(mod => mod.id);\n        } else {\n          ops = Object.keys(reviewResult.input).reduce((prev, value) => {\n            if (reviewResult.input[value]) {\n              prev.remove.push(value);\n            } else {\n              prev.keep.push(value);\n            }\n            return prev;\n          }, { remove: [], keep: [] });\n        }\n      }\n    }\n\n    // mark kept mods as manually installed, otherwise this will be queried again\n    util.batchDispatch(api.store, ops.keep.map(modId =>\n      actions.setModAttribute(gameMode, modId, 'installedAsDependency', false)));\n\n    await util.toPromise(cb => api.events.emit('remove-mods', gameMode,\n      [oldModId, ...ops.remove],\n      cb, { incomplete: true, ignoreInstalling: true }));\n  } catch (err) {\n    if (!(err instanceof util.UserCanceled)) {\n      api.showErrorNotification('Failed to download collection', err, {\n        allowReport: !(err instanceof util.ProcessCanceled),\n        warning: err instanceof util.ProcessCanceled,\n      } as any);\n    }\n  }\n}\n\nexport function onCollectionUpdate(api: types.IExtensionApi,\n                                   driver: InstallDriver): (...args: any[]) => void {\n  return (gameId: string, collectionSlug: string,\n          revisionNumber: number | string, source: string, oldModId: string,\n          cb: (err: Error) => void) => {\n    if ((source !== 'nexus') || (collectionSlug === undefined) || (revisionNumber === undefined)) {\n      return;\n    }\n\n    driver.prepare(() =>\n      Bluebird.resolve(collectionUpdate(api, gameId, collectionSlug,\n                                        revisionNumber.toString(), oldModId))\n        .then(() => {\n          cb?.(null);\n        })\n        .catch(err => {\n          if (!(err instanceof util.UserCanceled)) {\n            api.showErrorNotification('Failed to update collection', err);\n          }\n          cb?.(err);\n        }));\n  };\n}\n","/* eslint-disable */\nimport path = require('path');\nimport * as React from 'react';\nimport { actions, fs, log, selectors, types, util } from 'vortex-api';\nimport { ICollection } from './types/ICollection';\nimport { IExtendedInterfaceProps } from './types/IExtendedInterfaceProps';\nimport { IINITweak, TweakArray } from './types/IINITweak';\nimport TweakList from './views/IniTweaks';\n\nimport { INI_TWEAKS_PATH, OPTIONAL_TWEAK_PREFIX } from './constants';\n\nconst gameSupport = {\n  skyrim: {\n    gameSettingsFiles: ['Skyrim.ini', 'SkyrimPrefs.ini'],\n  },\n  skyrimse: {\n    gameSettingsFiles: ['Skyrim.ini', 'SkyrimPrefs.ini', 'SkyrimCustom.ini'],\n  },\n  skyrimvr: {\n    gameSettingsFiles: ['Skyrim.ini', 'SkyrimPrefs.ini'],\n  },\n  fallout3: {\n    gameSettingsFiles: ['Fallout.ini', 'FalloutPrefs.ini', 'FalloutCustom.ini'],\n  },\n  fallout4: {\n    gameSettingsFiles: ['Fallout4.ini', 'Fallout4Prefs.ini', 'Fallout4Custom.ini'],\n  },\n  fallout4vr: {\n    gameSettingsFiles: ['Fallout4Custom.ini', 'Fallout4Prefs.ini'],\n  },\n  falloutnv: {\n    gameSettingsFiles: ['Fallout.ini', 'FalloutPrefs.ini'],\n  },\n  starfield: {\n    gameSettingsFiles: ['StarfieldCustom.ini', 'StarfieldPrefs.ini'],\n  },\n  oblivion: {\n    gameSettingsFiles: ['Oblivion.ini'],\n  },\n  enderal: {\n    gameSettingsFiles: ['Enderal.ini', 'EnderalPrefs.ini'],\n  },\n  enderalspecialedition: {\n    gameSettingsFiles: ['Enderal.ini', 'EnderalPrefs.ini'],\n  },\n};\n\nfunction isSupported(gameId: string) {\n  return gameSupport[gameId] !== undefined;\n}\n\nfunction validateFilenameInput(content: types.IDialogContent): types.IConditionResult[] {\n  const input = content.input[0].value || '';\n  if ((input.length < 2) || !(util as any).isFilenameValid(input)) {\n    return [{\n      actions: ['Confirm'],\n      errorText: 'Has to be a valid file name',\n      id: content.input[0].id,\n    }];\n  } else {\n    return [];\n  }\n}\n\nfunction TweakListWrap(api: types.IExtensionApi, prop: IExtendedInterfaceProps): JSX.Element {\n  return React.createElement(TweakList, {\n    ...prop,\n    settingsFiles: gameSupport[prop.gameId].gameSettingsFiles,\n    onRefreshTweaks: genRefreshTweaks,\n    onAddIniTweak: (modPath: string, settingsFiles: string[]) =>\n      genAddIniTweak(api, modPath, settingsFiles),\n    onRemoveIniTweak: (modPath: string, tweak: IINITweak) =>\n      genRemoveIniTweak(api, prop, modPath, tweak),\n  });\n}\n\nasync function getTweaks(dirPath: string): Promise<string[]> {\n  try {\n    const tweaks = await fs.readdirAsync(dirPath);\n    return tweaks;\n  } catch (err) {\n    log('debug', 'failed to find tweaks', err);\n    return [];\n  }\n}\n\nexport function getEnabledTweaks(api: types.IExtensionApi, gameId: string, modId: string) {\n  const state = api.getState();\n  const mods: { [modId: string]: types.IMod } = util.getSafe(state,\n    ['persistent', 'mods', gameId], {});\n  const tweaks = util.getSafe(mods[modId], ['enabledINITweaks'], []);\n  return tweaks;\n}\n\nexport async function importTweaks(api: types.IExtensionApi,\n                                   profile: types.IProfile,\n                                   mods: { [modId: string]: types.IMod },\n                                   destCollection: types.IMod,\n                                   force?: boolean) {\n  const tweaks = await getAllTweaks(api, profile, mods);\n  const state = api.getState();\n  const stagingFolder = selectors.installPathForGame(state, profile.gameId);\n  const destTweakDirPath = path.join(stagingFolder,\n    destCollection.id, INI_TWEAKS_PATH);\n  const batchedActions = [];\n  const existingTweaks = destCollection.enabledINITweaks ?? [];\n  await fs.ensureDirWritableAsync(destTweakDirPath);\n  for (const tweak of tweaks) {\n    if (force !== true && existingTweaks.includes(tweak.fileName)) {\n      // Don't import existing tweaks.\n      continue;\n    }\n    try {\n      const dest = path.join(destTweakDirPath, path.basename(tweak.sourcePath));\n      await fs.copyAsync(tweak.sourcePath, dest, { overwrite: true });\n      batchedActions.push(actions.setINITweakEnabled(profile.gameId,\n        destCollection.id, tweak.fileName, true));\n    } catch (err) {\n      log('error', 'Unable to import tweak', err);\n      continue;\n    }\n  }\n\n  if (batchedActions.length > 0) {\n    util.batchDispatch(api.store, batchedActions);\n  }\n  return Promise.resolve(tweaks);\n}\n\nasync function getAllTweaks(api: types.IExtensionApi,\n                            profile: types.IProfile,\n                            mods: { [modId: string]: types.IMod }): Promise<TweakArray> {\n  const state = api.getState();\n  if (profile?.gameId === undefined) {\n    return Promise.resolve([]);\n  }\n\n  const installationPath = selectors.installPathForGame(state, profile.gameId);\n  const enabledMods = Object.keys(mods)\n    .filter(id => util.getSafe(profile.modState, [id, 'enabled'], false)\n               && (mods[id].installationPath !== undefined));\n  const validTweaks: IINITweak[] = [];\n  for (const modId of enabledMods) {\n    const modPath = path.join(installationPath, mods[modId].installationPath);\n    const tweaks = getEnabledTweaks(api, profile.gameId, modId);\n    if (tweaks.length === 0) {\n      continue;\n    }\n    for (const tweak of tweaks) {\n      try {\n        const tweakPath = path.join(modPath, INI_TWEAKS_PATH, tweak);\n        await fs.statAsync(tweakPath);\n        validTweaks.push({\n          enabled: true,\n          sourcePath: tweakPath,\n          fileName: tweak,\n        });\n      } catch (err) {\n        continue;\n      }\n    }\n  }\n  return Promise.resolve(validTweaks);\n}\n\nasync function removeOptionalPrefix(filePath: string) {\n  // The point of this function is to fix/remove the optional prefix\n  //  from existing ini tweaks.\n  try {\n    if (filePath.indexOf(OPTIONAL_TWEAK_PREFIX) !== -1) {\n      const trimmedFilePath = filePath.replace(OPTIONAL_TWEAK_PREFIX, '');\n      await fs.removeAsync(trimmedFilePath).catch(err => null);\n      await fs.linkAsync(filePath, trimmedFilePath);\n      await fs.removeAsync(filePath);\n      return Promise.resolve(trimmedFilePath);\n    } else {\n      // No fix needed.\n      return Promise.resolve(filePath);\n    }\n  } catch (err) {\n    log('error', 'failed to remove optional prefix from ini file', { error: err, filePath });\n    return Promise.resolve(filePath);\n  }\n}\n\nasync function genRefreshTweaks(modPath: string): Promise<TweakArray> {\n  const tweakPath = path.join(modPath, INI_TWEAKS_PATH);\n  const tweaks = await getTweaks(tweakPath);\n  return tweaks.reduce(async (accumP, twk) => {\n    const accum = await accumP;\n    const filePath = await removeOptionalPrefix(path.join(tweakPath, twk));\n    accum.push({ fileName: path.basename(filePath) });\n    return accum;\n  }, Promise.resolve([]));\n}\n\nasync function genRemoveIniTweak(api: types.IExtensionApi,\n                                 props: IExtendedInterfaceProps,\n                                 modPath: string,\n                                 tweak: IINITweak) {\n  return api.showDialog('question', 'Remove INI Tweak', {\n    text: 'You are about to remove an INI tweak \"{{fileName}}\" from the collection. Are you sure you wish to proceed ?',\n    parameters: { fileName: tweak.fileName },\n  }, [\n    { label: 'Cancel' },\n    { label: 'Remove' },\n  ]).then(async res => {\n    if (res.action === 'Remove') {\n      try {\n        const tweaks = await genRefreshTweaks(modPath);\n        const targetTweak = tweaks.find(twk => twk.fileName === tweak.fileName);\n        const tweakPath = path.join(modPath, INI_TWEAKS_PATH, targetTweak.fileName);\n        await fs.removeAsync(tweakPath);\n        const { gameId, collection } = props;\n        api.store.dispatch(actions.setINITweakEnabled(\n          gameId, collection.id, targetTweak.fileName, false));\n      } catch (err) {\n        if (err.code === 'ENOENT') {\n          // No file, no problem.\n          const { gameId, collection } = props;\n          api.store.dispatch(actions.setINITweakEnabled(\n            gameId, collection.id, tweak.fileName, false));\n          return;\n        }\n        api.showErrorNotification('Failed to remove INI tweak', err,\n          { allowReport: ['EPERM'].includes(err.code) });\n      }\n    }\n  });\n}\n\nasync function genAddIniTweak(api: types.IExtensionApi,\n                              modPath: string,\n                              settingsFiles: string[]): Promise<void> {\n  return api.showDialog('question', 'Name', {\n    text: 'Please enter a name for the ini tweak',\n    input: [\n      { id: 'name', type: 'text' },\n    ],\n    choices: settingsFiles.map((fileName, idx) => ({\n      text: fileName,\n      value: idx === 0,\n      id: fileName,\n    })),\n    condition: validateFilenameInput,\n  }, [\n    { label: 'Cancel' },\n    { label: 'Confirm' },\n  ]).then(res => {\n    if (res.action === 'Confirm') {\n      const tweaksPath = path.join(modPath, INI_TWEAKS_PATH);\n      let selectedIni = Object.keys(res.input)\n        .find(key => (path.extname(key) === '.ini') && res.input[key] === true);\n      if (selectedIni === undefined) {\n        // shouldn't be possible since it's radiobuttons and one is preset so\n        // one should always be selected.\n        return Promise.reject(new Error('No ini file selected'));\n      }\n      selectedIni = path.basename(selectedIni, path.extname(selectedIni));\n      const fileName = `${res.input['name']} [${selectedIni}].ini`;\n      return fs.ensureDirWritableAsync(tweaksPath, () => Promise.resolve())\n        .then(() => fs.writeFileAsync(path.join(tweaksPath, fileName), ''));\n    } else {\n      return Promise.resolve();\n    }\n  });\n}\n\nasync function genEnableIniTweaks(api: types.IExtensionApi, gameId: string, mod: types.IMod) {\n  const stagingPath = selectors.installPathForGame(api.getState(), gameId);\n  const modPath = path.join(stagingPath, mod.installationPath);\n  try {\n    const tweaks: TweakArray = await genRefreshTweaks(modPath);\n    const batched = tweaks.map(req =>\n      actions.setINITweakEnabled(gameId, mod.id, req.fileName, true));\n    if (batched.length > 0) {\n      util.batchDispatch(api.store, batched);\n    }\n  } catch (err) {\n    if (err.code !== 'ENOENT') {\n      api.showErrorNotification('Failed to enable collection ini tweaks', err);\n    }\n  }\n}\n\nfunction init(context: types.IExtensionContext) {\n  context.optional.registerCollectionFeature(\n    'ini-tweaks',\n    () => Promise.resolve({}),\n    (gameId: string, collection: ICollection, mod: types.IMod) =>\n      genEnableIniTweaks(context.api, gameId, mod),\n    () => Promise.resolve(),\n    () => 'INI Tweaks',\n    (state: types.IState, gameId: string) => isSupported(gameId),\n    (prop: IExtendedInterfaceProps) => TweakListWrap(context.api, prop));\n\n  // Useful for debugging - currently we would have to check if the ini tweaks\n  //  folder exists before showing the below action which would be an async operation\n  //  and therefore not currently supported. Alternatively we could decide to have this\n  //  enabled at all times ? (even if we don't know whether the collection has any ini tweaks)\n  // context.registerAction('mods-action-icons', 999, 'resume', {}, 'Apply INI Tweaks', instanceIds => {\n  //   const state = context.api.getState();\n  //   const modId = instanceIds[0];\n  //   const gameId = selectors.activeGameId(state);\n  //   const mod: types.IMod = state.persistent.mods[gameId]?.[modId];\n  //   if (mod.type === MOD_TYPE) {\n  //     const profile = selectors.activeProfile(state);\n  //     if (util.getSafe(profile, ['modState', mod.id, 'enabled'], false)) {\n  //       enableIniTweaks(context.api, gameId, mod);\n  //     }\n  //   }\n  // }, instanceIds => {\n  //   const modId = instanceIds[0];\n  //   const state = context.api.store.getState();\n  //   const gameId = selectors.activeGameId(state);\n  //   const mod: types.IMod = state.persistent.mods[gameId]?.[modId];\n  //   const profile = selectors.activeProfile(state);\n  //   return mod?.type === MOD_TYPE && (util.getSafe(profile, ['modState', modId, 'enabled'], false));\n  // });\n}\n\nexport default init;\n","import * as actions from '../actions/persistent';\n\nimport * as _ from 'lodash';\nimport { types, util } from 'vortex-api';\n\nconst persistentReducer: types.IReducerSpec = {\n  reducers: {\n    [actions.updateCollectionInfo as any]: (state, payload) => {\n      const { collectionId, collectionInfo, timestamp } = payload;\n      \n      if (collectionInfo === undefined) {\n        return util.deleteOrNop(state, ['collections', collectionId]);\n      } else {\n        return util.setSafe(state, ['collections', collectionId],\n                            { timestamp, info: collectionInfo });\n      }\n    },\n    [actions.updateRevisionInfo as any]: (state, payload) => {\n      const { revisionId, revisionInfo, timestamp } = payload;\n\n      if (revisionInfo === undefined) {\n        return util.deleteOrNop(state, ['revisions', 'revisionId']);\n      } else {\n        return util.setSafe(state, ['revisions', revisionId],\n                            { timestamp, info: revisionInfo });\n      }\n    },\n    [actions.updateSuccessRate as any]: (state, payload) => {\n      const { revisionId, vote, average, total } = payload;\n\n      const revPath = ['revisions', revisionId, 'info'];\n\n      state = util.setSafe(state, [...revPath, 'metadata', 'ratingValue'], vote);\n      return util.setSafe(state, [...revPath, 'rating'], {\n        average,\n        total,\n      });\n    },\n    [actions.setPendingVote as any]: (state, payload) => {\n      const { revisionId, collectionSlug, revisionNumber, time } = payload;\n\n      return util.setSafe(state, ['pendingVotes', revisionId], {\n        collectionSlug, revisionNumber, time });\n    },\n    [actions.clearPendingVote as any]: (state, payload) => {\n      const { revisionId } = payload;\n      return util.deleteOrNop(state, ['pendingVotes', revisionId]);\n    },\n  },\n  defaults: {\n    collections: {},\n    revisions: {},\n    pendingVotes: {},\n  },\n};\n\nexport default persistentReducer;\n","import { types, util } from 'vortex-api';\r\n\r\nimport * as actions from '../actions/session';\r\n\r\nconst sessionReducer: types.IReducerSpec = {\r\n  reducers: {\r\n    [actions.startEditCollection as any]: (state, payload) => {\r\n      const { modId } = payload;\r\n      return util.setSafe(state, ['editCollectionId'], modId);\r\n    },\r\n    [actions.startAddModsToCollection as any]: (state, payload) => {\r\n      const { collectionId } = payload;\r\n      return util.setSafe(state, ['addModsId'], collectionId);\r\n    },\r\n    [actions.healthDownvoteDialog as any]: (state, payload) => {\r\n      const { collectionModId } = payload;\r\n      return util.setSafe(state, ['healthDownvoteDialog'], collectionModId);\r\n    }\r\n  },\r\n  defaults: {\r\n    editCollectionId: undefined,\r\n    addModsId: undefined,\r\n    healthDownvoteDialog: undefined,\r\n  },\r\n};\r\n\r\nexport default sessionReducer;\r\n","import { types, util } from 'vortex-api';\n\nimport * as actions from '../actions/settings';\n\nconst settingsReducer: types.IReducerSpec = {\n  reducers: {\n    [actions.setSortAdded as any]: (state, payload) => {\n      const { sorting } = payload;\n      return util.setSafe(state, ['sortAdded'], sorting);\n    },\n    [actions.setSortWorkshop as any]: (state, payload) => {\n      const { sorting } = payload;\n      return util.setSafe(state, ['sortWorkshop'], sorting);\n    },\n  },\n  defaults: {\n    sortAdded: 'datedownloaded',\n    sortWorkshop: 'recentlyupdated',\n  },\n};\n\nexport default settingsReducer;\n","import { ICollection, ICollectionTool } from './types/ICollection';\nimport { IExtendedInterfaceProps } from './types/IExtendedInterfaceProps';\nimport ToolList from './views/Tools';\n\nimport * as path from 'path';\nimport * as React from 'react';\nimport { generate as shortid } from 'shortid';\nimport { actions, fs, log, selectors, types, util } from 'vortex-api';\n\nfunction ToolsListWrap(prop: IExtendedInterfaceProps): JSX.Element {\n  return React.createElement(ToolList, {\n    ...prop,\n  });\n}\n\nfunction convertTools(state: types.IState,\n                      gameId: string,\n                      includedTools: string[]): ICollectionTool[] {\n  const { tools } = state.settings.gameMode.discovered[gameId];\n  const discovery = selectors.discoveryByGame(state, gameId);\n\n  return util.makeUniqueByKey(includedTools ?? [], item => item)\n    .filter(toolId => tools[toolId]?.custom && !tools[toolId]?.hidden)\n    .map(toolId => {\n      const tool = tools[toolId];\n\n      const exe = util.isChildPath(tool.path, discovery.path)\n        ? path.relative(discovery.path, tool.path)\n        : tool.path;\n\n      return {\n        name: tool.name,\n        exe,\n        args: tool.parameters,\n        env: tool.environment,\n        cwd: tool.workingDirectory,\n        detach: tool.detach,\n        shell: tool.shell,\n        onStart: tool.onStart,\n      };\n    });\n}\n\nfunction generateTools(api: types.IExtensionApi, gameId: string, mod: types.IMod) {\n  return {\n    tools: convertTools(api.getState(), gameId, mod.attributes?.collection?.includedTools),\n  };\n}\n\ninterface ICollectionToolEx extends ICollectionTool {\n  id?: string;\n}\n\nfunction normalizePath(input: string) {\n  return path.normalize(input.toUpperCase());\n}\n\nfunction isSameTool(discovery: types.IDiscoveryResult,\n                    lhs: types.IDiscoveredTool,\n                    rhs: ICollectionTool) {\n  if (lhs?.path === undefined) {\n    return false;\n  }\n  return (normalizePath(lhs.path) === normalizePath(path.resolve(discovery.path, rhs.exe)))\n      || (lhs.name === rhs.name);\n}\n\nfunction updatePaths(tool: ICollectionToolEx, gamePath: string) {\n  return {\n    ...tool,\n    exe: path.isAbsolute(tool.exe)\n    ? tool.exe\n    : path.join(gamePath, tool.exe),\n  };\n}\n\nasync function cloneTools(api: types.IExtensionApi,\n                          gameId: string,\n                          tools: ICollectionTool[],\n                          from: types.IMod,\n                          to: types.IMod)\n                          : Promise<void> {\n  const discovery = selectors.discoveryByGame(api.getState(), gameId);\n\n  const knownTools = api.getState().settings.gameMode.discovered[gameId].tools;\n\n  const includedTools: string[] = (tools ?? []).map(tool => {\n    const exePath = path.isAbsolute(tool.exe)\n      ? tool.exe\n      : path.join(discovery.path, tool.exe);\n\n    return Object.keys(knownTools ?? {})\n      .find(iter => (knownTools[iter].custom && !knownTools[iter].hidden)\n                && (normalizePath(knownTools[iter].path) === normalizePath(exePath)\n                 || knownTools[iter].name === tool.name));\n  })\n  .filter(iter => iter !== undefined);\n\n  const attributes = util.setSafe(to.attributes.collection, ['includedTools'], includedTools);\n  api.store.dispatch(actions.setModAttribute(gameId, to.id, 'collection',\n                                             attributes));\n}\n\nasync function setUpTools(api: types.IExtensionApi,\n                          gameId: string,\n                          tools: ICollectionTool[])\n                          : Promise<void> {\n  const knownTools = api.getState().settings.gameMode.discovered[gameId].tools;\n\n  // create tools right away to prevent race conditions in case this is invoked multiple times,\n  // icons are generated later, if necessary\n\n  const discovery = selectors.discoveryByGame(api.getState(), gameId);\n\n  const addTools: ICollectionToolEx[] = (tools ?? [])\n    .map(tool => updatePaths(tool, discovery.path))\n    .filter(tool => Object.values(knownTools ?? {})\n      .find(iter => isSameTool(discovery, iter, tool)) === undefined);\n\n  const addActions = addTools.map(tool => {\n    tool.id = shortid();\n\n    return actions.addDiscoveredTool(gameId, tool.id, {\n      id: tool.id,\n      path: tool.exe,\n      name: tool.name,\n\n      requiredFiles: [],\n      executable: null,\n      parameters: tool.args,\n      environment: tool.env,\n      workingDirectory: tool.cwd,\n      shell: tool.shell,\n      detach: tool.detach,\n      onStart: tool.onStart,\n      custom: true,\n      hidden: true,\n    }, true);\n  });\n\n  // this has to happen before we extract icons, otherwise we might create duplicates\n  util.batchDispatch(api.store, addActions);\n\n  const notFoundTools: string[] = [];\n\n  await Promise.all(addTools.map(async tool => {\n    try {\n      await fs.statAsync(tool.exe);\n    } catch (err) {\n      notFoundTools.push(tool.name);\n    }\n\n    if (path.extname(tool.exe) === '.exe') {\n      const iconPath = util.StarterInfo.toolIconRW(gameId, tool.id);\n      await fs.ensureDirWritableAsync(path.dirname(iconPath), () => Promise.resolve());\n      try {\n        await util['extractExeIcon'](tool.exe, iconPath);\n      } catch (err) {\n        log('warn', 'failed to extract exe icon', { executable: tool.exe, error: err.message });\n      }\n    }\n  }));\n\n  if (notFoundTools.length > 0) {\n    await api.showDialog('info', 'Tool not found', {\n      text: 'The collection you just installed set up tools to be run from the dashboard, '\n          + 'however not all were found locally. '\n          + 'It\\'s possible that these tools will be available after the next deployment '\n          + 'completes, otherwise you may have to edit the configuration for the tool to '\n          + 'adjust them to your own setup.',\n      message: notFoundTools.join('\\n'),\n    }, [\n      { label: 'Continue' },\n    ]);\n  }\n\n  util.batchDispatch(api.store, addTools.map(tool =>\n    actions.setToolVisible(gameId, tool.id, true)));\n}\n\n/*\n  generate: (gameId: string, includedMods: string[]) => Promise<any>;\n  parse: (gameId: string, collection: ICollection, mod: types.IMod) => Promise<void>;\n*/\n\nfunction init(context: types.IExtensionContext) {\n  context.optional.registerCollectionFeature(\n    'tools',\n    (gameId: string, includedMods: string[], mod: types.IMod) =>\n      generateTools(context.api, gameId, mod),\n    (gameId: string, collection: ICollection, mod: types.IMod) =>\n      setUpTools(context.api, gameId, collection['tools']),\n    (gameId: string, collection: ICollection, from: types.IMod, to: types.IMod) =>\n      cloneTools(context.api, gameId, collection['tools'], from, to),\n    () => 'Tools',\n    (state: types.IState, gameId: string) => true,\n    ToolsListWrap,\n  );\n}\n\nexport default init;\n","import { updateCollectionInfo, updateRevisionInfo } from '../actions/persistent';\nimport { CACHE_EXPIRE_MS, CACHE_LRU_COUNT, MOD_TYPE } from '../constants';\nimport { ICollectionModRule } from '../types/ICollection';\nimport { IStateEx } from '../types/IStateEx';\nimport { readCollection } from './importCollection';\n\nimport { ICollection, IRevision } from '@nexusmods/nexus-api';\nimport * as path from 'path';\nimport { log, selectors, types, util } from 'vortex-api';\n\n/**\n * manages caching of collection and revision info\n * NOTE: this doesn't have any state of its own, the actual cache is stored in application state\n * As such, this doesn't need to be a class, a bunch of functions would have done. If this\n * behavior were to change, the way InfoCache gets used would become invalid!\n */\nclass InfoCache {\n  private mApi: types.IExtensionApi;\n  private mCacheRevRequests: { [revId: string]: Promise<IRevision> } = {};\n  private mCacheColRequests: { [revId: string]: Promise<ICollection> } = {};\n  private mCacheColRules: { [revId: string]: Promise<ICollectionModRule[]> } = {};\n\n  constructor(api: types.IExtensionApi) {\n    this.mApi = api;\n  }\n\n  public async getCollectionModRules(revisionId: string, collection: types.IMod, gameId: string) {\n    const cacheId = revisionId ?? collection.id;\n    if (this.mCacheColRules[cacheId] === undefined) {\n      this.mCacheColRules[cacheId] = this.cacheCollectionModRules(revisionId, collection, gameId);\n    }\n\n    return this.mCacheColRules[cacheId];\n  }\n\n  public async getCollectionInfo(slug: string, forceFetch?: boolean): Promise<ICollection> {\n    const { store } = this.mApi;\n    if (slug === undefined) {\n      return;\n    }\n    const collections = store.getState().persistent.collections.collections ?? {};\n    if (forceFetch\n        || (collections[slug]?.timestamp === undefined)\n        || ((Date.now() - collections[slug].timestamp) > CACHE_EXPIRE_MS)) {\n\n      if (this.mCacheColRequests[slug] === undefined) {\n        this.mCacheColRequests[slug] = this.cacheCollectionInfo(slug);\n      }\n      return this.mCacheColRequests[slug];\n    }\n\n    return collections[slug].info;\n  }\n\n  public async clearCache() {\n    const { store } = this.mApi;\n    const state = this.mApi.getState<IStateEx>();\n\n    const cutOffTime = Date.now() - CACHE_EXPIRE_MS;\n\n    // remove collection infos\n    {\n      const { collections } = state.persistent.collections;\n      const collectionsToDrop: string[] = Object.keys(collections)\n        .sort((lhs, rhs) => collections[rhs].timestamp - collections[lhs].timestamp)\n        .reduce((prev, iter, idx) => {\n          if ((idx >= CACHE_LRU_COUNT) || (collections[iter].timestamp < cutOffTime)) {\n            prev.push(iter);\n          }\n          return prev;\n        }, []);\n      if (collectionsToDrop.length > 0) {\n        log('debug', 'dropping outdated collections cache', { ids: collectionsToDrop });\n        util.batchDispatch(store, collectionsToDrop\n          .map(coll => updateCollectionInfo(coll, undefined, undefined)));\n      }\n    }\n\n    // remove revision infos\n    {\n      const { revisions } = state.persistent.collections;\n      const revisionsToDrop: string[] = Object.keys(revisions)\n        .sort((lhs, rhs) => revisions[rhs].timestamp - revisions[lhs].timestamp)\n        .reduce((prev, iter, idx) => {\n          if ((idx >= CACHE_LRU_COUNT) || (revisions[iter].timestamp < cutOffTime)) {\n            prev.push(iter);\n          }\n          return prev;\n        }, []);\n      if (revisionsToDrop.length > 0) {\n        log('debug', 'dropping outdated revision cache', { ids: revisionsToDrop });\n        util.batchDispatch(store, revisionsToDrop\n          .map(rev => updateRevisionInfo(rev, undefined, undefined)));\n      }\n    }\n  }\n\n  /**\n   * get meta information about a revision, cached if possible\n   * @param revisionId globally unique id of the revision\n   * @param collectionSlug id of the collection\n   * @param revisionNumber number of the revision within this collection\n   * @param fetchBehavior if/how to update the cache:\n   *    \"avoid\" will update only if there is no data at all,\n   *    \"allow\" will also update if the cache is expired,\n   *    \"force\" will always update\n   * @returns \n   */\n  public async getRevisionInfo(revisionId: string,\n                               collectionSlug: string, revisionNumber: number,\n                               fetchBehavior: 'allow' | 'avoid' | 'force' = 'allow')\n                               : Promise<IRevision> {\n    const { store } = this.mApi;\n    const revisions: { [id: string]: { info: IRevision, timestamp: number } } =\n      store.getState().persistent.collections.revisions ?? {};\n    if ((fetchBehavior === 'force')\n        || (revisions[revisionId]?.timestamp === undefined)\n        || (((Date.now() - revisions[revisionId].timestamp) > CACHE_EXPIRE_MS)\n            && (fetchBehavior === 'allow'))) {\n      this.fetchRevisionInfo(revisions, revisionId, collectionSlug, revisionNumber);\n      return this.mCacheRevRequests[revisionId];\n    }\n\n    if (!(revisions[revisionId]?.info?.collection)) {\n      return Promise.resolve(undefined);\n    }\n\n    const collectionInfo = await this.getCollectionInfo(revisions[revisionId].info.collection.slug);\n\n    return {\n      ...revisions[revisionId].info,\n      collection: {\n        ...collectionInfo,\n      },\n    };\n  }\n\n  private fetchRevisionInfo(revisions,\n                            revisionId: string,\n                            collectionSlug: string,\n                            revisionNumber: number): void {\n    log('info', 'revision info cache outdated', {\n      timestamp: revisions[revisionId]?.timestamp,\n      now: Date.now(),\n    });\n\n    if (this.mCacheRevRequests[revisionId] === undefined) {\n      this.mCacheRevRequests[revisionId] =\n        this.cacheRevisionInfo(revisionId, collectionSlug, revisionNumber);\n    }\n  }\n\n  private async cacheCollectionModRules(revisionId: string,\n                                        collection: types.IMod,\n                                        gameId: string)\n                                        : Promise<ICollectionModRule[]> {\n    const store = this.mApi.store;\n    const state = store.getState();\n\n    const mods: { [modId: string]: types.IMod } =\n      util.getSafe(state, ['persistent', 'mods', gameId], {});\n    const colMod = collection ?? (Object.values(mods).find(iter =>\n      (iter.type === MOD_TYPE) && (iter.attributes?.revisionId === revisionId)));\n    if (colMod?.installationPath === undefined) {\n      return [];\n    }\n    const stagingPath = selectors.installPathForGame(state, gameId);\n    try {\n      const collectionInfo = await readCollection(\n        this.mApi, path.join(stagingPath, colMod.installationPath, 'collection.json'));\n      return collectionInfo.modRules;\n    } catch (err) {\n      if (err.code !== 'ENOENT') {\n        this.mApi.showErrorNotification('Failed to cache collection mod rules', err, {\n          allowReport: false,\n        });\n      }\n      return [];\n    }\n  }\n\n  private async cacheCollectionInfo(collectionSlug: string): Promise<ICollection> {\n    const { store } = this.mApi;\n\n    const collectionInfo: ICollection =\n      (await this.mApi.emitAndAwait('get-nexus-collection', collectionSlug))[0];\n    if (!!collectionInfo?.id) {\n      store.dispatch(updateCollectionInfo(\n        collectionInfo.id.toString(), collectionInfo, Date.now()));\n      delete this.mCacheColRequests[collectionInfo.id.toString()];\n    }\n    return collectionInfo;\n  }\n\n  private updateRevisionCacheState(store: types.ThunkStore<any>,\n                                   revisionId: string,\n                                   revisionInfo: any,\n                                   now: number): void {\n    // we cache revision info and collection info separately to reduce duplication\n    // in the application state\n    store.dispatch(updateCollectionInfo(\n      revisionInfo.collection.id.toString(), revisionInfo.collection, now));\n    store.dispatch(updateRevisionInfo(revisionId, {\n      ...revisionInfo,\n      collection: {\n        id: revisionInfo.collection.id,\n        slug: revisionInfo.collection.slug,\n      },\n    }, now));\n  }\n\n  private async cacheRevisionInfo(revisionId: string,\n                                  collectionSlug: string,\n                                  revisionNumber: number)\n                                  : Promise<IRevision> {\n    const { store } = this.mApi;\n\n    if ((collectionSlug === undefined) || (revisionNumber === undefined)) {\n      const err = new Error('missing collection/revision id');\n      err['allowReport'] = false;\n      return Promise.reject(err);\n    }\n\n    const revisionInfo = (await this.mApi.emitAndAwait('get-nexus-collection-revision',\n                                                       collectionSlug, revisionNumber))[0];\n    const now = Date.now();\n\n    if (!!revisionInfo) {\n      this.updateRevisionCacheState(store, revisionId, revisionInfo, now);\n    } else {\n      store.dispatch(updateRevisionInfo(revisionId, null, now));\n    }\n    const result: IRevision = await revisionInfo;\n    delete this.mCacheRevRequests[revisionId];\n    return result ?? null;\n  }\n}\n\nexport default InfoCache;\n","/* eslint-disable */\r\nimport * as nexusApi from '@nexusmods/nexus-api';\r\nimport * as Promise from 'bluebird';\r\nimport * as path from 'path';\r\nimport { actions, log, selectors, types, util } from 'vortex-api';\r\nimport { setPendingVote } from '../actions/persistent';\r\nimport { postprocessCollection } from '../collectionInstall';\r\nimport { INSTALLING_NOTIFICATION_ID, MOD_TYPE } from '../constants';\r\nimport { ICollection } from '../types/ICollection';\r\nimport { IRevisionEx } from '../types/IRevisionEx';\r\nimport { applyPatches } from './binaryPatching';\r\nimport { readCollection } from './importCollection';\r\nimport InfoCache from './InfoCache';\r\nimport { calculateCollectionSize, getUnfulfilledNotificationId, isRelevant, modRuleId, walkPath } from './util';\r\n\r\nimport * as _ from 'lodash';\r\n\r\nexport type Step = 'prepare' | 'changelog' | 'query' | 'start' | 'disclaimer' | 'installing' | 'recommendations' | 'review';\r\n\r\nexport type UpdateCB = () => void;\r\n\r\nclass InstallDriver {\r\n  private mApi: types.IExtensionApi;\r\n  private mProfile: types.IProfile;\r\n  private mGameId: string;\r\n  private mCollection: types.IMod;\r\n  private mLastCollection: types.IMod;\r\n  private mStep: Step = 'prepare';\r\n  private mUpdateHandlers: UpdateCB[] = [];\r\n  private mInstalledMods: types.IMod[] = [];\r\n  private mDependentMods: types.IModRule[] = [];\r\n  private mInstallingMod: string;\r\n  private mInstallDone: boolean = false;\r\n  private mCollectionInfo: nexusApi.ICollection;\r\n  private mRevisionInfo: nexusApi.IRevision;\r\n  private mInfoCache: InfoCache;\r\n  private mTotalSize: number;\r\n  private mOnStop: () => void;\r\n  private mPrepare: Promise<void> = Promise.resolve();\r\n  private get requiredMods() {\r\n    return this.mDependentMods.filter(_ => _.type === 'requires');\r\n  }\r\n  private get recommendedMods() {\r\n    return this.mDependentMods.filter(_ => _.type === 'recommends');\r\n    }\r\n  private mDebounce: util.Debouncer = new util.Debouncer((collectionSlug: string, revisionNumber: number) => {\r\n    this.mApi.events.emit('analytics-track-event-with-payload', 'Collection Installation Failed', {\r\n      collection_slug: collectionSlug, \r\n      collection_revision_number: revisionNumber\r\n    });      \r\n    return null;\r\n    }, 1000);\r\n\r\n  constructor(api: types.IExtensionApi) {\r\n    this.mApi = api;\r\n\r\n    this.mInfoCache = new InfoCache(api);\r\n\r\n    api.onAsync('will-install-mod', (gameId: string, archiveId: string, modId: string) => {\r\n      const state: types.IState = api.store.getState();\r\n      const download = state.persistent.downloads.files[archiveId];\r\n      if (download !== undefined) {\r\n        this.mInstallingMod = download.localPath;\r\n      }\r\n      return Promise.resolve();\r\n    });\r\n\r\n    api.events.on('did-install-mod', (gameId: string, archiveId: string, modId: string) => {\r\n      const state: types.IState = api.store.getState();\r\n      const mod = util.getSafe(state.persistent.mods, [gameId, modId], undefined);\r\n      // verify the mod installed is actually one required by this collection\r\n      const dependent = this.mDependentMods.find(iter =>\r\n        util.testModReference(mod, iter.reference));\r\n      if ((mod !== undefined) && (dependent !== undefined)) {\r\n        if (dependent.type === 'requires') {\r\n          this.mInstalledMods.push(mod);\r\n        }\r\n        if ((this.mCollection?.installationPath !== undefined)\r\n            && (dependent.reference.description !== undefined)) {\r\n          if (dependent.type === 'requires') {\r\n            this.updateProgress(this.mProfile, this.mGameId, this.mCollection);\r\n          }\r\n          applyPatches(api, this.mCollection,\r\n                       gameId, dependent.reference.description, modId, dependent.extra?.patches);\r\n          util.batchDispatch(api.store, [\r\n            actions.setFileOverride(gameId, modId, dependent.extra?.fileOverrides),\r\n            actions.setModAttribute(gameId, modId, 'patches', dependent.extra?.patches),\r\n            actions.setModAttribute(gameId, modId, 'fileList', dependent.fileList),\r\n          ]);\r\n        }\r\n      }\r\n      this.triggerUpdate();\r\n    });\r\n\r\n    api.events.on('did-finish-download', () => {\r\n      // not checking whether the download is actually part of this collection because\r\n      // that check may be more expensive than the ui update\r\n      this.updateProgress(this.mProfile, this.mGameId, this.mCollection);\r\n    });\r\n\r\n    api.events.on(\r\n      'will-install-dependencies',\r\n      (profileId: string, modId: string, recommendations: boolean, onCancel: () => void) => {\r\n        const state = api.getState();\r\n        const profile = this.profile || selectors.profileById(state, profileId);\r\n        const gameId = this.mGameId || profile?.gameId;\r\n        if (gameId === undefined) {\r\n          // how?\r\n          return;\r\n        }\r\n        const mods = state.persistent.mods[gameId];\r\n        if ((this.mCollection === undefined)\r\n            && (mods[modId]?.type === MOD_TYPE)\r\n            && recommendations) {\r\n          // When installing optional mods, it's possible for the mCollection\r\n          //  property to be undefined - we need to ensure that the driver is\r\n          //  aware that it's installing mods that are part of the collection\r\n          //  in order for us to apply any collection mod rules to the mods themselves\r\n          //  upon successful installation.\r\n          this.mLastCollection = this.mCollection = mods[modId];\r\n          this.mStep = 'installing';\r\n        }\r\n        \r\n        const isCollectionMod = rule => util.findModByRef(rule.reference, mods)?.id === modId;\r\n\r\n        if ((this.mCollection !== undefined)\r\n            && recommendations\r\n            && (this.mCollection.rules ?? []).find(isCollectionMod)) {\r\n          onCancel();\r\n        }\r\n      });\r\n\r\n    api.events.on(\r\n      'did-install-dependencies',\r\n      (gameId: string, modId: string, recommendations: boolean) => {\r\n        this.onDidInstallDependencies(gameId, modId, recommendations);\r\n      });\r\n  }\r\n\r\n  public async prepare(func: () => Promise<void>) {\r\n    this.mPrepare = this.mPrepare.then(func);\r\n  }\r\n\r\n  public async query(profile: types.IProfile, collection: types.IMod) {\r\n    await this.mPrepare;\r\n    this.mPrepare = Promise.resolve();\r\n\r\n    if (collection?.archiveId === undefined) {\r\n      return;\r\n    }\r\n\r\n    if (!this.mInstallDone && (this.mCollection !== undefined)) {\r\n      this.mApi.sendNotification({\r\n        type: 'warning',\r\n        message: 'Already installing a collection',\r\n      });\r\n      return;\r\n    }\r\n    this.mProfile = profile;\r\n    this.mLastCollection = this.mCollection = collection;\r\n    this.mGameId = profile?.gameId ?? selectors.activeGameId(this.mApi.getState());\r\n    this.mStep = 'query';\r\n    await this.initCollectionInfo();\r\n    this.triggerUpdate();\r\n  }\r\n\r\n  public async start(profile: types.IProfile, collection: types.IMod) {\r\n    await this.mPrepare;\r\n    this.mPrepare = Promise.resolve();\r\n\r\n    if (collection?.archiveId === undefined) {\r\n      return;\r\n    }\r\n\r\n    if (!this.mInstallDone && (this.mCollection !== undefined)) {\r\n      this.mApi.sendNotification({\r\n        type: 'warning',\r\n        message: 'Already installing a collection',\r\n        displayMS: 5000,\r\n      });\r\n      log('warn', 'already installing a collection');\r\n      return;\r\n    }\r\n\r\n    this.mProfile = profile;\r\n    this.mLastCollection = this.mCollection = collection;\r\n    this.mGameId = profile?.gameId ?? selectors.activeGameId(this.mApi.getState());\r\n\r\n    this.mTotalSize = calculateCollectionSize(this.getModsEx(profile, this.mGameId, collection));\r\n\r\n    await this.startInstall();\r\n    await this.initCollectionInfo();\r\n    this.triggerUpdate();\r\n  }\r\n\r\n  public onUpdate(cb: UpdateCB) {\r\n    this.mUpdateHandlers.push(cb);\r\n  }\r\n\r\n  public get profile() {\r\n    return this.mProfile;\r\n  }\r\n\r\n  public set profile(val: types.IProfile) {\r\n    this.mProfile = val;\r\n    if (val !== undefined) {\r\n      this.mGameId = val?.gameId;\r\n    }\r\n  }\r\n\r\n  public get infoCache() {\r\n    return this.mInfoCache;\r\n  }\r\n\r\n  public get step() {\r\n    return this.mStep;\r\n  }\r\n\r\n  public get installedMods(): types.IMod[] {\r\n    return this.mInstalledMods;\r\n  }\r\n\r\n  public get numRequired(): number {\r\n    return this.requiredMods.length;\r\n  }\r\n\r\n  public get installingMod(): string {\r\n    return this.mInstallingMod;\r\n  }\r\n\r\n  public get collection(): types.IMod {\r\n    return this.mCollection;\r\n  }\r\n\r\n  /**\r\n   * return last collection that was installed. Only difference to \"collection\" is that this\r\n   * does not get reset after the installation completes but please be aware that there is\r\n   * no guarantee this collection is still installed\r\n   */\r\n  public get lastCollection(): types.IMod {\r\n    return this.mLastCollection;\r\n  }\r\n\r\n  public get collectionId(): string {\r\n    const state: types.IState = this.mApi.store.getState();\r\n    const modInfo = (this.mCollection !== undefined)\r\n      ? state.persistent.downloads.files[this.mCollection.archiveId]?.modInfo\r\n      : undefined;\r\n    const nexusInfo = modInfo?.nexus;\r\n\r\n    return nexusInfo?.ids?.collectionId || modInfo?.ids?.collectionId;\r\n  }\r\n\r\n  public get collectionSlug(): string {\r\n    const state: types.IState = this.mApi.store.getState();\r\n    const modInfo = (this.mCollection !== undefined)\r\n      ? state.persistent.downloads.files[this.mCollection.archiveId]?.modInfo\r\n      : undefined;\r\n    const nexusInfo = modInfo?.nexus;\r\n\r\n    return nexusInfo?.ids?.collectionSlug || modInfo?.ids?.collectionSlug;\r\n  }\r\n\r\n  public get revisionNumber(): number {\r\n    const state: types.IState = this.mApi.store.getState();\r\n    const modInfo = (this.mCollection !== undefined)\r\n      ? state.persistent.downloads.files[this.mCollection.archiveId]?.modInfo\r\n      : undefined;\r\n    const nexusInfo = modInfo?.nexus;\r\n\r\n    return nexusInfo?.ids?.revisionNumber || modInfo?.ids?.revisionNumber;\r\n  }\r\n\r\n  public get revisionId(): string {\r\n    const state: types.IState = this.mApi.store.getState();\r\n    const modInfo = (this.mCollection !== undefined)\r\n      ? state.persistent.downloads.files[this.mCollection.archiveId]?.modInfo\r\n      : undefined;\r\n    const nexusInfo = modInfo?.nexus;\r\n\r\n    return nexusInfo?.ids?.revisionId || modInfo?.ids?.revisionId;\r\n  }\r\n\r\n  public get collectionInfo(): nexusApi.ICollection {\r\n    return this.mCollectionInfo;\r\n  }\r\n\r\n  public get revisionInfo(): IRevisionEx {\r\n    return this.mRevisionInfo;\r\n  }\r\n\r\n  public get installDone(): boolean {\r\n    return this.mInstallDone;\r\n  }\r\n\r\n  public cancel() {\r\n    this.onStop();\r\n\r\n    this.triggerUpdate();\r\n  }\r\n\r\n  public installRecommended() {\r\n    this.mApi.emitAndAwait('install-from-dependencies',\r\n                           this.mCollection.id, this.mCollection.rules, true);\r\n    this.mStep = 'recommendations';\r\n    this.triggerUpdate();\r\n  }\r\n\r\n  public async continue() {\r\n    if (this.canContinue() && (this.mCollection?.archiveId !== undefined)) {\r\n      await this.initCollectionInfo();\r\n\r\n      const steps = {\r\n        query: this.startInstall,\r\n        start: this.begin,\r\n        disclaimer: this.closeDisclaimers,\r\n        installing: this.finishInstalling,\r\n        recommendations: this.finishInstalling,\r\n        review: this.close,\r\n      };\r\n      const res = await steps[this.mStep]?.();\r\n      if (res !== false) {\r\n        this.triggerUpdate();\r\n      }\r\n    }\r\n  }\r\n\r\n  public canContinue() {\r\n    if (this.mCollection === undefined) {\r\n      return false;\r\n    }\r\n    if (this.mStep === 'installing') {\r\n      return this.mInstallDone;\r\n    } else if (this.mStep === 'disclaimer') {\r\n      return (this.mInstalledMods.length > 0) || this.mInstallDone;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  public canClose() {\r\n    return ['start'].indexOf(this.mStep) !== -1;\r\n  }\r\n\r\n  public canHide() {\r\n    return ['disclaimer', 'installing'].indexOf(this.mStep) !== -1;\r\n  }\r\n\r\n  private async initCollectionInfo() {\r\n    if (this.mCollection?.archiveId === undefined) {\r\n      return;\r\n    }\r\n    const slug = this.collectionSlug;\r\n    const state: types.IState = this.mApi.store.getState();\r\n    const modInfo = state.persistent.downloads.files[this.mCollection.archiveId]?.modInfo;\r\n    const nexusInfo = modInfo?.nexus;\r\n    this.mCollectionInfo = nexusInfo?.collectionInfo\r\n      ?? await this.mInfoCache.getCollectionInfo(slug)\r\n      // this last fallback is for the weird case where we have revision info cached but\r\n      // not collection info and fetching is not possible because it's been deleted from the\r\n      // site\r\n      // Not sure if/why this would happen on live, it did occur during testing because the\r\n      // stuff was getting deleted from the DB directly\r\n      ?? this.mRevisionInfo?.collection;\r\n  }\r\n\r\n  private async onDidInstallDependencies(gameId: string,\r\n                                         modId: string,\r\n                                         recommendations: boolean) {\r\n    const mods = this.mApi.getState().persistent.mods[gameId];\r\n\r\n    if (mods[modId]?.type === MOD_TYPE) {\r\n      log('info', 'did install dependencies', { gameId, modId });\r\n    }\r\n\r\n    if ((this.mCollection !== undefined) && (modId === this.mCollection.id)) {\r\n      // update the stored collection because it might have been updated as part of the\r\n      // dependency installation\r\n      this.mLastCollection = this.mCollection = mods[modId];\r\n\r\n      if (this.mCollection !== undefined) {\r\n        if (!recommendations) {\r\n          const filter = rule =>\r\n            (rule.type === 'requires')\r\n            && (rule['ignored'] !== true)\r\n            && (util.findModByRef(rule.reference, mods) === undefined);\r\n\r\n          const incomplete = (this.mCollection.rules ?? []).find(filter);\r\n            if (incomplete === undefined) {\r\n            await this.initCollectionInfo();\r\n            this.mStep = 'review';\r\n          } else {\r\n            this.mInstallDone = true;\r\n            this.mInstallingMod = undefined;\r\n          }\r\n          this.mApi.dismissNotification(INSTALLING_NOTIFICATION_ID + modId);\r\n          this.triggerUpdate();\r\n        } else {\r\n          // We finished installing optional mods for the current collection - reset everything.\r\n          const filter = rule =>\r\n            (['requires', 'recommends'].includes(rule.type))\r\n            && (rule['ignored'] !== true)\r\n            && (util.findModByRef(rule.reference, mods) === undefined);\r\n\r\n          const incomplete = (this.mCollection.rules ?? []).find(filter);\r\n\r\n          this.mApi.dismissNotification(INSTALLING_NOTIFICATION_ID + modId);\r\n\r\n          if (incomplete === undefined) {\r\n            // revisit review screen\r\n            await this.initCollectionInfo();\r\n            this.mStep = 'review';\r\n          } else {\r\n            this.onStop();\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    const stagingPath = selectors.installPathForGame(this.mApi.getState(), gameId);\r\n    const mod = mods[modId];\r\n    if ((mod !== undefined) && (mod.type === MOD_TYPE)) {\r\n      try {\r\n        const collectionInfo: ICollection =\r\n          await readCollection(\r\n            this.mApi,\r\n            path.join(stagingPath, mod.installationPath, 'collection.json'));\r\n        await postprocessCollection(this.mApi, gameId, mod, collectionInfo, mods);\r\n        this.mApi.events.emit('analytics-track-event-with-payload', 'Collection Installation Completed', {\r\n          collection_slug: this.collectionSlug, \r\n          collection_revision_number: this.revisionNumber\r\n        });\r\n      } catch (err) {\r\n        log('info', 'Failed to apply mod rules from collection. This is normal if this is the '\r\n          + 'platform where the collection has been created.');\r\n        this.mDebounce.schedule(undefined, this.collectionSlug, this.revisionNumber);\r\n      }\r\n    }\r\n  }\r\n\r\n  private onStop() {\r\n    if (this.mCollection !== undefined) {\r\n      this.mApi.dismissNotification(INSTALLING_NOTIFICATION_ID + this.mCollection.id);\r\n    }\r\n    this.mCollection = undefined;\r\n    this.mProfile = undefined;\r\n    this.mGameId = undefined;\r\n    this.mInstalledMods = [];\r\n    this.mStep = 'prepare';\r\n    this.mOnStop?.();\r\n  }\r\n\r\n  private getModsEx(profile: types.IProfile, gameId: string, collection: types.IMod)\r\n      : { [id: string]: types.IMod & { collectionRule: types.IModRule } } {\r\n    if (profile === undefined) {\r\n      profile = this.mProfile;\r\n    }\r\n    if (profile === undefined) {\r\n      return {};\r\n    }\r\n\r\n    const mods = this.mApi.getState().persistent.mods[gameId];\r\n\r\n    if (mods === undefined) {\r\n      log('error', 'no mods for game', { gameId });\r\n      return {};\r\n    }\r\n\r\n    return (collection.rules ?? []).reduce((prev, rule) => {\r\n      if (!['requires', 'recommends'].includes(rule.type)) {\r\n        return prev;\r\n      }\r\n\r\n      const mod = util.findModByRef(rule.reference, mods);\r\n      prev[modRuleId(rule)] = { ...mod, collectionRule: rule };\r\n\r\n      return prev;\r\n    }, {});\r\n  }\r\n\r\n  private startInstall = async () => {\r\n    // suppress plugins-changed event to avoid constantly running expensive callbacks\r\n    // until onStop gets called\r\n    this.mApi.ext.withSuppressedTests?.(['plugins-changed', 'settings-changed', 'mod-activated', 'mod-installed'], () =>\r\n      new Promise(resolve => {\r\n        this.mOnStop = () => {\r\n          resolve(undefined);\r\n          this.mOnStop = undefined;\r\n        };\r\n      }));\r\n\r\n    return this.startImpl();\r\n  }\r\n\r\n    private startImpl = async () => {\r\n\r\n    this.mApi.events.emit('analytics-track-event-with-payload', 'Collection Installation Started', {\r\n      collection_slug: this.collectionSlug, \r\n      collection_revision_number: this.revisionNumber\r\n    });\r\n\r\n    if ((this.mCollection?.archiveId === undefined) || (this.mProfile === undefined)) {\r\n      return false;\r\n    }\r\n\r\n    this.mInstalledMods = [];\r\n    this.mInstallingMod = undefined;\r\n    this.mInstallDone = false;\r\n    this.mStep = 'start';\r\n\r\n    const collection = this.mCollection;\r\n    const profile = this.mProfile;\r\n    const gameId = this.mGameId;\r\n\r\n    const state: types.IState = this.mApi.store.getState();\r\n    const mods = state.persistent.mods[gameId] ?? {};\r\n    const modInfo = state.persistent.downloads.files[collection.archiveId]?.modInfo;\r\n    const nexusInfo = modInfo?.nexus;\r\n\r\n    const slug = this.collectionSlug;\r\n    const revisionId = this.revisionId;\r\n\r\n    if (revisionId !== undefined) {\r\n      try {\r\n        this.mRevisionInfo = nexusInfo?.revisionInfo\r\n          ?? await this.mInfoCache.getRevisionInfo(revisionId, slug, this.revisionNumber);\r\n      } catch (err) {\r\n        log('error', 'failed to get remote info for revision', {\r\n          revisionId, slug, revisionNumber: this.revisionNumber, error: err.message });\r\n      }\r\n    }\r\n\r\n    const { userInfo } = state.persistent['nexus'] ?? {};\r\n    // don't request a vote on own collection\r\n    if (this.mRevisionInfo?.collection?.user?.memberId !== userInfo?.userId) {\r\n      this.mApi.store.dispatch(\r\n        setPendingVote(revisionId, slug, this.revisionNumber, Date.now()));\r\n    }\r\n\r\n    const gameMode = gameId;\r\n    const currentgame = util.getGame(gameMode);\r\n    const discovery = selectors.discoveryByGame(state, gameMode);\r\n    const gameVersion = await currentgame.getInstalledVersion(discovery);\r\n    const gvMatch = gv => gv.reference === gameVersion;\r\n    const revGameVersions = this.mRevisionInfo?.gameVersions ?? [];\r\n    if ((revGameVersions.length ?? 0 !== 0)\r\n        && (revGameVersions.find(gvMatch) === undefined)) {\r\n      const choice = await this.mApi.showDialog('question', 'Game version mismatch', {\r\n        bbcode: 'The version of the game you have installed is different to the one the curator used when creating this collection.'\r\n            + '[br][/br][br][/br]'\r\n            + 'Your game version: [style=dialog-success-text]{{actual}}[/style][br][/br]'\r\n            + 'Recommended game version: [style=dialog-danger-text]{{intended}}[/style]'            \r\n            + '[br][/br][br][/br]'\r\n            + 'If you choose to continue, some or all of the mods included in the collection may not work properly for you. This will '\r\n            + 'require manual troubleshooting to correct. For users who are not familiar with modding, we do not recommend continuing with installation.'\r\n            + '[br][/br][br][/br]'\r\n            + 'You can also check the description, comments and bug reports on the Collection page to see if others have been successful'\r\n            + 'while playing with the game version you have installed or to request advice from the curator.',\r\n        parameters: {\r\n          actual: gameVersion,\r\n          intended: revGameVersions.map(gv => gv.reference).join(' or '),\r\n        },\r\n      }, [\r\n        { label: 'Cancel' },\r\n        { label: 'Continue' },\r\n      ]);\r\n      if (choice.action === 'Cancel') {\r\n        this.mInstallDone = true;\r\n        return false;\r\n      }\r\n    }\r\n\r\n    this.mApi.events.emit('will-install-collection', gameId, collection.id);\r\n\r\n    this.mApi.events.emit('view-collection', collection.id);\r\n\r\n    this.updateProgress(profile, gameId, collection);\r\n\r\n    this.augmentRules(gameId, collection);\r\n\r\n    this.mApi.dismissNotification(getUnfulfilledNotificationId(collection.id));\r\n    this.mApi.store.dispatch(actions.setModEnabled(profile.id, collection.id, true));\r\n\r\n    const required = (collection?.rules ?? [])\r\n      .filter(rule => ['requires', 'recommends'].includes(rule.type));\r\n    const dependencies: types.IModRule[] = required\r\n      .reduce((accum, rule) => {\r\n        const modRef: any = {\r\n          ...rule.reference,\r\n          patches: rule?.extra?.patches ? { ...rule.extra.patches } : undefined,\r\n          fileList: rule?.fileList,\r\n        }\r\n        const mod = util.findModByRef(modRef, mods);\r\n        if (mod === undefined) {\r\n          accum.push(rule);\r\n        }\r\n        return accum;\r\n      }, []);\r\n    this.mDependentMods = dependencies;\r\n    // log('debug', 'dependent mods', JSON.stringify(dependencies));\r\n\r\n    if (this.requiredMods.length === 0) {\r\n      this.mInstallDone = false;\r\n    }\r\n\r\n    log('info', 'starting install of collection', {\r\n      totalMods: required.length,\r\n      missing: this.requiredMods.length,\r\n    });\r\n  }\r\n\r\n  private matchRepo(rule: types.IModRule, ref: nexusApi.IModFile) {\r\n    if (ref === null) {\r\n      return false;\r\n    }\r\n\r\n    const modId = rule.reference.repo?.modId;\r\n    const fileId = rule.reference.repo?.fileId;\r\n\r\n    if ((modId === undefined) || (fileId === undefined)\r\n        || !ref.modId || !ref.fileId) {\r\n      return false;\r\n    }\r\n\r\n    return modId.toString() === ref.modId.toString()\r\n      && fileId.toString() === ref.fileId.toString();\r\n  }\r\n\r\n  private augmentRules(gameId: string, collection: types.IMod) {\r\n    util.batchDispatch(this.mApi.store, (collection.rules ?? []).map(rule => {\r\n      if (rule.reference.repo === undefined) {\r\n        return undefined;\r\n      }\r\n      const revMod = (this.mRevisionInfo?.modFiles ?? []).find(\r\n        iter => this.matchRepo(rule, iter.file));\r\n      if (revMod?.file !== undefined) {\r\n        const newRule = util.setSafe(rule, ['extra', 'fileName'], revMod.file.uri);\r\n        return actions.addModRule(gameId, collection.id, newRule);\r\n      }\r\n    })\r\n    .filter(rule => rule !== undefined));\r\n  }\r\n\r\n  private begin = () => {\r\n    if ((this.mCollection === undefined) || (this.mProfile?.id === undefined)) {\r\n      return;\r\n    }\r\n\r\n    this.mApi.events.emit('install-dependencies',\r\n      this.mProfile.id, this.mGameId, [this.mCollection.id], true);\r\n    // skipping disclaimer for now\r\n    this.mStep = 'installing';\r\n  }\r\n\r\n  private closeDisclaimers = () => {\r\n    this.mStep = 'installing';\r\n  }\r\n\r\n  private finishInstalling = () => {\r\n    this.mStep = 'review';\r\n  }\r\n\r\n  private close = () => {\r\n    if ((this.mGameId !== undefined) && (this.mCollection !== undefined)) {\r\n      this.mApi.events.emit('did-install-collection', this.mGameId, this.mCollection.id);\r\n    }\r\n    this.mCollection = undefined;\r\n    this.mInstallDone = true;\r\n    this.triggerUpdate();\r\n  }\r\n\r\n  private triggerUpdate() {\r\n    this.mUpdateHandlers.forEach(cb => {\r\n      cb();\r\n    });\r\n  }\r\n\r\n  private installProgress(profile: types.IProfile, gameId: string, collection: types.IMod): number {\r\n    const mods = this.getModsEx(profile, gameId, collection);\r\n\r\n    const downloads = this.mApi.getState().persistent.downloads.files;\r\n\r\n    const downloadProgress = Object.values(mods).reduce((prev, mod) => {\r\n      let size = 0;\r\n      if ((mod.state === 'downloading') || (mod.state === null)) {\r\n        const download = downloads[mod.archiveId];\r\n        size += download?.received || 0;\r\n      } else {\r\n        size += mod.attributes?.fileSize || 0;\r\n      }\r\n      return prev + size;\r\n    }, 0);\r\n\r\n    const installedMods = Object.values(mods).filter(mod => mod.state === 'installed');\r\n    const totalMods = Object.values(mods).filter(isRelevant);\r\n\r\n    const dlPerc = downloadProgress / this.mTotalSize;\r\n    const instPerc = installedMods.length / totalMods.length;\r\n\r\n    return (dlPerc + instPerc) * 50.0;\r\n  }\r\n\r\n  private updateProgress(profile: types.IProfile, gameId: string, collection: types.IMod) {\r\n    if (collection === undefined) {\r\n      return;\r\n    }\r\n\r\n    if (this.mTotalSize === undefined) {\r\n      this.mTotalSize = calculateCollectionSize(this.getModsEx(profile, gameId, collection));\r\n    }\r\n\r\n    this.mApi.sendNotification({\r\n      id: INSTALLING_NOTIFICATION_ID + collection.id,\r\n      type: 'activity',\r\n      title: 'Installing Collection',\r\n      message: util.renderModName(collection),\r\n      progress: this.installProgress(profile, gameId, collection),\r\n      actions: [\r\n        {\r\n          title: 'Show',\r\n          action: () => {\r\n            this.mApi.events.emit('view-collection', collection.id);\r\n          },\r\n        },\r\n      ],\r\n    });\r\n  }\r\n}\r\n\r\nexport default InstallDriver;\r\n","import * as bsdiffT from 'bsdiff-node';\nimport * as crc32 from 'crc-32';\nimport * as path from 'path';\nimport { fs, log, selectors, types, util } from 'vortex-api';\nimport { MAX_PATCH_SIZE, PATCHES_PATH, PATCH_OVERHEAD } from '../constants';\n\nconst bsdiff = util.lazyRequire<typeof bsdiffT>(() => require('bsdiff-node'));\n\nfunction crcFromBuf(data: Buffer) {\n  // >>> 0 converts signed to unsigned\n  return (crc32.buf(data) >>> 0).toString(16).toUpperCase().padStart(8, '0');\n}\n\nasync function validatePatch(srcFilePath: string, patchFilePath: string) {\n  const srcStats: fs.Stats = await fs.statAsync(srcFilePath);\n  const patchStats: fs.Stats = await fs.statAsync(patchFilePath);\n  if ((patchStats.size - PATCH_OVERHEAD) > (srcStats.size * MAX_PATCH_SIZE)) {\n    throw new util.DataInvalid('patch too large');\n  }\n}\n\nconst queue = util.makeQueue();\n\nexport async function scanForDiffs(api: types.IExtensionApi, gameId: string,\n                                   modId: string, destPath: string,\n                                   onProgress: (percent: number, text: string) => void)\n                                   : Promise<{ [filePath: string]: string }> {\n  const state = api.getState();\n  const mod = state.persistent.mods[gameId][modId];\n\n  const stagingPath = selectors.installPathForGame(state, gameId);\n\n  const localPath = path.join(stagingPath, mod.installationPath);\n  const archive = state.persistent.downloads.files[mod.archiveId];\n\n  if (archive === undefined) {\n    throw new util.ProcessCanceled('Archive not found');\n  }\n\n  const choices = mod.attributes?.installerChoices;\n\n  return queue(() => new Promise<{ [filePath: string]: string }>((resolve, reject) => {\n    api.events.emit('simulate-installer', gameId, mod.archiveId, { choices },\n      async (instRes: types.IInstallResult, tempPath: string) => {\n      try {\n        const dlPath = selectors.downloadPathForGame(state, archive.game[0]);\n        const archivePath = path.join(dlPath, archive.localPath);\n\n        const sourceChecksums: { [fileName: string]: string } = {};\n        const szip = new util.SevenZip();\n        await szip.list(archivePath, undefined, async entries => {\n            for (const entry of entries) {\n              if (entry.attr !== 'D') {\n                try {\n                  sourceChecksums[entry.name] = entry['crc'].toUpperCase();\n                } catch (err) {\n                  api.showErrorNotification('Failed to determine checksum for file', err, {\n                    message: entry.name,\n                  });\n                }\n              }\n            }\n          });\n\n        const result: { [filePath: string]: string } = {};\n\n        for (const file of instRes.instructions.filter(instr => instr.type === 'copy')) {\n          const srcCRC = sourceChecksums[file.source];\n          const dstFilePath = path.join(localPath, file.destination);\n          const dat = await fs.readFileAsync(dstFilePath);\n          const dstCRC = crcFromBuf(dat);\n          if (srcCRC !== dstCRC) {\n            onProgress(undefined, api.translate('Creating patch for {{fileName}}', { replace: {\n              fileName: path.basename(file.source),\n            } }));\n            log('debug', 'found modified file', { filePath: file.source, srcCRC, dstCRC });\n            const srcFilePath = path.join(tempPath, file.source);\n            const patchPath = path.join(destPath, file.destination + '.diff');\n            await fs.ensureDirWritableAsync(path.dirname(patchPath));\n            await bsdiff.diff(srcFilePath, dstFilePath, patchPath, progress => {\n              // nop - currently not showing progress\n            });\n            try {\n              await validatePatch(srcFilePath, patchPath);\n              result[file.destination] = srcCRC;\n            } catch (err) {\n              await fs.removeAsync(patchPath);\n\n              const res: types.IDialogResult = await api.showDialog('error',\n                'Can\\'t save local edits', {\n                text: 'The local modifications to file \"{{fileName}}\" can not be included in '\n                    + 'the collection.\\n'\n                    + 'We don\\'t allow edits that exceed a certain percentage '\n                    + 'of the original file size.\\n'\n                    + 'If you continue anyway this file will be installed unmodified for users.',\n                parameters: {\n                  fileName: file.source,\n                },\n              }, [\n                { label: 'Cancel' },\n                { label: 'Continue' },\n              ]);\n\n              if (res.action === 'Cancel') {\n                err['mayIgnore'] = false;\n                throw err;\n              }\n            }\n            log('debug', 'patch created at', patchPath);\n          }\n        }\n        resolve(result);\n      } catch (err) {\n        reject(err);\n      }\n    });\n  }), false);\n}\n\nexport async function applyPatches(api: types.IExtensionApi,\n                                   collection: types.IMod, gameId: string,\n                                   modName: string, modId: string,\n                                   patches: { [filePath: string]: string }) {\n\n  const state = api.getState();\n  const installPath = selectors.installPathForGame(state, gameId);\n  const mod = state.persistent.mods[gameId][modId];\n  const modPath = path.join(installPath, mod.installationPath);\n  const patchesPath = path.join(installPath, collection.installationPath, PATCHES_PATH, modName);\n\n  for (const filePath of Object.keys(patches ?? {})) {\n    try {\n      const srcPath = path.join(modPath, filePath);\n      const diffPath = path.join(patchesPath, filePath) + '.diff';\n      // if the patch is missing, trigger the error here because bsdiff would produce a non-standard\n      // string exception\n      await fs.statAsync(diffPath);\n      const srcDat = await fs.readFileAsync(srcPath);\n      const srcCRC = crcFromBuf(srcDat);\n      if (srcCRC === patches[filePath]) {\n        await bsdiff.patch(srcPath, srcPath + '.patched', diffPath);\n        await fs.removeAsync(srcPath);\n        await fs.renameAsync(srcPath + '.patched', srcPath);\n        log('info', 'patched', srcPath);\n      } else {\n        log('warn', 'patch not applied because reference CRC differs', { filePath, srcCRC });\n      }\n    } catch (err) {\n      err['Collection'] = util.renderModName(collection);\n      api.showErrorNotification('failed to patch', err, {\n        message: filePath,\n      });\n    }\n  }\n}\n","import * as crc32 from 'crc-32';\nimport * as path from 'path';\nimport { fs, log, selectors, types, util } from 'vortex-api';\n\nimport { ReplicateHashMismatchError } from '../util/errors';\n\nexport async function matchChecksums(api: types.IExtensionApi,\n                               gameId: string,\n                               modId: string): Promise<void> {\n  const state = api.getState();\n  const mod = state.persistent.mods[gameId][modId];\n  if (!mod?.archiveId) {\n    throw new util.ProcessCanceled('Mod not found');\n  }\n\n  const stagingPath = selectors.installPathForGame(state, gameId);\n\n  const localPath = path.join(stagingPath, mod.installationPath);\n  const archive = state.persistent.downloads.files[mod.archiveId!];\n\n  if (archive === undefined) {\n    throw new util.ProcessCanceled('Archive not found');\n  }\n\n  const dlPath = selectors.downloadPathForGame(state, archive.game[0]);\n  const archivePath = path.join(dlPath, archive.localPath!);\n\n  const sourceChecksums: Set<string> = new Set();\n  const szip = new util.SevenZip();\n  await szip.list(archivePath, undefined, async entries => {\n    for (const entry of entries) {\n      if (entry.attr !== 'D') {\n        try {\n          if (!!entry['crc']) {\n            sourceChecksums.add(entry['crc'].toUpperCase());\n          }\n        } catch (err) {\n          api.showErrorNotification!('Failed to determine checksum for file', err, {\n            message: entry.name,\n          });\n        }\n      }\n    }\n  });\n\n  let entries: string[] = [];\n  await util.walk(localPath, async input => {\n    entries = [].concat(entries, input);\n  }, {});\n\n  const localChecksums: Set<string> = new Set();\n  const computeCRC32Stream = (filePath: string): Promise<string> => {\n    return new Promise((resolve, reject) => {\n      const stream = fs.createReadStream(filePath);\n      let crc = 0;\n      stream.on('data', (chunk: Buffer) => {\n        crc = crc32.buf(chunk, crc);\n      });\n      stream.on('end', () => {\n        // >>> 0 converts signed to unsigned\n        resolve((crc >>> 0).toString(16).toUpperCase().padStart(8, '0'));\n      });\n      stream.on('error', (err: Error) => {\n        reject(err);\n      });\n    });\n  };\n\n  for (const entry of entries) {\n    const isDirectory = (await fs.statAsync(entry)).isDirectory();\n    if (isDirectory) {\n      continue;\n    }\n    const crc = await computeCRC32Stream(entry);\n    localChecksums.add(crc);\n  }\n\n  const missingChecksums: string[] = [];\n  for (const crc of localChecksums) {\n    if (!sourceChecksums.has(crc)) {\n      missingChecksums.push(crc);\n    }\n  }\n\n  if (missingChecksums.length > 0) {\n    throw new ReplicateHashMismatchError();\n  }\n}\n","import { ICollectionConfig, IConfigGeneratorProps, IConfigParserProps } from '../../types/ICollectionConfig';\nimport { util } from 'vortex-api';\n\nconst configDefaults: ICollectionConfig = {\n  recommendNewProfile: false,\n}\n\nexport async function generateConfig(props: IConfigGeneratorProps): Promise<ICollectionConfig> {\n  const { collectionMod } = props;\n  const config: ICollectionConfig = util.getSafe(collectionMod, ['attributes', 'collection', 'collectionConfig'], configDefaults);\n  return {\n    ...config,\n  }\n}\n\nexport async function parseConfig(props: IConfigParserProps): Promise<ICollectionConfig> {\n  const { collection } = props;\n  const config: ICollectionConfig = util.getSafe(collection, ['collectionConfig'], configDefaults);\n  return config;\n}","import * as Redux from 'redux';\nimport { actions, types, util } from 'vortex-api';\n\nfunction applyDefaultInstallMode(prev: { [attrId: string]: any }, mod: types.IMod) {\n  if (prev?.installMode?.[mod.id] === undefined) {\n    const { installerChoices } = mod?.attributes ?? {};\n    if ((installerChoices?.type === 'fomod') && (installerChoices?.options?.length > 0)) {\n      prev = util.setSafe(prev, ['installMode', mod.id], 'choices');\n    }\n  }\n\n  return prev;\n}\n\nfunction applyDefaultSource(prev: { [attrId: string]: any }, mod: types.IMod) {\n  if (prev?.source?.[mod.id] === undefined) {\n    if (mod?.attributes?.source === 'website') {\n      prev = util.setSafe(prev, ['source', mod.id], {\n        type: 'browse',\n        url: mod?.attributes?.url,\n      });\n    }\n  }\n\n  return prev;\n}\n\n/**\n * updates collection attributes to set defaults for all attributes that have nothing set yet\n */\nexport function genDefaultsAction(api: types.IExtensionApi,\n                                  collectionId: string,\n                                  mods: types.IMod[],\n                                  gameId: string): Redux.Action {\n\n  if (mods.length === 0) {\n    // No mods, no point in continuing.\n    return undefined;\n  }\n  const state = api.getState();\n  const collection = util.getSafe(state, ['persistent', 'mods', gameId, collectionId], undefined);\n  if (collection === undefined) {\n    const error = new util.ProcessCanceled('Unable to find collection mod',\n      { collectionId: collection.id });\n    api.showErrorNotification('Failed to ascertain default install mode', error);\n    return undefined;\n  }\n\n  const attr = util.getSafe(collection.attributes, ['collection'], {});\n  const resAttr = mods.reduce((prev, mod) => {\n    prev = applyDefaultInstallMode(prev, mod);\n    prev = applyDefaultSource(prev, mod);\n\n    return prev;\n  }, attr);\n\n  return actions.setModAttribute(gameId, collection.id, 'collection', resAttr);\n}\n","export class ReplicateHashMismatchError extends Error {\n  mayIgnore: boolean = false;\n  affectedFiles: string[];\n  constructor() {\n    super('Replicate install mode can only work if the checksums of the installed files match those in the archive. Please try to reinstall the mod or use binary patching instead.');\n    this.name = 'ReplicateHashMismatchError';\n    this.mayIgnore = false;\n  }\n}","import { types } from 'vortex-api';\nimport { ICollection } from '../types/ICollection';\nimport { IExtendedInterfaceProps } from '../types/IExtendedInterfaceProps';\n\nexport interface IExtensionFeature {\n  id: string;\n  generate: (gameId: string, includedMods: string[], mod: types.IMod) => Promise<any>;\n  parse: (gameId: string, collection: ICollection, mod: types.IMod) => Promise<void>;\n  clone: (gameId: string, collection: ICollection,\n          from: types.IMod, to: types.IMod) => Promise<void>;\n  title: (t: types.TFunction) => string;\n  condition?: (state: types.IState, gameId: string) => boolean;\n  editComponent?: React.ComponentType<IExtendedInterfaceProps>;\n}\n\nconst features: IExtensionFeature[] = [];\n\nexport function addExtension(feature: IExtensionFeature) {\n  features.push(feature);\n}\n\nexport function findExtensions(state: types.IState, gameId: string): IExtensionFeature[] {\n  return features.filter(iter =>\n    (iter.condition === undefined) || iter.condition(state, gameId));\n}\n","import * as _ from 'lodash';\nimport { types, util } from 'vortex-api';\n\nexport function testDownloadReference(download: types.IDownload,\n                                      reference: types.IReference)\n                                      : boolean {\n  if (download === undefined) {\n    return false;\n  }\n\n  return util.testModReference((util as any).lookupFromDownload(download), reference);\n}\n","import * as path from 'path';\nimport React = require('react');\nimport { ControlLabel, ListGroup, ListGroupItem, Panel } from 'react-bootstrap';\nimport { useSelector, useStore } from 'react-redux';\nimport { fs, log, selectors, Spinner, tooltip, types, util } from 'vortex-api';\nimport { ICollection } from '../../types/ICollection';\nimport { IExtendedInterfaceProps } from '../../types/IExtendedInterfaceProps';\n\ninterface IGamebryoLO {\n  name: string;\n  enabled: boolean;\n  loadOrder: number;\n}\n\nfunction getEnabledPlugins(state: types.IState,\n                           plugins: string[])\n                           : Array<{ name: string, enabled: boolean }> {\n  const gamebryoLO: { [id: string]: IGamebryoLO } = state['loadOrder'];\n  return plugins.map(pluginName => ({\n    ...gamebryoLO[pluginName.toLowerCase()],\n    name: pluginName,\n  }))\n    .filter(lo => (lo !== undefined) && (lo.name !== undefined) && (lo.enabled === true))\n    .sort((lhs, rhs) => lhs.loadOrder - rhs.loadOrder)\n    .map(lo => ({ name: lo.name, enabled: lo.enabled }));\n}\n\ninterface IUserlistEntry {\n  name: string;\n  group?: string;\n  after?: string[];\n}\n\ninterface IGamebryoRules {\n  plugins: IUserlistEntry[];\n  groups?: IUserlistEntry[];\n}\n\nfunction extractPluginRules(state: types.IState, plugins: string[]): IGamebryoRules {\n  const installedPlugins: Set<string> = new Set(plugins.map(name => name.toLowerCase()));\n  const customisedPlugins =\n    state['userlist'].plugins.filter((plug: IUserlistEntry) =>\n      installedPlugins.has(plug.name.toLowerCase())\n      && ((plug.after !== undefined) || (plug.group !== undefined)));\n\n  // TODO this may be a bit overly simplified.\n  // we include the rules on all plugins currently enabled but this may include plugins that\n  // aren't included in the pack\n  return {\n    plugins: customisedPlugins,\n    groups: state['userlist'].groups,\n  };\n}\n\nexport interface ICollectionGamebryo {\n  plugins: Array<{ name: string, enabled?: boolean }>;\n  pluginRules: IGamebryoRules;\n}\n\nasync function getIncludedPlugins(gameId: string,\n                                  stagingPath: string,\n                                  mods: { [modId: string]: types.IMod },\n                                  modIds: string[])\n                                  : Promise<string[]> {\n  const extensions = ['fallout4', 'skyrimse'].includes(gameId)\n    ? new Set(['.esp', '.esm', '.esl'])\n    : new Set(['.esp', '.esm']);\n\n  const includedPlugins: string[] = [];\n\n  await Promise.all(modIds.map(async modId => {\n    if (mods[modId] !== undefined) {\n      try {\n        const files = await fs.readdirAsync(path.join(stagingPath, mods[modId].installationPath));\n        const plugins = files.filter(fileName =>\n          extensions.has(path.extname(fileName).toLowerCase()));\n        includedPlugins.push(...plugins);\n      } catch (err) {\n        // failure to read the mod staging folder probably means something changed in parallel,\n        // could be the user removing the directory or something.\n        // Not really a point reporting this from this extension, if the files are gone the mod\n        // contains no plugins, simple as that\n        log('warn', 'failed to read plugins included in mod', err.message);\n      }\n    }\n  }));\n\n  return includedPlugins;\n}\n\nexport async function generate(state: types.IState,\n                               gameId: string,\n                               stagingPath: string,\n                               modIds: string[],\n                               mods: { [modId: string]: types.IMod })\n                               : Promise<ICollectionGamebryo> {\n  const includedPlugins: string[] = await getIncludedPlugins(gameId, stagingPath, mods, modIds);\n\n  return {\n    plugins: getEnabledPlugins(state, includedPlugins),\n    pluginRules: extractPluginRules(state, includedPlugins),\n  };\n}\n\nfunction toLootType(type: string): string {\n  switch (type) {\n    case 'requires': return 'req';\n    case 'incompatible': return 'inc';\n    default: return 'after';\n  }\n}\n\nfunction refName(iter: string | { name: string }): string {\n  if (typeof(iter) === 'string') {\n    return iter;\n  } else {\n    return iter.name;\n  }\n}\n\nexport async function parser(api: types.IExtensionApi,\n                             gameId: string,\n                             collection: ICollection,\n                             collectionMod: types.IMod) {\n  const state: types.IState = api.getState();\n\n  if ((state as any).userlist === undefined) {\n    // may be that the plugin extension is disabled.\n    // if so, that may be intentional so can't report an error.\n    return;\n  }\n\n  const mods = state.persistent.mods[gameId];\n\n  // set up groups and their rules\n  util.batchDispatch(api.store, (collection.pluginRules.groups ?? []).reduce((prev, group) => {\n    if ((state as any).userlist.groups[group.name] === undefined) {\n      prev.push({\n        type: 'ADD_PLUGIN_GROUP', payload: {\n          group: group.name,\n        },\n      });\n    }\n    group.after.forEach(after => {\n      prev.push({\n        type: 'ADD_GROUP_RULE', payload: {\n          groupId: group.name,\n          reference: after,\n        },\n      });\n    });\n    return prev;\n  }, []));\n\n  const collectionModIds = collectionMod.rules\n    .filter(rule => ['requires', 'recommends'].includes(rule.type))\n    .map(rule => util.findModByRef(rule.reference, mods))\n    .filter(mod => !!mod)\n    .map(mod => mod.id);\n\n  const stagingPath = selectors.installPathForGame(state, gameId);\n  const includedPlugins = await getIncludedPlugins(gameId, stagingPath, mods, collectionModIds);\n  const isEnabled = (pluginName: string) => collection.plugins.find(plugin =>\n    ((plugin.name === pluginName) && (plugin.enabled))) !== undefined;\n\n  // set up plugins and their rules\n  util.batchDispatch(api.store, includedPlugins.map(plugin => {\n    return {\n      type: 'SET_PLUGIN_ENABLED', payload: {\n        pluginName: plugin,\n        enabled: isEnabled(plugin),\n      }\n    }\n  }));\n\n  // dismiss all \"mod x contains multiple plugins\" notifications because we're enabling plugins\n  // automatically.\n  // this is a bit nasty because a) we're string-matching part of the notification id and b) this\n  // doesn't take into account the notification may be triggered by a mod _not_ installed through\n  // the pack.\n  state.session.notifications.notifications\n    .filter(noti => noti.id.startsWith('multiple-plugins-'))\n    .forEach(noti => api.dismissNotification(noti.id));\n\n  util.batchDispatch(api.store, (collection.pluginRules?.plugins ?? []).reduce(\n    (prev, plugin) => {\n      const existing = (state as any).userlist.plugins.find(plug =>\n        plug.name.toUpperCase() === plugin.name.toUpperCase());\n\n      if ((plugin.group !== undefined) && (existing?.group === undefined)) {\n        prev.push({\n          type: 'SET_PLUGIN_GROUP',\n          payload: {\n            pluginId: plugin.name.toLowerCase(),\n            group: plugin.group,\n          },\n        });\n      }\n\n      ['requires', 'incompatible', 'after'].forEach(type => {\n        const lootType = toLootType(type);\n        (plugin[type] || []).forEach(ref => {\n          const match = iter => refName(iter).toUpperCase() === ref.toUpperCase();\n\n          if (util.getSafe(existing, [lootType], []).find(match) === undefined) {\n            prev.push({\n              type: 'ADD_USERLIST_RULE',\n              payload: {\n                pluginId: plugin.name.toLowerCase(),\n                reference: ref,\n                type,\n              },\n            });\n          }\n        });\n      });\n      return prev;\n  }, []));\n}\n\ninterface ILocalizedMessage {\n  lang: string;\n  str: string;\n}\n\ninterface IMessage {\n  type: 'say' | 'warn' | 'error';\n  content: string | ILocalizedMessage[];\n  condition?: string;\n  subs?: string[];\n}\n\ninterface IBashTag {\n  name: string;\n  condition?: string;\n}\n\ntype BashTag = string | IBashTag;\n\ninterface ILocation {\n  link: string;\n}\n\ninterface IDirtyInfo {\n  crc: string;\n  util: string;\n  itm?: number;\n  udr?: number;\n  nav?: number;\n}\n\nexport interface ILootReference {\n  name: string;\n  display: string;\n  condition?: string;\n}\n\ninterface ILOOTPlugin {\n  name: string;\n  enabled?: boolean;\n  group?: string;\n  after?: Array<string | ILootReference>;\n  req?: Array<string | ILootReference>;\n  inc?: Array<string | ILootReference>;\n  msg?: IMessage[];\n  tag?: BashTag[];\n  url?: ILocation[];\n  dirty?: IDirtyInfo[];\n}\n\ninterface ILOOTGroup {\n  name: string;\n  after?: string[];\n}\n\ninterface ILOOTList {\n  globals: IMessage[];\n  plugins: ILOOTPlugin[];\n  groups: ILOOTGroup[];\n}\n\nfunction ruleName(rule: string | ILootReference): string {\n  if (typeof(rule) === 'string') {\n    return rule;\n  } else {\n    return rule.display ?? rule.name;\n  }\n}\n\nfunction ruleId(rule: string | ILootReference): string {\n  if (typeof(rule) === 'string') {\n    return rule.toLowerCase();\n  } else {\n    return rule.name.toLowerCase();\n  }\n}\n\nfunction ruleType(t: types.TFunction, type: string): string {\n  switch (type) {\n    case 'after': return t('after');\n    case 'requires': return t('requires');\n    case 'incompatible': return t('incompatible with');\n    default: return '???';\n  }\n}\n\ninterface IRule {\n  name: string;\n  ref: string | ILootReference;\n  type: string;\n  isGroup?: boolean;\n}\n\nfunction renderRefName(rule: IRule): string {\n  return typeof(rule.ref) === 'string'\n    ? rule.ref\n    : rule.ref.display;\n}\n\ninterface IPluginRuleProps {\n  t: types.TFunction;\n  rule: IRule;\n  onRemove: (rule: IRule) => void;\n}\n\nfunction renderType(t: types.TFunction, type: string) {\n  if (type === 'assigned') {\n    return t('assigned to group');\n  } else {\n    return t(type);\n  }\n}\n\nexport function PluginRule(props: IPluginRuleProps) {\n  const { t, onRemove, rule } = props;\n\n  const remove = React.useCallback((evt: React.MouseEvent<any>) => {\n    onRemove(rule);\n  }, [rule]);\n\n  return (\n    <ListGroupItem>\n      <div className='rule-name'>{rule.isGroup ? t('Group') + ' ' : ''}{rule.name}</div>\n      <div className='rule-type'>{renderType(t, rule.type)}</div>\n      <div className='rule-name'>{renderRefName(rule)}</div>\n      <tooltip.IconButton\n        className='btn-embed remove-btn'\n        icon='remove'\n        tooltip={t('Remove plugin rule')}\n        onClick={remove}\n      />\n    </ListGroupItem>\n  );\n}\n\nexport function Interface(props: IExtendedInterfaceProps): JSX.Element {\n  const { t, collection } = props;\n\n  const [pluginRules, setPluginRules] = React.useState<IRule[]>(null);\n  const [groupAssignments, setGroupAssignments] =\n    React.useState<{ [name: string]: string }>(null);\n  const store = useStore();\n  const gameId = useSelector(selectors.activeGameId);\n  const mods = useSelector((selState: types.IState) => selState.persistent.mods[gameId]);\n  const userlist: ILOOTList = useSelector((selState: any) => selState.userlist);\n\n  const state = store.getState();\n\n  React.useEffect(() => {\n    // need to get list of mods, then read the directories to figure out which plugins they include\n    const modIds = collection.rules\n      .map(rule => rule.reference.id)\n      .filter(modId => modId !== undefined);\n\n    const stagingPath = selectors.installPath(state);\n\n    getIncludedPlugins(gameId, stagingPath, mods, modIds)\n      .then(plugins => {\n        const pluginsL = plugins.map(plug => plug.toLowerCase());\n\n        const rules: IRule[] = [];\n        const assignments: { [plugin: string]: string } = {};\n        for (const plugin of plugins) {\n          const plug: ILOOTPlugin = (userlist?.plugins ?? [])\n            .find(iter => iter.name.toLowerCase() === plugin.toLowerCase());\n\n          const byRef = (name: string | ILootReference): boolean => pluginsL.includes(ruleId(name));\n          const toRule = (ref: string | ILootReference, type: string) => ({\n            name: plugin,\n            ref,\n            type,\n          });\n\n          if (plug !== undefined) {\n            rules.push(...(plug.after ?? []).filter(byRef).map(aft => toRule(aft, 'after')));\n            rules.push(...(plug.req ?? []).filter(byRef).map(req => toRule(req, 'requires')));\n            rules.push(...(plug.inc ?? []).filter(byRef).map(inc => toRule(inc, 'incompatible')));\n\n            if (plug.group !== undefined) {\n              assignments[plug.name] = plug.group;\n            }\n          }\n        }\n        setPluginRules(rules);\n        setGroupAssignments(assignments);\n      });\n  }, [collection, mods, userlist, setPluginRules]);\n\n  const removeRule = React.useCallback((rule: IRule) => {\n    store.dispatch({ type: 'REMOVE_USERLIST_RULE', payload: {\n      pluginId: rule.name.toLowerCase(), reference: rule.ref, type: rule.type,\n    } });\n  }, [store]);\n\n  const removeGroupRule = React.useCallback((rule: IRule) => {\n    store.dispatch({ type: 'REMOVE_GROUP_RULE', payload: {\n      groupId: rule.name.toLowerCase(), reference: rule.ref,\n    } });\n  }, [store]);\n\n  const unassignGroup = React.useCallback((rule: IRule) => {\n    store.dispatch({ type: 'SET_PLUGIN_GROUP', payload: {\n      pluginId: rule.name.toLowerCase(), group: undefined,\n    } });\n  }, [store]);\n\n  if (userlist === undefined) {\n    // early out if no userlist loaded\n    return (\n      <Panel>\n        {t('No userlist loaded, is the gamebryo-plugin-management extension disabled?')}\n      </Panel>\n    );\n  }\n\n  const grpsFlattened: IRule[] = (userlist?.groups ?? []).reduce((prev: IRule[], grp) => {\n    (grp.after ?? []).forEach(aft => {\n      prev.push({ name: grp.name, ref: aft, type: 'after' });\n    });\n    return prev;\n  }, []);\n\n  return (\n    <div className='collection-rules-edit collection-scrollable'>\n      <ControlLabel>\n        <p>\n          {t('The collection will include your custom load order rules so that '\n            + 'users of your collection will get the same load order.')}\n          <br/>\n          {t('Rules you remove here are also removed from your actual setup.')}\n        </p>\n      </ControlLabel>\n      {(pluginRules !== null) ? (\n        <ListGroup>\n            {pluginRules.map(rule => (\n              <PluginRule\n                t={t}\n                key={`${rule.name}_after_${rule.ref}`}\n                rule={rule}\n                onRemove={removeRule}\n              />))}\n        </ListGroup>\n      ) : <Spinner />}\n      {(groupAssignments !== null) ? (\n        <ListGroup>\n          {Object.keys(groupAssignments).map(pluginName => (\n            <PluginRule\n              t={t}\n              key={`${pluginName}_assigned_${groupAssignments[pluginName]}`}\n              rule={{ name: pluginName, type: 'assigned', ref: groupAssignments[pluginName] }}\n              onRemove={unassignGroup}\n            />\n          ))}\n        </ListGroup>\n      ) : <Spinner />}\n      <ListGroup>\n        {(grpsFlattened.map(grp => (\n          <PluginRule\n            t={t}\n            key={`${grp.name}_after_${grp.ref}`}\n            rule={grp}\n            onRemove={removeGroupRule}\n          />\n        )))}\n      </ListGroup>\n    </div>\n  );\n}\n","import * as gamebryo from './gamebryo';\n\nimport { types } from 'vortex-api';\nimport { ICollection } from '../../types/ICollection';\nimport { IExtendedInterfaceProps } from '../../types/IExtendedInterfaceProps';\nimport { IGameSupportEntry } from '../../types/IGameSupportEntry';\n\nconst gameSupport: { [gameId: string]: IGameSupportEntry } = {\n  skyrim: {\n    generator: gamebryo.generate,\n    parser: gamebryo.parser,\n    interface: gamebryo.Interface,\n  },\n  skyrimse: {\n    generator: gamebryo.generate,\n    parser: gamebryo.parser,\n    interface: gamebryo.Interface,\n  },\n  skyrimvr: {\n    generator: gamebryo.generate,\n    parser: gamebryo.parser,\n    interface: gamebryo.Interface,\n  },\n  fallout3: {\n    generator: gamebryo.generate,\n    parser: gamebryo.parser,\n    interface: gamebryo.Interface,\n  },\n  fallout4: {\n    generator: gamebryo.generate,\n    parser: gamebryo.parser,\n    interface: gamebryo.Interface,\n  },\n  fallout4vr: {\n    generator: gamebryo.generate,\n    parser: gamebryo.parser,\n    interface: gamebryo.Interface,\n  },\n  falloutnv: {\n    generator: gamebryo.generate,\n    parser: gamebryo.parser,\n    interface: gamebryo.Interface,\n  },\n  starfield: {\n    generator: gamebryo.generate,\n    parser: gamebryo.parser,\n    interface: gamebryo.Interface,\n  },\n  oblivion: {\n    generator: gamebryo.generate,\n    parser: gamebryo.parser,\n    interface: gamebryo.Interface,\n  },\n  enderal: {\n    generator: gamebryo.generate,\n    parser: gamebryo.parser,\n    interface: gamebryo.Interface,\n  },\n  enderalspecialedition: {\n    generator: gamebryo.generate,\n    parser: gamebryo.parser,\n    interface: gamebryo.Interface,\n  },\n};\n\nexport function generateGameSpecifics(state: types.IState,\n                                      gameId: string,\n                                      stagingPath: string,\n                                      modIds: string[],\n                                      mods: { [modId: string]: types.IMod })\n                                      : Promise<any> {\n  if ((gameSupport[gameId] !== undefined) && (gameSupport[gameId].generator !== undefined)) {\n    return gameSupport[gameId].generator(state, gameId, stagingPath, modIds, mods);\n  } else {\n    return Promise.resolve({});\n  }\n}\n\nexport function parseGameSpecifics(api: types.IExtensionApi,\n                                   gameId: string,\n                                   collection: ICollection,\n                                   collectionMod: types.IMod)\n                                   : Promise<void> {\n  if ((gameSupport[gameId] !== undefined) && (gameSupport[gameId].parser !== undefined)) {\n    return gameSupport[gameId].parser(api, gameId, collection, collectionMod);\n  } else {\n    return Promise.resolve();\n  }\n}\n\nexport function getInterface(gameId: string): React.ComponentType<IExtendedInterfaceProps> {\n  if (gameSupport[gameId] === undefined) {\n    return null;\n  } else {\n    return gameSupport[gameId].interface;\n  }\n}\n","/// functions to postprocess collection manifest read from disk to give us an opportunity\n/// to maintain backwards compatibility if things change on our end\n\nimport { fs, types, util } from 'vortex-api';\nimport { ICollection, ICollectionModRule } from '../types/ICollection';\nimport { validateICollection } from '../validationCode/validation';\n\nfunction isFuzzyVersion(input: string): boolean {\n  if (!input) {\n    return false;\n  }\n\n  // simplified compared to the generic function in testModReference.ts because here\n  // we only have to support the variants you'd actually find in a collection\n  return input.endsWith('+prefer') || (input === '*');\n}\n\n/**\n * hook to fix up collection rules to maintain a bit of backwards compatibility for older\n * collections.\n * Should be cleared when we do a stable release\n */\nfunction postProcessRule(rule: ICollectionModRule): ICollectionModRule {\n  const result = JSON.parse(JSON.stringify(rule));\n  // remove fileExpression from references with fuzzy version when there's already a\n  // logicalFileName, because the fileExpressions we stored are simply the file name and that\n  // won't match newer versions.\n  // this is handled differently compared to md5 hash which we keep but ignore it testModReference\n  // because with an md5 hash it's generally the case it will only match one version whereas\n  // fileExpression supports matching multiple versions, it's simply that we have no automated\n  // way of generating glob patterns that ignore the version and date field in the file names\n  if (isFuzzyVersion(result.reference.versionMatch)\n      && !!result.reference.logicalFileName) {\n    delete result.reference.fileExpression;\n  }\n  if (isFuzzyVersion(result.source.versionMatch)\n      && !!result.source.logicalFileName) {\n    delete result.source.fileExpression;\n  }\n  return result;\n}\n\nfunction validationMessage(msg: any): string {\n  return `${(msg.instancePath || '/')} ${msg.message}`;\n}\n\nexport async function readCollection(api: types.IExtensionApi,\n                                     manifest: string): Promise<ICollection> {\n  const collectionData = await fs.readFileAsync(manifest\n    , { encoding: 'utf-8' });\n  const collection: ICollection = JSON.parse(collectionData);\n  const readErrors = validateICollection(collection);\n  if (readErrors.length > 0) {\n    api.showErrorNotification('Collection validation mismatch',\n      'There was a validation issue with this collection. '\n      + 'During the testing phase, this is likely caused by the checks being too strict and '\n      + 'the collection itself should still work correctly.\\n'\n      + 'To help us improve the validation, please report this error once on each '\n      + 'collection it appears for.\\n\\n'\n      + readErrors.map(validationMessage).join('\\n'));\n    /*\n    throw new util.ProcessCanceled(\n      'Collection invalid:\\n' + ,\n      readErrors.map(validationMessage));\n    */\n  }\n  collection.modRules = (collection.modRules ?? []).map(rule => postProcessRule(rule));\n\n  return collection;\n}\n","/* eslint-disable */\nimport { BUNDLED_PATH, MAX_COLLECTION_NAME_LENGTH, MIN_COLLECTION_NAME_LENGTH,\n         MOD_TYPE, PATCHES_PATH } from '../constants';\nimport { ICollection, ICollectionAttributes, ICollectionInfo, ICollectionMod,\n         ICollectionModRule, ICollectionModRuleEx, ICollectionSourceInfo } from '../types/ICollection';\n\nimport { scanForDiffs } from './binaryPatching';\nimport { findExtensions, IExtensionFeature } from './extension';\nimport { generateGameSpecifics } from './gameSupport';\nimport { generateConfig } from './collectionConfig';\nimport { renderReference, ruleId } from './util';\n\nimport * as _ from 'lodash';\nimport { ILookupResult } from 'modmeta-db';\nimport * as path from 'path';\nimport * as Redux from 'redux';\nimport { generate as shortid } from 'shortid';\nimport turbowalk, { IEntry } from 'turbowalk';\nimport { actions, fs, log, selectors, types, util } from 'vortex-api';\nimport { IINITweak } from '../types/IINITweak';\n\nimport { fileMD5Async } from './util';\n\nimport { matchChecksums } from './checksumMatcher';\n\nimport { importTweaks } from '../initweaks';\nimport { ReplicateHashMismatchError } from './errors';\n\ninterface IResolvedRule {\n  mod: types.IMod;\n  rule: types.IModRule;\n}\n\nfunction sanitizeExpression(fileName: string): string {\n  // drop extension and anything like \".1\" or \" (1)\" at the end which probaby\n  // indicates duplicate downloads (either in our own format or common browser\n  // style)\n  return path.basename(fileName, path.extname(fileName))\n    .replace(/\\.\\d+$/, '')\n    .replace(/ \\(\\d+\\)$/, '');\n}\n\nfunction toInt(input: string | number | undefined | null) {\n  if (!input) {\n    return 0;\n  }\n\n  if (typeof(input) === 'string') {\n    return parseInt(input, 10);\n  }\n\n  return input;\n}\n\nfunction deduceSource(mod: types.IMod,\n                      sourceInfo: ICollectionSourceInfo,\n                      versionMatcher: string,\n                      metaInfo: ILookupResult[],\n                      tag: string)\n                      : ICollectionSourceInfo {\n  const res: Partial<ICollectionSourceInfo> = (sourceInfo !== undefined)\n    ? { ...sourceInfo }\n    : { type: 'nexus' };\n\n  const assign = (obj: any, key: string, value: any) => {\n    if (obj[key] === undefined) {\n      obj[key] = value;\n    }\n  };\n\n  if (res.type === 'nexus') {\n    if (mod.attributes?.source !== 'nexus') {\n      throw new Error(`\"${util.renderModName(mod)}\" doesn't have Nexus as its source`);\n    }\n    const modId = (mod.type === MOD_TYPE) ? mod.attributes?.collectionId : mod.attributes?.modId;\n    const fileId = (mod.type === MOD_TYPE) ? mod.attributes?.revisionId : mod.attributes?.fileId;\n    // don't accept undefined, 0 or ''\n    if (!modId || !fileId || isNaN(modId) || isNaN(fileId)) {\n      throw new Error(`\"${mod.id}\" is missing mod id or file id`);\n    }\n\n    res.modId = toInt(modId);\n    res.fileId = toInt(fileId);\n  } else {\n    assign(res, 'adultContent', sourceInfo?.adultContent);\n  }\n\n  if (['browse', 'direct'].includes(res.type) && !res.url) {\n    throw new Error(`\"${mod.id}\" has no URL set`);\n  }\n\n  // since we store bundled mods uncompressed the md5 hash won't be the same\n  if (sourceInfo?.type !== 'bundle') {\n    assign(res, 'md5', mod.attributes?.fileMD5);\n  }\n  assign(res, 'fileSize', mod.attributes?.fileSize);\n  // prefering the logical name from the meta db because on imported files, the file may\n  // have been renamed before installation\n  assign(res, 'logicalFilename',\n    metaInfo?.[0]?.value?.logicalFileName ?? mod.attributes?.logicalFileName);\n  if (sourceInfo?.updatePolicy !== undefined) {\n    assign(res, 'updatePolicy', sourceInfo.updatePolicy);\n  } else if (sourceInfo?.type === 'bundle') {\n    assign(res, 'updatePolicy', 'exact');\n  } else {\n    if (versionMatcher === '*') {\n      assign(res, 'updatePolicy', 'latest');\n    } else if ((versionMatcher === undefined)\n               || versionMatcher.endsWith('+prefer')) {\n      assign(res, 'updatePolicy', 'prefer');\n    } else {\n      assign(res, 'updatePolicy', 'exact');\n    }\n  }\n\n  if ((res.md5 === undefined)\n      && (res.logicalFilename === undefined)\n      && (res.fileExpression === undefined)\n      && (mod.attributes?.fileName !== undefined)) {\n    assign(res, 'fileExpression', sanitizeExpression(mod.attributes.fileName));\n  }\n\n  assign(res, 'tag', tag);\n\n  return res as ICollectionSourceInfo;\n}\n\nexport function generateCollection(info: ICollectionInfo,\n                                   mods: ICollectionMod[],\n                                   modRules: ICollectionModRule[]): ICollection {\n  return {\n    info,\n    mods,\n    modRules,\n  };\n}\n\n/**\n * converts the rules in a mod into mod entries for a collection, ready for export\n */\nasync function rulesToCollectionMods(\n  api: types.IExtensionApi,\n  collection: types.IMod,\n  resolvedRules: IResolvedRule[],\n  mods: { [modId: string]: types.IMod },\n  stagingPath: string,\n  game: types.IGame,\n  collectionInfo: ICollectionAttributes,\n  bundleTags: { [modId: string]: string },\n  onProgress: (percent: number, text: string) => void,\n  onError: (message: string, replace: any, mayIgnore: boolean) => void)\n  : Promise<ICollectionMod[]> {\n\n  let total = resolvedRules.length;\n\n  let finished = 0;\n\n  const collectionPath = path.join(stagingPath, collection.installationPath);\n  await fs.removeAsync(path.join(collectionPath, BUNDLED_PATH));\n  await fs.removeAsync(path.join(collectionPath, PATCHES_PATH));\n  await fs.ensureDirAsync(path.join(collectionPath, BUNDLED_PATH));\n  await fs.ensureDirAsync(path.join(collectionPath, PATCHES_PATH));\n\n  const state = api.getState();\n  const downloads = state.persistent.downloads.files;\n  const downloadPath = selectors.downloadPathForGame(state, game.id);\n\n  const fileOverridesIds = new Set(Object.keys(collectionInfo.fileOverrides ?? {})\n    .filter(modId => collectionInfo.fileOverrides[modId]));\n\n  const result: ICollectionMod[] = await Promise.all(resolvedRules.map(async resolvedRule => {\n    const { mod, rule } = resolvedRule;\n\n    const fileName = downloads[mod.archiveId]?.localPath;\n\n    // we can't store the md5 hash for a bundled file because they are recompressed\n    // during collection install and then the hash won't match\n    const refMD5: string = (collectionInfo.source?.[mod.id]?.type === 'bundle')\n      ? undefined\n      : mod.attributes?.fileMD5;\n\n    const meta = await api.lookupModMeta({\n      fileName,\n      filePath: fileName !== undefined ? path.join(downloadPath, fileName) : undefined,\n      fileMD5: refMD5,\n      fileSize: mod.attributes?.fileSize,\n      gameId: game.id,\n    });\n\n    const modName = util.renderModName(mod, { version: false });\n    try {\n      // This call is relatively likely to fail to do it before the hash calculation to\n      // save the user time in case it does fail\n      const source = deduceSource(mod,\n                                  collectionInfo.source?.[mod.id],\n                                  rule.reference.versionMatch,\n                                  meta,\n                                  bundleTags[mod.id]);\n\n      let hashes: any;\n      let choices: any;\n\n      let entries: IEntry[] = [];\n\n      const installMode: string = collectionInfo.installMode?.[mod.id] ?? 'fresh';\n\n      const modPath = path.join(stagingPath, mod.installationPath);\n\n      if (installMode === 'clone') {\n        await matchChecksums(api, game.id, mod.id);\n        await turbowalk(modPath, async input => {\n          entries = [].concat(entries, input);\n        }, {});\n\n        hashes = await Promise.all(entries\n          .filter(iter => !iter.isDirectory)\n          .map(async iter => ({\n            path: path.relative(modPath, iter.filePath),\n            md5: await fileMD5Async(iter.filePath),\n          })));\n\n        onProgress(undefined, modName);\n\n        ++finished;\n      } else if (installMode === 'choices') {\n        choices = mod?.attributes?.installerChoices;\n        --total;\n      } else {\n        --total;\n      }\n\n      let patches: { [filePath: string]: string };\n      if (collectionInfo.saveEdits?.[mod.id] === true) {\n        const destPath = path.join(collectionPath, PATCHES_PATH, modName);\n        await fs.ensureDirWritableAsync(destPath);\n        patches = await scanForDiffs(api, game.id, mod.id, destPath, onProgress);\n      }\n\n      if (collectionInfo.source?.[mod.id]?.type === 'bundle') {\n        const tlFiles = await fs.readdirAsync(modPath);\n        const generatedName: string =\n          `Bundled - ${util.sanitizeFilename(util.renderModName(mod, { version: true }))}`;\n        const destPath = path.join(collectionPath, BUNDLED_PATH, generatedName);\n        try {\n          await fs.removeAsync(destPath);\n        } catch (err) {\n          if (err.code !== 'ENOENT') {\n            throw err;\n          }\n        }\n        await Promise.all(tlFiles.map(async name => {\n          await fs.copyAsync(path.join(modPath, name), path.join(destPath, name));\n        }));\n\n        // update the source reference to match the actual bundled file\n        source.fileExpression = generatedName;\n        let totalSize: number = 0;\n        await turbowalk(destPath, items =>\n          totalSize += items.reduce((sub: number, entry) => sub + entry.size, 0));\n\n        // source.fileSize = (await fs.statAsync(destPath)).size;\n        source.fileSize = totalSize;\n      }\n\n      onProgress(Math.floor((finished / total) * 100), modName);\n\n      const dlGame: types.IGame = (mod.attributes?.downloadGame !== undefined)\n        ? util.getGame(mod.attributes.downloadGame)\n        : game;\n\n      // workaround where Vortex has no support for the game this download came from\n      const domainName = (dlGame !== undefined)\n        ? util.nexusGameId(dlGame) : mod.attributes?.downloadGame;\n\n      const res: ICollectionMod = {\n        name: modName,\n        version: mod.attributes?.version ?? '1.0.0',\n        optional: rule.type === 'recommends',\n        domainName,\n        source,\n        hashes,\n        choices,\n        patches,\n        instructions: !!collectionInfo.instructions?.[mod.id]\n          ? collectionInfo.instructions?.[mod.id]\n          : undefined,\n        author: mod.attributes?.author,\n        details: {\n          category: util.resolveCategoryName(mod.attributes?.category, state),\n          type: mod.type,\n        },\n        phase: rule.extra?.['phase'] ?? 0,\n        fileOverrides: fileOverridesIds.has(mod.id) ? mod.fileOverrides : undefined,\n      };\n\n      return res;\n    } catch (err) {\n      --total;\n\n      onError('failed to pack \"{{modName}}\": {{error}}', {\n        modName, error: err.message, stack: err.stack,\n      }, err['mayIgnore'] ?? true);\n\n      if (err instanceof ReplicateHashMismatchError) {\n        api.showDialog('error', 'Collection export failed', {\n          bbcode: '\"{{modName}}\" cannot be exported using the replicate install mode.[br][/br][br][/br]The hashes of '\n                 + 'the below files in your staging folder do not match the hashes of the files in the mod\\'s '\n                 + 'archive, which is guaranteed to cause issues for the end user.[br][/br][br][/br] Please consider using '\n                 + 'binary patching or bundle your changes instead.',\n          parameters: {\n            modName: util.renderModName(mod),\n          },\n          message: err.affectedFiles.map(file => util.sanitizeFilename(file)).join('\\n'),\n          options: {\n            order: ['bbcode', 'message'],\n          }\n        }, [\n          {\n            label: 'Close',\n          },\n        ], 'replicate-hash-mismatch-error-dialog');\n      }\n\n      return undefined;\n    }\n  }));\n\n  return result.filter(mod => (mod !== undefined) && (Object.keys(mod.source).length > 0));\n}\n\nexport function makeBiDirRule(source: types.IModReference,\n                              rule: types.IModRule): ICollectionModRule {\n  if (rule === undefined) {\n    return undefined;\n  }\n\n  return {\n    type: rule.type,\n    reference: rule.reference,\n    source,\n  };\n}\n\nfunction makeTransferrable(mods: { [modId: string]: types.IMod },\n                           collection: types.IMod,\n                           rule: types.IModRule): types.IModRule {\n  let newRef: types.IModReference = { ...rule.reference };\n  const mod = util.findModByRef(rule.reference, mods);\n\n  if ((rule.reference.fileMD5 === undefined)\n      && (rule.reference.logicalFileName === undefined)\n      && (rule.reference.fileExpression === undefined)) {\n    // a rule that doesn't contain any of the above markers will likely not be able to match\n    // anything on a different system\n\n    if (rule.reference.id === undefined) {\n      // rule unusable\n      log('warn', 'invalid rule couldn\\'t be included in the collection', JSON.stringify(rule));\n      return undefined;\n    }\n\n    if (mod === undefined) {\n      log('warn', 'mod enabled in collection isn\\'t installed', JSON.stringify(rule));\n      return undefined;\n    }\n\n    newRef = util.makeModReference(mod);\n  }\n\n  // ok, this gets a bit complex now. If the referenced mod gets updated, also make sure\n  // the rules referencing it apply to newer versions\n  if (mod !== undefined) {\n    const mpRule = collection.rules.find(iter => util.testModReference(mod, iter.reference));\n    if ((mpRule !== undefined) && (\n      (mpRule.reference.versionMatch === undefined)\n      || (mpRule.reference.versionMatch === '*')\n      || (mpRule.reference.versionMatch.startsWith('>=')))) {\n      newRef.versionMatch = '*';\n    }\n  }\n\n  return {\n    type: rule.type,\n    fileList: rule.fileList,\n    comment: rule.comment,\n    reference: newRef,\n  } as any;\n}\n\nfunction ruleEnabled(rule: ICollectionModRule,\n                     mods: { [modId: string]: types.IMod },\n                     collection: types.IMod) {\n  if (rule === undefined) {\n    return false;\n  }\n\n  const ruleEx: ICollectionModRuleEx = {\n    ...rule,\n    sourceName: renderReference(rule.source, mods),\n    referenceName: renderReference(rule.reference, mods),\n  };\n  const id = ruleId(ruleEx);\n\n  return collection.attributes?.collection?.rule?.[id] ?? true;\n}\n\nfunction extractModRules(collectionRules: IResolvedRule[],\n                         collection: types.IMod,\n                         mods: { [modId: string]: types.IMod },\n                         collectionAttributes: ICollectionAttributes,\n                         bundleTags: { [modId: string]: string })\n                         : ICollectionModRule[] {\n  // for each mod referenced by the collection, gather the (enabled) rules and transform\n  // them such that they can be applied on the users system\n  return collectionRules.reduce((prev: ICollectionModRule[], resolvedRule: IResolvedRule) => {\n    const { mod } = resolvedRule;\n    const source: types.IModReference = util.makeModReference(mod);\n    const sourceOrig = JSON.parse(JSON.stringify(source));\n\n    // ok, this gets a bit complex now. If the referenced mod gets updated, also make sure\n    // the rules referencing it apply to newer versions\n    const mpRule = collection.rules.find(iter => util.testModReference(mod, iter.reference));\n    if ((mpRule !== undefined) && (\n        (mpRule.reference.versionMatch === undefined)\n        || (mpRule.reference.versionMatch === '*')\n        || (mpRule.reference.versionMatch.startsWith('>=')))) {\n      source.versionMatch = '*';\n    }\n\n    if (collectionAttributes.source?.[mod.id]?.type === 'bundle') {\n      source.fileMD5 = undefined;\n      source.tag = bundleTags[mod.id];\n    }\n\n    // we're not including requires/recommends rules under the logic that if they were\n    // required or recommended, the collection should be including them. Plus, based on (sensible)\n    // user request, we're ignoring these during collection installation or else we'd be getting\n    // tons of notifications during the installation.\n    const includedRules = (mod.rules || [])\n      .filter(rule => !['requires', 'recommends'].includes(rule.type))\n\n    return [].concat(prev, includedRules.map((input: types.IModRule): ICollectionModRule => {\n      if (input.extra?.['automatic'] === true) {\n        // don't add rules introduced from a remote source, the assumption being that they would be\n        // added on the client system as well and might get updated\n        return undefined;\n      }\n      const target: types.IModRule = JSON.parse(JSON.stringify(input));\n\n      const targetRef = util.findModByRef(target.reference, mods);\n      const targetId = targetRef?.id ?? target.reference.idHint;\n      const targetRule = makeTransferrable(mods, collection, target);\n\n      if (collectionAttributes.source?.[targetId]?.type === 'bundle') {\n        target.reference.fileMD5 = undefined;\n        if (targetRule !== undefined) {\n          targetRule.reference.tag = bundleTags[targetId];\n        }\n      }\n\n      // for the purpose of finding out if the rule is enabled in the collection we have\n      // to compare the references as they are locally. Yes, this is super awkward code...\n      if ((targetRule === undefined)\n          || !ruleEnabled(makeBiDirRule(sourceOrig, targetRule), mods, collection)) {\n        return undefined;\n      }\n\n      return makeBiDirRule(source, targetRule);\n    }));\n  }, [])\n  // throw out rules that couldn't be converted\n    .filter(rule => rule !== undefined);\n}\n\n/**\n * convert a mod entry from a collection into a mod rule\n */\nexport function collectionModToRule(knownGames: types.IGameStored[],\n                                    mod: ICollectionMod): types.IModRule {\n  const downloadHint = ['manual', 'browse', 'direct'].includes(mod.source.type)\n    ? {\n      url: mod.source.url,\n      instructions: mod.source.instructions,\n      mode: mod.source.type,\n    }\n    : undefined;\n\n  const coerced = util.coerceToSemver(mod.version);\n\n  let versionMatch = !!coerced\n    ? `>=${coerced ?? '0.0.0'}+prefer`\n    : util.coerceToSemver(mod.version);\n\n  const { updatePolicy } = mod.source;\n\n  if ((updatePolicy === 'exact')\n      || (mod.source.type === 'bundle')\n      || (mod.hashes !== undefined)) {\n    versionMatch = !!coerced ? coerced : util.coerceToSemver(mod.version);\n  } else if (updatePolicy === 'latest') {\n    versionMatch = '*';\n  }\n\n  // we can't use the md5 hash for a bundled file because they are recompressed\n  // during collection install and then the hash won't match\n  const refMD5: string = (mod.source.type === 'bundle')\n    ? undefined\n    : mod.source.md5;\n\n  const fileExpression = (updatePolicy === 'exact') || (mod.source.logicalFilename === undefined)\n    ? mod.source.fileExpression\n    : undefined;\n\n  const reference: types.IModReference = {\n    description: mod.name,\n    fileMD5: refMD5,\n    gameId: util.convertGameIdReverse(knownGames, mod.domainName),\n    fileSize: mod.source.fileSize,\n    versionMatch,\n    logicalFileName: mod.source.logicalFilename,\n    fileExpression,\n    tag: mod.source.tag ?? shortid(),\n  };\n\n  if (['latest', 'prefer'].includes(updatePolicy)) {\n    reference['md5Hint'] = mod.source.md5;\n  }\n\n  if (mod.source.type === 'nexus') {\n    if (!mod.source.modId || !mod.source.fileId) {\n      const err = new Error('Invalid nexus repo specification');\n      err['mod'] = mod;\n      throw err;\n    }\n    reference['repo'] = {\n      repository: 'nexus',\n      gameId: mod.domainName,\n      modId: mod.source.modId.toString(),\n      fileId: mod.source.fileId.toString(),\n      campaign: 'collection',\n    } as any;\n  }\n\n  const res: types.IModRule = {\n    type: mod.optional ? 'recommends' : 'requires',\n    reference,\n    fileList: mod.hashes,\n    installerChoices: mod.choices,\n    downloadHint,\n    extra: {\n      author: mod.author,\n      type: mod.details?.type,\n      category: mod.details?.category,\n      version: mod.version,\n      url: mod.source.url,\n      name: mod.name,\n      instructions: !!mod.instructions\n        ? mod.instructions\n        : undefined,\n      phase: mod.phase ?? 0,\n      patches: mod.patches,\n      fileOverrides: mod.fileOverrides,\n    },\n  } as any;\n\n  if (mod.source.type === 'bundle') {\n    res.extra.localPath = path.join('bundled', mod.source.fileExpression);\n  }\n\n  return res;\n}\n\nexport async function modToCollection(\n  api: types.IExtensionApi,\n  gameId: string,\n  stagingPath: string,\n  collection: types.IMod,\n  mods: { [modId: string]: types.IMod },\n  onProgress: (percent?: number, text?: string) => void,\n  onError: (message: string, replace: any, mayIgnore: boolean) => void)\n  : Promise<ICollection> {\n\n  const state = api.getState();\n\n  if (selectors.activeGameId(state) !== gameId) {\n    // this would be a bug\n    return Promise.reject(new Error('Can only export collection for the active profile'));\n  }\n\n  const includedMods = (collection.rules as types.IModRule[])\n    .map(rule => {\n      let id = rule.reference.id;\n      if (id === undefined) {\n        const mod = util.findModByRef(rule.reference, mods);\n        if (mod !== undefined) {\n          id = mod.id;\n        }\n      }\n      return id;\n    })\n    .filter(id => id !== undefined);\n\n  const missing = includedMods.find(modId => mods[modId] === undefined);\n  if (missing !== undefined) {\n    return Promise.reject(new Error('Can only export collections that are fully installed'));\n  }\n\n  const exts: IExtensionFeature[] = findExtensions(state, gameId);\n  const extData: any = {};\n  for (const ext of exts) {\n    Object.assign(extData, await ext.generate(gameId, includedMods, collection));\n  }\n\n  const gameSpecific = await generateGameSpecifics(state, gameId, stagingPath, includedMods, mods);\n\n  const game = util.getGame(gameId);\n  const discovery = selectors.discoveryByGame(state, gameId);\n\n  const gameVersions = (game !== undefined)\n    ? [await game.getInstalledVersion(discovery)]\n    : [];\n\n  const collectionAttributes = collection.attributes?.collection ?? {};\n  const collectionConfig = await generateConfig({ gameId, collectionMod: collection });\n\n  const collectionInfo: ICollectionInfo = {\n    author: collection.attributes?.uploader ?? 'Anonymous',\n    authorUrl: collection.attributes?.authorURL ?? '',\n    name: util.renderModName(collection),\n    description: collection.attributes?.shortDescription ?? '',\n    installInstructions: collectionAttributes.installInstructions ?? '',\n    domainName: util.nexusGameId(game),\n    gameVersions,\n  };\n\n  // we assign an id to each mod but we store them as tags in the collection only for bundled\n  // mods atm because those are otherwise a bit unreliable to match rules to.\n  // This might be counter-intuitive but the entire system for matching mods across systems\n  // depends on mod meta information provided by the server or md5 hashes, both are not available\n  // for bundled mods (server meta info for obvious reasons, md5 hashes because bundled mods have\n  // to be unpacked so the nexus mods backend can virus scan the content)\n\n  // The reason we're not using the tags for everything is that there is a chance\n  // (miniscule but not 0) that different curators get the same ids generated by shortid.\n  // we could be using uuid but then the tags would have a different format and it'd be a mess\n  const bundleTags: { [modId: string]: string } = includedMods.reduce((prev, modId) => {\n    prev[modId] = shortid();\n    return prev;\n  }, {});\n\n  const resolvedRules = collection.rules.reduce<IResolvedRule[]>(\n    (prev, rule: types.IModRule) => {\n      const mod = (rule.reference.id !== undefined)\n        ? mods[rule.reference.id]\n        : util.findModByRef(rule.reference, mods);\n\n      if (mod === undefined) {\n        onError('Not packaging mod that isn\\'t installed: \"{{id}}\"', { id: rule.reference.id }, true);\n      } else if (mod.type === MOD_TYPE) {\n        // don't include the collection itself (or any other collection for that matter,\n        // nested collections aren't allowed)\n      } else {\n        prev.push({ mod, rule });\n      }\n      return prev;\n    }, []);\n\n\n  const modRules = extractModRules(resolvedRules, collection, mods,\n                                   collectionAttributes, bundleTags);\n\n  const res: ICollection = {\n    info: collectionInfo,\n    mods: await rulesToCollectionMods(api, collection, resolvedRules, mods, stagingPath, game,\n                                      collectionAttributes, bundleTags, onProgress, onError),\n    modRules,\n    ...extData,\n    ...gameSpecific,\n    collectionConfig: {...collectionConfig},\n  };\n\n  return res;\n}\n\nasync function createTweaksFromProfile(api: types.IExtensionApi,\n                                       profile: types.IProfile,\n                                       mods: {[modId: string]: types.IMod},\n                                       existingId: string): Promise<IINITweak[]> {\n  return importTweaks(api, profile, api.getState().persistent.mods[profile.gameId],\n    api.getState().persistent.mods[profile.gameId]?.[existingId]);\n}\n\nfunction createRulesFromProfile(profile: types.IProfile,\n                                mods: {[modId: string]: types.IMod},\n                                existingRules: types.IModRule[],\n                                existingId: string,\n                                filterFunc: (mod: types.IMod) => boolean,\n                                isQuickCollection?: boolean): types.IModRule[] {\n  return Object.keys(profile.modState ?? {})\n    .filter(modId => profile.modState?.[modId]?.enabled\n                  && (mods[modId] !== undefined)\n                  && (modId !== existingId)\n                  // no nested collections allowed\n                  && (mods[modId].type !== MOD_TYPE)\n                  && filterFunc(mods[modId]))\n    .map(modId => {\n      // don't forget what we set up regarding version matching\n      let versionMatch: string;\n\n      const oldRule = existingRules\n        .find(iter => util.testModReference(mods[modId], iter.reference));\n      if ((oldRule !== undefined) && (oldRule.reference.versionMatch !== undefined)) {\n        versionMatch = (oldRule.reference.versionMatch === '*')\n          ? '*'\n          : mods[modId].attributes.version;\n      }\n\n      if (isQuickCollection) {\n        versionMatch = mods[modId].attributes.version;\n      }\n\n      return {\n        type: 'requires',\n        reference: {\n          id: modId,\n          archiveId: mods[modId].archiveId,\n          versionMatch,\n        },\n      } as any;\n    });\n}\n\nexport function makeCollectionId(baseId: string): string {\n  return `vortex_collection_${baseId}`;\n}\n\nfunction deduceCollectionAttributes(collectionMod: types.IMod,\n                                    collection: ICollection,\n                                    mods: { [modId: string]: types.IMod })\n                                    : ICollectionAttributes {\n\n  const res: ICollectionAttributes = {\n    installMode: {},\n    instructions: {},\n    source: {},\n    saveEdits: {},\n  };\n\n  (collectionMod.rules ?? []).forEach(rule => {\n    const mod = util.findModByRef(rule.reference, mods);\n    if (mod === undefined) {\n      // allowing mods to be missing, prior to r32 this would throw an exception\n      return;\n    }\n\n    res.installMode[mod.id] = (rule.installerChoices !== undefined)\n      ? 'choices'\n      : (rule.fileList !== undefined)\n      ? 'clone'\n      : 'fresh';\n\n    res.instructions[mod.id] = rule.extra?.instructions;\n    res.source[mod.id] = {\n      type: rule.downloadHint?.mode ?? ((rule.reference.repo?.repository === 'nexus') ? 'nexus' : 'bundle'),\n      url: rule.downloadHint?.url,\n      instructions: rule.downloadHint?.instructions,\n    };\n    res.saveEdits[mod.id] = rule.extra?.patches !== undefined;\n  });\n\n  return res;\n}\n\n/**\n * clone an existing collection\n * @returns on success, returns the new collection id. On failure, returns undefined,\n *          in that case an error notification has already been reported\n */\nexport async function cloneCollection(api: types.IExtensionApi,\n                                      gameId: string,\n                                      id: string,\n                                      sourceId: string)\n                                      : Promise<string> {\n  const state = api.getState();\n  const t = api.translate;\n\n  const { userInfo } = state.persistent['nexus'] ?? {};\n  const mods = (state.persistent.mods[gameId] ?? {});\n  const existingCollection: types.IMod = mods[sourceId];\n\n  const stagingPath = selectors.installPathForGame(state, gameId);\n\n  let collection: ICollection;\n\n  try {\n    const collectionData = await fs.readFileAsync(\n      path.join(stagingPath, existingCollection.installationPath, 'collection.json'),\n      { encoding: 'utf-8' });\n    collection = JSON.parse(collectionData);\n  } catch (err) {\n    api.showErrorNotification('Failed to clone collection', err);\n    return undefined;\n  }\n\n  const ruleFilter = (rule: types.IModRule) => {\n    if (rule.ignored) {\n      return false;\n    }\n\n    if (util.findModByRef(rule.reference, mods) === undefined) {\n      return false;\n    }\n\n    return true;\n  };\n\n  const ruleSimplify = (rule: types.IModRule): types.IModRule => {\n    const referencedMod = util.findModByRef(rule.reference, mods);\n    return ({\n      ...rule,\n      reference: {\n        archiveId: referencedMod.archiveId,\n        id: referencedMod.id,\n        idHint: referencedMod.id,\n        versionMatch: rule.reference.versionMatch,\n      },\n    });\n  };\n\n  const ownCollection: boolean = existingCollection.attributes?.uploaderId === userInfo?.userId;\n  let name = 'Copy of ' + existingCollection.attributes?.name;\n  if (name.length > MAX_COLLECTION_NAME_LENGTH) {\n    name = name.slice(0, MAX_COLLECTION_NAME_LENGTH) + '...';\n  }\n\n  const customFileName = ownCollection\n    ? existingCollection.attributes?.customFileName\n    : t('Copy of {{name}}', { replace: { name: existingCollection.attributes?.customFileName } });\n\n  const ownCollectionAttributes = ownCollection ? ({\n    pictureUrl: existingCollection.attributes.pictureUrl,\n    uploader: userInfo.name,\n    uploaderAvatar: existingCollection.attributes.uploaderAvatar,\n  }) : {};\n  const mod: types.IMod = {\n    id,\n    type: MOD_TYPE,\n    state: 'installed',\n    attributes: {\n      name,\n      customFileName,\n      version: ownCollection ? existingCollection.attributes?.version : '0',\n      installTime: new Date(),\n      author: userInfo?.name ?? 'Anonymous',\n      uploader: userInfo?.name ?? 'Anonymous',\n      uploaderId: userInfo?.userId,\n      editable: true,\n      collectionId: ownCollection ? existingCollection.attributes?.collectionId : undefined,\n      revisionId: ownCollection ? existingCollection.attributes?.revisionId : undefined,\n      collectionSlug: ownCollection ? existingCollection.attributes?.collectionSlug : undefined,\n      revisionNumber: ownCollection\n        ? (existingCollection.attributes?.revisionNumber + 1) : undefined,\n      collection: deduceCollectionAttributes(existingCollection, collection, mods),\n      ...ownCollectionAttributes,\n    },\n    installationPath: id,\n    rules: existingCollection.rules\n      .filter(ruleFilter)\n      .map(ruleSimplify),\n  };\n\n  try {\n    await new Promise<void>((resolve, reject) => {\n      api.events.emit('create-mod', gameId, mod, (error: Error) => {\n        if (error !== null) {\n          reject(error);\n        } else {\n          resolve();\n        }\n      });\n    });\n    const deployPath = selectors.installPathForGame(state, gameId);\n    const sourcePath = path.join(deployPath, sourceId);\n    const clonePath = path.join(deployPath, id);\n    const files: string[] = await fs.readdirAsync(sourcePath);\n    for (const file of files) {\n      await fs.copyAsync(path.join(sourcePath, file), path.join(clonePath, file));\n    }\n\n    const exts: IExtensionFeature[] = findExtensions(api.getState(), gameId);\n\n    for (const ext of exts) {\n      if (ext.clone !== undefined) {\n        await ext.clone(gameId, collection, existingCollection, mod);\n      }\n    }\n\n    return id;\n  } catch (err) {\n    api.showErrorNotification('Failed to clone collection', err);\n    return undefined;\n  }\n}\n\nexport async function createCollection(api: types.IExtensionApi,\n                                       gameId: string,\n                                       id: string,\n                                       name: string,\n                                       rules: types.IModRule[]) {\n  const state: types.IState = api.store.getState();\n\n  const mod: types.IMod = {\n    id,\n    type: MOD_TYPE,\n    state: 'installed',\n    attributes: {\n      name,\n      version: '0',\n      installTime: new Date(),\n      author: state.persistent['nexus']?.userInfo?.name ?? 'Anonymous',\n      uploader: state.persistent['nexus']?.userInfo?.name ?? 'Anonymous',\n      uploaderId: state.persistent['nexus']?.userInfo?.user_id,\n      editable: true,\n      source: 'user-generated',\n      recommendNewProfile: false,\n    },\n    installationPath: id,\n    rules,\n  };\n\n  try {\n    await new Promise<void>((resolve, reject) => {\n      api.events.emit('create-mod', gameId, mod, (error: Error) => {\n        if (error !== null) {\n          reject(error);\n        } else {\n          resolve();\n        }\n      });\n    });\n  } catch (err) {\n    api.showErrorNotification('Failed to create collection', err);\n  }\n}\n\nfunction updateCollection(api: types.IExtensionApi,\n                          gameId: string,\n                          mod: types.IMod,\n                          newRules: types.IModRule[]) {\n  api.store.dispatch(actions.setModAttribute(gameId, mod.id, 'editable', true));\n\n  const removedRules: types.IModRule[] = [];\n  // remove rules not found in newRules\n  util.batchDispatch(api.store, (mod.rules ?? []).reduce(\n    (prev: Redux.Action[], rule: types.IModRule) => {\n      if (newRules.find(iter => _.isEqual(rule, iter)) === undefined) {\n        removedRules.push(rule);\n        prev.push(actions.removeModRule(gameId, mod.id, rule));\n      }\n      return prev;\n    }, []));\n\n  // add rules not found in the old list\n  util.batchDispatch(api.store, newRules.reduce((prev: Redux.Action[], rule: types.IModRule) => {\n    if ((mod.rules ?? []).find(iter => _.isEqual(rule, iter)) === undefined) {\n      prev.push(actions.addModRule(gameId, mod.id, rule));\n    }\n    return prev;\n  }, []));\n}\n\nexport function validateName(t: types.TFunction,\n                             content: types.IDialogContent): types.IConditionResult[] {\n  const input = content.input[0].value || '';\n  if ((input.length >= MIN_COLLECTION_NAME_LENGTH)\n    && (input.length <= MAX_COLLECTION_NAME_LENGTH)) {\n    return [];\n  } else {\n    return [{\n      id: 'name',\n      errorText: t('Name must be between {{min}}-{{max}} characters long', {\n        replace: {\n          min: MIN_COLLECTION_NAME_LENGTH,\n          max: MAX_COLLECTION_NAME_LENGTH,\n        },\n      }),\n      actions: ['Create'],\n    }];\n  }\n}\n\nexport async function showQuickCollectionRestrictionsDialog(api: types.IExtensionApi) {\n  const t = api.translate;\n  const state: types.IState = api.store.getState();\n  const profileId = selectors.activeProfile(state)?.id;\n  if (!profileId) {\n    return;\n  }\n\n  const restrictionsDialog = await api.showDialog('info', 'Quick Collection', {\n    bbcode: t('Quick Collections create a backup of your mod list for easy import by another PC or mod manager. '\n            + 'They can be created in a few clicks but do not include all the features of a \"full\" collection.[br][/br][br][/br]'\n            + 'Your Quick Collection will include:[br][/br]'\n      + '[list]'\n      + '[*] All mods downloaded from Nexus Mods that are currently enabled and deployed.'\n      + '[*] Installer choices for mods that support installers (such as FOMODs).'\n      + '[*] File conflict rules.'\n      + '[*] Load order rules.'\n      + '[/list][br][/br]'\n      + 'Quick Collections do NOT include:[br][/br]'\n      + '[list]'\n      + '[*] Mods from sources other than Nexus Mods.'\n      + '[*] Alterations you have made mods after installing them.'\n      + '[*] Outputs of automated tools generated on your PC (FNIS, Script Merger, etc).'\n      + '[*] Mods that you have created on your PC and added to Vortex.'\n      + '[/list][br][/br]'\n      + 'If you are using this feature migrate your mod list to the Nexus Mods app, see the '\n      + `[url=https://nexus-mods.github.io/NexusMods.App/users/gettingstarted/MovingToTheApp/]full guide here.[/url]`),\n  },[\n    {  label: 'Cancel' },\n    {  label: 'Proceed' },\n  ]);\n  return (restrictionsDialog.action === 'Cancel')\n    ? Promise.reject(new util.UserCanceled())\n    : Promise.resolve();\n}\n\ninterface ICreateCollectionFromProfileResult {\n  id: string;\n  name: string;\n  updated: boolean;\n  wantsToUpload: boolean;\n}\n\nexport async function createCollectionFromProfile(api: types.IExtensionApi,\n                                                  profileId: string,\n                                                  forceName?: string)\n                                                  : Promise<ICreateCollectionFromProfileResult> {\n  const state: types.IState = api.store.getState();\n  const profile = state.persistent.profiles[profileId];\n\n  const isQuickCollection = forceName !== undefined;\n  const id = (isQuickCollection)\n    ? makeCollectionId(`${profileId}_${shortid()}`)\n    : makeCollectionId(profileId);\n\n  const mod: types.IMod = state.persistent.mods[profile.gameId]?.[id];\n\n  const isNexusSourced = (m: types.IMod) => (m?.attributes?.source === 'nexus');\n  const isGeneratedMod = (m: types.IMod) => (m?.attributes?.generated === true);\n  const filterFunc = (m: types.IMod) => forceName ? (isNexusSourced(m) && !isGeneratedMod(m)) : true;\n  const rules = createRulesFromProfile(profile, state.persistent.mods[profile.gameId] ?? {},\n                                       mod?.rules ?? [], mod?.id, filterFunc, isQuickCollection);\n\n  let name: string = forceName ?? profile.name;\n\n  const uploadLabel = 'Create and Upload';\n  let wantsToUpload = false;\n  if (mod === undefined) {\n    const t = api.translate;\n    const result = await api.showDialog('question', 'New collection from profile', {\n      text: 'Create a collection containing the mods enabled in your current profile.',\n      input: [{\n        id: 'name',\n        label: 'Please enter a name for your new collection',\n        type: 'text',\n        value: name,\n      }],\n      condition: content => validateName(t, content),\n    }, [\n      { label: 'Cancel' },\n      { label: forceName ? uploadLabel : 'Create', default: true },\n    ]);\n\n    const cancelled = result.action === 'Cancel';\n    if (cancelled) {\n      throw new util.UserCanceled();\n    }\n\n    wantsToUpload = result.action === uploadLabel;\n    \n    name = result.input['name'];\n    await createCollection(api, profile.gameId, id, name, rules);\n    await createTweaksFromProfile(api, profile, state.persistent.mods[profile.gameId] ?? {}, id);\n  } else {\n    name = mod.attributes?.name;\n    updateCollection(api, profile.gameId, mod, rules);\n  }\n\n  return { id, name, updated: mod !== undefined, wantsToUpload };\n}\n","/* eslint-disable */\nimport * as PromiseBB from 'bluebird';\nimport { createHash } from 'crypto';\nimport { selectors, types, util } from 'vortex-api';\nimport { doExportToAPI } from '../collectionExport'; \nimport { ICollectionModRuleEx } from '../types/ICollection';\nimport { IEntryEx } from '../types/IEntryEx';\nimport { IModEx } from '../types/IModEx';\nimport { fileMD5 } from 'vortexmt';\nimport turbowalk, { IEntry, IWalkOptions } from 'turbowalk';\nimport { TOS_URL } from '../constants';\n\nexport function makeProgressFunction(api: types.IExtensionApi) {\n  const notificationId = api.sendNotification({\n    type: 'activity',\n    title: 'Building Collection',\n    message: '',\n    progress: 0,\n  });\n\n  let notiPerc = 0;\n  let notiText = '';\n\n  const items: Set<string> = new Set();\n\n  const progress = (percent?: number, text?: string) => {\n    let change = false;\n    if ((percent !== undefined)) {\n      if (percent > notiPerc) {\n        change = true;\n        notiPerc = percent;\n      }\n      if (text !== undefined) {\n        items.delete(text);\n        if (items.size > 0) {\n          const itemList = Array.from(items);\n          const newText = itemList[itemList.length - 1];\n          if (newText !== notiText) {\n            change = true;\n            notiText = newText;\n          }\n        }\n      }\n    }\n    if ((percent === undefined) && (text !== undefined) && (text !== notiText)) {\n      change = true;\n      notiText = text;\n      if (percent === undefined) {\n        items.add(text);\n      }\n    }\n\n    if (change) {\n      api.sendNotification({\n        id: notificationId,\n        type: 'activity',\n        title: 'Building Collection',\n        progress: notiPerc,\n        message: notiText,\n      });\n    }\n  };\n\n  const progressEnd = () => {\n    api.dismissNotification(notificationId);\n  };\n\n  return { progress, progressEnd };\n}\n\nexport function bbProm<T>(func: (...args: any[]) => Promise<T>): (...args: any[]) => PromiseBB<T> {\n  return (...args: any[]) => PromiseBB.resolve(func(...args));\n}\n\nexport function getUnfulfilledNotificationId(collectionId: string) {\n  return `collection-incomplete-${collectionId}`;\n}\n\nexport function md5sum(input: string): string {\n  const hash = createHash('md5');\n  hash.update(input);\n  return hash.digest('hex');\n}\n\nexport function renderReference(ref: types.IModReference,\n                                mods: { [modId: string]: types.IMod }): string {\n  const mod = util.findModByRef(ref, mods);\n  return util.renderModReference(ref, mod);\n}\n\nexport function ruleId(rule: ICollectionModRuleEx): string {\n  // md5-hashing to prevent excessive id names and special characters as a key\n  // in application state\n  return md5sum(`${rule.sourceName}-${rule.type}-${rule.referenceName}`);\n}\n\nexport function modRuleId(input: types.IModRule): string {\n  return input.type + '_' + (\n    input.reference.fileMD5\n    || input.reference.id\n    || input.reference.logicalFileName\n    || input.reference.fileExpression\n    || input.reference.description\n  );\n}\n\nexport function isRelevant(mod: IModEx) {\n  if (!!mod.state) {\n    // consider any mod that's already being downloaded/installed\n    return true;\n  }\n  if (mod.collectionRule['ignored']) {\n    return false;\n  }\n  if (mod.collectionRule.type !== 'requires') {\n    return false;\n  }\n\n  return true;\n}\n\nexport type IModWithRule = types.IMod & { collectionRule: types.IModRule };\n\nexport function calculateCollectionSize(mods: { [id: string]: IModWithRule }): number {\n  return Object.values(mods).reduce((prev: number, mod: IModEx) => {\n    if (!isRelevant(mod)) {\n      return prev;\n    }\n    const size = mod.attributes?.fileSize ?? mod.collectionRule.reference.fileSize ?? 0;\n    return prev + size;\n  }, 0);\n}\n\nexport async function fileMD5Async(fileName: string): Promise<string> {\n  return new Promise((resolve, reject) => {\n    fileMD5(fileName,\n            (err: Error, result: string) => (err !== null) ? reject(err) : resolve(result),\n            () => null);\n  });\n}\n\nexport async function walkPath(dirPath: string, walkOptions?: IWalkOptions): Promise<IEntryEx[]> {\n  walkOptions = walkOptions || { skipLinks: true, skipHidden: true, skipInaccessible: true };\n  const walkResults: IEntryEx[] = [];\n  return new Promise<IEntryEx[]>(async (resolve, reject) => {\n    await turbowalk(dirPath, async (entries: IEntry[]) => {\n      for (const entry of entries) {\n        const md5 = await fileMD5Async(entry.filePath);\n        const extendedEntry: IEntryEx = { ...entry, fileMD5: md5 };\n        walkResults.push(extendedEntry);\n      }\n      return Promise.resolve();\n    }, walkOptions).catch(err => err.code === 'ENOENT' ? Promise.resolve() : Promise.reject(err));\n    return resolve(walkResults);\n  });\n}\n\nexport function isEmpty(value: any) {\n  return (!value)\n    || (value.hasOwnProperty('length') && value.length === 0)\n    || (value.constructor === Object && Object.keys(value).length === 0);\n}\n\nexport async function uploadCollection(api: types.IExtensionApi, profileId: string, collectionId: string) {\n  if (!profileId || !collectionId) {\n    return;\n  }\n  const state = api.getState();\n  const profile = selectors.profileById(state, profileId);\n  const userInfo = util.getSafe(state, ['persistent', 'nexus', 'userInfo'], undefined);\n  if (userInfo === undefined) {\n    api.showErrorNotification('Not logged in', 'You have to be logged into nexusmods.com to upload collections.');\n    return;\n  }\n  const mods: { [modId: string]: types.IMod } = util.getSafe(state, ['persistent', 'mods', profile.gameId], {});\n  if (mods[collectionId] === undefined) {\n    return;\n  }\n\n  api.events.emit('analytics-track-click-event', 'Collections', 'Upload collection');\n\n  const missing = (mods[collectionId]?.rules ?? []).filter(rule =>\n    ['requires', 'recommends'].includes(rule.type)\n    && (util.findModByRef(rule.reference, mods) === undefined));\n  if (missing.length > 0) {\n    await api.showDialog('error', 'Collection isn\\'t fully installed', {\n      text: 'You can only upload collections that are fully installed on this system.\\n'\n          + 'If you have removed mods that were part of this collection you may want to remove '\n          + 'them from the collection as well. If this collection is connected to a '\n          + 'profile you can simply update from that.',\n      message:\n        missing.map(rule => util.renderModReference(rule.reference)).join('\\n'),\n    }, [\n      { label: 'Close' },\n    ]);\n    return;\n  }\n\n  const choice = await api.showDialog('question', 'Share on Nexus Mods', {\n    bbcode: 'You are about to upload \"{{collectionName}}\" to Nexus Mods in a draft state. '\n        + 'You will be able to add additional metadata and media before sharing it with '\n        + 'the community.'\n        + '\\n\\n'\n        + 'Please ensure that your collection complies with our '\n        + `[url=${TOS_URL}]Collections Guidelines[/url] before publishing.`,\n    parameters: {\n      collectionName: util.renderModName(mods[collectionId]),\n    },\n  }, [\n    { label: 'Cancel' },\n    { label: 'Upload' },\n  ]);\n\n  if (choice.action === 'Upload') {\n    try {\n      const { slug, revisionNumber } =\n        await doExportToAPI(api, profile.gameId, collectionId, userInfo.name);\n      if ((slug !== undefined) && (revisionNumber !== undefined)) {\n        api.sendNotification({\n          type: 'success',\n          message: 'Collection submitted',\n          actions: [\n            {\n              title: 'Open in Browser', action: () => {\n                const game = selectors.gameById(api.getState(), profile.gameId);\n                const domainName = util.nexusGameId(game);\n                const url = util.nexusModsURL(\n                  [domainName, 'collections', slug, 'revisions', revisionNumber.toString()], {\n                  campaign: util.Campaign.ViewCollection,\n                  section: util.Section.Collections,\n                });\n                util.opn(url).catch(() => null);\n              },\n            },\n          ],\n        });\n      }\n    } catch (err) {\n      if (!(err instanceof util.UserCanceled)\n          && !(err instanceof util.ProcessCanceled)) {\n        api.showErrorNotification('Failed to upload to API', err, {\n          allowReport: false,\n        });\n      }\n    }\n  }\n}","\"use strict\";module.exports = validate10;module.exports.default = validate10;const schema11 = {\"$schema\":\"http://json-schema.org/draft-07/schema#\",\"anyOf\":[{\"$ref\":\"#/definitions/ICollection\"}],\"definitions\":{\"ICollection\":{\"type\":\"object\",\"properties\":{\"plugins\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"enabled\":{\"type\":\"boolean\"}},\"required\":[\"name\"]}},\"pluginRules\":{\"type\":\"object\",\"properties\":{\"plugins\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"group\":{\"type\":\"string\"},\"after\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}}},\"required\":[\"name\"]}},\"groups\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"group\":{\"type\":\"string\"},\"after\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}}},\"required\":[\"name\"]}}},\"required\":[\"plugins\"]},\"info\":{\"$ref\":\"#/definitions/ICollectionInfo\"},\"mods\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/definitions/ICollectionMod\"}},\"modRules\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/definitions/ICollectionModRule\"}}},\"required\":[\"info\",\"mods\",\"modRules\"]},\"ICollectionInfo\":{\"type\":\"object\",\"properties\":{\"author\":{\"type\":\"string\"},\"authorUrl\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"},\"domainName\":{\"type\":\"string\"},\"gameVersions\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}}},\"required\":[\"author\",\"authorUrl\",\"name\",\"description\",\"domainName\"]},\"ICollectionMod\":{\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"version\":{\"type\":\"string\"},\"optional\":{\"type\":\"boolean\"},\"domainName\":{\"type\":\"string\"},\"source\":{\"$ref\":\"#/definitions/ICollectionSourceInfo\"},\"hashes\":{},\"choices\":{},\"patches\":{\"type\":\"object\",\"additionalProperties\":{\"type\":\"string\"}},\"instructions\":{\"type\":\"string\"},\"author\":{\"type\":\"string\"},\"details\":{\"$ref\":\"#/definitions/ICollectionModDetails\"},\"phase\":{\"type\":\"number\"},\"fileOverrides\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}}},\"required\":[\"name\",\"version\",\"optional\",\"domainName\",\"source\"]},\"ICollectionSourceInfo\":{\"type\":\"object\",\"properties\":{\"type\":{\"$ref\":\"#/definitions/SourceType\"},\"url\":{\"type\":\"string\"},\"instructions\":{\"type\":\"string\"},\"modId\":{\"type\":\"number\"},\"fileId\":{\"type\":\"number\"},\"updatePolicy\":{\"$ref\":\"#/definitions/UpdatePolicy\"},\"adultContent\":{\"type\":\"boolean\"},\"md5\":{\"type\":\"string\"},\"fileSize\":{\"type\":\"number\"},\"logicalFilename\":{\"type\":\"string\"},\"fileExpression\":{\"type\":\"string\"},\"tag\":{\"type\":\"string\"}},\"required\":[\"type\"]},\"SourceType\":{\"type\":\"string\",\"enum\":[\"browse\",\"manual\",\"direct\",\"nexus\",\"bundle\"]},\"UpdatePolicy\":{\"type\":\"string\",\"enum\":[\"exact\",\"latest\",\"prefer\"]},\"ICollectionModDetails\":{\"type\":\"object\",\"properties\":{\"type\":{\"type\":\"string\"},\"category\":{\"type\":\"string\"}}},\"ICollectionModRule\":{\"type\":\"object\",\"properties\":{\"source\":{\"$ref\":\"#/definitions/IModReference\"},\"type\":{\"$ref\":\"#/definitions/RuleType\"},\"reference\":{\"$ref\":\"#/definitions/IModReference\"}},\"required\":[\"source\",\"type\",\"reference\"]},\"IModReference\":{\"type\":\"object\",\"properties\":{\"fileMD5\":{\"type\":\"string\"},\"fileSize\":{\"type\":\"number\"},\"gameId\":{\"type\":\"string\"},\"versionMatch\":{\"type\":\"string\"},\"logicalFileName\":{\"type\":\"string\"},\"fileExpression\":{\"type\":\"string\"},\"id\":{\"type\":\"string\"},\"idHint\":{\"type\":\"string\"},\"md5Hint\":{\"type\":\"string\"},\"tag\":{\"type\":\"string\"},\"archiveId\":{\"type\":\"string\"},\"repo\":{\"type\":\"object\",\"properties\":{\"gameId\":{\"type\":\"string\"},\"modId\":{\"type\":\"string\"},\"fileId\":{\"type\":\"string\"},\"repository\":{\"type\":\"string\"},\"campaign\":{\"type\":\"string\"}},\"required\":[\"fileId\",\"repository\"]},\"description\":{\"type\":\"string\"},\"instructions\":{\"type\":\"string\"}}},\"RuleType\":{\"type\":\"string\",\"enum\":[\"before\",\"after\",\"requires\",\"conflicts\",\"recommends\",\"provides\"]}},\"exported\":[\"ICollection\"]};const schema12 = {\"type\":\"object\",\"properties\":{\"plugins\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"enabled\":{\"type\":\"boolean\"}},\"required\":[\"name\"]}},\"pluginRules\":{\"type\":\"object\",\"properties\":{\"plugins\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"group\":{\"type\":\"string\"},\"after\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}}},\"required\":[\"name\"]}},\"groups\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"group\":{\"type\":\"string\"},\"after\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}}},\"required\":[\"name\"]}}},\"required\":[\"plugins\"]},\"info\":{\"$ref\":\"#/definitions/ICollectionInfo\"},\"mods\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/definitions/ICollectionMod\"}},\"modRules\":{\"type\":\"array\",\"items\":{\"$ref\":\"#/definitions/ICollectionModRule\"}}},\"required\":[\"info\",\"mods\",\"modRules\"]};const schema13 = {\"type\":\"object\",\"properties\":{\"author\":{\"type\":\"string\"},\"authorUrl\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"},\"domainName\":{\"type\":\"string\"},\"gameVersions\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}}},\"required\":[\"author\",\"authorUrl\",\"name\",\"description\",\"domainName\"]};const schema14 = {\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"version\":{\"type\":\"string\"},\"optional\":{\"type\":\"boolean\"},\"domainName\":{\"type\":\"string\"},\"source\":{\"$ref\":\"#/definitions/ICollectionSourceInfo\"},\"hashes\":{},\"choices\":{},\"patches\":{\"type\":\"object\",\"additionalProperties\":{\"type\":\"string\"}},\"instructions\":{\"type\":\"string\"},\"author\":{\"type\":\"string\"},\"details\":{\"$ref\":\"#/definitions/ICollectionModDetails\"},\"phase\":{\"type\":\"number\"},\"fileOverrides\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}}},\"required\":[\"name\",\"version\",\"optional\",\"domainName\",\"source\"]};const schema18 = {\"type\":\"object\",\"properties\":{\"type\":{\"type\":\"string\"},\"category\":{\"type\":\"string\"}}};const schema15 = {\"type\":\"object\",\"properties\":{\"type\":{\"$ref\":\"#/definitions/SourceType\"},\"url\":{\"type\":\"string\"},\"instructions\":{\"type\":\"string\"},\"modId\":{\"type\":\"number\"},\"fileId\":{\"type\":\"number\"},\"updatePolicy\":{\"$ref\":\"#/definitions/UpdatePolicy\"},\"adultContent\":{\"type\":\"boolean\"},\"md5\":{\"type\":\"string\"},\"fileSize\":{\"type\":\"number\"},\"logicalFilename\":{\"type\":\"string\"},\"fileExpression\":{\"type\":\"string\"},\"tag\":{\"type\":\"string\"}},\"required\":[\"type\"]};const schema16 = {\"type\":\"string\",\"enum\":[\"browse\",\"manual\",\"direct\",\"nexus\",\"bundle\"]};const schema17 = {\"type\":\"string\",\"enum\":[\"exact\",\"latest\",\"prefer\"]};const func0 = require(\"./dummy\").default;function validate13(data, {instancePath=\"\", parentData, parentDataProperty, rootData=data}={}){let vErrors = null;let errors = 0;if(data && typeof data == \"object\" && !Array.isArray(data)){if(data.type === undefined){const err0 = {instancePath,schemaPath:\"#/required\",keyword:\"required\",params:{missingProperty: \"type\"},message:\"must have required property '\"+\"type\"+\"'\",schema:schema15.required,parentSchema:schema15,data};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}if(data.type !== undefined){let data0 = data.type;if(typeof data0 !== \"string\"){const err1 = {instancePath:instancePath+\"/type\",schemaPath:\"#/definitions/SourceType/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema16.type,parentSchema:schema16,data:data0};if(vErrors === null){vErrors = [err1];}else {vErrors.push(err1);}errors++;}if(!(((((data0 === \"browse\") || (data0 === \"manual\")) || (data0 === \"direct\")) || (data0 === \"nexus\")) || (data0 === \"bundle\"))){const err2 = {instancePath:instancePath+\"/type\",schemaPath:\"#/definitions/SourceType/enum\",keyword:\"enum\",params:{allowedValues: schema16.enum},message:\"must be equal to one of the allowed values\",schema:schema16.enum,parentSchema:schema16,data:data0};if(vErrors === null){vErrors = [err2];}else {vErrors.push(err2);}errors++;}}if(data.url !== undefined){let data1 = data.url;if(typeof data1 !== \"string\"){const err3 = {instancePath:instancePath+\"/url\",schemaPath:\"#/properties/url/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema15.properties.url.type,parentSchema:schema15.properties.url,data:data1};if(vErrors === null){vErrors = [err3];}else {vErrors.push(err3);}errors++;}}if(data.instructions !== undefined){let data2 = data.instructions;if(typeof data2 !== \"string\"){const err4 = {instancePath:instancePath+\"/instructions\",schemaPath:\"#/properties/instructions/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema15.properties.instructions.type,parentSchema:schema15.properties.instructions,data:data2};if(vErrors === null){vErrors = [err4];}else {vErrors.push(err4);}errors++;}}if(data.modId !== undefined){let data3 = data.modId;if(!((typeof data3 == \"number\") && (isFinite(data3)))){const err5 = {instancePath:instancePath+\"/modId\",schemaPath:\"#/properties/modId/type\",keyword:\"type\",params:{type: \"number\"},message:\"must be number\",schema:schema15.properties.modId.type,parentSchema:schema15.properties.modId,data:data3};if(vErrors === null){vErrors = [err5];}else {vErrors.push(err5);}errors++;}}if(data.fileId !== undefined){let data4 = data.fileId;if(!((typeof data4 == \"number\") && (isFinite(data4)))){const err6 = {instancePath:instancePath+\"/fileId\",schemaPath:\"#/properties/fileId/type\",keyword:\"type\",params:{type: \"number\"},message:\"must be number\",schema:schema15.properties.fileId.type,parentSchema:schema15.properties.fileId,data:data4};if(vErrors === null){vErrors = [err6];}else {vErrors.push(err6);}errors++;}}if(data.updatePolicy !== undefined){let data5 = data.updatePolicy;if(typeof data5 !== \"string\"){const err7 = {instancePath:instancePath+\"/updatePolicy\",schemaPath:\"#/definitions/UpdatePolicy/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema17.type,parentSchema:schema17,data:data5};if(vErrors === null){vErrors = [err7];}else {vErrors.push(err7);}errors++;}if(!(((data5 === \"exact\") || (data5 === \"latest\")) || (data5 === \"prefer\"))){const err8 = {instancePath:instancePath+\"/updatePolicy\",schemaPath:\"#/definitions/UpdatePolicy/enum\",keyword:\"enum\",params:{allowedValues: schema17.enum},message:\"must be equal to one of the allowed values\",schema:schema17.enum,parentSchema:schema17,data:data5};if(vErrors === null){vErrors = [err8];}else {vErrors.push(err8);}errors++;}}if(data.adultContent !== undefined){let data6 = data.adultContent;if(typeof data6 !== \"boolean\"){const err9 = {instancePath:instancePath+\"/adultContent\",schemaPath:\"#/properties/adultContent/type\",keyword:\"type\",params:{type: \"boolean\"},message:\"must be boolean\",schema:schema15.properties.adultContent.type,parentSchema:schema15.properties.adultContent,data:data6};if(vErrors === null){vErrors = [err9];}else {vErrors.push(err9);}errors++;}}if(data.md5 !== undefined){let data7 = data.md5;if(typeof data7 !== \"string\"){const err10 = {instancePath:instancePath+\"/md5\",schemaPath:\"#/properties/md5/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema15.properties.md5.type,parentSchema:schema15.properties.md5,data:data7};if(vErrors === null){vErrors = [err10];}else {vErrors.push(err10);}errors++;}}if(data.fileSize !== undefined){let data8 = data.fileSize;if(!((typeof data8 == \"number\") && (isFinite(data8)))){const err11 = {instancePath:instancePath+\"/fileSize\",schemaPath:\"#/properties/fileSize/type\",keyword:\"type\",params:{type: \"number\"},message:\"must be number\",schema:schema15.properties.fileSize.type,parentSchema:schema15.properties.fileSize,data:data8};if(vErrors === null){vErrors = [err11];}else {vErrors.push(err11);}errors++;}}if(data.logicalFilename !== undefined){let data9 = data.logicalFilename;if(typeof data9 !== \"string\"){const err12 = {instancePath:instancePath+\"/logicalFilename\",schemaPath:\"#/properties/logicalFilename/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema15.properties.logicalFilename.type,parentSchema:schema15.properties.logicalFilename,data:data9};if(vErrors === null){vErrors = [err12];}else {vErrors.push(err12);}errors++;}}if(data.fileExpression !== undefined){let data10 = data.fileExpression;if(typeof data10 !== \"string\"){const err13 = {instancePath:instancePath+\"/fileExpression\",schemaPath:\"#/properties/fileExpression/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema15.properties.fileExpression.type,parentSchema:schema15.properties.fileExpression,data:data10};if(vErrors === null){vErrors = [err13];}else {vErrors.push(err13);}errors++;}}if(data.tag !== undefined){let data11 = data.tag;if(typeof data11 !== \"string\"){const err14 = {instancePath:instancePath+\"/tag\",schemaPath:\"#/properties/tag/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema15.properties.tag.type,parentSchema:schema15.properties.tag,data:data11};if(vErrors === null){vErrors = [err14];}else {vErrors.push(err14);}errors++;}}}else {const err15 = {instancePath,schemaPath:\"#/type\",keyword:\"type\",params:{type: \"object\"},message:\"must be object\",schema:schema15.type,parentSchema:schema15,data};if(vErrors === null){vErrors = [err15];}else {vErrors.push(err15);}errors++;}validate13.errors = vErrors;return errors === 0;}function validate12(data, {instancePath=\"\", parentData, parentDataProperty, rootData=data}={}){let vErrors = null;let errors = 0;if(data && typeof data == \"object\" && !Array.isArray(data)){if(data.name === undefined){const err0 = {instancePath,schemaPath:\"#/required\",keyword:\"required\",params:{missingProperty: \"name\"},message:\"must have required property '\"+\"name\"+\"'\",schema:schema14.required,parentSchema:schema14,data};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}if(data.version === undefined){const err1 = {instancePath,schemaPath:\"#/required\",keyword:\"required\",params:{missingProperty: \"version\"},message:\"must have required property '\"+\"version\"+\"'\",schema:schema14.required,parentSchema:schema14,data};if(vErrors === null){vErrors = [err1];}else {vErrors.push(err1);}errors++;}if(data.optional === undefined){const err2 = {instancePath,schemaPath:\"#/required\",keyword:\"required\",params:{missingProperty: \"optional\"},message:\"must have required property '\"+\"optional\"+\"'\",schema:schema14.required,parentSchema:schema14,data};if(vErrors === null){vErrors = [err2];}else {vErrors.push(err2);}errors++;}if(data.domainName === undefined){const err3 = {instancePath,schemaPath:\"#/required\",keyword:\"required\",params:{missingProperty: \"domainName\"},message:\"must have required property '\"+\"domainName\"+\"'\",schema:schema14.required,parentSchema:schema14,data};if(vErrors === null){vErrors = [err3];}else {vErrors.push(err3);}errors++;}if(data.source === undefined){const err4 = {instancePath,schemaPath:\"#/required\",keyword:\"required\",params:{missingProperty: \"source\"},message:\"must have required property '\"+\"source\"+\"'\",schema:schema14.required,parentSchema:schema14,data};if(vErrors === null){vErrors = [err4];}else {vErrors.push(err4);}errors++;}if(data.name !== undefined){let data0 = data.name;if(typeof data0 !== \"string\"){const err5 = {instancePath:instancePath+\"/name\",schemaPath:\"#/properties/name/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema14.properties.name.type,parentSchema:schema14.properties.name,data:data0};if(vErrors === null){vErrors = [err5];}else {vErrors.push(err5);}errors++;}}if(data.version !== undefined){let data1 = data.version;if(typeof data1 !== \"string\"){const err6 = {instancePath:instancePath+\"/version\",schemaPath:\"#/properties/version/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema14.properties.version.type,parentSchema:schema14.properties.version,data:data1};if(vErrors === null){vErrors = [err6];}else {vErrors.push(err6);}errors++;}}if(data.optional !== undefined){let data2 = data.optional;if(typeof data2 !== \"boolean\"){const err7 = {instancePath:instancePath+\"/optional\",schemaPath:\"#/properties/optional/type\",keyword:\"type\",params:{type: \"boolean\"},message:\"must be boolean\",schema:schema14.properties.optional.type,parentSchema:schema14.properties.optional,data:data2};if(vErrors === null){vErrors = [err7];}else {vErrors.push(err7);}errors++;}}if(data.domainName !== undefined){let data3 = data.domainName;if(typeof data3 !== \"string\"){const err8 = {instancePath:instancePath+\"/domainName\",schemaPath:\"#/properties/domainName/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema14.properties.domainName.type,parentSchema:schema14.properties.domainName,data:data3};if(vErrors === null){vErrors = [err8];}else {vErrors.push(err8);}errors++;}}if(data.source !== undefined){if(!(validate13(data.source, {instancePath:instancePath+\"/source\",parentData:data,parentDataProperty:\"source\",rootData}))){vErrors = vErrors === null ? validate13.errors : vErrors.concat(validate13.errors);errors = vErrors.length;}}if(data.patches !== undefined){let data5 = data.patches;if(data5 && typeof data5 == \"object\" && !Array.isArray(data5)){for(const key0 in data5){let data6 = data5[key0];if(typeof data6 !== \"string\"){const err9 = {instancePath:instancePath+\"/patches/\" + key0.replace(/~/g, \"~0\").replace(/\\//g, \"~1\"),schemaPath:\"#/properties/patches/additionalProperties/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema14.properties.patches.additionalProperties.type,parentSchema:schema14.properties.patches.additionalProperties,data:data6};if(vErrors === null){vErrors = [err9];}else {vErrors.push(err9);}errors++;}}}else {const err10 = {instancePath:instancePath+\"/patches\",schemaPath:\"#/properties/patches/type\",keyword:\"type\",params:{type: \"object\"},message:\"must be object\",schema:schema14.properties.patches.type,parentSchema:schema14.properties.patches,data:data5};if(vErrors === null){vErrors = [err10];}else {vErrors.push(err10);}errors++;}}if(data.instructions !== undefined){let data7 = data.instructions;if(typeof data7 !== \"string\"){const err11 = {instancePath:instancePath+\"/instructions\",schemaPath:\"#/properties/instructions/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema14.properties.instructions.type,parentSchema:schema14.properties.instructions,data:data7};if(vErrors === null){vErrors = [err11];}else {vErrors.push(err11);}errors++;}}if(data.author !== undefined){let data8 = data.author;if(typeof data8 !== \"string\"){const err12 = {instancePath:instancePath+\"/author\",schemaPath:\"#/properties/author/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema14.properties.author.type,parentSchema:schema14.properties.author,data:data8};if(vErrors === null){vErrors = [err12];}else {vErrors.push(err12);}errors++;}}if(data.details !== undefined){let data9 = data.details;if(data9 && typeof data9 == \"object\" && !Array.isArray(data9)){if(data9.type !== undefined){let data10 = data9.type;if(typeof data10 !== \"string\"){const err13 = {instancePath:instancePath+\"/details/type\",schemaPath:\"#/definitions/ICollectionModDetails/properties/type/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema18.properties.type.type,parentSchema:schema18.properties.type,data:data10};if(vErrors === null){vErrors = [err13];}else {vErrors.push(err13);}errors++;}}if(data9.category !== undefined){let data11 = data9.category;if(typeof data11 !== \"string\"){const err14 = {instancePath:instancePath+\"/details/category\",schemaPath:\"#/definitions/ICollectionModDetails/properties/category/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema18.properties.category.type,parentSchema:schema18.properties.category,data:data11};if(vErrors === null){vErrors = [err14];}else {vErrors.push(err14);}errors++;}}}else {const err15 = {instancePath:instancePath+\"/details\",schemaPath:\"#/definitions/ICollectionModDetails/type\",keyword:\"type\",params:{type: \"object\"},message:\"must be object\",schema:schema18.type,parentSchema:schema18,data:data9};if(vErrors === null){vErrors = [err15];}else {vErrors.push(err15);}errors++;}}if(data.phase !== undefined){let data12 = data.phase;if(!((typeof data12 == \"number\") && (isFinite(data12)))){const err16 = {instancePath:instancePath+\"/phase\",schemaPath:\"#/properties/phase/type\",keyword:\"type\",params:{type: \"number\"},message:\"must be number\",schema:schema14.properties.phase.type,parentSchema:schema14.properties.phase,data:data12};if(vErrors === null){vErrors = [err16];}else {vErrors.push(err16);}errors++;}}if(data.fileOverrides !== undefined){let data13 = data.fileOverrides;if(Array.isArray(data13)){const len0 = data13.length;for(let i0=0; i0<len0; i0++){let data14 = data13[i0];if(typeof data14 !== \"string\"){const err17 = {instancePath:instancePath+\"/fileOverrides/\" + i0,schemaPath:\"#/properties/fileOverrides/items/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema14.properties.fileOverrides.items.type,parentSchema:schema14.properties.fileOverrides.items,data:data14};if(vErrors === null){vErrors = [err17];}else {vErrors.push(err17);}errors++;}}}else {const err18 = {instancePath:instancePath+\"/fileOverrides\",schemaPath:\"#/properties/fileOverrides/type\",keyword:\"type\",params:{type: \"array\"},message:\"must be array\",schema:schema14.properties.fileOverrides.type,parentSchema:schema14.properties.fileOverrides,data:data13};if(vErrors === null){vErrors = [err18];}else {vErrors.push(err18);}errors++;}}}else {const err19 = {instancePath,schemaPath:\"#/type\",keyword:\"type\",params:{type: \"object\"},message:\"must be object\",schema:schema14.type,parentSchema:schema14,data};if(vErrors === null){vErrors = [err19];}else {vErrors.push(err19);}errors++;}validate12.errors = vErrors;return errors === 0;}const schema19 = {\"type\":\"object\",\"properties\":{\"source\":{\"$ref\":\"#/definitions/IModReference\"},\"type\":{\"$ref\":\"#/definitions/RuleType\"},\"reference\":{\"$ref\":\"#/definitions/IModReference\"}},\"required\":[\"source\",\"type\",\"reference\"]};const schema20 = {\"type\":\"object\",\"properties\":{\"fileMD5\":{\"type\":\"string\"},\"fileSize\":{\"type\":\"number\"},\"gameId\":{\"type\":\"string\"},\"versionMatch\":{\"type\":\"string\"},\"logicalFileName\":{\"type\":\"string\"},\"fileExpression\":{\"type\":\"string\"},\"id\":{\"type\":\"string\"},\"idHint\":{\"type\":\"string\"},\"md5Hint\":{\"type\":\"string\"},\"tag\":{\"type\":\"string\"},\"archiveId\":{\"type\":\"string\"},\"repo\":{\"type\":\"object\",\"properties\":{\"gameId\":{\"type\":\"string\"},\"modId\":{\"type\":\"string\"},\"fileId\":{\"type\":\"string\"},\"repository\":{\"type\":\"string\"},\"campaign\":{\"type\":\"string\"}},\"required\":[\"fileId\",\"repository\"]},\"description\":{\"type\":\"string\"},\"instructions\":{\"type\":\"string\"}}};const schema21 = {\"type\":\"string\",\"enum\":[\"before\",\"after\",\"requires\",\"conflicts\",\"recommends\",\"provides\"]};function validate16(data, {instancePath=\"\", parentData, parentDataProperty, rootData=data}={}){let vErrors = null;let errors = 0;if(data && typeof data == \"object\" && !Array.isArray(data)){if(data.source === undefined){const err0 = {instancePath,schemaPath:\"#/required\",keyword:\"required\",params:{missingProperty: \"source\"},message:\"must have required property '\"+\"source\"+\"'\",schema:schema19.required,parentSchema:schema19,data};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}if(data.type === undefined){const err1 = {instancePath,schemaPath:\"#/required\",keyword:\"required\",params:{missingProperty: \"type\"},message:\"must have required property '\"+\"type\"+\"'\",schema:schema19.required,parentSchema:schema19,data};if(vErrors === null){vErrors = [err1];}else {vErrors.push(err1);}errors++;}if(data.reference === undefined){const err2 = {instancePath,schemaPath:\"#/required\",keyword:\"required\",params:{missingProperty: \"reference\"},message:\"must have required property '\"+\"reference\"+\"'\",schema:schema19.required,parentSchema:schema19,data};if(vErrors === null){vErrors = [err2];}else {vErrors.push(err2);}errors++;}if(data.source !== undefined){let data0 = data.source;if(data0 && typeof data0 == \"object\" && !Array.isArray(data0)){if(data0.fileMD5 !== undefined){let data1 = data0.fileMD5;if(typeof data1 !== \"string\"){const err3 = {instancePath:instancePath+\"/source/fileMD5\",schemaPath:\"#/definitions/IModReference/properties/fileMD5/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.fileMD5.type,parentSchema:schema20.properties.fileMD5,data:data1};if(vErrors === null){vErrors = [err3];}else {vErrors.push(err3);}errors++;}}if(data0.fileSize !== undefined){let data2 = data0.fileSize;if(!((typeof data2 == \"number\") && (isFinite(data2)))){const err4 = {instancePath:instancePath+\"/source/fileSize\",schemaPath:\"#/definitions/IModReference/properties/fileSize/type\",keyword:\"type\",params:{type: \"number\"},message:\"must be number\",schema:schema20.properties.fileSize.type,parentSchema:schema20.properties.fileSize,data:data2};if(vErrors === null){vErrors = [err4];}else {vErrors.push(err4);}errors++;}}if(data0.gameId !== undefined){let data3 = data0.gameId;if(typeof data3 !== \"string\"){const err5 = {instancePath:instancePath+\"/source/gameId\",schemaPath:\"#/definitions/IModReference/properties/gameId/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.gameId.type,parentSchema:schema20.properties.gameId,data:data3};if(vErrors === null){vErrors = [err5];}else {vErrors.push(err5);}errors++;}}if(data0.versionMatch !== undefined){let data4 = data0.versionMatch;if(typeof data4 !== \"string\"){const err6 = {instancePath:instancePath+\"/source/versionMatch\",schemaPath:\"#/definitions/IModReference/properties/versionMatch/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.versionMatch.type,parentSchema:schema20.properties.versionMatch,data:data4};if(vErrors === null){vErrors = [err6];}else {vErrors.push(err6);}errors++;}}if(data0.logicalFileName !== undefined){let data5 = data0.logicalFileName;if(typeof data5 !== \"string\"){const err7 = {instancePath:instancePath+\"/source/logicalFileName\",schemaPath:\"#/definitions/IModReference/properties/logicalFileName/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.logicalFileName.type,parentSchema:schema20.properties.logicalFileName,data:data5};if(vErrors === null){vErrors = [err7];}else {vErrors.push(err7);}errors++;}}if(data0.fileExpression !== undefined){let data6 = data0.fileExpression;if(typeof data6 !== \"string\"){const err8 = {instancePath:instancePath+\"/source/fileExpression\",schemaPath:\"#/definitions/IModReference/properties/fileExpression/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.fileExpression.type,parentSchema:schema20.properties.fileExpression,data:data6};if(vErrors === null){vErrors = [err8];}else {vErrors.push(err8);}errors++;}}if(data0.id !== undefined){let data7 = data0.id;if(typeof data7 !== \"string\"){const err9 = {instancePath:instancePath+\"/source/id\",schemaPath:\"#/definitions/IModReference/properties/id/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.id.type,parentSchema:schema20.properties.id,data:data7};if(vErrors === null){vErrors = [err9];}else {vErrors.push(err9);}errors++;}}if(data0.idHint !== undefined){let data8 = data0.idHint;if(typeof data8 !== \"string\"){const err10 = {instancePath:instancePath+\"/source/idHint\",schemaPath:\"#/definitions/IModReference/properties/idHint/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.idHint.type,parentSchema:schema20.properties.idHint,data:data8};if(vErrors === null){vErrors = [err10];}else {vErrors.push(err10);}errors++;}}if(data0.md5Hint !== undefined){let data9 = data0.md5Hint;if(typeof data9 !== \"string\"){const err11 = {instancePath:instancePath+\"/source/md5Hint\",schemaPath:\"#/definitions/IModReference/properties/md5Hint/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.md5Hint.type,parentSchema:schema20.properties.md5Hint,data:data9};if(vErrors === null){vErrors = [err11];}else {vErrors.push(err11);}errors++;}}if(data0.tag !== undefined){let data10 = data0.tag;if(typeof data10 !== \"string\"){const err12 = {instancePath:instancePath+\"/source/tag\",schemaPath:\"#/definitions/IModReference/properties/tag/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.tag.type,parentSchema:schema20.properties.tag,data:data10};if(vErrors === null){vErrors = [err12];}else {vErrors.push(err12);}errors++;}}if(data0.archiveId !== undefined){let data11 = data0.archiveId;if(typeof data11 !== \"string\"){const err13 = {instancePath:instancePath+\"/source/archiveId\",schemaPath:\"#/definitions/IModReference/properties/archiveId/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.archiveId.type,parentSchema:schema20.properties.archiveId,data:data11};if(vErrors === null){vErrors = [err13];}else {vErrors.push(err13);}errors++;}}if(data0.repo !== undefined){let data12 = data0.repo;if(data12 && typeof data12 == \"object\" && !Array.isArray(data12)){if(data12.fileId === undefined){const err14 = {instancePath:instancePath+\"/source/repo\",schemaPath:\"#/definitions/IModReference/properties/repo/required\",keyword:\"required\",params:{missingProperty: \"fileId\"},message:\"must have required property '\"+\"fileId\"+\"'\",schema:schema20.properties.repo.required,parentSchema:schema20.properties.repo,data:data12};if(vErrors === null){vErrors = [err14];}else {vErrors.push(err14);}errors++;}if(data12.repository === undefined){const err15 = {instancePath:instancePath+\"/source/repo\",schemaPath:\"#/definitions/IModReference/properties/repo/required\",keyword:\"required\",params:{missingProperty: \"repository\"},message:\"must have required property '\"+\"repository\"+\"'\",schema:schema20.properties.repo.required,parentSchema:schema20.properties.repo,data:data12};if(vErrors === null){vErrors = [err15];}else {vErrors.push(err15);}errors++;}if(data12.gameId !== undefined){let data13 = data12.gameId;if(typeof data13 !== \"string\"){const err16 = {instancePath:instancePath+\"/source/repo/gameId\",schemaPath:\"#/definitions/IModReference/properties/repo/properties/gameId/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.repo.properties.gameId.type,parentSchema:schema20.properties.repo.properties.gameId,data:data13};if(vErrors === null){vErrors = [err16];}else {vErrors.push(err16);}errors++;}}if(data12.modId !== undefined){let data14 = data12.modId;if(typeof data14 !== \"string\"){const err17 = {instancePath:instancePath+\"/source/repo/modId\",schemaPath:\"#/definitions/IModReference/properties/repo/properties/modId/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.repo.properties.modId.type,parentSchema:schema20.properties.repo.properties.modId,data:data14};if(vErrors === null){vErrors = [err17];}else {vErrors.push(err17);}errors++;}}if(data12.fileId !== undefined){let data15 = data12.fileId;if(typeof data15 !== \"string\"){const err18 = {instancePath:instancePath+\"/source/repo/fileId\",schemaPath:\"#/definitions/IModReference/properties/repo/properties/fileId/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.repo.properties.fileId.type,parentSchema:schema20.properties.repo.properties.fileId,data:data15};if(vErrors === null){vErrors = [err18];}else {vErrors.push(err18);}errors++;}}if(data12.repository !== undefined){let data16 = data12.repository;if(typeof data16 !== \"string\"){const err19 = {instancePath:instancePath+\"/source/repo/repository\",schemaPath:\"#/definitions/IModReference/properties/repo/properties/repository/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.repo.properties.repository.type,parentSchema:schema20.properties.repo.properties.repository,data:data16};if(vErrors === null){vErrors = [err19];}else {vErrors.push(err19);}errors++;}}if(data12.campaign !== undefined){let data17 = data12.campaign;if(typeof data17 !== \"string\"){const err20 = {instancePath:instancePath+\"/source/repo/campaign\",schemaPath:\"#/definitions/IModReference/properties/repo/properties/campaign/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.repo.properties.campaign.type,parentSchema:schema20.properties.repo.properties.campaign,data:data17};if(vErrors === null){vErrors = [err20];}else {vErrors.push(err20);}errors++;}}}else {const err21 = {instancePath:instancePath+\"/source/repo\",schemaPath:\"#/definitions/IModReference/properties/repo/type\",keyword:\"type\",params:{type: \"object\"},message:\"must be object\",schema:schema20.properties.repo.type,parentSchema:schema20.properties.repo,data:data12};if(vErrors === null){vErrors = [err21];}else {vErrors.push(err21);}errors++;}}if(data0.description !== undefined){let data18 = data0.description;if(typeof data18 !== \"string\"){const err22 = {instancePath:instancePath+\"/source/description\",schemaPath:\"#/definitions/IModReference/properties/description/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.description.type,parentSchema:schema20.properties.description,data:data18};if(vErrors === null){vErrors = [err22];}else {vErrors.push(err22);}errors++;}}if(data0.instructions !== undefined){let data19 = data0.instructions;if(typeof data19 !== \"string\"){const err23 = {instancePath:instancePath+\"/source/instructions\",schemaPath:\"#/definitions/IModReference/properties/instructions/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.instructions.type,parentSchema:schema20.properties.instructions,data:data19};if(vErrors === null){vErrors = [err23];}else {vErrors.push(err23);}errors++;}}}else {const err24 = {instancePath:instancePath+\"/source\",schemaPath:\"#/definitions/IModReference/type\",keyword:\"type\",params:{type: \"object\"},message:\"must be object\",schema:schema20.type,parentSchema:schema20,data:data0};if(vErrors === null){vErrors = [err24];}else {vErrors.push(err24);}errors++;}}if(data.type !== undefined){let data20 = data.type;if(typeof data20 !== \"string\"){const err25 = {instancePath:instancePath+\"/type\",schemaPath:\"#/definitions/RuleType/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema21.type,parentSchema:schema21,data:data20};if(vErrors === null){vErrors = [err25];}else {vErrors.push(err25);}errors++;}if(!((((((data20 === \"before\") || (data20 === \"after\")) || (data20 === \"requires\")) || (data20 === \"conflicts\")) || (data20 === \"recommends\")) || (data20 === \"provides\"))){const err26 = {instancePath:instancePath+\"/type\",schemaPath:\"#/definitions/RuleType/enum\",keyword:\"enum\",params:{allowedValues: schema21.enum},message:\"must be equal to one of the allowed values\",schema:schema21.enum,parentSchema:schema21,data:data20};if(vErrors === null){vErrors = [err26];}else {vErrors.push(err26);}errors++;}}if(data.reference !== undefined){let data21 = data.reference;if(data21 && typeof data21 == \"object\" && !Array.isArray(data21)){if(data21.fileMD5 !== undefined){let data22 = data21.fileMD5;if(typeof data22 !== \"string\"){const err27 = {instancePath:instancePath+\"/reference/fileMD5\",schemaPath:\"#/definitions/IModReference/properties/fileMD5/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.fileMD5.type,parentSchema:schema20.properties.fileMD5,data:data22};if(vErrors === null){vErrors = [err27];}else {vErrors.push(err27);}errors++;}}if(data21.fileSize !== undefined){let data23 = data21.fileSize;if(!((typeof data23 == \"number\") && (isFinite(data23)))){const err28 = {instancePath:instancePath+\"/reference/fileSize\",schemaPath:\"#/definitions/IModReference/properties/fileSize/type\",keyword:\"type\",params:{type: \"number\"},message:\"must be number\",schema:schema20.properties.fileSize.type,parentSchema:schema20.properties.fileSize,data:data23};if(vErrors === null){vErrors = [err28];}else {vErrors.push(err28);}errors++;}}if(data21.gameId !== undefined){let data24 = data21.gameId;if(typeof data24 !== \"string\"){const err29 = {instancePath:instancePath+\"/reference/gameId\",schemaPath:\"#/definitions/IModReference/properties/gameId/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.gameId.type,parentSchema:schema20.properties.gameId,data:data24};if(vErrors === null){vErrors = [err29];}else {vErrors.push(err29);}errors++;}}if(data21.versionMatch !== undefined){let data25 = data21.versionMatch;if(typeof data25 !== \"string\"){const err30 = {instancePath:instancePath+\"/reference/versionMatch\",schemaPath:\"#/definitions/IModReference/properties/versionMatch/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.versionMatch.type,parentSchema:schema20.properties.versionMatch,data:data25};if(vErrors === null){vErrors = [err30];}else {vErrors.push(err30);}errors++;}}if(data21.logicalFileName !== undefined){let data26 = data21.logicalFileName;if(typeof data26 !== \"string\"){const err31 = {instancePath:instancePath+\"/reference/logicalFileName\",schemaPath:\"#/definitions/IModReference/properties/logicalFileName/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.logicalFileName.type,parentSchema:schema20.properties.logicalFileName,data:data26};if(vErrors === null){vErrors = [err31];}else {vErrors.push(err31);}errors++;}}if(data21.fileExpression !== undefined){let data27 = data21.fileExpression;if(typeof data27 !== \"string\"){const err32 = {instancePath:instancePath+\"/reference/fileExpression\",schemaPath:\"#/definitions/IModReference/properties/fileExpression/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.fileExpression.type,parentSchema:schema20.properties.fileExpression,data:data27};if(vErrors === null){vErrors = [err32];}else {vErrors.push(err32);}errors++;}}if(data21.id !== undefined){let data28 = data21.id;if(typeof data28 !== \"string\"){const err33 = {instancePath:instancePath+\"/reference/id\",schemaPath:\"#/definitions/IModReference/properties/id/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.id.type,parentSchema:schema20.properties.id,data:data28};if(vErrors === null){vErrors = [err33];}else {vErrors.push(err33);}errors++;}}if(data21.idHint !== undefined){let data29 = data21.idHint;if(typeof data29 !== \"string\"){const err34 = {instancePath:instancePath+\"/reference/idHint\",schemaPath:\"#/definitions/IModReference/properties/idHint/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.idHint.type,parentSchema:schema20.properties.idHint,data:data29};if(vErrors === null){vErrors = [err34];}else {vErrors.push(err34);}errors++;}}if(data21.md5Hint !== undefined){let data30 = data21.md5Hint;if(typeof data30 !== \"string\"){const err35 = {instancePath:instancePath+\"/reference/md5Hint\",schemaPath:\"#/definitions/IModReference/properties/md5Hint/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.md5Hint.type,parentSchema:schema20.properties.md5Hint,data:data30};if(vErrors === null){vErrors = [err35];}else {vErrors.push(err35);}errors++;}}if(data21.tag !== undefined){let data31 = data21.tag;if(typeof data31 !== \"string\"){const err36 = {instancePath:instancePath+\"/reference/tag\",schemaPath:\"#/definitions/IModReference/properties/tag/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.tag.type,parentSchema:schema20.properties.tag,data:data31};if(vErrors === null){vErrors = [err36];}else {vErrors.push(err36);}errors++;}}if(data21.archiveId !== undefined){let data32 = data21.archiveId;if(typeof data32 !== \"string\"){const err37 = {instancePath:instancePath+\"/reference/archiveId\",schemaPath:\"#/definitions/IModReference/properties/archiveId/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.archiveId.type,parentSchema:schema20.properties.archiveId,data:data32};if(vErrors === null){vErrors = [err37];}else {vErrors.push(err37);}errors++;}}if(data21.repo !== undefined){let data33 = data21.repo;if(data33 && typeof data33 == \"object\" && !Array.isArray(data33)){if(data33.fileId === undefined){const err38 = {instancePath:instancePath+\"/reference/repo\",schemaPath:\"#/definitions/IModReference/properties/repo/required\",keyword:\"required\",params:{missingProperty: \"fileId\"},message:\"must have required property '\"+\"fileId\"+\"'\",schema:schema20.properties.repo.required,parentSchema:schema20.properties.repo,data:data33};if(vErrors === null){vErrors = [err38];}else {vErrors.push(err38);}errors++;}if(data33.repository === undefined){const err39 = {instancePath:instancePath+\"/reference/repo\",schemaPath:\"#/definitions/IModReference/properties/repo/required\",keyword:\"required\",params:{missingProperty: \"repository\"},message:\"must have required property '\"+\"repository\"+\"'\",schema:schema20.properties.repo.required,parentSchema:schema20.properties.repo,data:data33};if(vErrors === null){vErrors = [err39];}else {vErrors.push(err39);}errors++;}if(data33.gameId !== undefined){let data34 = data33.gameId;if(typeof data34 !== \"string\"){const err40 = {instancePath:instancePath+\"/reference/repo/gameId\",schemaPath:\"#/definitions/IModReference/properties/repo/properties/gameId/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.repo.properties.gameId.type,parentSchema:schema20.properties.repo.properties.gameId,data:data34};if(vErrors === null){vErrors = [err40];}else {vErrors.push(err40);}errors++;}}if(data33.modId !== undefined){let data35 = data33.modId;if(typeof data35 !== \"string\"){const err41 = {instancePath:instancePath+\"/reference/repo/modId\",schemaPath:\"#/definitions/IModReference/properties/repo/properties/modId/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.repo.properties.modId.type,parentSchema:schema20.properties.repo.properties.modId,data:data35};if(vErrors === null){vErrors = [err41];}else {vErrors.push(err41);}errors++;}}if(data33.fileId !== undefined){let data36 = data33.fileId;if(typeof data36 !== \"string\"){const err42 = {instancePath:instancePath+\"/reference/repo/fileId\",schemaPath:\"#/definitions/IModReference/properties/repo/properties/fileId/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.repo.properties.fileId.type,parentSchema:schema20.properties.repo.properties.fileId,data:data36};if(vErrors === null){vErrors = [err42];}else {vErrors.push(err42);}errors++;}}if(data33.repository !== undefined){let data37 = data33.repository;if(typeof data37 !== \"string\"){const err43 = {instancePath:instancePath+\"/reference/repo/repository\",schemaPath:\"#/definitions/IModReference/properties/repo/properties/repository/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.repo.properties.repository.type,parentSchema:schema20.properties.repo.properties.repository,data:data37};if(vErrors === null){vErrors = [err43];}else {vErrors.push(err43);}errors++;}}if(data33.campaign !== undefined){let data38 = data33.campaign;if(typeof data38 !== \"string\"){const err44 = {instancePath:instancePath+\"/reference/repo/campaign\",schemaPath:\"#/definitions/IModReference/properties/repo/properties/campaign/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.repo.properties.campaign.type,parentSchema:schema20.properties.repo.properties.campaign,data:data38};if(vErrors === null){vErrors = [err44];}else {vErrors.push(err44);}errors++;}}}else {const err45 = {instancePath:instancePath+\"/reference/repo\",schemaPath:\"#/definitions/IModReference/properties/repo/type\",keyword:\"type\",params:{type: \"object\"},message:\"must be object\",schema:schema20.properties.repo.type,parentSchema:schema20.properties.repo,data:data33};if(vErrors === null){vErrors = [err45];}else {vErrors.push(err45);}errors++;}}if(data21.description !== undefined){let data39 = data21.description;if(typeof data39 !== \"string\"){const err46 = {instancePath:instancePath+\"/reference/description\",schemaPath:\"#/definitions/IModReference/properties/description/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.description.type,parentSchema:schema20.properties.description,data:data39};if(vErrors === null){vErrors = [err46];}else {vErrors.push(err46);}errors++;}}if(data21.instructions !== undefined){let data40 = data21.instructions;if(typeof data40 !== \"string\"){const err47 = {instancePath:instancePath+\"/reference/instructions\",schemaPath:\"#/definitions/IModReference/properties/instructions/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema20.properties.instructions.type,parentSchema:schema20.properties.instructions,data:data40};if(vErrors === null){vErrors = [err47];}else {vErrors.push(err47);}errors++;}}}else {const err48 = {instancePath:instancePath+\"/reference\",schemaPath:\"#/definitions/IModReference/type\",keyword:\"type\",params:{type: \"object\"},message:\"must be object\",schema:schema20.type,parentSchema:schema20,data:data21};if(vErrors === null){vErrors = [err48];}else {vErrors.push(err48);}errors++;}}}else {const err49 = {instancePath,schemaPath:\"#/type\",keyword:\"type\",params:{type: \"object\"},message:\"must be object\",schema:schema19.type,parentSchema:schema19,data};if(vErrors === null){vErrors = [err49];}else {vErrors.push(err49);}errors++;}validate16.errors = vErrors;return errors === 0;}function validate11(data, {instancePath=\"\", parentData, parentDataProperty, rootData=data}={}){let vErrors = null;let errors = 0;if(data && typeof data == \"object\" && !Array.isArray(data)){if(data.info === undefined){const err0 = {instancePath,schemaPath:\"#/required\",keyword:\"required\",params:{missingProperty: \"info\"},message:\"must have required property '\"+\"info\"+\"'\",schema:schema12.required,parentSchema:schema12,data};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}if(data.mods === undefined){const err1 = {instancePath,schemaPath:\"#/required\",keyword:\"required\",params:{missingProperty: \"mods\"},message:\"must have required property '\"+\"mods\"+\"'\",schema:schema12.required,parentSchema:schema12,data};if(vErrors === null){vErrors = [err1];}else {vErrors.push(err1);}errors++;}if(data.modRules === undefined){const err2 = {instancePath,schemaPath:\"#/required\",keyword:\"required\",params:{missingProperty: \"modRules\"},message:\"must have required property '\"+\"modRules\"+\"'\",schema:schema12.required,parentSchema:schema12,data};if(vErrors === null){vErrors = [err2];}else {vErrors.push(err2);}errors++;}if(data.plugins !== undefined){let data0 = data.plugins;if(Array.isArray(data0)){const len0 = data0.length;for(let i0=0; i0<len0; i0++){let data1 = data0[i0];if(data1 && typeof data1 == \"object\" && !Array.isArray(data1)){if(data1.name === undefined){const err3 = {instancePath:instancePath+\"/plugins/\" + i0,schemaPath:\"#/properties/plugins/items/required\",keyword:\"required\",params:{missingProperty: \"name\"},message:\"must have required property '\"+\"name\"+\"'\",schema:schema12.properties.plugins.items.required,parentSchema:schema12.properties.plugins.items,data:data1};if(vErrors === null){vErrors = [err3];}else {vErrors.push(err3);}errors++;}if(data1.name !== undefined){let data2 = data1.name;if(typeof data2 !== \"string\"){const err4 = {instancePath:instancePath+\"/plugins/\" + i0+\"/name\",schemaPath:\"#/properties/plugins/items/properties/name/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema12.properties.plugins.items.properties.name.type,parentSchema:schema12.properties.plugins.items.properties.name,data:data2};if(vErrors === null){vErrors = [err4];}else {vErrors.push(err4);}errors++;}}if(data1.enabled !== undefined){let data3 = data1.enabled;if(typeof data3 !== \"boolean\"){const err5 = {instancePath:instancePath+\"/plugins/\" + i0+\"/enabled\",schemaPath:\"#/properties/plugins/items/properties/enabled/type\",keyword:\"type\",params:{type: \"boolean\"},message:\"must be boolean\",schema:schema12.properties.plugins.items.properties.enabled.type,parentSchema:schema12.properties.plugins.items.properties.enabled,data:data3};if(vErrors === null){vErrors = [err5];}else {vErrors.push(err5);}errors++;}}}else {const err6 = {instancePath:instancePath+\"/plugins/\" + i0,schemaPath:\"#/properties/plugins/items/type\",keyword:\"type\",params:{type: \"object\"},message:\"must be object\",schema:schema12.properties.plugins.items.type,parentSchema:schema12.properties.plugins.items,data:data1};if(vErrors === null){vErrors = [err6];}else {vErrors.push(err6);}errors++;}}}else {const err7 = {instancePath:instancePath+\"/plugins\",schemaPath:\"#/properties/plugins/type\",keyword:\"type\",params:{type: \"array\"},message:\"must be array\",schema:schema12.properties.plugins.type,parentSchema:schema12.properties.plugins,data:data0};if(vErrors === null){vErrors = [err7];}else {vErrors.push(err7);}errors++;}}if(data.pluginRules !== undefined){let data4 = data.pluginRules;if(data4 && typeof data4 == \"object\" && !Array.isArray(data4)){if(data4.plugins === undefined){const err8 = {instancePath:instancePath+\"/pluginRules\",schemaPath:\"#/properties/pluginRules/required\",keyword:\"required\",params:{missingProperty: \"plugins\"},message:\"must have required property '\"+\"plugins\"+\"'\",schema:schema12.properties.pluginRules.required,parentSchema:schema12.properties.pluginRules,data:data4};if(vErrors === null){vErrors = [err8];}else {vErrors.push(err8);}errors++;}if(data4.plugins !== undefined){let data5 = data4.plugins;if(Array.isArray(data5)){const len1 = data5.length;for(let i1=0; i1<len1; i1++){let data6 = data5[i1];if(data6 && typeof data6 == \"object\" && !Array.isArray(data6)){if(data6.name === undefined){const err9 = {instancePath:instancePath+\"/pluginRules/plugins/\" + i1,schemaPath:\"#/properties/pluginRules/properties/plugins/items/required\",keyword:\"required\",params:{missingProperty: \"name\"},message:\"must have required property '\"+\"name\"+\"'\",schema:schema12.properties.pluginRules.properties.plugins.items.required,parentSchema:schema12.properties.pluginRules.properties.plugins.items,data:data6};if(vErrors === null){vErrors = [err9];}else {vErrors.push(err9);}errors++;}if(data6.name !== undefined){let data7 = data6.name;if(typeof data7 !== \"string\"){const err10 = {instancePath:instancePath+\"/pluginRules/plugins/\" + i1+\"/name\",schemaPath:\"#/properties/pluginRules/properties/plugins/items/properties/name/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema12.properties.pluginRules.properties.plugins.items.properties.name.type,parentSchema:schema12.properties.pluginRules.properties.plugins.items.properties.name,data:data7};if(vErrors === null){vErrors = [err10];}else {vErrors.push(err10);}errors++;}}if(data6.group !== undefined){let data8 = data6.group;if(typeof data8 !== \"string\"){const err11 = {instancePath:instancePath+\"/pluginRules/plugins/\" + i1+\"/group\",schemaPath:\"#/properties/pluginRules/properties/plugins/items/properties/group/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema12.properties.pluginRules.properties.plugins.items.properties.group.type,parentSchema:schema12.properties.pluginRules.properties.plugins.items.properties.group,data:data8};if(vErrors === null){vErrors = [err11];}else {vErrors.push(err11);}errors++;}}if(data6.after !== undefined){let data9 = data6.after;if(Array.isArray(data9)){const len2 = data9.length;for(let i2=0; i2<len2; i2++){let data10 = data9[i2];if(typeof data10 !== \"string\"){const err12 = {instancePath:instancePath+\"/pluginRules/plugins/\" + i1+\"/after/\" + i2,schemaPath:\"#/properties/pluginRules/properties/plugins/items/properties/after/items/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema12.properties.pluginRules.properties.plugins.items.properties.after.items.type,parentSchema:schema12.properties.pluginRules.properties.plugins.items.properties.after.items,data:data10};if(vErrors === null){vErrors = [err12];}else {vErrors.push(err12);}errors++;}}}else {const err13 = {instancePath:instancePath+\"/pluginRules/plugins/\" + i1+\"/after\",schemaPath:\"#/properties/pluginRules/properties/plugins/items/properties/after/type\",keyword:\"type\",params:{type: \"array\"},message:\"must be array\",schema:schema12.properties.pluginRules.properties.plugins.items.properties.after.type,parentSchema:schema12.properties.pluginRules.properties.plugins.items.properties.after,data:data9};if(vErrors === null){vErrors = [err13];}else {vErrors.push(err13);}errors++;}}}else {const err14 = {instancePath:instancePath+\"/pluginRules/plugins/\" + i1,schemaPath:\"#/properties/pluginRules/properties/plugins/items/type\",keyword:\"type\",params:{type: \"object\"},message:\"must be object\",schema:schema12.properties.pluginRules.properties.plugins.items.type,parentSchema:schema12.properties.pluginRules.properties.plugins.items,data:data6};if(vErrors === null){vErrors = [err14];}else {vErrors.push(err14);}errors++;}}}else {const err15 = {instancePath:instancePath+\"/pluginRules/plugins\",schemaPath:\"#/properties/pluginRules/properties/plugins/type\",keyword:\"type\",params:{type: \"array\"},message:\"must be array\",schema:schema12.properties.pluginRules.properties.plugins.type,parentSchema:schema12.properties.pluginRules.properties.plugins,data:data5};if(vErrors === null){vErrors = [err15];}else {vErrors.push(err15);}errors++;}}if(data4.groups !== undefined){let data11 = data4.groups;if(Array.isArray(data11)){const len3 = data11.length;for(let i3=0; i3<len3; i3++){let data12 = data11[i3];if(data12 && typeof data12 == \"object\" && !Array.isArray(data12)){if(data12.name === undefined){const err16 = {instancePath:instancePath+\"/pluginRules/groups/\" + i3,schemaPath:\"#/properties/pluginRules/properties/groups/items/required\",keyword:\"required\",params:{missingProperty: \"name\"},message:\"must have required property '\"+\"name\"+\"'\",schema:schema12.properties.pluginRules.properties.groups.items.required,parentSchema:schema12.properties.pluginRules.properties.groups.items,data:data12};if(vErrors === null){vErrors = [err16];}else {vErrors.push(err16);}errors++;}if(data12.name !== undefined){let data13 = data12.name;if(typeof data13 !== \"string\"){const err17 = {instancePath:instancePath+\"/pluginRules/groups/\" + i3+\"/name\",schemaPath:\"#/properties/pluginRules/properties/groups/items/properties/name/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema12.properties.pluginRules.properties.groups.items.properties.name.type,parentSchema:schema12.properties.pluginRules.properties.groups.items.properties.name,data:data13};if(vErrors === null){vErrors = [err17];}else {vErrors.push(err17);}errors++;}}if(data12.group !== undefined){let data14 = data12.group;if(typeof data14 !== \"string\"){const err18 = {instancePath:instancePath+\"/pluginRules/groups/\" + i3+\"/group\",schemaPath:\"#/properties/pluginRules/properties/groups/items/properties/group/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema12.properties.pluginRules.properties.groups.items.properties.group.type,parentSchema:schema12.properties.pluginRules.properties.groups.items.properties.group,data:data14};if(vErrors === null){vErrors = [err18];}else {vErrors.push(err18);}errors++;}}if(data12.after !== undefined){let data15 = data12.after;if(Array.isArray(data15)){const len4 = data15.length;for(let i4=0; i4<len4; i4++){let data16 = data15[i4];if(typeof data16 !== \"string\"){const err19 = {instancePath:instancePath+\"/pluginRules/groups/\" + i3+\"/after/\" + i4,schemaPath:\"#/properties/pluginRules/properties/groups/items/properties/after/items/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema12.properties.pluginRules.properties.groups.items.properties.after.items.type,parentSchema:schema12.properties.pluginRules.properties.groups.items.properties.after.items,data:data16};if(vErrors === null){vErrors = [err19];}else {vErrors.push(err19);}errors++;}}}else {const err20 = {instancePath:instancePath+\"/pluginRules/groups/\" + i3+\"/after\",schemaPath:\"#/properties/pluginRules/properties/groups/items/properties/after/type\",keyword:\"type\",params:{type: \"array\"},message:\"must be array\",schema:schema12.properties.pluginRules.properties.groups.items.properties.after.type,parentSchema:schema12.properties.pluginRules.properties.groups.items.properties.after,data:data15};if(vErrors === null){vErrors = [err20];}else {vErrors.push(err20);}errors++;}}}else {const err21 = {instancePath:instancePath+\"/pluginRules/groups/\" + i3,schemaPath:\"#/properties/pluginRules/properties/groups/items/type\",keyword:\"type\",params:{type: \"object\"},message:\"must be object\",schema:schema12.properties.pluginRules.properties.groups.items.type,parentSchema:schema12.properties.pluginRules.properties.groups.items,data:data12};if(vErrors === null){vErrors = [err21];}else {vErrors.push(err21);}errors++;}}}else {const err22 = {instancePath:instancePath+\"/pluginRules/groups\",schemaPath:\"#/properties/pluginRules/properties/groups/type\",keyword:\"type\",params:{type: \"array\"},message:\"must be array\",schema:schema12.properties.pluginRules.properties.groups.type,parentSchema:schema12.properties.pluginRules.properties.groups,data:data11};if(vErrors === null){vErrors = [err22];}else {vErrors.push(err22);}errors++;}}}else {const err23 = {instancePath:instancePath+\"/pluginRules\",schemaPath:\"#/properties/pluginRules/type\",keyword:\"type\",params:{type: \"object\"},message:\"must be object\",schema:schema12.properties.pluginRules.type,parentSchema:schema12.properties.pluginRules,data:data4};if(vErrors === null){vErrors = [err23];}else {vErrors.push(err23);}errors++;}}if(data.info !== undefined){let data17 = data.info;if(data17 && typeof data17 == \"object\" && !Array.isArray(data17)){if(data17.author === undefined){const err24 = {instancePath:instancePath+\"/info\",schemaPath:\"#/definitions/ICollectionInfo/required\",keyword:\"required\",params:{missingProperty: \"author\"},message:\"must have required property '\"+\"author\"+\"'\",schema:schema13.required,parentSchema:schema13,data:data17};if(vErrors === null){vErrors = [err24];}else {vErrors.push(err24);}errors++;}if(data17.authorUrl === undefined){const err25 = {instancePath:instancePath+\"/info\",schemaPath:\"#/definitions/ICollectionInfo/required\",keyword:\"required\",params:{missingProperty: \"authorUrl\"},message:\"must have required property '\"+\"authorUrl\"+\"'\",schema:schema13.required,parentSchema:schema13,data:data17};if(vErrors === null){vErrors = [err25];}else {vErrors.push(err25);}errors++;}if(data17.name === undefined){const err26 = {instancePath:instancePath+\"/info\",schemaPath:\"#/definitions/ICollectionInfo/required\",keyword:\"required\",params:{missingProperty: \"name\"},message:\"must have required property '\"+\"name\"+\"'\",schema:schema13.required,parentSchema:schema13,data:data17};if(vErrors === null){vErrors = [err26];}else {vErrors.push(err26);}errors++;}if(data17.description === undefined){const err27 = {instancePath:instancePath+\"/info\",schemaPath:\"#/definitions/ICollectionInfo/required\",keyword:\"required\",params:{missingProperty: \"description\"},message:\"must have required property '\"+\"description\"+\"'\",schema:schema13.required,parentSchema:schema13,data:data17};if(vErrors === null){vErrors = [err27];}else {vErrors.push(err27);}errors++;}if(data17.domainName === undefined){const err28 = {instancePath:instancePath+\"/info\",schemaPath:\"#/definitions/ICollectionInfo/required\",keyword:\"required\",params:{missingProperty: \"domainName\"},message:\"must have required property '\"+\"domainName\"+\"'\",schema:schema13.required,parentSchema:schema13,data:data17};if(vErrors === null){vErrors = [err28];}else {vErrors.push(err28);}errors++;}if(data17.author !== undefined){let data18 = data17.author;if(typeof data18 !== \"string\"){const err29 = {instancePath:instancePath+\"/info/author\",schemaPath:\"#/definitions/ICollectionInfo/properties/author/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema13.properties.author.type,parentSchema:schema13.properties.author,data:data18};if(vErrors === null){vErrors = [err29];}else {vErrors.push(err29);}errors++;}}if(data17.authorUrl !== undefined){let data19 = data17.authorUrl;if(typeof data19 !== \"string\"){const err30 = {instancePath:instancePath+\"/info/authorUrl\",schemaPath:\"#/definitions/ICollectionInfo/properties/authorUrl/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema13.properties.authorUrl.type,parentSchema:schema13.properties.authorUrl,data:data19};if(vErrors === null){vErrors = [err30];}else {vErrors.push(err30);}errors++;}}if(data17.name !== undefined){let data20 = data17.name;if(typeof data20 !== \"string\"){const err31 = {instancePath:instancePath+\"/info/name\",schemaPath:\"#/definitions/ICollectionInfo/properties/name/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema13.properties.name.type,parentSchema:schema13.properties.name,data:data20};if(vErrors === null){vErrors = [err31];}else {vErrors.push(err31);}errors++;}}if(data17.description !== undefined){let data21 = data17.description;if(typeof data21 !== \"string\"){const err32 = {instancePath:instancePath+\"/info/description\",schemaPath:\"#/definitions/ICollectionInfo/properties/description/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema13.properties.description.type,parentSchema:schema13.properties.description,data:data21};if(vErrors === null){vErrors = [err32];}else {vErrors.push(err32);}errors++;}}if(data17.domainName !== undefined){let data22 = data17.domainName;if(typeof data22 !== \"string\"){const err33 = {instancePath:instancePath+\"/info/domainName\",schemaPath:\"#/definitions/ICollectionInfo/properties/domainName/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema13.properties.domainName.type,parentSchema:schema13.properties.domainName,data:data22};if(vErrors === null){vErrors = [err33];}else {vErrors.push(err33);}errors++;}}if(data17.gameVersions !== undefined){let data23 = data17.gameVersions;if(Array.isArray(data23)){const len5 = data23.length;for(let i5=0; i5<len5; i5++){let data24 = data23[i5];if(typeof data24 !== \"string\"){const err34 = {instancePath:instancePath+\"/info/gameVersions/\" + i5,schemaPath:\"#/definitions/ICollectionInfo/properties/gameVersions/items/type\",keyword:\"type\",params:{type: \"string\"},message:\"must be string\",schema:schema13.properties.gameVersions.items.type,parentSchema:schema13.properties.gameVersions.items,data:data24};if(vErrors === null){vErrors = [err34];}else {vErrors.push(err34);}errors++;}}}else {const err35 = {instancePath:instancePath+\"/info/gameVersions\",schemaPath:\"#/definitions/ICollectionInfo/properties/gameVersions/type\",keyword:\"type\",params:{type: \"array\"},message:\"must be array\",schema:schema13.properties.gameVersions.type,parentSchema:schema13.properties.gameVersions,data:data23};if(vErrors === null){vErrors = [err35];}else {vErrors.push(err35);}errors++;}}}else {const err36 = {instancePath:instancePath+\"/info\",schemaPath:\"#/definitions/ICollectionInfo/type\",keyword:\"type\",params:{type: \"object\"},message:\"must be object\",schema:schema13.type,parentSchema:schema13,data:data17};if(vErrors === null){vErrors = [err36];}else {vErrors.push(err36);}errors++;}}if(data.mods !== undefined){let data25 = data.mods;if(Array.isArray(data25)){const len6 = data25.length;for(let i6=0; i6<len6; i6++){if(!(validate12(data25[i6], {instancePath:instancePath+\"/mods/\" + i6,parentData:data25,parentDataProperty:i6,rootData}))){vErrors = vErrors === null ? validate12.errors : vErrors.concat(validate12.errors);errors = vErrors.length;}}}else {const err37 = {instancePath:instancePath+\"/mods\",schemaPath:\"#/properties/mods/type\",keyword:\"type\",params:{type: \"array\"},message:\"must be array\",schema:schema12.properties.mods.type,parentSchema:schema12.properties.mods,data:data25};if(vErrors === null){vErrors = [err37];}else {vErrors.push(err37);}errors++;}}if(data.modRules !== undefined){let data27 = data.modRules;if(Array.isArray(data27)){const len7 = data27.length;for(let i7=0; i7<len7; i7++){if(!(validate16(data27[i7], {instancePath:instancePath+\"/modRules/\" + i7,parentData:data27,parentDataProperty:i7,rootData}))){vErrors = vErrors === null ? validate16.errors : vErrors.concat(validate16.errors);errors = vErrors.length;}}}else {const err38 = {instancePath:instancePath+\"/modRules\",schemaPath:\"#/properties/modRules/type\",keyword:\"type\",params:{type: \"array\"},message:\"must be array\",schema:schema12.properties.modRules.type,parentSchema:schema12.properties.modRules,data:data27};if(vErrors === null){vErrors = [err38];}else {vErrors.push(err38);}errors++;}}}else {const err39 = {instancePath,schemaPath:\"#/type\",keyword:\"type\",params:{type: \"object\"},message:\"must be object\",schema:schema12.type,parentSchema:schema12,data};if(vErrors === null){vErrors = [err39];}else {vErrors.push(err39);}errors++;}validate11.errors = vErrors;return errors === 0;}function validate10(data, {instancePath=\"\", parentData, parentDataProperty, rootData=data}={}){let vErrors = null;let errors = 0;const _errs0 = errors;let valid0 = false;const _errs1 = errors;if(!(validate11(data, {instancePath,parentData,parentDataProperty,rootData}))){vErrors = vErrors === null ? validate11.errors : vErrors.concat(validate11.errors);errors = vErrors.length;}var _valid0 = _errs1 === errors;valid0 = valid0 || _valid0;if(!valid0){const err0 = {instancePath,schemaPath:\"#/anyOf\",keyword:\"anyOf\",params:{},message:\"must match a schema in anyOf\",schema:schema11.anyOf,parentSchema:schema11,data};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}else {errors = _errs0;if(vErrors !== null){if(_errs0){vErrors.length = _errs0;}else {vErrors = null;}}}validate10.errors = vErrors;return errors === 0;}\n","function dummyFunc() {\n    console.error('Standalone validation code relies on AJV module; validation may fail');\n    return;\n}\nexports.default = dummyFunc;","import validateAFJBaqeO from \"./ICollection.validate\";export function validateICollection(data): any[] {\n    var res = validateAFJBaqeO(data);\n    return (res === false) ? validateAFJBaqeO.prototype.constructor.errors : [];\n}","import * as React from 'react';\nimport { useState } from 'react';\nimport { Button } from 'react-bootstrap';\nimport { useTranslation } from 'react-i18next';\nimport { useDispatch, useSelector, useStore } from 'react-redux';\nimport { EmptyPlaceholder, Modal, selectors, Table, TableTextFilter, types, Usage, util } from 'vortex-api';\nimport { startAddModsToCollection } from '../actions/session';\nimport { alreadyIncluded } from '../collectionCreate';\nimport { MOD_TYPE, NAMESPACE } from '../constants';\n\nexport interface IAddModsDialogProps {\n  t: types.TFunction;\n  onAddSelection: (collectionId: string, modIds: string[]) => void;\n}\n\ninterface IModWithState {\n  selected: boolean;\n  mod: types.IMod;\n}\n\nfunction makeColumns(onSelect: (modIds: string[], value: boolean) => void)\n                     : Array<types.ITableAttribute<IModWithState>> {\n  let collator: Intl.Collator;\n  return [\n    /*\n    {\n      id: 'selected',\n      name: 'Selected',\n      calc: (mod: IModWithState) => mod.selected,\n      placement: 'table',\n      edit: {\n        onChangeValue: (mod: IModWithState | IModWithState[], newValue: boolean) => {\n          const mods = Array.isArray(mod) ? mod : [mod];\n          onSelect(mods.map(mod => mod.mod.id), newValue);\n        },\n      },\n    },\n    */\n    {\n      id: 'name',\n      name: 'Mod Name',\n      description: 'Mod Name',\n      calc: (mod: IModWithState) => util.renderModName(mod.mod),\n      placement: 'table',\n      edit: {},\n      isDefaultSort: true,\n      isSortable: true,\n      filter: new TableTextFilter(true),\n      sortFunc: (lhs: string, rhs: string, locale: string): number => {\n        if (collator === undefined) {\n          collator = new Intl.Collator(locale, { sensitivity: 'base' });\n        }\n        return collator.compare(lhs, rhs);\n      },\n    }, {\n      id: 'variant',\n      name: 'Variant',\n      description: 'The variant',\n      calc: (mod: IModWithState) => mod.mod.attributes?.variant ?? '',\n      placement: 'table',\n      edit: {},\n    }, {\n      id: 'version',\n      name: 'Version',\n      description: 'The version',\n      calc: (mod: IModWithState) => mod.mod.attributes?.version ?? '',\n      placement: 'table',\n      edit: {},\n    },\n  ];\n}\n\nfunction AddModsDialog(props: IAddModsDialogProps) {\n  const { onAddSelection } = props;\n  const { t } = useTranslation(NAMESPACE);\n  const store = useStore();\n  const dispatch = useDispatch();\n  const hide = React.useCallback(() => {\n    dispatch(startAddModsToCollection(undefined));\n  }, []);\n\n  const [ selection, setSelection ] = useState(new Set<string>());\n\n  const state: types.IState = store.getState();\n  const gameId = selectors.activeGameId(state);\n  const collectionId: string =\n    useSelector<any, string>(stateSel => stateSel.session.collections.addModsId);\n\n  const collection = collectionId !== undefined\n    ? state.persistent.mods[gameId]?.[collectionId]\n    : undefined;\n\n  const mods = state.persistent.mods[gameId];\n  const modsWithState = React.useMemo(() => Object.keys(mods ?? {})\n    .reduce((prev, modId) => {\n      if (!alreadyIncluded(collection?.rules, modId)\n          && (mods[modId].type !== MOD_TYPE)) {\n        prev[modId] = {\n          selected: selection.has(modId),\n          mod: mods[modId],\n        };\n      }\n      return prev;\n    }, {}), [selection, collectionId]);\n  const changeSelection = React.useCallback((modIds: string[], selected: boolean) => {\n    if (selected) {\n      setSelection(new Set<string>([].concat(Array.from(selection), modIds)));\n    } else {\n      setSelection(new Set<string>(Array.from(selection).filter(modId => !modIds.includes(modId))));\n    }\n  }, [selection, setSelection, collectionId]);\n  const columns = React.useMemo(() => makeColumns(changeSelection),\n    [selection, setSelection, collectionId]);\n\n  const addSelection = React.useCallback(() => {\n    onAddSelection(collectionId, Array.from(selection));\n    hide();\n  }, [ onAddSelection, hide, selection, collectionId ]);\n  const updateSelection = React.useCallback((modIds: string[]) => {\n    setSelection(new Set(modIds));\n  }, [setSelection]);\n\n  const TableX: any = Table;\n  return (\n    <Modal\n      id='add-mods-to-collection-dialog'\n      className='collection-add-mods-dialog'\n      show={collection !== undefined}\n      onHide={hide}\n    >\n      <Modal.Header>\n        <Modal.Title>{util.renderModName(collection)}</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        {(Object.keys(modsWithState).length > 0)\n          ? (<>\n            {t('Select (click, shift-click, ...) installed mods you want to add to your collection below:')}\n            <TableX\n              tableId='collection-add-mods'\n              data={modsWithState}\n              staticElements={columns}\n              actions={[]}\n              showDetails={false}\n              hasActions={false}\n              onChangeSelection={updateSelection}\n            />\n          </>\n          ) : (\n            <EmptyPlaceholder\n              icon='folder-download'\n              fill={true}\n              text={t('You don\\'t have any installed mods')}\n            />\n          )}\n      </Modal.Body>\n      <Usage persistent infoId='add-mods-from-mods-page'>\n        <p>\n          {t('You can also add mods to a collection from the mods screen: '\n           + 'Right-click > Add to Collection')}\n        </p>\n        <p>\n          {t('Mods need to be in an installed state in order to add them to a collection. '\n           + 'If the mod you want to add is not in this list, make sure it\\'s installed.')}\n        </p>\n      </Usage>\n      <Modal.Footer>\n        <Button onClick={hide}>{t('Close')}</Button>\n        <Button onClick={addSelection}>{t('Add Selection')}</Button>\n      </Modal.Footer>\n    </Modal>\n  );\n}\n\nexport default React.memo(AddModsDialog);\n","/* eslint-disable */\nimport { setSortAdded, setSortWorkshop } from '../../actions/settings';\nimport { initFromProfile } from '../../collectionCreate';\nimport {\n  MAX_COLLECTION_NAME_LENGTH,\n  MIN_COLLECTION_NAME_LENGTH,\n  MOD_TYPE, NAMESPACE, NEXUS_BASE_GAMES_URL, NEXUS_BASE_URL, NEXUS_NEXT_URL } from '../../constants';\nimport InfoCache from '../../util/InfoCache';\nimport { validateName } from '../../util/transformCollection';\n\nimport CollectionThumbnail from '../CollectionTile';\nimport CollectionThumbnailRemote from '../CollectionTile/RemoteTile';\n\nimport { IRevision } from '@nexusmods/nexus-api';\nimport i18next from 'i18next';\nimport * as _ from 'lodash';\nimport * as React from 'react';\nimport { Panel, Tab, Tabs } from 'react-bootstrap';\nimport { Trans } from 'react-i18next';\nimport { connect } from 'react-redux';\nimport Select from 'react-select';\nimport { ComponentEx, EmptyPlaceholder, Icon, IconBar, log, types, util } from 'vortex-api';\n\nconst FEEDBACK_URL = 'https://docs.google.com/forms/d/e/1FAIpQLSc3csy4ycVBECvHQDgri37Gqq1gOuTQ7LcpiIaOkGHpDsW4kA/viewform?usp=sf_link';\nconst BUG_REPORT_URL = 'https://docs.google.com/forms/d/e/1FAIpQLSdmDBdGjTQVRa7wRouN4yP6zMvqsxTT86R-DwmQXZq7SWGCSg/viewform?usp=sf_link';\n\nexport interface IStartPageProps {\n  t: i18next.TFunction;\n  game: types.IGameStored;\n  installing: types.IMod;\n  infoCache: InfoCache;\n  profile: types.IProfile;\n  activeTab: string;\n  localState: { ownCollections: IRevision[] };\n  mods: { [modId: string]: types.IMod };\n  matchedReferences: { [collectionId: string]: types.IMod[] };\n  onCreateCollection: (name: string) => void;\n  onInstallCollection: (revision: IRevision) => Promise<void>;\n  onClone: (modId: string) => Promise<void>;\n  onEdit: (modId: string) => void;\n  onUpdate: (modId: string) => Promise<void>;\n  onUpload: (modId: string) => void;\n  onView: (modId: string) => void;\n  onRemove: (modId: string) => void;\n  onResume: (modId: string) => void;\n  onPause: (modId: string) => void;\n  onSetActiveTab: (tabId: string) => void;\n}\n\ninterface IConnectedProps {\n  userInfo: { name: string, userId: number };\n  sortAdded: string;\n  sortWorkshop: string;\n}\n\ninterface IActionProps {\n  onSetSortAdded: (sorting: string) => void;\n  onSetSortWorkshop: (sorting: string) => void;\n}\n\ninterface ISortItem {\n  mod: types.IMod;\n  added?: types.IMod;\n  revision: IRevision;\n}\n\ninterface IComponentState {\n  createOpen: boolean;\n  mousePosition: { x: number, y: number };\n  imageTime: number;\n  collectionsEx: { added: ISortItem[], workshop: ISortItem[] };\n}\n\nfunction dateCompare(lhs: Date | string, rhs: Date | string): number {\n  return (new Date(lhs ?? 0)).getTime() - (new Date(rhs ?? 0)).getTime();\n}\n\nconst nop = () => null;\n\n// allow any unicode character that is considered a letter or a number and the\n// special characters space and minus\nconst validRE = /^[\\p{L}\\p{N} -]*$/u;\n\nfunction validateCollectionName(t: i18next.TFunction, input: string): string {\n  if ((input.length < MIN_COLLECTION_NAME_LENGTH) || (input.length > MAX_COLLECTION_NAME_LENGTH)) {\n    return t('The name bust be between {{min}}-{{max}} characters long', {\n      replace: {\n        min: MIN_COLLECTION_NAME_LENGTH,\n        max: MAX_COLLECTION_NAME_LENGTH,\n      },\n    });\n  }\n\n  if (input.match(validRE) === null) {\n    return t('Invalid characters, only letters, numbers, space and - are allowed.');\n  }\n\n  return undefined;\n}\n\ninterface IAddCardProps {\n  t: types.TFunction;\n  onClick: () => void;\n}\n\nfunction AddCard(props: IAddCardProps) {\n  const { t, onClick } = props;\n\n  const classes = ['collection-add-btn'];\n\n  return (\n    <Panel className={classes.join(' ')} bsStyle='default' onClick={onClick}>\n      <Panel.Body className='collection-thumbnail-body'>\n        <EmptyPlaceholder\n          icon='folder-add'\n          text={t('Discover more collections')}\n        />\n      </Panel.Body>\n    </Panel>\n  );\n}\n\ninterface ICreateCardProps {\n  t: types.TFunction;\n  onCreateFromProfile: () => void;\n  onCreateEmpty: () => void;\n  onCreateQuickCollection: () => void;\n  onTrackClick: (namespace: string, eventName: string) => void;\n}\n\nfunction CreateCard(props: ICreateCardProps) {\n  const { t, onTrackClick } = props;\n\n  const classes = ['collection-add-btn'];\n\n  const actions = React.useRef<types.IActionDefinition[]>([]);\n  \n  React.useEffect(() => {\n    actions.current = [\n      {\n        title: 'From Profile',\n        icon: 'profile',\n        action: () => {\n          onTrackClick('Collections', 'From profile');\n          props.onCreateFromProfile();\n        },\n      }, {\n        title: 'Empty',\n        icon: 'show',\n        action: () => {\n          onTrackClick('Collections', 'Empty');\n          props.onCreateEmpty();\n        },\n      }, {\n        title: 'Quick Collection',\n        icon: 'highlight-lab',\n        action: () => {\n          onTrackClick('Collections', 'Quick Collection');\n          props.onCreateQuickCollection();\n        },\n      },\n    ];\n  }, [props.onCreateFromProfile, props.onCreateEmpty, props.onCreateQuickCollection]);\n\n  return (\n    <Panel className={classes.join(' ')} bsStyle='default'>\n      <Panel.Body className='collection-thumbnail-body'>\n        <EmptyPlaceholder\n          icon='add'\n          text={t('Create a collection')}\n          fill\n        />\n        <div className='hover-menu'>\n          <div key='primary-buttons' className='hover-content'>\n            <IconBar\n              className='buttons'\n              group='collection-actions'\n              staticElements={actions.current}\n              collapse={false}\n              buttonType='text'\n              orientation='vertical'\n              clickAnywhere={true}\n              t={t}\n            />\n          </div>\n        </div>\n      </Panel.Body>\n    </Panel>\n  );\n}\n\ntype IProps = IStartPageProps & IConnectedProps & IActionProps;\n\nclass StartPage extends ComponentEx<IProps, IComponentState> {\n  constructor(props: IProps) {\n    super(props);\n    this.initState({\n      createOpen: false,\n      imageTime: Date.now(),\n      mousePosition: { x: 0, y: 0 },\n      collectionsEx: { added: [], workshop: [] },\n    });\n  }\n\n  public componentDidMount(): void {\n    const collectionsNow = Object.values(this.props.mods).filter(mod => mod.type === MOD_TYPE);\n    this.updateSorted(collectionsNow, this.props.sortAdded, this.props.sortWorkshop, false)\n      .then(() =>\n        this.updateSorted(collectionsNow, this.props.sortAdded, this.props.sortWorkshop, false))\n      .catch(err => {\n        log('error', 'failed to update list of collections', {\n          error: err.message,\n        });\n      });\n  }\n\n  public componentDidUpdate(prevProps: IProps, prevState: Readonly<IComponentState>): void {\n    const collectionsPrev = Object.values(prevProps.mods).filter(mod => mod.type === MOD_TYPE);\n    const collectionsNow = Object.values(this.props.mods).filter(mod => mod.type === MOD_TYPE);\n\n    if (!_.isEqual(collectionsPrev, collectionsNow)\n        || (prevProps.sortAdded !== this.props.sortAdded)\n        || (prevProps.sortWorkshop !== this.props.sortWorkshop)\n        || (prevProps.localState.ownCollections !== this.props.localState.ownCollections)) {\n      this.updateSorted(collectionsNow, this.props.sortAdded, this.props.sortWorkshop, true);\n    }\n  }\n\n  public render(): JSX.Element {\n    const { t, activeTab, installing, profile, matchedReferences, mods,\n      onClone, onEdit, onPause, onInstallCollection, onRemove,\n      onResume, onUpdate, onUpload, onView, sortAdded, sortWorkshop } = this.props;\n    const { imageTime, collectionsEx } = this.state;\n\n    const { added, workshop } = collectionsEx;\n\n    return (\n      <Tabs id='collection-start-page' activeKey={activeTab} onSelect={this.setActiveTab}>\n        <Tab\n          tabClassName='collection-tab'\n          eventKey='active-collections'\n          title={<><Icon name='add'/>{t('Added Collections')}</>}\n        >\n          <Panel>\n            <Panel.Heading>\n              <Panel.Title>\n                {t('View and manage collections created by other users.')}\n              </Panel.Title>\n              <div className='flex-fill' />\n              <div className='collection-sort-container'>\n                {t('Sort by:')}\n                <Select\n                  className='select-compact'\n                  options={[\n                    { value: 'alphabetical', label: t('Name A-Z') },\n                    { value: 'datedownloaded', label: t('Date downloaded') },\n                    { value: 'recentlyupdated', label: t('Recently updated') },\n                  ]}\n                  value={sortAdded}\n                  onChange={this.setSortAdded}\n                  clearable={false}\n                  autosize={false}\n                  searchable={false}\n                />\n              </div>\n            </Panel.Heading>\n            <Panel.Body>\n              <div className='collection-list'>\n                <AddCard t={t} onClick={this.openCollections} />\n                {added.map(mod =>\n                  <CollectionThumbnail\n                    key={mod.mod.id}\n                    t={t}\n                    gameId={profile.gameId}\n                    imageTime={imageTime}\n                    installing={installing}\n                    mods={mods}\n                    incomplete={matchedReferences[mod.mod.id]?.includes?.(null)}\n                    collection={mod.mod}\n                    infoCache={this.props.infoCache}\n                    onView={onView}\n                    onRemove={onRemove}\n                    onResume={onResume}\n                    onPause={onPause}\n                    onUpdate={onUpdate}\n                    details={true}\n                  />)}\n              </div>\n            </Panel.Body>\n          </Panel>\n        </Tab>\n        <Tab\n          tabClassName='collection-tab'\n          eventKey='collection-workshop'\n          title={<><Icon name='highlight-tool' />{t('Workshop')}</>}\n        >\n          <Panel>\n            <Panel.Heading>\n              <Panel.Title>\n                <Trans ns={NAMESPACE} i18nKey='collection-own-page'>\n                  Build your own collections and share them with the Nexus Mods community.\n                  You can view all your uploaded collections&nbsp;<a\n                    onClick={this.openMyCollectionsPage}\n                    className='my-collections-page-link'\n                    title={t('Open My Collections Page')}\n                  >\n                    here.\n                  </a>\n                </Trans>\n              </Panel.Title>\n              <div className='flex-fill' />\n              <div className='collection-sort-container'>\n                {t('Sort by:')}\n                <Select\n                  className='select-compact'\n                  options={[\n                    { value: 'alphabetical', label: t('Name A-Z') },\n                    { value: 'datecreated', label: t('Date created') },\n                    { value: 'recentlyupdated', label: t('Recently updated') },\n                  ]}\n                  value={sortWorkshop}\n                  onChange={this.setSortWorkshop}\n                  clearable={false}\n                  autosize={false}\n                  searchable={false}\n                />\n              </div>\n            </Panel.Heading>\n            <Panel.Body>\n              <div className='collection-list'>\n                <CreateCard\n                  t={t}\n                  onCreateFromProfile={this.fromProfile}\n                  onCreateQuickCollection={this.quickCollection}\n                  onCreateEmpty={this.fromEmpty}\n                  onTrackClick={this.trackEvent}\n                />\n                {workshop.map(mod => (mod.mod !== undefined)\n                  ? (\n                    <CollectionThumbnail\n                      t={t}\n                      key={mod.mod.id}\n                      gameId={profile.gameId}\n                      collection={mod.mod}\n                      infoCache={this.props.infoCache}\n                      imageTime={imageTime}\n                      mods={mods}\n                      incomplete={(mod.mod === undefined)\n                        || matchedReferences[mod.mod.id]?.includes?.(null)}\n                      onEdit={onEdit}\n                      onRemove={onRemove}\n                      onUpload={onUpload}\n                      details={true}\n                    />\n                  ) : (\n                    <CollectionThumbnailRemote\n                      t={t}\n                      key={mod.revision.id}\n                      revision={mod.revision}\n                      added={mod.added}\n                      incomplete={(mod.added === undefined)\n                        || matchedReferences[mod.added.id]?.includes?.(null)}\n                      onInstallCollection={onInstallCollection}\n                      onCloneCollection={onClone}\n                      onResumeCollection={onResume}\n                    />\n                  ))}\n              </div>\n            </Panel.Body>\n          </Panel>\n        </Tab>\n      </Tabs>\n    );\n  }\n\n  private name(input: ISortItem): string {\n    return (input.mod !== undefined)\n      ? util.renderModName(input.mod)\n      : (input.revision?.collection?.name ?? '');\n  }\n  \n  private sorter(sorting: string): (lhs: ISortItem, rhs: ISortItem) => number {\n    const alphabetical = (lhs: ISortItem, rhs: ISortItem) =>\n      this.name(lhs).localeCompare(this.name(rhs));\n\n    return {\n      alphabetical,\n      datedownloaded: (lhs: ISortItem, rhs: ISortItem) =>\n        // we install collections immediately and remove the archive, so this is the best\n        // approximation but also should be 100% correct\n        dateCompare(rhs.mod?.attributes?.installTime, lhs.mod?.attributes?.installTime),\n      datecreated: (lhs: ISortItem, rhs: ISortItem) =>\n        dateCompare(rhs.mod?.attributes?.installTime ?? rhs.revision?.createdAt\n                  , lhs.mod?.attributes?.installTime ?? lhs.revision?.createdAt),\n      recentlyupdated: (lhs: ISortItem, rhs: ISortItem) =>\n        dateCompare(rhs.revision?.updatedAt ?? rhs.mod.attributes?.installTime,\n                    lhs.revision?.updatedAt ?? lhs.mod.attributes?.installTime),\n    }[sorting] ?? alphabetical;\n  }\n\n  private updateSorted(collections: types.IMod[],\n                       sortAdded: string,\n                       sortWorkshop: string,\n                       allowMetaUpdate: boolean)\n                       : Promise<void> {\n    return Promise.all(collections.map(async mod => {\n      const { revisionId, collectionSlug, revisionNumber } = mod.attributes ?? {};\n      const revision = revisionNumber !== undefined\n        ? await this.props.infoCache.getRevisionInfo(revisionId, collectionSlug, revisionNumber, allowMetaUpdate ? 'allow' : 'avoid')\n        : undefined;\n      return { mod, revision };\n    }))\n      .then((result: ISortItem[]) => {\n        let { foreign, own }: { foreign: ISortItem[], own: ISortItem[] } =\n          result.reduce((prev, mod) => {\n            if (util.getSafe(mod.mod.attributes, ['editable'], false)) {\n              prev.own.push(mod);\n            } else {\n              prev.foreign.push(mod);\n            }\n            return prev;\n          }, { foreign: [], own: [] });\n\n        const installed = new Set(own.map(res => res.mod.attributes?.['collectionSlug']));\n\n        own.push(...this.props.localState.ownCollections\n          .filter(coll => !installed.has(coll.collection?.slug))\n          .map(coll => ({\n            mod: undefined,\n            added: foreign.find(iter =>\n              iter.revision?.collection?.slug === coll.collection?.slug)?.mod,\n            revision: coll,\n          })));\n\n        foreign = foreign.sort(this.sorter(sortAdded));\n        own = own.sort(this.sorter(sortWorkshop));\n        this.nextState.collectionsEx = { added: foreign, workshop: own };\n      });\n  }\n\n  private setSortAdded = (value: { value: string, label: string }) => {\n    if (!!value) {\n      this.props.onSetSortAdded(value.value);\n    }\n  }\n\n  private setSortWorkshop = (value: { value: string, label: string }) => {\n    if (!!value) {\n      this.props.onSetSortWorkshop(value.value);\n    }\n  }\n\n  private setActiveTab = (tabId: any) => {\n    this.props.onSetActiveTab(tabId);\n    this.context.api.events.emit(\n      'analytics-track-navigation', `collections/${tabId}`,\n    );\n  }\n\n  private openCollections = () => {\n    const { game } = this.props;\n    this.context.api.events.emit('analytics-track-click-event', 'Collections', 'Discover more');\n    util.opn(`${NEXUS_BASE_GAMES_URL}/${(util as any).nexusGameId(game)}/collections`).catch(() => null);\n  }\n\n  private openMyCollectionsPage = () => {\n    this.context.api.events.emit('analytics-track-click-event',\n                                 'Collections', 'Open My Collections');\n    util.opn(`${NEXUS_BASE_URL}/my-collections`).catch(() => null);\n  }\n\n  private trackEvent = (namespace: string, eventName: string) => {\n    this.context.api.events.emit('analytics-track-click-event', namespace, eventName);\n  }\n\n  private openFeedback = () => {\n    util.opn(FEEDBACK_URL).catch(() => null);\n  }\n\n  private openBugReport = () => {\n    util.opn(BUG_REPORT_URL).catch(() => null);\n  }\n\n  private quickCollection = async () => {\n    try {\n      await initFromProfile(this.context.api);\n      this.refreshImages();\n    } catch (err) {\n      if (!(err instanceof util.UserCanceled)) {\n        this.context.api.showErrorNotification('Failed to create quick collection', err);\n      }\n    }\n  }\n\n  private fromProfile = async () => {\n    const { profile } = this.props;\n\n    try {\n      // initFromProfile will automatically query for the name\n      await initFromProfile(this.context.api, profile.id);\n      this.refreshImages();\n    } catch (err) {\n      if (!(err instanceof util.UserCanceled)) {\n        this.context.api.showErrorNotification('Failed to init collection', err);\n      }\n    }\n  }\n\n  private fromEmpty = async () => {\n    const { t, onCreateCollection } = this.props;\n\n    try {\n      const result = await this.context.api.showDialog('question', 'New empty Collection', {\n        text: 'Create an empty collection which you can manually add mods to.',\n        input: [{ id: 'name', label: 'Collection Name', type: 'text' }],\n        condition: content => validateName(t, content),\n      }, [\n        { label: 'Cancel' },\n        { label: 'Create', default: true },\n      ]);\n\n      if (result.action === 'Create') {\n        await onCreateCollection(result.input['name']);\n        this.refreshImages();\n      }\n    } catch (err) {\n      this.context.api.showErrorNotification('Failed to init collection', err);\n    }\n  }\n\n  private refreshImages() {\n    this.nextState.imageTime = Date.now();\n  }\n}\n\nfunction mapStateToProps(state: any): IConnectedProps {\n  return {\n    userInfo: state.persistent['nexus']?.userInfo,\n    sortAdded: state.settings.collections.sortAdded ?? 'datedownloaded',\n    sortWorkshop: state.settings.collections.sortWorkshop ?? 'recentlyupdated',\n  };\n}\n\nfunction mapDispatchToProps(dispatch): IActionProps {\n  return {\n    onSetSortAdded: (sorting: string) => dispatch(setSortAdded(sorting)),\n    onSetSortWorkshop: (sorting: string) => dispatch(setSortWorkshop(sorting)),\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(\n  StartPage) as any as React.ComponentClass<IStartPageProps>;\n","/* eslint-disable */\nimport { updateSuccessRate } from '../../actions/persistent';\nimport { doExportToAPI } from '../../collectionExport';\nimport { INSTALLING_NOTIFICATION_ID, MOD_TYPE, NAMESPACE, TOS_URL} from '../../constants';\nimport { findExtensions, IExtensionFeature } from '../../util/extension';\nimport InstallDriver from '../../util/InstallDriver';\n\nimport { IPathTools } from '../CollectionPageEdit/FileOverrides';\nimport CollectionEdit from '../CollectionPageEdit';\nimport CollectionPage from '../CollectionPageView';\nimport StartPage from './StartPage';\n\nimport { IRating, IRevision } from '@nexusmods/nexus-api';\nimport I18next from 'i18next';\nimport * as React from 'react';\nimport { WithTranslation, withTranslation } from 'react-i18next';\nimport { connect } from 'react-redux';\nimport * as Redux from 'redux';\nimport { ThunkDispatch } from 'redux-thunk';\nimport { actions, ComponentEx, FlexLayout, log, MainPage, selectors, tooltip,\n         types, util } from 'vortex-api';\nimport { uploadCollection } from '../../util/util';\n\nexport interface ICollectionsMainPageBaseProps extends WithTranslation {\n  active: boolean;\n  secondary: boolean;\n  pathTool: IPathTools\n  localState: { ownCollections: IRevision[] };\n  driver: InstallDriver;\n  onAddCallback: (cbName: string, cb: (...args: any[]) => void) => void;\n  onCloneCollection: (collectionId: string) => Promise<string>;\n  onRemoveCollection: (gameId: string, modId: string, cancel: boolean) => Promise<void>;\n  onCreateCollection: (profile: types.IProfile, name: string) => void;\n  onInstallCollection: (revision: IRevision) => Promise<void>;\n  onUpdateMeta: () => void;\n\n  resetCB: (cb: () => void) => void;\n}\n\ninterface IConnectedProps {\n  profile: types.IProfile;\n  game: types.IGameStored;\n  mods: { [modId: string]: types.IMod };\n  downloads: { [dlId: string]: types.IDownload };\n  notifications: types.INotification[];\n  exts: IExtensionFeature[];\n  userInfo: { name: string, userId: number };\n}\n\ninterface IActionProps {\n  removeMod: (gameId: string, modId: string) => void;\n}\n\nexport type ICollectionsMainPageProps =\n  ICollectionsMainPageBaseProps & IConnectedProps & IActionProps & { t: I18next.TFunction };\n\ninterface IComponentState {\n  selectedCollection: string;\n  matchedReferences: { [collectionId: string]: types.IMod[] };\n  viewMode: 'view' | 'edit';\n  activeTab: string;\n}\n\nconst emptyObj = {};\nconst emptyArr = [];\n\nclass CollectionsMainPage extends ComponentEx<ICollectionsMainPageProps, IComponentState> {\n  private mMatchRefDebouncer: util.Debouncer;\n  constructor(props: ICollectionsMainPageProps) {\n    super(props);\n    this.initState({\n      selectedCollection: undefined,\n      matchedReferences: this.updateMatchedReferences(this.props),\n      viewMode: 'view',\n      activeTab: 'active-collections',\n    });\n\n    if (props.onAddCallback !== undefined) {\n      props.onAddCallback('viewCollection', (collectionId: string) => {\n        this.showPage('view', collectionId);\n      });\n\n      props.onAddCallback('editCollection', () => (collectionId: string) => {\n        this.showPage('edit', collectionId);\n      });\n    }\n\n    props.resetCB?.(this.resetMainPage);\n\n    this.mMatchRefDebouncer = new util.Debouncer(() => {\n      this.nextState.matchedReferences = this.updateMatchedReferences(this.props);\n      return Promise.resolve();\n    }, 2000);\n  }\n\n  public UNSAFE_componentWillReceiveProps(newProps: ICollectionsMainPageProps) {\n    if (this.props.mods !== newProps.mods) {\n      this.mMatchRefDebouncer.schedule();\n    }\n  }\n\n  public componentWillUnmount() {\n    this.mMatchRefDebouncer.clear();\n  }\n\n  public render(): JSX.Element {\n    const {\n      t, downloads, driver, game, localState,\n      mods, notifications, profile, pathTool\n    } = this.props;\n\n    const { activeTab, matchedReferences, selectedCollection, viewMode } = this.state;\n\n    if (profile === undefined) {\n      return null;\n    }\n\n    const collection = (selectedCollection !== undefined)\n      ? mods[selectedCollection]\n      : undefined;\n\n    let content = null;\n\n    if (collection === undefined) {\n      content = (\n        <>\n          <tooltip.IconButton\n            className='collections-refresh-meta'\n            icon='refresh'\n            tooltip={t('Download the latest meta information about your installed and owned collections. '\n              + 'This will reset local changes to names of collections in your workshop.')}\n            onClick={this.onUpdateMeta}\n          >\n            {t('Refresh')}\n          </tooltip.IconButton>\n          <StartPage\n            t={t}\n            game={game}\n            localState={localState}\n            installing={driver.installDone ? undefined : driver.collection}\n            infoCache={driver.infoCache}\n            profile={profile}\n            mods={mods}\n            matchedReferences={matchedReferences ?? emptyObj}\n            activeTab={activeTab}\n            onView={this.view}\n            onEdit={this.edit}\n            onRemove={this.remove}\n            onUpdate={this.update}\n            onUpload={this.upload}\n            onClone={this.clone}\n            onCreateCollection={this.createCollection}\n            onResume={this.resume}\n            onPause={this.pause}\n            onSetActiveTab={this.setActiveTab}\n            onInstallCollection={this.props.onInstallCollection}\n          />\n        </>\n      );\n    } else {\n      content = (\n        <FlexLayout type='column'>\n          <FlexLayout.Fixed>\n            <tooltip.IconButton\n              className='collection-back-btn'\n              tooltip='Return to overview'\n              icon='nav-back'\n              onClick={this.deselectCollection}\n            >\n              {t('View All Collections')}\n            </tooltip.IconButton>\n          </FlexLayout.Fixed>\n          <FlexLayout.Flex>\n            {(viewMode === 'view') ? (\n              <CollectionPage\n                t={t}\n                className='collection-details'\n                driver={this.props.driver}\n                profile={profile}\n                collection={collection}\n                mods={mods}\n                downloads={downloads}\n                notifications={notifications}\n                onAddCallback={this.props.onAddCallback}\n                onView={this.view}\n                onPause={this.pause}\n                onCancel={this.cancel}\n                onClone={this.clone}\n                onResume={this.resume}\n                onInstallManually={this.installManually}\n                onVoteSuccess={this.voteSuccess}\n              />\n            )\n              : (\n                <CollectionEdit\n                  profile={profile}\n                  collection={collection}\n                  mods={mods}\n                  driver={this.props.driver}\n                  onRemove={this.remove}\n                  onUpload={this.upload}\n                  exts={this.props.exts}\n                  pathTool={pathTool}\n                />\n              )}\n          </FlexLayout.Flex>\n        </FlexLayout>\n      );\n    }\n\n    return (\n      <MainPage id='collection-page'>\n        <MainPage.Body>\n          {content}\n        </MainPage.Body>\n      </MainPage>\n    );\n  }\n\n  private showPage(page: 'view' | 'edit', modId: string) {\n      this.nextState.selectedCollection = modId;\n      this.nextState.viewMode = page;\n  }\n\n  private onUpdateMeta = () => {\n    this.props.onUpdateMeta();\n    this.context.api.events.emit('analytics-track-click-event', 'Collections', 'Refresh');\n  }\n\n  private setActiveTab = (tabId: string) => {\n    this.nextState.activeTab = tabId;\n  }\n\n  private createCollection = (name: string) => {\n    const { profile, onCreateCollection } = this.props;\n    onCreateCollection(profile, name);\n  }\n\n  private deselectCollection = () => {\n    this.nextState.selectedCollection = undefined;\n  }\n\n  private resetMainPage = () => {\n    this.deselectCollection();\n  }\n\n  private view = (modId: string) => {\n    this.showPage('view', modId);\n  }\n\n  private edit = async (modId: string) => {\n    const { mods, userInfo } = this.props;\n    const { api } = this.context;\n\n    if (mods[modId] === undefined) {\n      return;\n    }\n\n    const author = mods[modId].attributes?.['uploaderId'];\n\n    if ((author !== undefined) && (author !== userInfo?.userId)) {\n      const result = await api.showDialog('question',\n        'Edit Collection', {\n          text: 'This collection has been uploaded with a different account ({{uploadAuthor}}) '\n              + 'than you\\'re using now ({{currentUser}}). '\n              + 'If you edit and upload this collection now it will be uploaded as a new '\n              + 'collection by your current user.',\n          parameters: {\n            uploadAuthor: mods[modId].attributes['uploader'],\n            currentUser: userInfo?.name ?? '<Logged out>',\n          },\n        }, [\n          { label: 'Cancel' },\n          { label: 'Continue' },\n        ]);\n      if (result.action === 'Cancel') {\n        return;\n      }\n    }\n    this.showPage('edit', modId);\n  }\n\n  private pause = async (modId: string, silent?: boolean) => {\n    const { downloads, mods } = this.props;\n\n    const collection = mods[modId];\n    if (collection === undefined) {\n      return;\n    }\n\n    (collection?.rules ?? []).forEach(rule => {\n      const dlId = util.findDownloadByRef(rule.reference, downloads);\n      if (dlId !== undefined) {\n        this.context.api.events.emit('pause-download', dlId);\n      }\n    });\n    const { api } = this.context;\n    await api.emitAndAwait('cancel-dependency-install', modId);\n\n    this.props.driver.cancel();\n\n    api.dismissNotification(INSTALLING_NOTIFICATION_ID + modId);\n    if (silent !== true) {\n      api.sendNotification({\n        id: 'collection-pausing',\n        type: 'success',\n        title: 'Collection pausing',\n        message: 'Already queued mod installations will still finish',\n      });\n    }\n  }\n\n  private async removeWorkshop(modId: string) {\n    const { mods, profile } = this.props;\n    const { api } = this.context;\n\n    const result = await api.showDialog(\n      'question',\n      'Remove Collection (Workshop)', {\n        text: 'Deleting a collection will not remove the mods that have been added to it.\\n\\n'\n          + 'Any changes made to this collection since the last upload to Nexus Mods will '\n          + 'be lost.\\n\\n'\n          + 'Are you sure you want to remove \"{{collectionName}}\" from your Workshop?',\n        parameters: {\n          collectionName: util.renderModName(mods[modId]),\n        },\n      }, [\n        { label: 'Cancel' },\n        { label: 'Remove' },\n      ],\n    );\n\n    if (result.action === 'Remove') {\n      await util.toPromise(cb => api.events.emit('remove-mod', profile.gameId, modId, cb, {\n        incomplete: true,\n      }));\n    }\n  }\n\n  private clone = async (collectionId: string) => {\n    const id: string = await this.props.onCloneCollection(collectionId);\n    if (id !== undefined) {\n      this.showPage('edit', id);\n    }\n  }\n\n  private cancel = async (modId: string, cancel?: boolean) => {\n    const { profile } = this.props;\n\n    return this.props.onRemoveCollection(profile.gameId, modId, cancel ?? true);\n  }\n\n  private voteSuccess = async (modId: string, success: boolean) => {\n    const { mods } = this.props;\n    const { api } = this.context;\n\n    const collection = mods[modId];\n\n    if (collection === undefined) {\n      return;\n    }\n\n    const { revisionId } = collection.attributes;\n\n    if (revisionId === undefined) {\n      return;\n    }\n\n    const vote = success ? 'positive' : 'negative';\n    const voted: { success: boolean, averageRating?: IRating } =\n      (await api.emitAndAwait('rate-nexus-collection-revision', parseInt(revisionId, 10), vote))[0];\n    if (voted.success) {\n      api.store.dispatch(\n        updateSuccessRate(revisionId, vote,\n                          voted.averageRating.average, voted.averageRating.total));\n    }\n  }\n\n  private updateMatchedReferences(props: ICollectionsMainPageProps) {\n    const { mods, profile } = props;\n    const collections = Object.values(mods).filter(mod => mod.type === MOD_TYPE);\n    return collections.reduce((prev, collection) => {\n      prev[collection.id] =\n        (collection.rules || [])\n          .filter(rule => (rule.type === 'requires') && !rule['ignored'])\n          .map(rule => {\n            const mod = util.findModByRef(rule.reference, mods);\n            if ((mod !== undefined) && !profile.modState?.[mod.id]?.enabled) {\n              return null;\n            }\n            return mod ?? null;\n          });\n      return prev;\n    }, {});\n  }\n\n  private remove = (modId: string) => {\n    const { mods } = this.props;\n    const { api } = this.context;\n\n    if (mods[modId] === undefined) {\n      return;\n    }\n\n    try {\n      if (mods[modId]?.attributes?.editable) {\n        api.events.emit('analytics-track-click-event', 'Collections', 'Remove Workshop Collection');\n        return this.removeWorkshop(modId)\n          .catch(err => {\n            const allowReport = !['EPERM'].includes(err.code)\n                              && !(err instanceof util.ProcessCanceled)\n                              && !(err instanceof util.UserCanceled);\n            api.showErrorNotification('Failed to remove collection', err, { allowReport });\n          });\n      } else {\n        api.events.emit('analytics-track-click-event', 'Collections', 'Remove Added Collection');\n        return this.cancel(modId, false)\n          .catch(err => {\n            api.showErrorNotification('Failed to remove collection', err, {\n              allowReport: !['EPERM'].includes(err.code),\n            });\n          });\n      }\n    } catch (err) {\n      if (err instanceof util.UserCanceled) {\n        log('info', 'collection removal canceled by user');\n      } else if (err instanceof util.ProcessCanceled) {\n        api.sendNotification({\n          type: 'warning',\n          title: 'Removal failed',\n          message: err.message,\n        });\n      } else {\n        api.showErrorNotification('Failed to remove collection', err);\n      }\n    }\n  }\n\n  private update = async (collectionId: string) => {\n    const { mods } = this.props;\n    const { api } = this.context;\n    const state = api.getState();\n    const gameMode = selectors.activeGameId(state);\n    const mod = mods[collectionId];\n\n    if (mod === undefined) {\n      return;\n    }\n\n    const downloadGame = util.getSafe(mod.attributes, ['downloadGame'], gameMode);\n    const newestFileId = util.getSafe(mod.attributes, ['newestVersion'], undefined);\n    await util.toPromise(cb => this.context.api.events.emit(\n      'collection-update',\n      downloadGame, mod.attributes?.collectionSlug, newestFileId,\n      mod.attributes?.source, collectionId, cb));\n  }\n\n  private upload = async (collectionId: string) => {\n    uploadCollection(this.context.api, this.props.profile?.id, collectionId);\n  }\n\n  private installManually = (collectionId: string, rules: types.IModRule[]) => {\n    const { api } = this.context;\n\n    const ruleGroups = rules.reduce((prev, rule) => {\n      if (prev[rule.type] !== undefined) {\n        prev[rule.type].push(rule);\n      } else {\n        log('error', 'unexpected rule encountered', { collectionId, ruleType: rule.type });\n      }\n      return prev;\n    }, { requires: [], recommends: [] });\n\n    const eaa = (ruleList, recommended) => {\n      if (ruleList.length === 0) {\n        return Promise.resolve();\n      } else {\n        return api.emitAndAwait('install-from-dependencies', collectionId, ruleList, recommended);\n      }\n    };\n\n    eaa(ruleGroups.requires, false)\n      .then(() => eaa(ruleGroups.recommends, true))\n      .catch(err => {\n        if (err instanceof util.UserCanceled) {\n          return;\n        }\n        api.showErrorNotification('Failed to install dependencies', err, {\n          allowReport: !(err instanceof util.ProcessCanceled),\n        });\n      });\n  }\n\n  private resume = async (modId: string) => {\n    const { driver, mods, profile, userInfo } = this.props;\n\n    if (mods[modId] === undefined) {\n      return;\n    }\n\n    if ((userInfo === null) || (userInfo === undefined)) {\n      const { api } = this.context;\n      api.showDialog('info', 'Not logged in', {\n        text: 'You have to be logged in with Nexus Mods to install collections.',\n      }, [ { label: 'Continue' } ]);\n    } else if (mods[modId] !== undefined) {\n      driver.start(profile, mods[modId]);\n    }\n  }\n}\n\nfunction mapStateToProps(state: types.IState): IConnectedProps {\n  const profile = selectors.activeProfile(state);\n  const game = profile !== undefined ? selectors.gameById(state, profile.gameId) : undefined;\n  return {\n    game,\n    profile,\n    mods: profile !== undefined ? (state.persistent.mods[profile.gameId] ?? emptyObj) : emptyObj,\n    notifications: state.session.notifications.notifications,\n    downloads: state.persistent.downloads.files,\n    userInfo: state.persistent['nexus']?.userInfo,\n    exts: profile !== undefined ? findExtensions(state, profile.gameId) : emptyArr,\n  };\n}\n\nfunction mapDispatchToProps(dispatch: ThunkDispatch<any, null, Redux.Action>): IActionProps {\n  return {\n    removeMod: (gameId: string, modId: string) => dispatch(actions.removeMod(gameId, modId)),\n  };\n}\n\nexport default\n  connect(mapStateToProps, mapDispatchToProps)(\n    withTranslation([NAMESPACE, 'common'])(CollectionsMainPage));\n","import * as React from 'react';\nimport { FlexLayout, tooltip, types, util } from 'vortex-api';\n\ninterface IBaseProps {\n  modId: string;\n  collections: types.IMod[];\n  detailCell: boolean;\n}\n\ntype IProps = IBaseProps;\n\nfunction TooltipItem(props: { name: string }) {\n  const { name } = props;\n  return (<li>{name}</li>);\n}\n\nfunction Tooltip(props: { collectionNames: string[] }) {\n  const { collectionNames } = props;\n\n  return (\n    <ul className='collection-mods-page-attrib-tooltip'>\n      {collectionNames.map((name, idx) => <TooltipItem key={`${name}${idx}`} name={name} />)}\n    </ul>\n  );\n}\n\nfunction nop() {\n  // nop\n}\n\nfunction CollectionCount(props: { collectionNames: string[], modId: string }) {\n  const { collectionNames, modId } = props;\n  const filtered = collectionNames.slice(1);\n  const tip = <Tooltip collectionNames={filtered} />;\n  return (\n    <tooltip.Button\n      id={`${modId}-collection-count`}\n      className='collection-mods-page-attr-addendum'\n      tooltip={tip}\n      onClick={nop}\n    >\n      {`+${filtered.length}`}\n    </tooltip.Button>\n  );\n}\n\nfunction CollectionModsPageAttributeRenderer(props: IProps) {\n  const { collections, detailCell, modId } = props;\n\n  const collectionNames = collections.map(collection => util.renderModName(collection));\n\n  const count = collectionNames.length;\n  return (count > 0)\n    ? (\n      <FlexLayout type='row' className='collection-mods-page-attribute-renderer'>\n        <FlexLayout.Fixed>\n          {detailCell ? (\n            <ul>\n              {collectionNames.map(name => (<li key={name}>{name}</li>))}\n            </ul>\n          ) : (\n            <div>{collectionNames[0]}</div>\n          )}\n        </FlexLayout.Fixed>\n        {((count > 1) && !detailCell) ? (\n          <CollectionCount collectionNames={collectionNames} modId={modId} />\n         ) : null}\n      </FlexLayout>\n  ) : null;\n}\n\nexport default CollectionModsPageAttributeRenderer as React.ComponentType<IBaseProps>;\n","/* eslint-disable */\nimport { useSelector } from 'react-redux';\nimport * as React from 'react';\nimport { ControlLabel, ListGroup, Popover, Table } from 'react-bootstrap';\nimport { Overlay, Toggle, selectors, types, util } from 'vortex-api';\n\nexport interface IPathTools {\n  relative(lhs: string, rhs: string): string;\n}\nexport interface IFileOverridesProps {\n  t: types.TFunction;\n  collection: types.IMod;\n  mods: { [modId: string]: types.IMod };\n  onSetCollectionAttribute: (path: string[], value: any) => void;\n  pathTool: IPathTools;\n}\n\ninterface IConnectedProps {\n  gameId: string;\n  discovery: types.IDiscoveryResult;\n}\n\nfunction FileOverrides(props: IFileOverridesProps) {\n  const { t, collection, mods, onSetCollectionAttribute, pathTool } = props;\n  const { discovery } = useSelector(mapStateToProps);\n  const [showOverlay, setShowOverlay] = React.useState(undefined);\n\n  const target = React.useRef<HTMLElement>();\n  const container = React.useRef<HTMLDivElement>();\n\n  const modsWithOverrides = React.useMemo(() =>\n    (collection.rules ?? [])\n      .filter(rule => ['requires', 'recommends'].includes(rule.type))\n      .map(rule => util.findModByRef(rule.reference, mods))\n      .filter(mod => (mod?.fileOverrides ?? []).length > 0)\n  , [collection, mods]);\n\n  const toggleOverride = React.useCallback((value: boolean, dataId: string) => {\n    onSetCollectionAttribute(['fileOverrides', dataId], value)\n  }, []);\n\n  const togglePopover = React.useCallback((evt: React.MouseEvent<HTMLElement>) => {\n    const modId = evt.currentTarget.getAttribute('data-modid');\n    if (showOverlay === modId) {\n      setShowOverlay(undefined);\n    } else {\n      target.current = evt.currentTarget;\n      setShowOverlay(modId);\n    }\n  }, [setShowOverlay, showOverlay]);\n\n  const hide = React.useCallback((evt) => {\n    evt.preventDefault();\n    setShowOverlay(undefined);\n  }, []);\n\n  const getBounds = React.useCallback((): DOMRect => {\n    return container.current !== undefined ? container.current.getBoundingClientRect() : {\n      left: 0,\n      top: 0,\n      width: window.innerWidth,\n      height: window.innerHeight,\n      right: window.innerWidth,\n      bottom: window.innerHeight,\n    } as any;\n  }, [container.current]);\n\n  const mod = mods[showOverlay];\n  const toRelPath = (filePath: string) => pathTool.relative(discovery.path, filePath);\n  const popover = showOverlay === undefined ? <Popover/> : (\n    <Popover id='file-overrides-popover'>\n      <ListGroup>\n        {(mod.fileOverrides ?? []).map(override => (\n          <div key={override}>{toRelPath(override)}</div>\n        ))}\n      </ListGroup>\n    </Popover>\n  );\n\n  const isEnabled = (id: string) => collection.attributes?.collection?.fileOverrides?.[id] ?? false;\n  return (\n    <div ref={container} id='collection-file-overrides' className='collection-file-overrides'>\n      <ControlLabel>\n        <p>\n          {t('File overrides can be considered as a type of ignore list. This page will allow you to export file overrides that '\n           + 'are defined for your selected mod list. As of Vortex 1.10.x, the file overrides are generated automatically based on '\n           + 'mod rules you export as part of your collection.')}\n        </p>\n        <p>\n          {t('Please note that these pre-generated file overrides are toggled off by default as Vortex will '\n           + 'generate them on the users machine as part of the collection installation automatically. Therefore there\\'s no '\n           + 'explicit need to export these overrides unless you have manually set certain overrides which are not generated by the mod dependency system.')}\n        </p>\n        <p>\n          {t('Any mods enabled below will NOT be deployed on the user\\'s machine. '\n           + 'Please use this feature sparingly as most users are not aware that Vortex offers this functionality and may '\n           + 'encounter trouble when trying to tweak/remove them.')}\n        </p>\n      </ControlLabel>\n      <Table>\n        <tbody>\n          {modsWithOverrides.map(mod => (\n            <tr key={mod.id}>\n              <td>\n                <Toggle\n                  checked={isEnabled(mod.id)}\n                  dataId={mod.id}\n                  onToggle={toggleOverride}\n                >\n                  {util.renderModName(mod)}\n                  &nbsp;\n                  <Overlay\n                    rootClose\n                    show={showOverlay !== undefined}\n                    onHide={hide}\n                    orientation='horizontal'\n                    getBounds={getBounds}\n                    target={target.current}\n                  >\n                    {popover}\n                  </Overlay>\n                </Toggle>\n              </td>\n              <td>\n                <a data-modid={mod.id} onClick={togglePopover}>\n                  {t('contains {{count}} file override', {\n                    count: (mod.fileOverrides ?? []).length,\n                  })}\n                </a>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </Table>\n    </div>\n  );\n}\n\nfunction mapStateToProps(state: types.IState): IConnectedProps {\n  const gameId = selectors.activeGameId(state);\n  return {\n    gameId,\n    discovery: selectors.discoveryByGame(state, gameId),\n  };\n}\n\nexport default FileOverrides;\n","import * as React from 'react';\nimport { FormControl, FormGroup, InputGroup } from 'react-bootstrap';\nimport { withTranslation } from 'react-i18next';\nimport { connect } from 'react-redux';\nimport { ComponentEx, FlexLayout, selectors, tooltip, types, util } from 'vortex-api';\n\nimport { NAMESPACE } from '../../constants';\n\ninterface IBaseProps {\n  modId: string;\n  currentInstallMode: string;\n  options: { [key: string]: string };\n  hasInstallerOptions: boolean;\n  onSetInstallMode: (id: string, value: string) => void;\n}\n\ninterface IConnectedProps {\n  mods: { [modId: string]: types.IMod };\n}\n\ntype IProps = IBaseProps & IConnectedProps;\n\nclass InstallModeRenderer extends ComponentEx<IProps, {}> {\n  public render(): JSX.Element {\n    const { options, currentInstallMode } = this.props;\n    return (\n      <FlexLayout type='row'>\n        <FlexLayout.Fixed>\n          <FormControl\n            componentClass='select'\n            onChange={this.selectInstallMode}\n            value={currentInstallMode}\n          >\n            {Object.keys(options).map(this.renderOption)}\n          </FormControl>\n        </FlexLayout.Fixed>\n        {this.renderIconTooltip()}\n      </FlexLayout>\n    );\n  }\n\n  private renderIconTooltip = () => {\n    const { t, hasInstallerOptions } = this.props;\n    return hasInstallerOptions ? (\n      <FlexLayout.Fixed style={{marginLeft: '5px', marginTop: '3px'}}>\n        <tooltip.Icon\n          name='options'\n          tooltip={t('This mod has installer options')}\n        />\n      </FlexLayout.Fixed>\n    ) : null;\n  }\n\n  private renderOption = (option) => {\n    const { t, options, modId } = this.props;\n    const text = t(options[option]);\n    return <option\n      key={option}\n      value={option}\n      data-id={modId}\n    >\n      {text}\n    </option>;\n  }\n\n  private selectInstallMode = (evt) => {\n    const { onSetInstallMode } = this.props;\n    const modId: string = evt.target.selectedOptions[0]?.getAttribute('data-id');\n    const newVal: string = evt.target.value;\n    onSetInstallMode(modId, newVal);\n  }\n}\n\nfunction mapStateToProps(state: types.IState): IConnectedProps {\n  const activeGameId = selectors.activeGameId(state);\n  return {\n    mods: util.getSafe(state, ['persistent', 'mods', activeGameId], {}),\n  };\n}\n\nexport default withTranslation([NAMESPACE, 'common'])(connect(mapStateToProps)(\n    InstallModeRenderer) as any) as React.ComponentClass<IBaseProps>;\n","import * as React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { ControlLabel, FormControl } from 'react-bootstrap';\r\nimport { FlexLayout, More, Toggle, tooltip, types } from 'vortex-api';\r\nimport { INSTRUCTIONS_PLACEHOLDER, NAMESPACE } from '../../constants';\r\n\r\nexport interface IInstructionProps {\r\n  collection: types.IMod;\r\n  onSetCollectionAttribute: (path: string[], value: any) => void;\r\n}\r\n\r\nfunction CollectionGeneralInfo(props: IInstructionProps) {\r\n  return (\r\n    <FlexLayout type='row'>\r\n      {instructions(props)}\r\n      {settings(props)}\r\n    </FlexLayout>\r\n  );\r\n}\r\n\r\nconst settings = (props: IInstructionProps) => {\r\n  const [t] = useTranslation([NAMESPACE, 'common']);\r\n  const { onSetCollectionAttribute, collection } = props;\r\n  const [recommendNewProfile, setRecommendNewProfile] =\r\n    React.useState(collection.attributes?.collection?.collectionConfig?.recommendNewProfile);\r\n\r\n  const toggleRecommendNewProfile = React.useCallback(() => {\r\n    const newValue = !recommendNewProfile;\r\n    setRecommendNewProfile(newValue);\r\n    onSetCollectionAttribute(['collectionConfig', 'recommendNewProfile'], newValue);\r\n  }, [onSetCollectionAttribute, recommendNewProfile, setRecommendNewProfile])\r\n\r\n  return (\r\n    <FlexLayout type='column' id='collection-settings-edit' className='collection-settings-edit'>\r\n      <h4>{t('Options')}</h4>\r\n      <p>{t('The below settings can optionally be changed to customize this collection')}</p>\r\n\r\n        <Toggle\r\n          id={'settings-recommend-new-profile'}\r\n          onToggle={toggleRecommendNewProfile}\r\n          checked={recommendNewProfile}\r\n        >\r\n          {t('Recommend new profile')}\r\n          <More id='collection-settings-recommendnewprofile' name={t('Recommend new profile')} >\r\n              {t('If enabled, Vortex will recommend creating a new profile when installing this collection. If disabled, the collection will be installed into the currently active profile.')}\r\n          </More>\r\n        </Toggle>\r\n    </FlexLayout>\r\n  );\r\n}\r\n\r\nconst instructions = (props: IInstructionProps) => {\r\n  const [t] = useTranslation([NAMESPACE, 'common']);\r\n  const { collection, onSetCollectionAttribute } = props;\r\n\r\n  const [input, setInput] = React.useState(collection.attributes?.['collection']?.['installInstructions']);\r\n  const [placeholder, setPlaceholder] = React.useState(t(INSTRUCTIONS_PLACEHOLDER) as string);\r\n  const [hasChanged, setHasChanged] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    setInput(collection.attributes?.['collection']?.['installInstructions']);\r\n  }, [collection]);\r\n\r\n  const assignInstructions = React.useCallback((evt: React.FormEvent<any>) => {\r\n    setInput(evt.currentTarget.value);\r\n    setHasChanged(true);\r\n  }, [setInput]);\r\n\r\n  const saveInstructions = React.useCallback(() => {\r\n    onSetCollectionAttribute(['installInstructions'], input);\r\n    setHasChanged(false);\r\n  }, [input]);\r\n\r\n  return (\r\n    <FlexLayout type='column' id='collection-instructions-edit' className='collection-instructions-edit'>\r\n\r\n      <FlexLayout.Fixed className='collection-instructions-container'>\r\n        <h4>{t('Instructions')}</h4>\r\n        <p>\r\n          {t('Instructions will be shown to the user before installation starts and can be reviewed in the Instructions tab. You can also add individual mod instructions in the Mods tab.')}\r\n        </p>\r\n        <FormControl\r\n          id='collection-instructions-area'\r\n          componentClass='textarea'\r\n          value={input}\r\n          onChange={assignInstructions}\r\n          placeholder={placeholder}\r\n          onFocus={(e) => setPlaceholder('')}\r\n          onBlur={(e) => setPlaceholder(t(INSTRUCTIONS_PLACEHOLDER))}\r\n          rows={8}\r\n        />\r\n      </FlexLayout.Fixed>\r\n\r\n      <FlexLayout.Fixed className='collection-instructions-buttons'>\r\n        <tooltip.Button\r\n          disabled={!hasChanged}\r\n          tooltip={t('Save Instructions')}\r\n          onClick={saveInstructions}\r\n        >\r\n          {t('Save')}\r\n        </tooltip.Button>\r\n      </FlexLayout.Fixed>\r\n      \r\n    </FlexLayout>\r\n  );\r\n}\r\n\r\nexport default CollectionGeneralInfo;\r\n","import I18next from 'i18next';\r\nimport memoize from 'memoize-one';\r\nimport * as React from 'react';\r\nimport { ControlLabel, ListGroup, ListGroupItem } from 'react-bootstrap';\r\nimport { ComponentEx, Toggle, types, util } from 'vortex-api';\r\nimport { ICollectionModRule, ICollectionModRuleEx } from '../../types/ICollection';\r\nimport { renderReference, ruleId } from '../../util/util';\r\n\r\nexport interface IModsPageProps {\r\n  t: I18next.TFunction;\r\n  collection: types.IMod;\r\n  mods: { [modId: string]: types.IMod };\r\n  rules: ICollectionModRule[];\r\n  onSetCollectionAttribute: (path: string[], value: any) => void;\r\n}\r\n\r\ntype IProps = IModsPageProps;\r\n\r\nclass ModRulesPage extends ComponentEx<IProps, {}> {\r\n  private mAugmentedRules = memoize((rules: ICollectionModRule[]) =>\r\n    rules.map(rule => this.augmentRule(rule)));\r\n  private mFilteredRules = memoize((collection: types.IMod, rules: ICollectionModRuleEx[]) =>\r\n    rules.filter(rule => !util.testModReference(collection, rule.source)));\r\n\r\n  public shouldComponentUpdate(nextProps: IProps) {\r\n    return (this.props.t !== nextProps.t)\r\n      || (this.props.collection !== nextProps.collection)\r\n      || (this.props.mods !== nextProps.mods)\r\n      || (this.props.rules !== nextProps.rules)\r\n      || (this.props.onSetCollectionAttribute !== nextProps.onSetCollectionAttribute);\r\n  }\r\n\r\n  public render(): React.ReactNode {\r\n    const { t, collection } = this.props;\r\n\r\n    const rules = this.mAugmentedRules(this.props.rules);\r\n    const filtered = this.mFilteredRules(collection, rules);\r\n\r\n    let lastSourceName: string;\r\n\r\n    return (\r\n      <div id='collection-mod-rules' className='collection-rules-edit'>\r\n        <ControlLabel>\r\n          <p>\r\n            {t('By default the collection will replicate all your custom rules that dictate '\r\n               + 'the deployment order of mods.')}\r\n            &nbsp;\r\n            {t('If you disable rules here your collection may produce unresolved file conflicts '\r\n               + 'that the user has to resolve.')}\r\n          </p>\r\n        </ControlLabel>\r\n        <div>\r\n          <a onClick={this.enableAllRules}>{t('Enable all')}</a><span className='link-action-seperator'>&nbsp; | &nbsp;</span><a onClick={this.disableAllRules}>{t('Disable all')}</a>\r\n        </div>\r\n        <ListGroup>\r\n          {filtered\r\n            .sort(this.ruleSort)\r\n            .map((rule, idx) => {\r\n              const separator: boolean = rule.sourceName !== lastSourceName;\r\n              lastSourceName = rule.sourceName;\r\n              return this.renderRule(rule, idx, separator);\r\n            })}\r\n        </ListGroup>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private augmentRule(rule: ICollectionModRule): ICollectionModRuleEx {\r\n    return {\r\n      ...rule,\r\n      sourceName: renderReference(rule.source, this.props.mods),\r\n      referenceName: renderReference(rule.reference, this.props.mods),\r\n    };\r\n  }\r\n\r\n  private setRulesEnabled(enable: boolean) {\r\n    const { collection, onSetCollectionAttribute } = this.props;\r\n    const rules = this.mAugmentedRules(this.props.rules);\r\n    const filtered = this.mFilteredRules(collection, rules);\r\n    filtered.forEach(rule =>  {\r\n      onSetCollectionAttribute(['rule', ruleId(rule)], enable);\r\n    });\r\n  }\r\n\r\n  private enableAllRules = () => {\r\n    this.setRulesEnabled(true);\r\n  }\r\n\r\n  private disableAllRules = () => {\r\n    this.setRulesEnabled(false);\r\n  }\r\n\r\n  private ruleSort = (lhs: ICollectionModRuleEx, rhs: ICollectionModRuleEx) => {\r\n    return lhs.sourceName.localeCompare(rhs.sourceName);\r\n  }\r\n\r\n  private renderRule(rule: ICollectionModRuleEx, idx: number, separator: boolean): JSX.Element {\r\n    const { collection } = this.props;\r\n\r\n    const id = ruleId(rule);\r\n\r\n    const checked = collection.attributes?.collection?.rule?.[id] ?? true;\r\n\r\n    return (\r\n      <ListGroupItem\r\n        className={separator ? 'collection-rule-separator' : undefined}\r\n        key={idx.toString()}\r\n      >\r\n        <Toggle checked={checked} dataId={id} onToggle={this.toggleRule}>\r\n          <div className='rule-name'>{rule.sourceName}</div>\r\n          <div className='rule-type'>{rule.type}</div>\r\n          <div className='rule-name'>{rule.referenceName}</div>\r\n        </Toggle>\r\n      </ListGroupItem>\r\n    );\r\n  }\r\n\r\n  private toggleRule = (newValue: boolean, dataId: string) => {\r\n    const { onSetCollectionAttribute } = this.props;\r\n    onSetCollectionAttribute(['rule', dataId], newValue);\r\n  }\r\n}\r\n\r\nexport default ModRulesPage;\r\n","import { ICollectionSourceInfo, SourceType } from '../../types/ICollection';\r\n\r\nimport I18next from 'i18next';\r\nimport * as _ from 'lodash';\r\nimport * as path from 'path';\r\nimport * as React from 'react';\r\nimport { Button } from 'react-bootstrap';\r\n\r\nimport InstallModeRenderer from './InstallModeRenderer';\r\n\r\nimport {\r\n  ComponentEx, EmptyPlaceholder, fs, Icon, ITableRowAction, OptionsFilter, selectors,\r\n  Table, TableTextFilter, tooltip, types, Usage, util } from 'vortex-api';\r\nimport { ADULT_CONTENT_URL, INSTRUCTIONS_PLACEHOLDER } from '../../constants';\r\n\r\nexport interface IModsPageProps {\r\n  t: I18next.TFunction;\r\n  collection: types.IMod;\r\n  mods: { [modId: string]: types.IMod };\r\n  showPhaseUsage: boolean;\r\n  showBinpatchWarning: boolean;\r\n  onSetModVersion: (modId: string, version: 'exact' | 'newest') => void;\r\n  onAddRule: (rule: types.IModRule) => void;\r\n  onRemoveRule: (rule: types.IModRule) => void;\r\n  onSetCollectionAttribute: (path: string[], value: any) => void;\r\n  onAddModsDialog: (modId: string) => void;\r\n  onDismissPhaseUsage: () => void;\r\n  onDismissBinpatchWarning: () => void;\r\n  onShowPhaseColumn: () => void;\r\n}\r\n\r\ninterface IModEntry {\r\n  rule: types.IModRule;\r\n  mod: types.IMod;\r\n}\r\n\r\ntype ProblemType = 'invalid-ids'\r\n                 | 'replicate-fuzzy-version'\r\n                 | 'choices-fuzzy-version'\r\n                 | 'bundled-fuzzy-version'\r\n                 | 'web-fuzzy-version'\r\n                 | 'web-url-missing'\r\n                 | 'bundle-copyright'\r\n                 | 'direct-download'\r\n                 | 'installer-choices-not-saved'\r\n                 | 'no-version-set'\r\n                 | 'local-edits-fuzzy-version'\r\n                 | 'local-edits-bundle'\r\n                 | 'replicate-vs-binpatch';\r\n;\r\n\r\ninterface IProblem {\r\n  type: ProblemType;\r\n  summary: string;\r\n  message: string;\r\n}\r\n\r\ninterface IModsPageState {\r\n  entries: { [modId: string]: IModEntry };\r\n  problems: { [modId: string]: IProblem[] };\r\n}\r\n\r\ntype IProps = IModsPageProps;\r\n\r\nconst SOURCES = {\r\n  nexus: 'Nexus Mods',\r\n  direct: 'Direct download',\r\n  browse: 'Browse a website',\r\n  bundle: 'Bundle with collection',\r\n};\r\n\r\nconst INSTALL_MODES = {\r\n  fresh: 'Fresh Install',\r\n  choices: 'Same Installer Options',\r\n  clone: 'Replicate',\r\n};\r\n\r\nconst getCollator = (() => {\r\n  let lang: string;\r\n  let collator: Intl.Collator;\r\n  return (locale: string) => {\r\n    if ((collator === undefined) || (locale !== lang)) {\r\n      lang = locale;\r\n      collator = new Intl.Collator(locale, { sensitivity: 'base' });\r\n    }\r\n    return collator;\r\n  };\r\n})();\r\n\r\nfunction undefSort(lhs: any, rhs: any) {\r\n  return (lhs !== undefined)\r\n    ? 1 : (rhs !== undefined)\r\n            ? -1 : 0;\r\n}\r\n\r\nfunction modNameSort(lhs: types.IMod, rhs: types.IMod,\r\n                     collator: Intl.Collator, sortDir: string): number {\r\n  const lhsName = util.renderModName(lhs);\r\n  const rhsName = util.renderModName(rhs);\r\n  return ((lhsName === undefined) || (rhsName === undefined))\r\n    ? undefSort(lhsName, rhsName)\r\n    : collator.compare(lhsName, rhsName) * (sortDir !== 'desc' ? 1 : -1);\r\n}\r\n\r\nfunction sortCategories(lhs: types.IMod, rhs: types.IMod,\r\n                        collator: Intl.Collator, state: any, sortDir: string): number {\r\n  const lhsCat = util.resolveCategoryName(lhs?.attributes?.category, state);\r\n  const rhsCat = util.resolveCategoryName(rhs?.attributes?.category, state);\r\n  return (lhsCat === rhsCat)\r\n    ? modNameSort(lhs, rhs, collator, sortDir)\r\n    : collator.compare(lhsCat, rhsCat);\r\n}\r\n\r\nconst coerceableRE = /^v?[0-9.]+$/;\r\n\r\nfunction safeCoerce(input: string): string {\r\n  return coerceableRE.test(input)\r\n    ? util.coerceToSemver(input) ?? input\r\n    : input;\r\n}\r\n\r\nclass ModsEditPage extends ComponentEx<IProps, IModsPageState> {\r\n  private mLang: string;\r\n  private mCollator: Intl.Collator;\r\n\r\n  private mColumns: Array<types.ITableAttribute<IModEntry>>;\r\n\r\n  private mActions: ITableRowAction[] = [\r\n    {\r\n      title: 'Requires',\r\n      icon: 'requires',\r\n      singleRowAction: false,\r\n      multiRowAction: true,\r\n      condition: (instanceIds: string[]) =>\r\n        instanceIds.find(id => this.state.entries[id]?.rule?.type === 'recommends') !== undefined,\r\n      action: (instanceIds: string[]) => {\r\n        const { onAddRule, onRemoveRule } = this.props;\r\n        const { entries } = this.state;\r\n        instanceIds.forEach(id => {\r\n          if (entries[id]?.rule?.type === 'recommends') {\r\n            const newRule = _.cloneDeep(entries[id].rule);\r\n            onRemoveRule(entries[id].rule);\r\n            newRule.type = 'requires';\r\n            onAddRule(newRule);\r\n          }\r\n        });\r\n      },\r\n    },\r\n    {\r\n      title: 'Recommends',\r\n      icon: 'recommends',\r\n      singleRowAction: false,\r\n      multiRowAction: true,\r\n      condition: (instanceIds: string[]) =>\r\n        instanceIds.find(id => this.state.entries[id]?.rule?.type === 'requires') !== undefined,\r\n      action: (instanceIds: string[]) => {\r\n        const { onAddRule, onRemoveRule } = this.props;\r\n        const { entries } = this.state;\r\n        instanceIds.forEach(id => {\r\n          if (entries[id].rule?.type === 'requires') {\r\n            const newRule = _.cloneDeep(entries[id].rule);\r\n            onRemoveRule(entries[id].rule);\r\n            newRule.type = 'recommends';\r\n            onAddRule(newRule);\r\n          }\r\n        });\r\n      },\r\n    },\r\n    {\r\n      title: 'Set Install Type',\r\n      icon: 'edit',\r\n      singleRowAction: false,\r\n      multiRowAction: true,\r\n      action: (instanceIds: string[]) => {\r\n        const { onSetCollectionAttribute, collection } = this.props;\r\n\r\n        const refMode = collection.attributes?.collection?.installMode?.[instanceIds[0]] ?? 'fresh';\r\n\r\n        this.context.api.showDialog('question', 'Install Type', {\r\n          text: 'Please select the install mode to apply to all selected mods',\r\n          choices: [\r\n            { id: 'fresh', text: 'Fresh Install', value: refMode === 'fresh' },\r\n            { id: 'choices', text: 'Same Installer Options', value: refMode === 'choices' },\r\n            { id: 'clone', text: 'Replicate', value: refMode === 'clone' },\r\n          ],\r\n        }, [\r\n          { label: 'Cancel' },\r\n          { label: 'Apply' },\r\n        ]).then(result => {\r\n          if (result.action === 'Apply') {\r\n            const selected = Object.keys(result.input).find(iter => result.input[iter]);\r\n            instanceIds.forEach(modId => {\r\n              onSetCollectionAttribute(['installMode', modId], selected);\r\n            });\r\n          }\r\n        });\r\n      },\r\n    },\r\n    {\r\n      title: 'Set Version',\r\n      icon: 'auto-update',\r\n      singleRowAction: false,\r\n      multiRowAction: true,\r\n      action: (instanceIds: string[]) => {\r\n        this.context.api.showDialog('question', 'Version Match', {\r\n          text: 'Please choose how Vortex should choose the version of the mod to be installed. '\r\n              + '\"Exact\" means that the user should install the same version as you have '\r\n              + 'installed right now. \"Latest\" means it should get the newest version at '\r\n              + 'the time of installation.',\r\n          choices: [\r\n            { id: 'prefer', text: 'Prefer exact', value: true },\r\n            { id: 'latest', text: 'Latest', value: false },\r\n            { id: 'exact', text: 'Exact only', value: false },\r\n          ],\r\n        }, [\r\n          { label: 'Cancel' },\r\n          { label: 'Apply' },\r\n        ]).then(result => {\r\n          if (result.action === 'Apply') {\r\n            const { onAddRule, onRemoveRule } = this.props;\r\n            const { entries } = this.state;\r\n\r\n            const selected = Object.keys(result.input).find(iter => result.input[iter]);\r\n            instanceIds.forEach(modId => {\r\n              const entry = entries[modId];\r\n              if (entry.mod !== undefined) {\r\n                const newRule = _.cloneDeep(entry.rule);\r\n                newRule.reference.versionMatch = (selected === 'exact')\r\n                  ? entry.mod.attributes['version']\r\n                  : (selected === 'prefer')\r\n                    ? '>=' + entry.mod.attributes['version'] + '+prefer'\r\n                    : '*';\r\n\r\n                onRemoveRule(entry.rule);\r\n                onAddRule(newRule);\r\n              }\r\n            });\r\n          }\r\n        });\r\n      },\r\n    },\r\n    {\r\n      title: 'Remove',\r\n      icon: 'delete',\r\n      singleRowAction: true,\r\n      multiRowAction: true,\r\n      action: (instanceIds: string[]) => {\r\n        const { entries } = this.state;\r\n        const filteredIds = instanceIds.filter(id => entries[id] !== undefined);\r\n\r\n        this.context.api.showDialog('question', 'Confirm removal', {\r\n          text: 'Are you sure you want to remove these mods from this collection? Removing the mods from the collection will not remove them from Vortex.',\r\n          message: filteredIds.map(id => entries[id].mod !== undefined\r\n            ? util.renderModName(entries[id].mod)\r\n            : util.renderModReference(entries[id].rule.reference)).join('\\n'),\r\n        }, [\r\n          { label: 'Cancel' },\r\n          { label: 'Remove', action: () => {\r\n            filteredIds.forEach(id => {\r\n              if (entries[id] !== undefined) {\r\n                this.props.onRemoveRule(entries[id].rule);\r\n                delete this.nextState.entries[id];\r\n              }\r\n            });\r\n          } },\r\n        ]);\r\n      },\r\n    },\r\n    {\r\n      icon: 'sort-none',\r\n      title: 'Assign order',\r\n      subMenus: (instanceIds: string | string[]) => {\r\n        const { t } = this.props;\r\n        const ids = Array.isArray(instanceIds)\r\n          ? instanceIds\r\n          : [instanceIds];\r\n        const maxPhase = Object.values(this.state.entries).reduce((prev, entry) =>\r\n          Math.max(prev, entry.rule.extra?.['phase'] ?? 0)\r\n        , 0);\r\n        return (new Array(maxPhase + 1)).fill(0).map((ignore, idx) => {\r\n          const item: ITableRowAction = {\r\n            title: t('Phase {{num}}', { replace: { num: idx } }),\r\n            action: () => {\r\n              ids.forEach(id => { this.setPhase(this.state.entries[id], idx); });\r\n            },\r\n          };\r\n          return item;\r\n        })\r\n          .concat({\r\n            title: t('Create & Add to Phase {{num}}', { replace: { num: maxPhase + 1 } }),\r\n            action: () => {\r\n              ids.forEach(id => { this.setPhase(this.state.entries[id], maxPhase + 1); });\r\n            },\r\n          });\r\n      },\r\n      singleRowAction: true,\r\n    } as any,\r\n  ];\r\n\r\n  constructor(props: IProps) {\r\n    super(props);\r\n\r\n    const entries = this.generateEntries(props);\r\n    this.initState({\r\n      entries,\r\n      problems: this.checkProblems(props, entries),\r\n    });\r\n\r\n    this.mColumns = [\r\n      {\r\n        id: 'name',\r\n        name: 'Mod Name',\r\n        description: 'Mod Name',\r\n        calc: (entry: IModEntry) => (entry.mod !== undefined)\r\n          ? util.renderModName(entry.mod)\r\n          : util.renderModReference(entry.rule.reference),\r\n        placement: 'table',\r\n        edit: {},\r\n        isDefaultSort: true,\r\n        isSortable: true,\r\n        filter: new TableTextFilter(true),\r\n        sortFunc: (lhs: string, rhs: string, locale: string): number => {\r\n          if ((this.mCollator === undefined) || (locale !== this.mLang)) {\r\n            this.mLang = locale;\r\n            this.mCollator = new Intl.Collator(locale, { sensitivity: 'base' });\r\n          }\r\n          return this.mCollator.compare(lhs, rhs);\r\n        },\r\n      }, {\r\n        id: 'tags',\r\n        name: 'Tag',\r\n        description: 'Mod Highlights',\r\n        customRenderer: (entry: IModEntry) => {\r\n          if (entry.mod === undefined) {\r\n            return (\r\n              <tooltip.Icon\r\n                name='feedback-error'\r\n                tooltip={this.props.t('This mod isn\\'t installed.')}\r\n              />\r\n            );\r\n          }\r\n\r\n          const color = util.getSafe(entry.mod.attributes, ['color'], '');\r\n          const icon = util.getSafe(entry.mod.attributes, ['icon'], '');\r\n          const hasProblem = (this.state.problems[entry.mod.id] !== undefined)\r\n            && (this.state.problems[entry.mod.id].length > 0);\r\n          const hasHighlight = color || icon;\r\n\r\n          if (!color && !icon && !hasProblem) {\r\n            return null;\r\n          }\r\n          return (\r\n            <>\r\n              {hasHighlight ? (\r\n                <Icon\r\n                  className={'highlight-base ' + (color !== '' ? color : 'highlight-default')}\r\n                  name={icon !== '' ? icon : 'highlight'}\r\n                />\r\n              ) : null}\r\n              {hasProblem ? (\r\n                <tooltip.IconButton\r\n                  icon='incompatible'\r\n                  className='btn-embed'\r\n                  tooltip={this.state.problems[entry.mod.id]\r\n                    .map(problem => problem.summary).join('\\n')}\r\n                  data-modid={entry.mod.id}\r\n                  onClick={this.showProblems}\r\n                />\r\n              ) : null}\r\n            </>\r\n          );\r\n        },\r\n        calc: (entry: IModEntry) => {\r\n          if (entry.mod === undefined) {\r\n            return ['not-installed', 'has-problems'];\r\n          }\r\n          const color = entry.mod.attributes?.color ?? '';\r\n          const icon = entry.mod.attributes?.icon ?? '';\r\n          const problems = this.state.problems[entry.mod.id] || [];\r\n\r\n          return [color, icon, problems.length > 0 ? 'has-problems' : 'no-problems'];\r\n        },\r\n        placement: 'table',\r\n        edit: {},\r\n        filter: new OptionsFilter([{ value: 'has-problems', label: 'Has Problems' }], false, false),\r\n      }, {\r\n        id: 'category',\r\n        name: 'Category',\r\n        description: 'Mod Category',\r\n        icon: 'sitemap',\r\n        placement: 'table',\r\n        calc: (mod: IModEntry) =>\r\n          util.resolveCategoryName(mod.mod?.attributes?.category,\r\n                                   this.context.api.store.getState()),\r\n        isToggleable: true,\r\n        edit: {},\r\n        isSortable: true,\r\n        isGroupable: (mod: IModEntry, t: types.TFunction) =>\r\n          util.resolveCategoryName(mod.mod?.attributes?.category,\r\n            this.context.api.store.getState()) || t('<No category>'),\r\n        filter: new OptionsFilter(() => {\r\n          const state: types.IState = this.context.api.getState();\r\n          return Array.from(new Set(Object.values(this.state.entries)\r\n            .map(entry => entry.mod?.attributes?.category)\r\n            .filter(entry => !!entry)\r\n            .map(entry => util.resolveCategoryName(entry, state))\r\n            .sort()))\r\n          .map(name => {\r\n            return { value: name, label: name };\r\n          });\r\n      }, false, false),\r\n        sortFuncRaw: (lhs: IModEntry, rhs: IModEntry, locale: string): number =>\r\n          sortCategories(lhs.mod, rhs.mod, getCollator(locale), this.context.api.store.getState(),\r\n            this.categorySort()),\r\n      }, {\r\n        id: 'required',\r\n        name: 'Required',\r\n        description: 'Whether the entire collection will fail if this mod is missing',\r\n        calc: (mod: IModEntry) => {\r\n          return mod.rule.type === 'requires'\r\n            ? true\r\n            : false;\r\n        },\r\n        placement: 'table',\r\n        edit: {\r\n          inline: true,\r\n          actions: false,\r\n          choices: () => [\r\n            { key: 'required', bool: true } as any,\r\n            { key: 'optional', bool: false } as any,\r\n          ],\r\n          onChangeValue: (source: IModEntry, value: any) => {\r\n            this.props.onRemoveRule(source.rule);\r\n            const newRule = _.cloneDeep(source.rule);\r\n            newRule.type = value ? 'requires' : 'recommends';\r\n            this.props.onAddRule(newRule);\r\n          },\r\n        },\r\n      }, {\r\n        id: 'source',\r\n        name: 'Source',\r\n        description: 'How the user acquires the mod',\r\n        calc: (entry: IModEntry) => {\r\n          const id = entry.mod?.id ?? entry.rule?.reference?.id;\r\n          const { collection } = this.props;\r\n          const type = util.getSafe(collection,\r\n            ['attributes', 'collection', 'source', id, 'type'],\r\n            'nexus');\r\n          return SOURCES[type];\r\n        },\r\n        placement: 'table',\r\n        edit: {\r\n          inline: true,\r\n          actions: false,\r\n          choices: () => Object.keys(SOURCES).map(key => ({ key, text: SOURCES[key] })),\r\n          onChangeValue: (entry: IModEntry, value: any) => {\r\n            const id = entry.mod?.id ?? entry.rule?.reference?.id;\r\n            if (id !== undefined) {\r\n              this.querySource(id, value);\r\n            }\r\n          },\r\n        },\r\n      }, {\r\n        id: 'edit-source',\r\n        placement: 'table',\r\n        edit: {},\r\n        calc: (entry: IModEntry) => {\r\n          const { collection } = this.props;\r\n          const id = entry.mod?.id ?? entry.rule?.reference?.id;\r\n\r\n          const type = util.getSafe(collection,\r\n            ['attributes', 'collection', 'source', id, 'type'],\r\n            'nexus');\r\n          return SOURCES[type];\r\n        },\r\n        customRenderer: (entry: IModEntry) => {\r\n          const { t, collection } = this.props;\r\n          const id = entry.mod?.id ?? entry.rule?.reference?.id;\r\n          const type = util.getSafe(collection,\r\n            ['attributes', 'collection', 'source', id, 'type'],\r\n            'nexus');\r\n          return (\r\n            <tooltip.IconButton\r\n              icon='edit'\r\n              disabled={(entry.mod === undefined) || ['nexus', 'bundle'].includes(type)}\r\n              tooltip={t('Edit Source')}\r\n              data-modid={id}\r\n              onClick={this.onQuerySource}\r\n            />\r\n          );\r\n        },\r\n      }, {\r\n        id: 'version-match',\r\n        name: 'Version',\r\n        description: 'The version to install',\r\n        calc: (entry: IModEntry) => {\r\n          const { collection } = this.props;\r\n          const { t } = this.props;\r\n          const id = entry.mod?.id ?? entry.rule?.reference?.id;\r\n          const version = entry.mod?.attributes?.['version'] ?? t('N/A');\r\n\r\n          if (collection.attributes?.collection?.source?.[id]?.type === 'bundle') {\r\n            return t('Exact only ({{version}})', { replace: { version } });\r\n          }\r\n\r\n          if (entry.rule.reference.versionMatch === '*') {\r\n            return t('Latest');\r\n          } else if ((entry.rule.reference.versionMatch === undefined)\r\n            || (entry.rule.reference.versionMatch || '').endsWith('+prefer')) {\r\n            return t('Prefer exact ({{version}})', { replace: { version } });\r\n          } else {\r\n            return t('Exact only ({{version}})', { replace: { version } });\r\n          }\r\n        },\r\n        placement: 'table',\r\n        edit: {\r\n          inline: true,\r\n          actions: false,\r\n          choices: (entry: IModEntry) => {\r\n            const { t, collection } = this.props;\r\n            const id = entry.mod?.id ?? entry.rule?.reference?.id;\r\n            const version = entry.mod?.attributes?.['version'] ?? t('N/A');\r\n\r\n            if (collection.attributes?.collection?.source?.[id]?.type === 'bundle') {\r\n              return [\r\n                { key: 'exact', text: t('Exact only ({{version}})', { replace: { version } }) },\r\n              ];\r\n            }\r\n\r\n            return [\r\n              { key: 'exact', text: t('Exact only ({{version}})', { replace: { version } }) },\r\n              { key: 'prefer', text: t('Prefer exact ({{version}})', { replace: { version } }) },\r\n              { key: 'newest', text: t('Latest') },\r\n            ];\r\n          },\r\n          onChangeValue: (entry: IModEntry, value: any) => {\r\n            if (entry.mod === undefined) {\r\n              return;\r\n            }\r\n\r\n            const newRule = _.cloneDeep(entry.rule);\r\n            this.props.onRemoveRule(entry.rule);\r\n            newRule.reference.versionMatch = (value === 'exact')\r\n              ? entry.mod.attributes['version']\r\n              : (value === 'prefer')\r\n                ? '>=' + entry.mod.attributes['version'] + '+prefer'\r\n                : '*';\r\n            this.props.onAddRule(newRule);\r\n          },\r\n        },\r\n      }, {\r\n        id: 'install-type',\r\n        name: 'Install',\r\n        description: 'How the mod should be installed on the user system',\r\n        filter: new OptionsFilter([\r\n          { value: 'has-install-options', label: 'Has Installation Options' }], false, false),\r\n        calc: (entry: IModEntry) => {\r\n          const { collection } = this.props;\r\n          const id = entry.mod?.id ?? entry.rule?.reference?.id;\r\n\r\n          if (collection.attributes?.collection?.source?.[id]?.type === 'bundle') {\r\n            return INSTALL_MODES['clone'];\r\n          }\r\n\r\n          const hasInstallerOptions =\r\n            (entry.mod?.attributes?.installerChoices?.options ?? []).length > 0;\r\n\r\n          const installMode =\r\n            util.getSafe(collection, ['attributes', 'collection', 'installMode', id], 'fresh');\r\n          return [INSTALL_MODES[installMode], hasInstallerOptions ? 'has-install-options' : 'no-options'];\r\n        },\r\n        placement: 'table',\r\n        help: 'If set to \"Fresh Install\" the mod will simply be installed fresh on the users system, '\r\n          + 'installer (if applicable) and everything.\\n'\r\n          + 'If set to \"Replicate\" Vortex will try to replicate your exact setup for this mod. '\r\n          + 'This does not bundle the mod itself but the list of files to install and patches if '\r\n          + 'necessary. This may increase the size of the collection and the time it takes to '\r\n          + 'export it considerably.',\r\n        edit: {},\r\n        customRenderer: (entry: IModEntry) => {\r\n          const { t, collection } = this.props;\r\n          const id = entry.mod?.id ?? entry.rule?.reference?.id;\r\n\r\n          const hasInstallerOptions =\r\n            (entry.mod?.attributes?.installerChoices?.options ?? []).length > 0;\r\n\r\n          const installMode = util.getSafe(collection,\r\n            ['attributes', 'collection', 'installMode', id], 'fresh');\r\n\r\n          return (\r\n            <InstallModeRenderer\r\n              hasInstallerOptions={hasInstallerOptions}\r\n              currentInstallMode={installMode}\r\n              modId={id}\r\n              onSetInstallMode={this.changeInstallMode}\r\n              options={INSTALL_MODES}\r\n            />\r\n          );\r\n        },\r\n      }, {\r\n        id: 'instructions',\r\n        name: 'Instructions',\r\n        icon: 'edit',\r\n        calc: (entry: IModEntry) => {\r\n          const { collection } = this.props;\r\n\r\n          if (entry.mod === undefined) {\r\n            return null;\r\n          }\r\n\r\n          return collection.attributes?.collection?.instructions?.[entry.mod.id];\r\n        },\r\n        customRenderer: (entry: IModEntry, detailCell: boolean, t: types.TFunction) => {\r\n          const { collection } = this.props;\r\n\r\n          if (entry.mod === undefined) {\r\n            return null;\r\n          }\r\n\r\n          const instructions = collection.attributes?.collection?.instructions?.[entry.mod.id];\r\n          return (!!instructions) ? (\r\n            <tooltip.IconButton\r\n              icon='edit'\r\n              tooltip={t('Edit Instructions')}\r\n              data-modid={entry.mod.id}\r\n              onClick={this.changeInstructions}\r\n            >\r\n              {t('Edit')}\r\n            </tooltip.IconButton>\r\n          ) : (\r\n            <tooltip.IconButton\r\n              icon='add'\r\n              tooltip={t('Add Instructions')}\r\n              data-modid={entry.mod.id}\r\n              onClick={this.changeInstructions}\r\n            >\r\n              {t('Add')}\r\n            </tooltip.IconButton>\r\n          );\r\n        },\r\n        placement: 'table',\r\n        edit: {},\r\n      }, {\r\n        id: 'local_edits',\r\n        name: 'Binary patching',\r\n        icon: 'edit',\r\n        help: 'With this option enabled, any changes you did to the files in this mods will '\r\n            + 'also be included in the Collection.',\r\n        placement: 'table',\r\n        calc: (entry: IModEntry) => {\r\n          const { collection } = this.props;\r\n\r\n          if (entry.mod === undefined) {\r\n            return false;\r\n          }\r\n\r\n          return collection.attributes?.collection?.saveEdits?.[entry.mod.id] ?? false;\r\n        },\r\n        edit: {\r\n          choices: () => [\r\n            { key: 'ignore', bool: false } as any,\r\n            { key: 'save', bool: true } as any,\r\n          ],\r\n          inline: true,\r\n          actions: false,\r\n          onChangeValue: (source: IModEntry, value: any) => {\r\n            (async () => {\r\n              if (source.mod === undefined) {\r\n                // mod not/no longer installed?\r\n                return;\r\n              }\r\n              if (value && this.props.showBinpatchWarning) {\r\n                const result = await this.context.api.showDialog('question', 'Save Local Edits', {\r\n                  bbcode: 'With this option enabled, when you upload the Collection Vortex will '\r\n                    + 'compare your files on disk against the archive provided by the mod author '\r\n                    + 'and include patches so that any modifications get replicated when a user '\r\n                    + 'installs your collection.\\n'\r\n                    + 'This allows for more customization but there are considerable drawbacks:\\n'\r\n                    + '[list]'\r\n                    + '[*]Uploading the collection will take longer - a lot if it\\'s a big mod\\n'\r\n                    + '[*]these patches apply only to the exact same version&variant of the mod, '\r\n                    + 'if the user updates the mod the patch will be undone.'\r\n                    + '[/list]\\n'\r\n                    + 'Therefore please only use this option if you absolutely have to.',\r\n                  checkboxes: [\r\n                    { id: 'dont_show_again', value: false, text: 'Don\\'t show again' },\r\n                  ],\r\n                }, [\r\n                  { label: 'Cancel' },\r\n                  { label: 'Enable' },\r\n                ]);\r\n                if (result.action === 'Enable') {\r\n                  const state = this.context.api.getState();\r\n\r\n                  if (result.input['dont_show_again']) {\r\n                    this.props.onDismissBinpatchWarning();\r\n                  }\r\n\r\n                  const gameMode = selectors.activeGameId(state);\r\n                  const archive = state.persistent.downloads.files[source.mod.archiveId];\r\n                  const dlPath = selectors.downloadPathForGame(state, gameMode);\r\n                  if (archive !== undefined) {\r\n                    try {\r\n                      await fs.statAsync(path.join(dlPath, archive.localPath));\r\n                      // await scanForDiffs(this.context.api, gameMode, source.mod.id);\r\n                      this.props.onSetCollectionAttribute(['saveEdits', source.mod.id], value);\r\n                    } catch (err) {\r\n                      if (err.code === 'ENOENT') {\r\n                        this.context.api.showErrorNotification('Failed to enable \"Local Edits\"',\r\n                          'To enable this feature, the corresponding archive has to exist to '\r\n                          + 'compare against.', { allowReport: false });\r\n                      } else {\r\n                        this.context.api.showErrorNotification(\r\n                          'Failed to enable \"Local Edits\"', err);\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              } else {\r\n                this.props.onSetCollectionAttribute(['saveEdits', source.mod.id], value);\r\n              }\r\n            })();\r\n          },\r\n        },\r\n      }, {\r\n        id: 'phase',\r\n        name: 'Phase',\r\n        placement: 'table',\r\n        isToggleable: true,\r\n        isSortable: true,\r\n        isDefaultVisible: false,\r\n        groupName: (phase: any) => this.props.t('Phase {{phase}}', {\r\n          replace: { phase: (phase || 0).toString() },\r\n        }),\r\n        isGroupable: true,\r\n        calc: mod => mod.rule.extra?.['phase'] ?? 0,\r\n        edit: {},\r\n      },\r\n    ];\r\n  }\r\n\r\n  public UNSAFE_componentWillMount() {\r\n    const entries = this.generateEntries(this.props);\r\n    this.nextState.entries = entries;\r\n    this.nextState.problems = this.checkProblems(this.props, entries);\r\n  }\r\n\r\n  public UNSAFE_componentWillReceiveProps(newProps: IProps) {\r\n    if ((newProps.mods !== this.props.mods)\r\n        || (newProps.collection !== this.props.collection)) {\r\n      const entries = this.generateEntries(newProps);\r\n      this.nextState.entries = entries;\r\n      this.nextState.problems = this.checkProblems(newProps, entries);\r\n    }\r\n  }\r\n\r\n  public render(): React.ReactNode {\r\n    const { t } = this.props;\r\n    const { entries } = this.state;\r\n\r\n    const addModsButton = () => {\r\n      return (<Button\r\n        id='btn-more-mods'\r\n        className='collection-add-mods-btn'\r\n        onClick={this.addMods}\r\n      >\r\n        <Icon name='add' />\r\n        {t('Add more mods')}\r\n      </Button>);\r\n    };\r\n\r\n    if (Object.keys(entries).length === 0) {\r\n      return (\r\n        <EmptyPlaceholder\r\n          icon='layout-list'\r\n          text={t('There are no mods in this collection')}\r\n          // subtext={t('Is it a collection when there\\'s nothing in it?')}\r\n          subtext={addModsButton()}\r\n          fill={true}\r\n        />\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className='collection-mods-container'>\r\n        <Table\r\n          tableId='collection-mods'\r\n          data={entries}\r\n          staticElements={this.mColumns}\r\n          actions={this.mActions}\r\n          showDetails={false}\r\n        >\r\n          <div id='collection-add-mods-container'>\r\n            {addModsButton()}\r\n          </div>\r\n        </Table>\r\n        <Usage infoId='collection-mods'>\r\n          <p>{t('Here you can configure which mods to install and how.')}</p>\r\n          <p>{t('Version: Choose whether the collection will install exactly the version you '\r\n            + 'have yourself or whatever is current on Nexus Mods.')}</p>\r\n          <p>{t('Required: Select whether the user has to install the mod or whether it\\'s an optional recommendation, recommended mods are presented last and the user is given the choice to install them or not.')}</p>\r\n          <p>{t('Install: \"Fresh Install\" will install the mod as Vortex would usually do, '\r\n            + 'installer dialog and everything. \"Replicate\" will extract only the files you have '\r\n            + 'extracted yourself, in exactly the same location. This basically ensures the user '\r\n            + 'gets the same options as you without having to pick them but it only works when you '\r\n            + 'have selected \"Exact version\" in the Version column. It will also considerably '\r\n            + 'increase the time it takes to build the pack.')}</p>\r\n          <p>{t('Source: Decides how the user downloads the mod. \"Nexus Mods\" is easiest, use the '\r\n            + 'other options when the mod in only hosted on a different source. '\r\n            + 'The options also include \"pack\" which bundles the mod directly into the collection. '\r\n            + 'Do this only for stuff created during setup (e.g. generated LODs, '\r\n            + 'customized configuration files and such). '\r\n            + 'You must not include any material you don\\'t hold the copyright to. '\r\n            + 'Also: Do not provide direct download links unless you have express permission to '\r\n            + 'do so.')}\r\n          </p>\r\n        </Usage>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private categorySort() {\r\n    const state: types.IState = this.context.api.getState();\r\n    return state.settings.tables.mods.attributes?.['category']?.sortDirection ?? 'none';\r\n  }\r\n\r\n  private addMods = () =>  {\r\n    const { collection, onAddModsDialog } = this.props;\r\n    onAddModsDialog(collection.id);\r\n  }\r\n\r\n  private generateEntries(props: IProps) {\r\n    const { collection, mods } = props;\r\n\r\n    if ((collection === undefined) || (collection.rules === undefined)) {\r\n      return {};\r\n    }\r\n\r\n    return Object.values(collection.rules)\r\n      .filter(rule => ['requires', 'recommends'].indexOf(rule.type) !== -1)\r\n      .reduce((prev, rule) => {\r\n        const mod = util.findModByRef(_.omit(rule.reference, ['versionMatch']), mods);\r\n        const id = mod?.id ?? rule.reference.id ?? rule.reference.idHint;\r\n        if (id !== undefined) {\r\n          prev[id] = { rule, mod };\r\n        }\r\n        return prev;\r\n      }, {});\r\n  }\r\n\r\n  private checkProblems(props: IProps,\r\n                        entries: { [modId: string]: IModEntry })\r\n                        : { [modId: string]: IProblem[] } {\r\n    return Object.values(entries).reduce((prev, entry) => {\r\n      const id = entry.mod?.id ?? entry.rule.reference.id ?? entry.rule.reference.idHint;\r\n      if (id !== undefined) {\r\n        prev[id] = this.updateProblems(props, entry);\r\n      }\r\n      return prev;\r\n    }, {});\r\n  }\r\n\r\n  private updateProblems(props: IProps, entry: IModEntry): IProblem[] {\r\n    const { t, collection } = props;\r\n\r\n    if (entry.mod === undefined) {\r\n      return;\r\n    }\r\n\r\n    const res: IProblem[] = [];\r\n\r\n    const attributes = collection.attributes?.collection;\r\n\r\n    const source = attributes?.source?.[entry.mod.id];\r\n    const sourceType: string = source?.type ?? 'nexus';\r\n    const installMode: string = attributes?.installMode?.[entry.mod.id] ?? 'fresh';\r\n    const saveEdits: boolean = attributes?.saveEdits?.[entry.mod.id] ?? false;\r\n\r\n    const { versionMatch } = entry.rule.reference;\r\n\r\n    if ((sourceType === 'nexus')\r\n        && (isNaN(parseInt(entry.mod.attributes?.modId, 10))\r\n            || isNaN(parseInt(entry.mod.attributes?.fileId, 10)))) {\r\n      res.push({\r\n        type: 'invalid-ids',\r\n        summary: t('Missing file identifiers'),\r\n        message: t('When using \"Nexus Mods\" as a source, both the mod id and file id have to be '\r\n                 + 'known. If you didn\\'t download the mod through Vortex they may not be set. '\r\n                 + 'To solve this you have to change the source of the mod to \"Nexus Mods\" '\r\n                 + 'and use the options below \"Nexus Mods IDs\" to fill in the '\r\n                 + 'missing data (the automated options should be quite reliable).'),\r\n      });\r\n    }\r\n\r\n    if (((versionMatch === '*') || (versionMatch?.endsWith?.('+prefer')))\r\n        && (installMode === 'clone')) {\r\n      res.push({\r\n        type: 'replicate-fuzzy-version',\r\n        summary: t('\"Replicate\" requires \"Exact only\" as the version'),\r\n        message: t('\"Replicate\" install can only be used when installing '\r\n                 + 'a specific version of a mod. This will definitively break '\r\n                 + 'as soon as the mod gets updated.'),\r\n      });\r\n    }\r\n    if ((versionMatch === '*') && (installMode === 'choices')) {\r\n      res.push({\r\n        type: 'choices-fuzzy-version',\r\n        summary: t('\"Same Installer Options\" should not be used with \"Latest\" version'),\r\n        message: t('Installing with \"Same choices options\" may break if the mod gets updated, '\r\n                 + 'you may want to switch to \"Prefer exact\" to be safe.'),\r\n      });\r\n    }\r\n\r\n    if ((sourceType === 'bundle')\r\n        && ((versionMatch === '*') || versionMatch?.endsWith?.('+prefer'))) {\r\n      res.push({\r\n        type: 'bundled-fuzzy-version',\r\n        summary: t('Version choice has no effect on \"Bundled\" mod'),\r\n        message: t('If you bundle a mod the user gets exactly the version of the mod you '\r\n                 + 'have, the Version selection is pointless in this case.'),\r\n      });\r\n    } else if (['browse', 'direct'].includes(sourceType)) {\r\n      if (versionMatch?.endsWith?.('+prefer')) {\r\n        res.push({\r\n          type: 'web-fuzzy-version',\r\n          summary: t('Version choice has no effect on mods using generic download.'),\r\n          message: t('The option to \"prefer exact version\" only works with sources that '\r\n                   + 'support mod updates (Nexus Mods). For other sources your options '\r\n                   + 'are to use the exact same version you have locally or to accept whatever '\r\n                   + 'version the user downloads.'),\r\n        });\r\n      }\r\n\r\n      if (!source.url) {\r\n        res.push({\r\n          type: 'web-url-missing',\r\n          summary: t('No URL set'),\r\n          message: t('The sources \"Browse a website\" and \"Direct download\" require that '\r\n                     + 'you provide a URL to download from.'),\r\n        });\r\n      }\r\n    }\r\n\r\n    if (saveEdits) {\r\n      if ((versionMatch === '*') || versionMatch?.endsWith?.('+prefer')) {\r\n        res.push({\r\n          type: 'local-edits-fuzzy-version',\r\n          summary: t('Version choice incompatible with saving local edits.'),\r\n          message: t('Local edits can only be applied if the user gets the exact same files '\r\n                     + 'as you have installed locally, meaning they have to use the exact '\r\n                     + 'same version of the mod.'),\r\n        });\r\n      }\r\n\r\n      if (sourceType === 'bundle') {\r\n        res.push({\r\n          type: 'local-edits-bundle',\r\n          summary: t('Combining the option to save edits and bundling makes no sense.'),\r\n          message: t('The option to \"bundle\" already bundles the edited files, storing '\r\n                     + 'the edits separately would not be useful as they can\\'t and '\r\n                     + 'don\\'t have to be applied.'),\r\n        });\r\n      }\r\n\r\n      if (installMode === 'clone') {\r\n        res.push({\r\n          type: 'replicate-vs-binpatch',\r\n          summary: t('\"Replicate\" installation can\\'t be combined with \"Binary patching\"'),\r\n          message: t('\"Replicate\" depends on files being unchanged '\r\n                    + 'from the originals in the archive. If you modified mod files '\r\n                    + '(as Binary Patching implies), \"Replicate\" will fail.'),\r\n        });\r\n      }\r\n    }\r\n\r\n    if (sourceType === 'bundle') {\r\n      res.push({\r\n        type: 'bundle-copyright',\r\n        summary: t('Only bundle mods you have the right to do so'),\r\n        message: t('Mods are copyright protected, only pack mods if you are sure you '\r\n                 + 'have the right to do so, e.g. if it\\'s dynamically generated content '\r\n                 + 'or if it\\'s your own mod.'),\r\n      });\r\n    } else if (sourceType === 'direct') {\r\n      res.push({\r\n        type: 'direct-download',\r\n        summary: t('Please verify you are allowed to do direct download on this site'),\r\n        message: t('Most websites don\\'t allow direct downloads, Plese make sure you are '\r\n                 + 'allowed to use direct links to the specified page.'),\r\n      });\r\n    }\r\n\r\n    if ((installMode === 'choices')\r\n        && ((entry.mod.attributes?.installerChoices?.options ?? []).length === 0)) {\r\n      res.push({\r\n        type: 'installer-choices-not-saved',\r\n        summary: t('No Installer Options saved for this mod'),\r\n        message: t('The installer choices for this mod haven\\'t been saved. '\r\n                 + 'This currently only works with xml-based fomods installed with '\r\n                 + 'Vortex 1.5.0 or later. '\r\n                 + 'You may have to reinstall the mod for this to work.'),\r\n      });\r\n    }\r\n\r\n    if (versionMatch === '') {\r\n      res.push({\r\n        type: 'no-version-set',\r\n        summary: t('No version set for this mod'),\r\n        message: t('The mod has no version number set. This isn\\'t strictly necessary, we use the '\r\n                 + 'file id to identify the exact version but for the purpose of informing the '\r\n                 + 'user it would be nicer if a version was specified. '\r\n                 + '(Please don\\'t forget to update the collection)'),\r\n      });\r\n    }\r\n\r\n    return res;\r\n  }\r\n\r\n  private async fixInvalidIds(api: types.IExtensionApi, mod: types.IMod) {\r\n    const modName = util.renderModName(mod);\r\n\r\n    const result = await api.showDialog('question', modName, {\r\n      text: 'You have to either fix the IDs for this mod or change how the collection '\r\n          + 'acquires this mod.',\r\n    }, [\r\n      { label: 'Change Source' },\r\n      { label: 'Fix IDs' },\r\n    ]);\r\n\r\n    if (result.action === 'Fix IDs') {\r\n      api.events.emit('show-main-page', 'Mods');\r\n      setTimeout(() => {\r\n        api.events.emit('mods-select-item', mod.id, true);\r\n        api.highlightControl(\r\n          `.table-detail-modSource`, 4000);\r\n        api.highlightControl(\r\n          `.table-detail-nexusModId`, 4000);\r\n      }, 200);\r\n    } else {\r\n      (api.highlightControl as any)(\r\n        `#${util.sanitizeCSSId(mod.id)} > .cell-source`, 4000, undefined, true);\r\n      (api.highlightControl as any)(\r\n        `#${util.sanitizeCSSId(mod.id)} > .cell-edit-source`, 4000, undefined, true);\r\n    }\r\n  }\r\n\r\n  private async fixMissingVersion(api: types.IExtensionApi, mod: types.IMod) {\r\n    api.events.emit('show-main-page', 'Mods');\r\n    setTimeout(() => {\r\n      api.events.emit('mods-select-item', mod.id, true);\r\n      api.highlightControl(\r\n        `.table-detail-versionDetail`, 4000);\r\n    }, 200);\r\n  }\r\n\r\n  private setCurrentVersion(entry: IModEntry) {\r\n    this.props.onRemoveRule(entry.rule);\r\n    const newRule = _.cloneDeep(entry.rule);\r\n    newRule.reference.versionMatch = entry.mod.attributes['version'];\r\n    this.props.onAddRule(newRule);\r\n  }\r\n\r\n  private setPreferVersion(entry: IModEntry) {\r\n    this.props.onRemoveRule(entry.rule);\r\n    const newRule = _.cloneDeep(entry.rule);\r\n    newRule.reference.versionMatch = '>=' + safeCoerce(entry.mod.attributes['version']) + '+prefer';\r\n    this.props.onAddRule(newRule);\r\n  }\r\n\r\n  private setPhase = (mod: IModEntry, phase: number) => {\r\n    const { onAddRule, onDismissPhaseUsage, onShowPhaseColumn, showPhaseUsage } = this.props;\r\n\r\n    const impl = async () => {\r\n      const newRule = _.cloneDeep(mod.rule);\r\n      // onRemoveRule(mod.rule);\r\n      util.setdefault(newRule, 'extra', {})['phase'] = phase;\r\n      onAddRule(newRule);\r\n\r\n      if (phase !== 0) {\r\n        onShowPhaseColumn();\r\n      }\r\n\r\n      if (showPhaseUsage) {\r\n        const result = await this.context.api.showDialog('info', 'Installation Phase', {\r\n          text: 'When installing your collection Vortex will process installation phases '\r\n              + 'one by one and ensure all mods from a given phase are both '\r\n              + 'installed and deployed before continuing to the next phase. '\r\n              + 'That way, mods that require other mods being present can be set to '\r\n              + 'install after their requirements by being put in different phases.\\n'\r\n              + 'Please note that Vortex will need to deploy after each phase which will '\r\n              + 'slow down the installation process. '\r\n              + 'It is advised to only utilise this feature when necessary.',\r\n          checkboxes: [\r\n            { id: 'dismiss', text: 'Don\\'t show this in the future', value: false },\r\n          ],\r\n        }, [\r\n          { label: 'Understood' },\r\n        ]);\r\n        if (result.input['dismiss']) {\r\n          onDismissPhaseUsage();\r\n        }\r\n      }\r\n    };\r\n\r\n    impl();\r\n  }\r\n\r\n  private showProblems = (evt: React.MouseEvent<any>) => {\r\n    const { t, mods } = this.props;\r\n\r\n    const modId = evt.currentTarget.getAttribute('data-modid');\r\n\r\n    const mod = mods[modId];\r\n    const problems = this.state.problems[modId];\r\n\r\n    const { api } = this.context;\r\n\r\n    const solutions: Map<ProblemType, () => void> = new Map([\r\n      ['invalid-ids', () => this.fixInvalidIds(api, mod)],\r\n      ['no-version-set', () => this.fixMissingVersion(api, mod)],\r\n      ['replicate-fuzzy-version', () => this.setCurrentVersion(this.state.entries[modId])],\r\n      ['choices-fuzzy-version', () => this.setPreferVersion(this.state.entries[modId])],\r\n    ]);\r\n\r\n    const modName = util.renderModName(mod);\r\n    api.showDialog('info', modName, {\r\n      bbcode: '[list]' + problems.map((prob: IProblem, idx: number) => {\r\n        if (solutions.has(prob.type)) {\r\n          return `[*]${prob.message} [url=\"cb://selectproblem/${idx}\"]${t('Fix it')}[/url][/*]`;\r\n        } else {\r\n          return `[*]${prob.message}[/*]`;\r\n        }\r\n      }).join('') + '[/list]',\r\n      options: {\r\n        translated: true,\r\n        bbcodeContext: {\r\n          callbacks: {\r\n            selectproblem: (idx: number) => {\r\n              solutions.get(problems[idx].type)();\r\n              api.closeDialog('collection-problem');\r\n            },\r\n          },\r\n        },\r\n      },\r\n    }, [\r\n      { label: 'Close' },\r\n    ], 'collection-problem');\r\n  }\r\n\r\n  private querySource(modId: string, type: SourceType) {\r\n    const { collection } = this.props;\r\n    const src: ICollectionSourceInfo = util.getSafe(collection,\r\n      ['attributes', 'collection', 'source', modId], { type });\r\n    const input: types.IInput[] = [];\r\n\r\n    let text: string;\r\n\r\n    if (type === 'bundle') {\r\n      text = 'These files will be bundled with the collection. '\r\n           + 'This means they will be distributed alongside the collection and '\r\n           + 'released into the public domain.\\n\\n'\r\n           + 'Bundled content should not be used to distribute mods or mod files. '\r\n           + 'It is intended to allow curators to include configuration files or '\r\n           + 'outputs from automated tools for the convenience of users. '\r\n           + 'Any content that would qualify as a \"mod\" should be uploaded to a '\r\n           + 'Nexus Mods mod page and included in the collection, rather than being bundled.\\n\\n'\r\n           + 'You should only include content that you have permission to share freely. '\r\n           + 'Failure to respect the permissions/license of mod authors may result in '\r\n           + 'moderation against your account.';\r\n    } else if (['direct', 'browse', 'manual'].includes(type)) {\r\n      text = 'Please provide information the user needs to find the mod';\r\n    }\r\n\r\n    if (['direct', 'browse'].includes(type)) {\r\n      input.push({ id: 'url', type: 'url', label: 'URL', value: src.url });\r\n    }\r\n\r\n    if (['browse', 'manual'].includes(type)) {\r\n      input.push({\r\n        id: 'instructions', type: 'text', label: 'Instructions',\r\n        value: src.instructions,\r\n      });\r\n    }\r\n\r\n    if ((input.length > 0) || (text !== undefined)) {\r\n      // query details for direct/browse/manual\r\n      this.context.api.showDialog('question',\r\n        'Provide mod metadata', {\r\n        text,\r\n        input,\r\n        checkboxes: [\r\n          {\r\n            id: 'adult',\r\n            bbcode: 'Mod contains adult content. '\r\n                  + `([url=${ADULT_CONTENT_URL}]Adult Content Guidelines[/url])`,\r\n            value: src.adultContent ?? false,\r\n          },\r\n        ],\r\n      }, [\r\n        { label: 'Save' },\r\n      ]).then((result => {\r\n        this.props.onSetCollectionAttribute(['source', modId], {\r\n          type,\r\n          url: result.input.url,\r\n          instructions: result.input.instructions,\r\n          adultContent: result.input.adult === true,\r\n        });\r\n      }));\r\n    } else {\r\n      this.props.onSetCollectionAttribute(['source', modId], { type });\r\n    }\r\n  }\r\n\r\n  private changeInstallMode = (id: string, value: string) => {\r\n    this.props.onSetCollectionAttribute(['installMode', id], value);\r\n  }\r\n\r\n  private changeInstructions = (evt: React.MouseEvent<any>) => {\r\n    const { collection, onSetCollectionAttribute } = this.props;\r\n    const modId = evt.currentTarget.getAttribute('data-modid');\r\n\r\n    const value = collection.attributes?.collection?.instructions?.[modId] ?? '';\r\n\r\n    this.context.api.showDialog('info', 'Instructions', {\r\n      md: 'Instructions added to **required mods** will display alongside the mod as it installs.  \\n'\r\n        + 'Instructions added to **optional mods** will display before the mod installs, the user '\r\n        + 'will be given the option to either install or skip the mod.  \\n'\r\n        + 'All added instructions will be available in the \"Instructions\" tab on the Collections page.',\r\n      input: [ { label: 'Instructions', id: 'instructions', type: 'multiline' as any, value, placeholder: INSTRUCTIONS_PLACEHOLDER } ],\r\n    }, [\r\n      { label: 'Cancel' },\r\n      { label: 'Save' },\r\n    ], 'collection-set-instructions')\r\n    .then(result => {\r\n      if (result.action === 'Save') {\r\n        onSetCollectionAttribute(['instructions', modId], result.input['instructions']);\r\n      }\r\n    });\r\n  }\r\n\r\n  private onQuerySource = (evt: React.MouseEvent<any>) => {\r\n    const { collection } = this.props;\r\n    const modId = evt.currentTarget.getAttribute('data-modid');\r\n    const type = collection.attributes?.collection?.source?.[modId]?.type ?? 'nexus';\r\n\r\n    return this.querySource(modId, type);\r\n  }\r\n}\r\n\r\nexport default ModsEditPage;\r\n","/* eslint-disable */\nimport { ICollectionInfo, ICollectionModRule } from '../../types/ICollection';\nimport { IExtensionFeature } from '../../util/extension';\nimport { getInterface } from '../../util/gameSupport';\nimport InstallDriver from '../../util/InstallDriver';\nimport { makeBiDirRule } from '../../util/transformCollection';\n\nimport { NAMESPACE } from '../../constants';\n\nimport { startAddModsToCollection } from '../../actions/session';\n\nimport FileOverrides, { IPathTools } from './FileOverrides';\nimport CollectionGeneralPage from './Instructions';\nimport ModRules from './ModRules';\nimport ModsEditPage from './ModsEditPage';\n\nimport { IRevision } from '@nexusmods/nexus-api';\nimport memoize from 'memoize-one';\nimport * as React from 'react';\nimport { Badge, Panel, Tab, Tabs } from 'react-bootstrap';\nimport { withTranslation } from 'react-i18next';\nimport { connect } from 'react-redux';\nimport * as Redux from 'redux';\nimport { actions, ComponentEx, FlexLayout, log, tooltip, types, util } from 'vortex-api';\n\nconst INIT_PAGE = 'mods';\n\nexport interface ICollectionEditBaseProps {\n  pathTool: IPathTools;\n  profile: types.IProfile;\n  collection: types.IMod;\n  mods: { [modId: string]: types.IMod };\n  driver: InstallDriver;\n  exts: IExtensionFeature[];\n  onRemove: (modId: string) => void;\n  onUpload: (modId: string) => void;\n}\n\ninterface IConnectedProps {\n  phaseColumnVisible: boolean;\n  showPhaseUsage: boolean;\n  showBinpatchWarning: boolean;\n}\n\ninterface IActionProps {\n  onSetModAttribute: (gameId: string, modId: string, key: string, value: any) => void;\n  onAddRule: (gameId: string, modId: string, rule: types.IModRule) => void;\n  onRemoveRule: (gameId: string, modId: string, rule: types.IModRule) => void;\n  onAddModsDialog: (collectionId: string) => void;\n  onDismissPhaseUsage: () => void;\n  onDismissBinpatchWarning: () => void;\n  onShowPhaseColumn: () => void;\n}\n\ntype ICollectionEditProps = ICollectionEditBaseProps & IConnectedProps & IActionProps;\n\ninterface ICollectionEditState {\n  page: string;\n  collectionInfo: ICollectionInfo;\n  revision: IRevision;\n}\n\nconst emptyCollectionInfo: ICollectionInfo = {\n  domainName: '',\n  author: '',\n  authorUrl: '',\n  name: '',\n  description: '',\n  installInstructions: '',\n  gameVersions: [],\n};\n\nconst emptyList = [];\n\nclass CollectionEdit extends ComponentEx<ICollectionEditProps, ICollectionEditState> {\n  private collectionRules = memoize(\n      (rules: types.IModRule[], mods: { [modId: string]: types.IMod }): ICollectionModRule[] => {\n    const includedMods = rules\n      .filter(rule => ['requires', 'recommends'].includes(rule.type))\n      .reduce((prev, rule) => {\n        const mod = util.findModByRef(rule.reference, mods);\n        if (mod !== undefined) {\n          prev[mod.id] = mod;\n        }\n        return prev;\n      }, {});\n\n    return Object.values(includedMods)\n        .reduce<ICollectionModRule[]>((prev, mod: types.IMod) => {\n          const source = util.makeModReference(mod);\n          prev = [].concat(prev, (mod.rules || [])\n            .filter(rule =>\n              !['requires', 'recommends'].includes(rule.type)\n              && (rule.extra?.['automatic'] !== true))\n            .map(rule => makeBiDirRule(source, rule)));\n\n          return prev;\n        }, []);\n  });\n\n  // used in case we do multiple attribute changes in a single frame\n  private mAttributes: types.IMod['attributes'];\n\n  constructor(props: ICollectionEditProps) {\n    super(props);\n\n    this.initState({\n      page: INIT_PAGE,\n      collectionInfo: emptyCollectionInfo,\n      revision: undefined,\n    });\n  }\n\n  public componentDidMount() {\n    this.updateState(this.props);\n  }\n\n  public UNSAFE_componentWillReceiveProps(newProps: ICollectionEditProps) {\n    this.mAttributes = newProps.collection?.attributes;\n    if (util.getSafe(newProps.collection, ['id'], undefined)\n        !== util.getSafe(this.props.collection, ['id'], undefined)) {\n      this.updateState(newProps);\n    }\n  }\n\n  public render(): React.ReactNode {\n    const { t, mods, collection, showBinpatchWarning, exts,\n            onDismissBinpatchWarning, onDismissPhaseUsage,\n            profile, showPhaseUsage, pathTool } = this.props;\n    const { page, revision } = this.state;\n\n    if (profile === undefined) {\n      return null;\n    }\n\n    const game = util.getGame(profile.gameId);\n\n    const extInterfaces = exts.filter(ext => ext.editComponent !== undefined);\n\n    const uploadDisabled = this.testUploadPossible();\n\n    const Interface = getInterface(profile.gameId);\n\n    const nextRev = collection.attributes?.revisionNumber;\n\n    const requiredModRules: ICollectionModRule[] =\n      this.collectionRules(collection.rules ?? emptyList, mods);\n\n    return (\n      <FlexLayout type='column'>\n        <FlexLayout.Fixed className='collection-edit-header'>\n          <FlexLayout type='row'>\n            <h3>{t('Edit Collection')} / {util.renderModName(collection)}</h3>\n            <tooltip.IconButton\n              icon='delete'\n              tooltip={t('Remove this collection')}\n              onClick={this.remove}\n            >\n              {t('Remove')}\n            </tooltip.IconButton>\n            <tooltip.IconButton\n              icon='collection-export'\n              tooltip={uploadDisabled ?? t('Upload to Nexus Mods')}\n              onClick={this.upload}\n              disabled={uploadDisabled !== undefined}\n            >\n              {t(nextRev !== undefined ? 'Upload Update' : 'Upload New')}\n            </tooltip.IconButton>\n            <tooltip.IconButton\n              icon='open-ext'\n              tooltip={t('Open site')}\n              onClick={this.openUrl}\n              disabled={(revision === undefined)}\n            >\n              {t('View Site')}\n            </tooltip.IconButton>\n          </FlexLayout>\n          {t('Set up your mod collection\\'s rules and site preferences.')}\n        </FlexLayout.Fixed>\n        <FlexLayout.Flex>\n          <Tabs id='collection-edit-tabs' activeKey={page} onSelect={this.setCurrentPage}>\n            <Tab\n              key='mods'\n              eventKey='mods'\n              title={<div>{t('Mods')}<Badge>{(collection.rules || []).length}</Badge></div>}\n            >\n              <Panel style={{ position: 'relative' }}>\n                <ModsEditPage\n                  mods={mods}\n                  collection={collection}\n                  t={t}\n                  onSetModVersion={null}\n                  showPhaseUsage={showPhaseUsage}\n                  showBinpatchWarning={showBinpatchWarning}\n                  onAddRule={this.addRule}\n                  onRemoveRule={this.removeRule}\n                  onSetCollectionAttribute={this.setCollectionAttribute}\n                  onAddModsDialog={this.addModsDialog}\n                  onDismissPhaseUsage={onDismissPhaseUsage}\n                  onDismissBinpatchWarning={onDismissBinpatchWarning}\n                  onShowPhaseColumn={this.showPhaseColumn}\n                />\n              </Panel>\n            </Tab>\n            <Tab key='mod-rules' eventKey='mod-rules' title={t('Mod Rules')}>\n              <Panel>\n                <ModRules\n                  t={t}\n                  collection={collection}\n                  mods={mods}\n                  rules={requiredModRules}\n                  onSetCollectionAttribute={this.setCollectionAttribute}\n                />\n              </Panel>\n            </Tab>\n            <Tab key='file-overrides' eventKey='file-overrides' title={t('File Overrides')}>\n              <Panel>\n                <FileOverrides\n                  t={t}\n                  collection={collection}\n                  mods={mods}\n                  onSetCollectionAttribute={this.setCollectionAttribute}\n                  pathTool={pathTool}\n                />\n              </Panel>\n            </Tab>\n            <Tab key='collection-instructions' eventKey='collection-instructions' title={t('Collection Instructions')}>\n              <Panel>\n                <CollectionGeneralPage\n                  collection={collection}\n                  onSetCollectionAttribute={this.setCollectionAttribute}\n                />\n              </Panel>\n            </Tab>\n            {extInterfaces.map(ext => (\n              <Tab key={ext.id} eventKey={ext.id} title={ext.title(t)}>\n                <Panel>\n                  <ext.editComponent\n                    t={t}\n                    gameId={profile.gameId}\n                    collection={collection}\n                    revisionInfo={revision}\n                    onSetCollectionAttribute={this.setCollectionAttribute}\n                  />\n                </Panel>\n              </Tab>\n            ))}\n            {!!Interface ? (\n              <Tab key='gamespecific' eventKey='gamespecific' title={game.name}>\n                <Panel>\n                  <Interface\n                    t={t}\n                    gameId={profile.gameId}\n                    collection={collection}\n                    revisionInfo={revision}\n                    onSetCollectionAttribute={this.setCollectionAttribute}\n                  />\n                </Panel>\n              </Tab>\n            ) : null}\n          </Tabs>\n        </FlexLayout.Flex>\n      </FlexLayout>\n    );\n  }\n\n  private testUploadPossible(): string {\n    const { t, collection } = this.props;\n    const refMods: types.IModRule[] = (collection.rules ?? [])\n      .filter(rule => ['requires', 'recommends'].includes(rule.type));\n    if (refMods.length === 0) {\n      return (t('Can\\'t upload an empty collection')) as string;\n    } else {\n      return undefined;\n    }\n  }\n\n  private async updateState(props: ICollectionEditProps) {\n    this.nextState.page = INIT_PAGE;\n    if (props.collection !== undefined) {\n      const { collection } = props;\n\n      const { revisionId, collectionSlug, revisionNumber } = collection.attributes ?? {};\n\n      if ((revisionId !== undefined) || (collectionSlug !== undefined)) {\n        try {\n          this.nextState.revision = (await this.props.driver.infoCache.getRevisionInfo(\n              revisionId, collectionSlug, revisionNumber)) ?? undefined;\n        } catch (err) {\n          log('error', 'failed to get remote info for revision', {\n            revisionId, collectionSlug, revisionNumber,\n            error: err.message,\n          });\n        }\n      }\n    }\n  }\n\n  private trackTabChange = (page) => {\n    const game = util.getGame(this.props.profile.gameId);\n    const pageTracking = page === 'gamespecific' ? game.name : page;\n    this.context.api.events.emit('analytics-track-navigation', `collections/workshop/collection/${pageTracking}`);\n  }\n\n  private setCurrentPage = (page: any) => {\n    this.trackTabChange(page);\n    this.nextState.page = page;\n  }\n\n  private remove = () => {\n    const { collection, onRemove } = this.props;\n    onRemove(collection.id);\n  }\n\n  private upload = () => {\n    const { collection, onUpload } = this.props;\n    onUpload(collection.id);\n  }\n\n  private openUrl = () => {\n    const collectionSlug =\n      this.state.revision?.collection?.slug\n      ?? this.props.collection.attributes?.collectionSlug;\n    if (collectionSlug === undefined) {\n      return;\n    }\n    const { revision } = this.state;\n    const { collection } = revision;\n\n    if ((collection?.game !== undefined) && (revision?.revisionNumber !== undefined)) {\n      this.context.api.events.emit('analytics-track-click-event', 'Collections', 'View on site Workshop Collection');\n      util.opn(util.nexusModsURL(\n        [collection.game.domainName,\n          'collections', collection.slug,\n          'revisions', revision.revisionNumber.toString()], {\n        campaign: util.Campaign.ViewCollectionAsCurator,\n        section: util.Section.Collections\n      }));\n    }\n  }\n\n  private addRule = (rule: types.IModRule) => {\n    const { profile, collection } = this.props;\n    this.props.onAddRule(profile.gameId, collection.id, rule);\n  }\n\n  private removeRule = (rule: types.IModRule) => {\n    const { profile, collection } = this.props;\n    this.props.onRemoveRule(profile.gameId, collection.id, rule);\n  }\n\n  private setCollectionAttribute = (attrPath: string[], value: any) => {\n    const { profile, collection } = this.props;\n    if (this.mAttributes === undefined) {\n      this.mAttributes = collection.attributes;\n    }\n    const attr = util.getSafe(this.mAttributes, ['collection'], {});\n    const updated = util.setSafe(attr, attrPath, value);\n    this.mAttributes = util.setSafe(this.mAttributes, ['collection'], updated);\n    this.props.onSetModAttribute(profile.gameId, collection.id, 'collection', updated);\n  }\n\n  private addModsDialog = (collectionId: string) => {\n    this.props.onAddModsDialog(collectionId);\n  }\n\n  private showPhaseColumn = () => {\n    if (this.props.phaseColumnVisible === undefined) {\n      this.props.onShowPhaseColumn();\n    }\n  }\n}\n\nfunction mapStateToProps(state: types.IState, ownProps: ICollectionEditBaseProps): IConnectedProps {\n  const { settings } = state;\n  return {\n    phaseColumnVisible: settings.tables['collection-mods']?.attributes?.phase?.enabled ?? false,\n    showPhaseUsage: settings.interface.usage['collection-phase'] ?? true,\n    showBinpatchWarning: settings.interface.usage['binpatch-warning'] ?? true,\n  };\n}\n\nfunction mapDispatchToProps(dispatch: Redux.Dispatch): IActionProps {\n  return {\n    onSetModAttribute: (gameId: string, modId: string, key: string, value: any) =>\n      dispatch(actions.setModAttribute(gameId, modId, key, value)),\n    onAddRule: (gameId: string, modId: string, rule: types.IModRule) =>\n      dispatch(actions.addModRule(gameId, modId, rule)),\n    onRemoveRule: (gameId: string, modId: string, rule: types.IModRule) =>\n      dispatch(actions.removeModRule(gameId, modId, rule)),\n    onAddModsDialog: (collectionId: string) =>\n      dispatch(startAddModsToCollection(collectionId)),\n    onDismissPhaseUsage: () =>\n      dispatch(actions.showUsageInstruction('collection-phase', false)),\n    onDismissBinpatchWarning: () =>\n      dispatch(actions.showUsageInstruction('binpatch-warning', false)),\n    onShowPhaseColumn: () =>\n      dispatch(actions.setAttributeVisible('collection-mods', 'phase', true)),\n  };\n}\n\nexport default\n  withTranslation([NAMESPACE, 'common'])(\n    connect(mapStateToProps, mapDispatchToProps)(\n      CollectionEdit) as any) as React.ComponentClass<ICollectionEditBaseProps>;\n","import i18next from 'i18next';\nimport * as React from 'react';\nimport { Button } from 'react-bootstrap';\nimport { ComponentEx, FlexLayout, Icon, util, Image } from 'vortex-api';\nimport { PREMIUM_PATH } from '../../constants';\n\nexport interface ICollectionBannerProps {\n  totalSize: number;\n  t: i18next.TFunction;\n}\n\nclass CollectionBanner extends ComponentEx<ICollectionBannerProps, {}> {\n  public render(): JSX.Element {\n    const { t } = this.props;\n\n    const electricBoltIconPath = 'assets/icons/electric-bolt.svg';\n    const premiumPictogramPath = 'assets/pictograms/premium-pictogram.svg';\n\n    return (\n      <div id='collection-premium-banner'>\n        <FlexLayout type='column'>\n          <FlexLayout.Fixed>\n            <FlexLayout type='row' id='collection-premium-banner-header'>\n              <FlexLayout.Fixed>\n                <Image className='premium-pictogram' srcs={[premiumPictogramPath]} />\n              </FlexLayout.Fixed>\n              <FlexLayout.Flex>\n                <div className='collections-premium-banner-title'>{t('Premium')}</div>\n              </FlexLayout.Flex>\n            </FlexLayout>\n          </FlexLayout.Fixed>\n          <FlexLayout.Flex>\n            <div className='collections-premium-banner-body'>{t('Auto-download collections at max speed')}</div>\n          </FlexLayout.Flex>\n          <FlexLayout.Fixed>\n            <Button\n              id='get-premium-button'\n              className='small'\n              onClick={this.goGetPremium}>\n              <Image srcs={[electricBoltIconPath]} />\n              {t('Unlock max download speeds')}\n            </Button>\n          </FlexLayout.Fixed>\n        </FlexLayout>\n      </div>\n    );\n  }\n\n  private goGetPremium = () => {\n    this.context.api.events.emit('analytics-track-click-event', 'Go Premium', 'Collections Added Collection');\n    util.opn(util.nexusModsURL(PREMIUM_PATH,\n      {\n        section: util.Section.Users,\n        campaign: util.Campaign.BuyPremium,\n        source: util.Source.CollectionsAd\n      }))\n      .catch(err => undefined);\n  }\n}\n\nexport default CollectionBanner;\n","import * as React from 'react';\nimport { Button } from 'react-bootstrap';\nimport { types, util } from 'vortex-api';\nimport { DEFAULT_INSTRUCTIONS } from '../../constants';\nimport ReactMarkdown from 'react-markdown';\n\nimport { isEmpty } from '../../util/util';\n\nexport interface IInstructionsProps {\n  t: types.TFunction;\n  collection: types.IMod;\n  mods: { [modId: string]: types.IMod };\n  onToggleInstructions: (evt: React.MouseEvent<any>) => void;\n}\n\ninterface IInstructionsEntry {\n  rule: types.IModRule;\n  mod: types.IMod;\n  name: string;\n  instructions: string;\n}\n\nfunction Instructions(props: IInstructionsProps) {\n  const { t, collection, mods, onToggleInstructions } = props;\n  \n  const { required, optional } = React.useMemo(() => {\n    return (collection.rules ?? []).reduce((prev, rule) => {\n      if ((isEmpty(rule.extra?.instructions))\n          || !['requires', 'recommends'].includes(rule.type)) {\n        return prev;\n      }\n\n      const mod: types.IMod = util.findModByRef(rule.reference, mods);\n\n      if (mod !== undefined) {\n        const entry: IInstructionsEntry = {\n          rule,\n          mod,\n          name: util.renderModReference(rule.reference),\n          instructions: rule.extra?.instructions\n        };\n\n        if (rule.type === 'requires') {\n          prev.required.push(entry);\n        } else {\n          prev.optional.push(entry);\n        }\n      }\n\n      return prev;\n    }, { required: [] as IInstructionsEntry[], optional: [] as IInstructionsEntry[] });\n  }, [mods, collection]);\n\n  const installInstructions = (collection.attributes?.installInstructions === undefined || \n    collection.attributes?.installInstructions === '') && \n    (required.length === 0) &&\n    (optional.length === 0) ? \n    t(DEFAULT_INSTRUCTIONS) :\n    collection.attributes?.installInstructions\n\n  return (\n    <>    \n\n      <ReactMarkdown className='collection-instructions-text' allowedElements={['p', 'br', 'a', 'em', 'strong']} unwrapDisallowed={true}>\n        {installInstructions}\n      </ReactMarkdown>\n        \n      {(required.length > 0) ? (\n        <>\n          <h4>{t('Instructions - Required Mods')}</h4>\n          <div className='collection-instructions-container'>\n            <table>\n              <tbody>\n                {required.map((iter) => (\n                  <tr key={iter.name}>\n                    <td className='collection-mod-name'>{iter.name}</td>\n                    <td className='collection-mod-instructions'>\n                      <ReactMarkdown allowedElements={['p', 'br', 'a', 'em', 'strong']} unwrapDisallowed={true}>\n                        {iter.instructions}\n                      </ReactMarkdown>                      \n                    </td>\n                    <td className='collection-mod-actions'>\n                      <Button data-modid={iter.mod?.id} onClick={onToggleInstructions}>\n                        {t('Open instructions')}\n                      </Button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </>) : null}\n      {(optional.length > 0) ? (\n        <>\n          <h4>{t('Instructions - Optional Mods')}</h4>\n          <div className='collection-instructions-container'>\n            <table>\n              <tbody>\n                {optional.map(iter => (\n                  <tr key={iter.name}>\n                    <td className='collection-mod-name'>{iter.name}</td>\n                    <td className='collection-mod-instructions'>\n                      <ReactMarkdown allowedElements={['p', 'br', 'a', 'em', 'strong']} unwrapDisallowed={true}>\n                        {iter.instructions}\n                      </ReactMarkdown>     \n                    </td>\n                    <td className='collection-mod-actions'>\n                      <Button data-modid={iter.mod?.id} onClick={onToggleInstructions}>\n                        {t('Open instructions')}\n                      </Button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </>) : null}\n    </>\n  );\n}\n\nexport default Instructions;\n","import { IModEx } from '../../types/IModEx';\n\nimport i18next from 'i18next';\nimport * as React from 'react';\nimport { Icon, RadialProgress, types } from 'vortex-api';\n\ninterface ICollectionItemStatusProps {\n  t: i18next.TFunction;\n  mod: IModEx;\n  download?: types.IDownload;\n  notifications: types.INotification[];\n  container: Element;\n  installing: boolean;\n}\n\nconst RadialProgressT: any = RadialProgress;\n\nclass CollectionItemStatus extends React.Component<ICollectionItemStatusProps, {}> {\n  public render(): JSX.Element {\n    const { t, download, mod } = this.props;\n\n    if (mod.collectionRule['ignored'] === true) {\n      return (\n        <div className='collection-status-ignored'>\n          <Icon name='toggle-disabled' />{t('Ignored')}\n        </div>\n      );\n    }\n\n    if (mod.state === 'installed') {\n      if (mod.enabled) {\n        return (\n          <div className='collection-status-enabled'>\n            <Icon name='toggle-enabled' />{t('Enabled')}\n          </div>\n        );\n      } else {\n        return (\n          <div className='collection-status-disabled'>\n            <Icon name='toggle-disabled' />{t('Disabled')}\n          </div>\n        );\n      }\n    } else if (mod.state === 'installing') {\n      const progressBarData = {\n        min: 0,\n        max: 100,\n        value: (mod.progress ?? 0) * 100,\n        class: 'collection-install-progress',\n      };\n      // install (or rather: extraction) process is unfortunately only stored in the notification\n      return (\n        <div className='collection-status-progress'>\n          <RadialProgressT\n            className='collection-progress-radial'\n            data={[progressBarData]}\n            totalRadius={32}\n          />\n          <div className='progress-title'>{t('Installing...')}</div>\n        </div>\n      );\n    } else if (mod.state === 'downloading') {\n      if (download?.state === 'paused') {\n        return (\n          <div className='collection-status-paused'>\n            <Icon name='pause'/>{t('Download paused')}\n          </div>\n        );\n      } else if (download?.state === 'failed') {\n        return (\n          <div className='collection-status-failed'>\n            <Icon name='warning' />{t('Download failed')}\n          </div>\n        );\n      }\n\n      const progressBarData = {\n        min: 0,\n        max: 100,\n        value: (mod.progress ?? 0) * 100,\n        class: 'collection-install-progress',\n      };\n\n      return (\n        <div className='collection-status-progress'>\n          <RadialProgressT\n            className='collection-progress-radial'\n            data={[progressBarData]}\n            totalRadius={32}\n          />\n          <div className='progress-title'>{t('Downloading...')}</div>\n        </div>\n      );\n    } else {\n      if (mod.collectionRule.type === 'recommends') {\n        return (\n          <div className='collection-status-notinstalled'>\n            <Icon name='install' /> {t('Not installed')}\n          </div>\n        );\n      } else {\n        if (mod.state === 'downloaded') {\n          return (\n            <div className='collection-status-pending'>\n              <Icon name='install' />{t('Install pending')}\n            </div>\n          );\n        } else {\n          return (\n            <div className='collection-status-pending'>\n              <Icon name='download' />{t('Download pending')}\n            </div>\n          );\n        }\n      }\n    }\n  }\n}\n\nexport default CollectionItemStatus;\n","import { ICollectionRevisionMod } from '@nexusmods/nexus-api';\nimport * as React from 'react';\nimport { Panel } from 'react-bootstrap';\nimport { FlexLayout, Image, tooltip, types, util, ZoomableImage } from 'vortex-api';\nimport { AUTHOR_UNKNOWN, NEXUS_BASE_URL } from '../../constants';\nimport { IModEx } from '../../types/IModEx';\n\nexport interface ICollectionModDetails {\n  t: types.TFunction;\n  local?: IModEx;\n  remote?: ICollectionRevisionMod;\n  gameId: string;\n}\n\nfunction CollectionModDetails(props: ICollectionModDetails) {\n  const { t, gameId, local, remote } = props;\n\n  const uploaderName = local?.attributes?.uploader\n                    ?? remote?.file?.owner?.name\n                    ?? AUTHOR_UNKNOWN;\n  const uploaderId = local?.attributes?.uploaderId\n                  ?? remote?.file?.owner?.memberId;\n  const uploaderAvatar = remote?.file?.owner?.avatar\n                      ?? 'assets/images/noavatar.png';\n  const authorName = local?.attributes?.author\n                  ?? remote?.file?.mod?.author\n                  ?? AUTHOR_UNKNOWN;\n  const modTitle = util.renderModName(local)\n                ?? remote?.file?.mod?.name\n                ?? '';\n  const version = local?.attributes?.version\n               ?? remote?.file?.version\n               ?? '???';\n  const description = local?.attributes?.shortDescription\n                   ?? remote?.file?.mod?.summary\n                   ?? '';\n  const image = local?.attributes?.pictureUrl\n             ?? remote?.file?.mod?.pictureUrl;\n\n  const domainName = remote?.file?.game?.domainName\n                  ?? util.nexusGameId(util.getGame(local?.attributes?.gameId ?? gameId));\n  const modId = local?.attributes?.modId\n             ?? remote?.file?.modId;\n\n  const visitUploader = React.useCallback(() => {\n    util.opn(`${NEXUS_BASE_URL}/users/${uploaderId}`);\n  }, [uploaderId]);\n\n  const visitPage = React.useCallback(() => {\n    util.opn(`${NEXUS_BASE_URL}/${domainName}/mods/${modId}`);\n  }, [uploaderId]);\n\n  return (\n    <div className='installing-mod-overview'>\n      <FlexLayout type='row'>\n        <FlexLayout.Fixed className='collection-mod-detail-imagecontainer'>\n          {(image)\n            ? <ZoomableImage\n              className='installing-mod-image'\n              url={image}\n            />\n            : null}\n        </FlexLayout.Fixed>\n        <FlexLayout.Flex fill>\n          <FlexLayout type='column'>\n            <FlexLayout.Fixed>\n              <FlexLayout type='row'>\n                <div className='installing-mod-title'>\n                  {modTitle}\n                </div>\n                {(modId !== undefined) ? (\n                  <tooltip.IconButton\n                    className='collection-open-mod-in-browser'\n                    icon='open-in-browser'\n                    tooltip={t('Open Mod in Webbrowser')}\n                    onClick={visitPage}\n                  />\n                ) : null}\n              </FlexLayout>\n            </FlexLayout.Fixed>\n            <FlexLayout.Flex>\n              <div className='collection-description'>\n                {util.bbcodeToReact(description)}\n              </div>\n            </FlexLayout.Flex>\n            <FlexLayout.Fixed>\n              <FlexLayout type='row'>\n                <FlexLayout.Fixed className='collection-detail-cell'>\n                  <FlexLayout type='row'>\n                    <Image\n                      srcs={[uploaderAvatar]}\n                      circle\n                    />\n                    <div>\n                      <div className='title'>{t('Uploaded by')}</div>\n                      <div>{(uploaderName !== AUTHOR_UNKNOWN)\n                        ? <a onClick={visitUploader}>{uploaderName}</a>\n                        : uploaderName}</div>\n                    </div>\n                  </FlexLayout>\n                </FlexLayout.Fixed>\n                <FlexLayout.Fixed className='collection-detail-cell'>\n                  <div className='title'>{t('Created by')}</div>\n                  <div>{authorName}</div>\n                </FlexLayout.Fixed>\n                <FlexLayout.Fixed className='collection-detail-cell'>\n                  <div className='title'>{t('Version')}</div>\n                  <div>{version}</div>\n                </FlexLayout.Fixed>\n              </FlexLayout>\n            </FlexLayout.Fixed>\n          </FlexLayout>\n        </FlexLayout.Flex>\n      </FlexLayout>\n    </div>\n  );\n}\n\nexport default CollectionModDetails;\n","/* eslint-disable */\r\nimport CollectionReleaseStatus from '../CollectionReleaseStatus';\r\nimport CollectionThumbnail from '../CollectionTile';\r\n\r\nimport HealthIndicator from './HealthIndicator';\r\n\r\nimport {\r\n  EndorsedStatus,\r\n  ICollection,\r\n  IRevision, RatingOptions,\r\n} from '@nexusmods/nexus-api';\r\nimport i18next from 'i18next';\r\nimport * as _ from 'lodash';\r\nimport * as React from 'react';\r\nimport { Media, Panel } from 'react-bootstrap';\r\nimport { ActionDropdown, ComponentEx, FlexLayout, Image, log, MainContext, selectors, tooltip, types, util } from 'vortex-api';\r\nimport { updateCollectionInfo } from '../../actions/persistent';\r\nimport { healthDownvoteDialog } from '../../actions/session';\r\n\r\nconst ENDORSE_DELAY_MS = 43200000; // 12 hours\r\n//const ENDORSE_DELAY_MS = 60000; // 1 minute\r\n\r\ninterface IEndorseButtonProps {\r\n  t: types.TFunction;\r\n  mod: types.IMod;\r\n  collection: ICollection;\r\n  gameId: string;\r\n  voteAllowed: boolean;\r\n}\r\n\r\nfunction EndorseButton(props: IEndorseButtonProps) {\r\n\r\n  const { t, collection, gameId, mod, voteAllowed } = props;\r\n\r\n  const context = React.useContext(MainContext);\r\n\r\n  const endorse = React.useCallback(async () => {\r\n\r\n    const endorsedStatus: EndorsedStatus = mod.attributes?.endorsed ?? 'Undecided';\r\n\r\n    context.api.events.emit('endorse-mod', gameId, mod.id, endorsedStatus);\r\n    context.api.events.emit('analytics-track-click-event', 'Collections', endorsedStatus);\r\n\r\n    setTimeout(async () => {\r\n      refreshCollection(context.api, collection);\r\n    }, 500);\r\n\r\n    //const newEndorsementCount = (endorsedStatus === 'Endorsed') ? collection.endorsements - 1 : collection.endorsements + 1;\r\n\r\n  }, [mod, collection]);\r\n\r\n  const endorsedStatus: EndorsedStatus = mod.attributes?.endorsed ?? 'Undecided';\r\n  const endorsed: boolean = (mod.attributes?.endorsed === 'Endorsed');\r\n\r\n  const classes = `collection-ghost-button ${endorsed ? 'endorse-yes' : 'endorse-maybe'}`;\r\n\r\n  const { icon, toolTip } = {\r\n    undecided: { icon: 'endorse-maybe', toolTip: t('Undecided') },\r\n    abstained: { icon: 'endorse-maybe', toolTip: t('Abstained') },\r\n    endorsed: { icon: 'endorse-yes', toolTip: t('Endorsed') },\r\n    disabled: { icon: 'endorse-disabled', toolTip: t('Endorsement disabled by author') },\r\n    pending: { icon: 'spinner_new', toolTip: t('Pending') }\r\n  }[endorsedStatus.toLowerCase()] || { icon: 'like-maybe', toolTip: t('Undecided') };\r\n\r\n  return (\r\n    <tooltip.IconButton\r\n      icon={icon}\r\n      tooltip={toolTip}\r\n      className={classes}\r\n      onClick={endorse}\r\n      disabled={!voteAllowed || (collection?.endorsements === undefined)}\r\n      spin={endorsedStatus.toLowerCase() === 'pending'}\r\n    >\r\n      {collection?.endorsements ?? '?'}\r\n    </tooltip.IconButton>\r\n  );\r\n}\r\n\r\ninterface ICommentButtonProps {\r\n  t: types.TFunction;\r\n  collection: ICollection;\r\n}\r\n\r\nfunction CommentButton(props: ICommentButtonProps) {\r\n  const { t, collection } = props;\r\n  const context = React.useContext(MainContext);\r\n\r\n  const click = React.useCallback(() => {\r\n    if (collection?.['commentLink'] !== undefined) {\r\n      context.api.events.emit('analytics-track-click-event', 'Collections', 'Comments');\r\n      util.opn(collection['commentLink']);\r\n    }\r\n  }, [collection]);\r\n\r\n  return (\r\n    <tooltip.IconButton\r\n      icon='comments'\r\n      className='collection-ghost-button'\r\n      tooltip={t('Comments')}\r\n      onClick={click}\r\n      disabled={collection?.['commentLink'] === undefined}\r\n    >\r\n      {collection?.forumTopic?.postsCount ?? 0}\r\n    </tooltip.IconButton>\r\n  );\r\n}\r\n\r\n\r\nasync function refreshCollection(api: types.IExtensionApi, collection: ICollection) {\r\n\r\n  if (!collection?.slug) {\r\n    return;\r\n  }\r\n\r\n  log('info', `refreshCollection ${collection.slug}`);\r\n\r\n  // get collection info from nexus api\r\n  const result: ICollection = (await api.emitAndAwait('get-nexus-collection', collection.slug,))[0];\r\n\r\n  // update local state with new collection info\r\n  api.store.dispatch(updateCollectionInfo(collection.id.toString(), result, Date.now()),);\r\n}\r\n\r\ninterface ICollectionOverviewProps {\r\n  t: i18next.TFunction;\r\n  language: string;\r\n  profile: types.IProfile;\r\n  collection: types.IMod;\r\n  totalSize: number;\r\n  revision: IRevision;\r\n  votedSuccess: RatingOptions;\r\n  incomplete: boolean;\r\n  showUpvoteResponse: boolean;\r\n  showDownvoteResponse: boolean;\r\n  onSetEnabled: (enable: boolean) => void;\r\n  onShowMods: () => void;\r\n  onSuppressVoteResponse: (response: 'upvote' | 'downvote') => void;\r\n  onClose?: () => void;\r\n  onClone?: (collectionId: string) => void;\r\n  onRemove?: (collectionId: string) => void;\r\n  onVoteSuccess?: (collectionId: string, success: boolean) => void;\r\n}\r\n\r\nclass CollectionOverview extends ComponentEx<ICollectionOverviewProps, { selIdx: number }> {\r\n\r\n  private mWorkshopActions: types.IActionDefinition[];\r\n\r\n  constructor(props: ICollectionOverviewProps) {\r\n    super(props);\r\n\r\n    this.initState({ selIdx: 0 });\r\n\r\n    this.mWorkshopActions = [\r\n      {\r\n        title: 'Enable',\r\n        action: this.enable,\r\n        condition: () => {\r\n          const { collection, incomplete, profile } = this.props;\r\n          return (\r\n            !incomplete && profile.modState?.[collection.id]?.enabled !== true\r\n          );\r\n        },\r\n        icon: 'toggle-enabled',\r\n      },\r\n      {\r\n        title: 'View on Nexus Mods',\r\n        action: this.openUrl,\r\n        condition: () =>\r\n          this.props.collection.attributes?.collectionSlug !== undefined &&\r\n          this.props.revision !== undefined,\r\n        icon: 'open-in-browser',\r\n      },\r\n      {\r\n        title: 'Disable',\r\n        action: this.disable,\r\n        condition: () => {\r\n          const { collection, incomplete, profile } = this.props;\r\n          return (\r\n            !incomplete && profile.modState?.[collection.id]?.enabled === true\r\n          );\r\n        },\r\n        icon: 'toggle-disabled',\r\n      },\r\n      {\r\n        title: 'Show in Mods',\r\n        action: this.props.onShowMods,\r\n        icon: 'inspect',\r\n      },\r\n      {\r\n        title: 'Edit (Workshop)',\r\n        action: this.cloneCollection,\r\n        condition: () => this.props.onClone !== undefined,\r\n        icon: 'clone',\r\n      },\r\n      {\r\n        title: 'Remove',\r\n        action: this.remove,\r\n        condition: () => this.props.onRemove !== undefined,\r\n        icon: 'remove',\r\n      },\r\n    ];\r\n  }\r\n\r\n  componentDidMount(): void {\r\n\r\n    const { revision } = this.props;\r\n\r\n    refreshCollection(this.context.api, revision.collection);\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    const { t, collection, incomplete, profile, revision, votedSuccess } =\r\n      this.props;\r\n\r\n    const classes = ['collection-overview'];\r\n\r\n    const timeSinceInstall = Date.now() - new Date(collection.attributes?.installCompleted ? collection.attributes?.installCompleted : collection.attributes?.installTime ?? 0).getTime();\r\n\r\n    const voteAllowed = timeSinceInstall >= ENDORSE_DELAY_MS;\r\n\r\n    const rating = {\r\n      average: parseFloat(revision.collection?.overallRating ?? '100'),\r\n      total: revision.collection?.overallRatingCount ?? 0,\r\n    };\r\n\r\n    return (\r\n      <Panel className={classes.join(' ')}>\r\n        <Media>\r\n          <Media.Left>\r\n            <CollectionThumbnail\r\n              t={t}\r\n              imageTime={Date.now()}\r\n              collection={collection}\r\n              gameId={profile.gameId}\r\n              details={false}\r\n            />\r\n          </Media.Left>\r\n          <Media.Body>\r\n            <FlexLayout type='column'>\r\n              <FlexLayout.Fixed>\r\n                <div className='collection-overview-title'>\r\n                  <div className='collection-title'>\r\n                    {util.renderModName(collection)}\r\n                  </div>\r\n                  <CollectionReleaseStatus\r\n                    t={t}\r\n                    active={true}\r\n                    enabled={\r\n                      profile.modState?.[collection.id]?.enabled ?? false\r\n                    }\r\n                    collection={collection}\r\n                    incomplete={incomplete}\r\n                  />\r\n                  <div className='flex-filler' />\r\n                </div>\r\n              </FlexLayout.Fixed>\r\n              <FlexLayout.Flex className='collection-description-container'>\r\n                <div className='collection-description'>\r\n                  {collection.attributes?.shortDescription ??\r\n                    t('No description')}\r\n                </div>\r\n              </FlexLayout.Flex>\r\n              <FlexLayout.Fixed className='collection-page-detail-bar'>\r\n                <FlexLayout type='row'>\r\n                  <FlexLayout.Fixed className='collection-detail-cell '>\r\n                    <FlexLayout type='row'>\r\n                      <Image\r\n                        srcs={[\r\n                          collection.attributes?.uploaderAvatar ??\r\n                          'assets/images/noavatar.png',\r\n                        ]}\r\n                        circle\r\n                      />\r\n                      <div>\r\n                        <div className='title'>{t('Curated by')}</div>\r\n                        <div>{collection.attributes?.uploader}</div>\r\n                      </div>\r\n                    </FlexLayout>\r\n                  </FlexLayout.Fixed>\r\n                  <FlexLayout.Fixed className='collection-detail-cell hideable'>\r\n                    <div className='title'>{t('Revision')}</div>\r\n                    <div>{collection.attributes?.revisionNumber}</div>\r\n                  </FlexLayout.Fixed>\r\n                  <FlexLayout.Fixed className='collection-detail-cell'>\r\n                    <div className='title'>{t('Last updated')}</div>\r\n                    <div>\r\n                      {this.renderTime(collection.attributes?.updatedTimestamp)}\r\n                    </div>\r\n                  </FlexLayout.Fixed>\r\n                  <FlexLayout.Fixed className='collection-detail-cell hideable'>\r\n                    <div className='title'>{t('Uploaded')}</div>\r\n                    <div>\r\n                      {this.renderTime(\r\n                        collection.attributes?.uploadedTimestamp,\r\n                      )}\r\n                    </div>\r\n                  </FlexLayout.Fixed>\r\n                  {/*\r\n                  <FlexLayout.Fixed className='collection-detail-cell'>\r\n                    <div className='title'>{t('Mods')}</div>\r\n                    <div>{depRules.length}</div>\r\n                  </FlexLayout.Fixed>\r\n                  */}\r\n                  <FlexLayout.Fixed>\r\n                    <EndorseButton\r\n                      t={t}\r\n                      collection={revision.collection}\r\n                      mod={collection}\r\n                      gameId={profile.gameId}\r\n                      voteAllowed={voteAllowed}\r\n                    />\r\n                  </FlexLayout.Fixed>\r\n                  <FlexLayout.Fixed>\r\n                    <CommentButton t={t} collection={revision.collection} />\r\n                  </FlexLayout.Fixed>\r\n                  <FlexLayout.Flex>\r\n                    <div />\r\n                  </FlexLayout.Flex>\r\n                </FlexLayout>\r\n              </FlexLayout.Fixed>\r\n            </FlexLayout>\r\n          </Media.Body>\r\n          <Media.Right>\r\n            <div className='collection-health-container'>\r\n              <FlexLayout type='column'>\r\n                <FlexLayout.Fixed>\r\n                  {revision?.revisionStatus !== 'is_private' ? (\r\n                    <HealthIndicator\r\n                      t={t}\r\n                      revisionNumber={revision?.revisionNumber ?? 0}\r\n                      value={rating}\r\n                      onVoteSuccess={this.voteSuccess}\r\n                      ownSuccess={votedSuccess}\r\n                      voteAllowed={voteAllowed}\r\n                      gameVersion={ (this.context.api.getState().persistent?.gameMode as any)?.versions[profile.gameId] ?? '?'}\r\n                      collectionGameVersion={revision?.gameVersions?.[0]?.reference ?? '?'}\r\n                    />\r\n                  ) : null}\r\n                </FlexLayout.Fixed>\r\n                <FlexLayout.Flex>\r\n                  <div className='collection-workshop-actions'>\r\n                    <ActionDropdown\r\n                      t={t}\r\n                      id='collection-workshop-actions'\r\n                      staticElements={this.mWorkshopActions}\r\n                    />\r\n                  </div>\r\n                </FlexLayout.Flex>\r\n              </FlexLayout>\r\n            </div>\r\n          </Media.Right>\r\n        </Media>\r\n      </Panel>\r\n    );\r\n  }\r\n\r\n  private enable = () => {\r\n    this.props.onSetEnabled(true);\r\n  };\r\n\r\n  private disable = () => {\r\n    this.props.onSetEnabled(false);\r\n  };\r\n\r\n  private openUrl = () => {\r\n    const { revision } = this.props;\r\n    const { collection } = revision;\r\n    if (collection !== undefined && revision?.revisionNumber !== undefined) {\r\n      this.context.api.events.emit(\r\n        'analytics-track-click-event',\r\n        'Collections',\r\n        'View on site Added Collection',\r\n      );\r\n      util.opn(\r\n        util.nexusModsURL(\r\n          [\r\n            collection.game.domainName,\r\n            'collections',\r\n            collection.slug,\r\n            'revisions',\r\n            revision.revisionNumber.toString(),\r\n          ],\r\n          {\r\n            campaign: util.Campaign.ViewCollection,\r\n            section: util.Section.Collections,\r\n          },\r\n        ),\r\n      );\r\n    }\r\n  };\r\n\r\n  private cloneCollection = () => {\r\n    const { onClone, collection } = this.props;\r\n    if (onClone !== undefined && collection !== undefined) {\r\n      onClone(collection.id);\r\n      this.context.api.events.emit(\r\n        'analytics-track-click-event',\r\n        'Collections',\r\n        'Clone',\r\n      );\r\n    }\r\n  };\r\n\r\n  private remove = () => {\r\n    const { onRemove, collection } = this.props;\r\n    if (onRemove !== undefined && collection !== undefined) {\r\n      onRemove(collection.id);\r\n    }\r\n  };\r\n\r\n  private renderTime(timestamp: number): string {\r\n    const { t, language } = this.props;\r\n    if (timestamp === undefined) {\r\n      return t('Never');\r\n    }\r\n    return new Date(timestamp).toLocaleDateString(language);\r\n  }\r\n\r\n  private voteSuccess = (success: boolean) => {\r\n    const {\r\n      collection,\r\n      profile,\r\n      revision,\r\n      showDownvoteResponse,\r\n      showUpvoteResponse,\r\n      onSuppressVoteResponse,\r\n      onVoteSuccess,\r\n    } = this.props;\r\n\r\n    if (revision.collection === undefined) {\r\n      log(\r\n        'error',\r\n        'failed to show vote response dialog, missing collection info',\r\n      );\r\n      return;\r\n    }\r\n\r\n    const bugLink = `https://next.nexusmods.com/${revision.collection.game.domainName}/collections/${revision.collection.slug}?tab=Bugs`;\r\n\r\n    //const state = this.context.api.getState();\r\n    //const gameId = selectors.activeGameId(state);\r\n    //const mods = state.persistent.mods[gameId];\r\n\r\n    const endorsedStatus: EndorsedStatus = collection.attributes?.endorsed ?? 'Undecided';\r\n\r\n    if (success && showUpvoteResponse) {\r\n\r\n      onVoteSuccess?.(collection.id, success);\r\n\r\n      // if we've already endorsed then we don't need to show the dialog\r\n      if (endorsedStatus === 'Endorsed') return;\r\n\r\n      this.context.api.showDialog(\r\n        'question',\r\n        'Collection was successful',\r\n        {\r\n          text:\r\n            'Congratulations! Please consider endorsing this collection if you are enjoying it. ' +\r\n            'Endorsing helps others discover this collection and lets the curator know you enjoyed it.',\r\n          checkboxes: [\r\n            { id: 'dont_show_again', value: false, text: \"Don't show again\" },\r\n          ],\r\n        },\r\n        [\r\n          { label: 'Close' },\r\n          {\r\n            label: 'Endorse',\r\n            action: () => {\r\n              this.context.api.events.emit(\r\n                'endorse-mod',\r\n                profile.gameId,\r\n                collection.id,\r\n                endorsedStatus,\r\n              );\r\n              this.context.api.events.emit(\r\n                'analytics-track-click-event',\r\n                'Collections',\r\n                endorsedStatus,\r\n              );\r\n            },\r\n          },\r\n        ],\r\n      )\r\n        .then((result: types.IDialogResult) => {\r\n          if (result.input['dont_show_again']) {\r\n            onSuppressVoteResponse('upvote');\r\n          }\r\n        });\r\n\r\n    } else if (!success && showDownvoteResponse) {\r\n\r\n      this.context.api.store.dispatch(healthDownvoteDialog(collection.id));\r\n\r\n      /*\r\n      this.context.api\r\n        .showDialog(\r\n          'question',\r\n          'Collection assistance - {{collectionName}}',\r\n          {\r\n            bbcode:\r\n              'We are sorry that this collection did not work correctly for you.<br/><br/>' +\r\n              'Please [url=\"{{commentLink}}\"]check the comments[/url] for installation advice and to reach out to the curator.<br/><br/>' +\r\n              'Alternatively, if you believe you have encountered a bug, [url=\"{{bugLink}}\"]view bug reports on Nexus Mods[/url] to see if it has already been reported. ' +\r\n              \"If the bug isn't listed, please consider reporting it to help the curator and other users.\",\r\n            checkboxes: [\r\n              { id: 'dont_show_again', value: false, text: \"Don't show again\" },\r\n            ],\r\n            parameters: {\r\n              collectionName: revision.collection.name,\r\n              collectionSlug: revision.collection.slug,\r\n              commentLink: revision.collection.commentLink,\r\n              bugLink,\r\n            },\r\n          },\r\n          [\r\n            { label: 'Close' },\r\n            {\r\n              label: 'View comments',\r\n              action: () => {\r\n                util.opn(revision.collection.commentLink).catch(() => null);\r\n              },\r\n            },\r\n            {\r\n              label: 'View bugs',\r\n              action: () => {\r\n                util.opn(bugLink).catch(() => null);\r\n              },\r\n            },\r\n          ],\r\n        )\r\n        .then((result: types.IDialogResult) => {\r\n          if (result.input['dont_show_again']) {\r\n            onSuppressVoteResponse('downvote');\r\n          }\r\n        });*/\r\n    }\r\n  };\r\n}\r\n\r\nexport default CollectionOverview;\r\n","import { IModEx } from '../../types/IModEx';\nimport CollectionModDetails from './CollectionModDetails';\nimport CollectionReleaseStatus from '../CollectionReleaseStatus';\nimport SlideshowControls from './SlideshowControls';\n\nimport { ICollectionRevisionMod } from '@nexusmods/nexus-api';\nimport i18next from 'i18next';\nimport * as _ from 'lodash';\nimport * as React from 'react';\nimport { Image as BSImage, Media, Panel } from 'react-bootstrap';\nimport { ComponentEx, tooltip, types, util } from 'vortex-api';\n\ninterface ICollectionOverviewProps {\n  t: i18next.TFunction;\n  profile: types.IProfile;\n  collection: types.IMod;\n  incomplete: boolean;\n  modSelection: Array<{ local: IModEx, remote: ICollectionRevisionMod }>;\n  onDeselectMods?: () => void;\n}\n\nclass CollectionOverview extends ComponentEx<ICollectionOverviewProps, { selIdx: number }> {\n  constructor(props: ICollectionOverviewProps) {\n    super(props);\n\n    this.initState({ selIdx: 0 });\n  }\n\n  public render(): JSX.Element {\n    const { t, collection, incomplete, modSelection, profile } = this.props;\n\n    let { selIdx } = this.state;\n    if (selIdx >= modSelection.length) {\n      selIdx = 0;\n    }\n\n    const modDetails = modSelection.length > 0;\n\n    const classes = ['collection-overview'];\n    if (modDetails) {\n      classes.push('collection-mod-selection');\n    }\n\n    return (\n      <Panel className={classes.join(' ')}>\n        <div className='collection-overview-title'>\n          <div className='collection-title'>\n            {util.renderModName(collection)}\n          </div>\n          <CollectionReleaseStatus\n            t={t}\n            active={true}\n            enabled={profile.modState?.[collection.id]?.enabled ?? false}\n            collection={collection}\n            incomplete={incomplete}\n          />\n          {modSelection.length > 1 ? (\n            <>\n              <SlideshowControls\n                t={t}\n                numItems={modSelection.length}\n                onChangeItem={this.setSelection}\n                autoProgressTimeMS={5000}\n              />\n              <div className='flex-filler' />\n              <tooltip.IconButton\n                className='btn-embed'\n                tooltip={t('Deselects mods')}\n                icon='close'\n                onClick={this.props.onDeselectMods}\n              />\n            </>\n          ) : null}\n        </div>\n        <CollectionModDetails\n          t={t}\n          local={modSelection[selIdx]?.local}\n          remote={modSelection[selIdx]?.remote}\n          gameId={profile.gameId}\n        />\n      </Panel>\n    );\n  }\n\n  private setSelection = (idx: number) => {\n    this.nextState.selIdx = (this.props.modSelection.length === 0)\n      ? 0\n      : idx % this.props.modSelection.length;\n  }\n}\n\nexport default CollectionOverview;\n","import { IModEx } from '../../types/IModEx';\n\nimport CollectionBanner from './CollectionBanner';\n\nimport i18next from 'i18next';\nimport * as React from 'react';\nimport { Panel } from 'react-bootstrap';\nimport { ComponentEx, FlexLayout, ProgressBar, Spinner, tooltip, types, util } from 'vortex-api';\nimport { calculateCollectionSize, isRelevant } from '../../util/util';\n\nexport interface ICollectionProgressProps {\n  t: i18next.TFunction;\n  isPremium: boolean;\n  mods: { [modId: string]: IModEx };\n  downloads: { [dlId: string]: types.IDownload };\n  profile: types.IProfile;\n  totalSize: number;\n  activity: { [id: string]: string };\n  onCancel: () => void;\n  onPause: () => void;\n  onResume: () => void;\n}\n\ninterface ICompState {\n  totalSize: number;\n}\n\nclass CollectionProgress extends ComponentEx<ICollectionProgressProps, ICompState> {\n  public static getDerivedStateFromProps(props, state) {\n    return {\n      totalSize: calculateCollectionSize(props.mods),\n    };\n  }\n\n  constructor(props: ICollectionProgressProps) {\n    super(props);\n    this.initState({\n      totalSize: 0,\n    });\n  }\n\n  public render(): JSX.Element {\n    const { t, activity, downloads, isPremium, mods, profile, totalSize,\n      onCancel, onPause, onResume } = this.props;\n\n    const group = (mod: types.IMod, download?: types.IDownload): string => {\n      if ((mod.state === 'downloading') && (download?.state === 'paused')) {\n        // treating paused downloads as \"pending\" for the purpose of progress indicator\n        return 'pending';\n      }\n\n      if ((mod.state === 'installed') && !profile.modState?.[mod.id]?.enabled) {\n        return 'disabled';\n      }\n\n      return {\n        null: 'pending',\n        installed: 'done',\n        downloaded: 'pending',\n        installing: 'installing',\n        downloading: 'downloading',\n      }[mod.state] ?? 'pending';\n    };\n\n    interface IModGroups {\n      pending: IModEx[];\n      downloading: IModEx[];\n      installing: IModEx[];\n      disabled: IModEx[];\n      done: IModEx[];\n    }\n\n    const { pending, downloading, installing, disabled, done } =\n      Object.values(mods).reduce<IModGroups>((prev, mod) => {\n        if ((mod.collectionRule.type === 'requires') && !mod.collectionRule['ignored']) {\n          prev[group(mod, downloads[mod.archiveId])].push(mod);\n        }\n        return prev;\n      }, { pending: [], downloading: [], installing: [], disabled: [], done: [] });\n\n    if ((downloading.length === 0)\n      && (installing.length === 0)\n      && (pending.length === 0)\n      && (disabled.length === 0)) {\n      return null;\n    }\n\n    return (\n      <FlexLayout type='row'>\n        <FlexLayout.Flex>\n          <Panel>\n            <FlexLayout type='row' className='collection-progress-flex'>\n              {((activity['dependencies'] ?? []).length > 0)\n                ? this.renderActivity(t('Checking Dependencies'))\n                : this.renderBars(installing, done)}\n              <FlexLayout.Fixed>\n                <FlexLayout type='row' className='collection-pause-cancel-flex'>\n                  {(onResume !== undefined) ? (\n                    <tooltip.IconButton\n                      className='btn-embed btn-pause-resume'\n                      onClick={onResume}\n                      disabled={onResume === null}\n                      tooltip={t('Resume')}\n                      icon='resume'\n                    />\n                  ) : null}\n                  {(onPause !== undefined) ? (\n                    <tooltip.IconButton\n                      className='btn-embed btn-pause-resume'\n                      onClick={onPause}\n                      tooltip={t('Pause')}\n                      icon='pause'\n                    />\n                  ) : null}\n                  <tooltip.IconButton\n                    className='btn-embed btn-cancel'\n                    onClick={onCancel}\n                    icon='stop'\n                    tooltip={t('Cancel')}\n                  >\n                    {t('Cancel')}\n                  </tooltip.IconButton>\n                </FlexLayout>\n              </FlexLayout.Fixed>\n            </FlexLayout>\n          </Panel>\n        </FlexLayout.Flex>\n        {isPremium ? null : (\n          <FlexLayout.Fixed className='collection-banner-container'>\n            <CollectionBanner t={t} totalSize={totalSize} />\n          </FlexLayout.Fixed>\n        )}\n      </FlexLayout>\n    );\n  }\n\n  private renderActivity(message: string) {\n    return (\n      <FlexLayout.Flex><Spinner />{' '}{message}</FlexLayout.Flex>\n    );\n  }\n\n  private renderBars(installing: IModEx[], done: IModEx[]) {\n    const { t, downloads, mods } = this.props;\n    const { totalSize } = this.state;\n\n    const curInstall = (installing.length > 0)\n      ? installing.find(iter => iter.state === 'installing')\n      : undefined;\n\n    const downloadProgress = Object.values(mods).reduce((prev, mod) => {\n      let size = 0;\n      if ((mod.state === 'downloading') || (mod.state === null)) {\n        const download = downloads[mod.archiveId];\n        size += download?.received || 0;\n      } else {\n        size += mod.attributes?.fileSize || 0;\n      }\n      return prev + size;\n    }, 0);\n\n    const relevant = Object.values(mods).filter(isRelevant);\n\n    return (\n      <>\n        <ProgressBar\n          now={downloadProgress}\n          max={totalSize}\n          showPercentage\n          labelLeft={t('Downloading')}\n          labelRight={\n            `${util.bytesToString(downloadProgress)} / ${util.bytesToString(totalSize)}`}\n        />\n        <ProgressBar\n          now={done.length}\n          max={relevant.length}\n          showPercentage\n          labelLeft={installing.length > 0 ? t('Installing') : t('Waiting to install')}\n          labelRight={curInstall !== undefined ? util.renderModName(curInstall) : undefined}\n        />\n      </>\n    );\n  }\n}\n\nexport default CollectionProgress;\n","import { IRevision, RatingOptions } from '@nexusmods/nexus-api';\r\nimport { useTranslation } from 'react-i18next';\r\nimport * as React from 'react';\r\nimport { Button, Checkbox, Form, FormGroup, Radio } from 'react-bootstrap';\r\nimport {\r\n  FlexLayout,\r\n  Icon,\r\n  RadialProgress,\r\n  tooltip,\r\n  MainContext,\r\n  types,\r\n  Modal,\r\n  Usage,\r\n  selectors,\r\n  util,\r\n} from 'vortex-api';\r\nimport { NAMESPACE } from '../../constants';\r\nimport { useDispatch, useSelector, useStore } from 'react-redux';\r\nimport { healthDownvoteDialog } from '../../actions/session';\r\nimport { IMod, IState } from 'vortex-api/lib/types/IState';\r\nimport { updateSuccessRate } from '../../actions/persistent';\r\nimport * as nexus from '@nexusmods/nexus-api';\r\nimport { IConnectedProps } from 'vortex-api/lib/views/MainWindow';\r\nimport { getSafe } from 'vortex-api/lib/util/api';\r\nimport { ICollection } from '../../types/ICollection';\r\nimport { IStateEx } from '../../types/IStateEx';\r\n\r\nexport interface IHealthDownvoteDialogProps {}\r\n\r\nfunction HealthDownvoteDialog(props: IHealthDownvoteDialogProps) {\r\n\r\n  const [optionValue, setOptionValue] = React.useState(undefined);\r\n  const [confirmationCheck, setConfirmationCheck] = React.useState(false);\r\n\r\n  const context = React.useContext(MainContext);\r\n  \r\n  const { t } = useTranslation(NAMESPACE);  \r\n  const dispatch = useDispatch();\r\n\r\n  const state = context.api.store.getState();\r\n  const gameId = selectors.activeGameId(state);\r\n  const collectionId:string = useSelector((state:any) => state.session.collections.healthDownvoteDialog ?? undefined);\r\n\r\n  const collection:IMod = (collectionId !== undefined)\r\n  ? state.persistent.mods[gameId]?.[collectionId]\r\n  : undefined;\r\n  \r\n  let revisionInfo: IRevision;\r\n  let collectionInfo;\r\n  let commentLink = '#';\r\n  let bugLink = '#';\r\n\r\n  if (collection?.attributes?.revisionId !== undefined) {\r\n\r\n    revisionInfo = state.persistent.collections.revisions?.[collection.attributes.revisionId]?.info;\r\n\r\n    if (revisionInfo?.collection !== undefined) {\r\n\r\n      collectionInfo = state.persistent.collections.collections?.[revisionInfo.collection.id]?.info;\r\n      commentLink = collectionInfo?.['commentLink'] ?? '#';\r\n      bugLink = `https://next.nexusmods.com/${collectionInfo.game.domainName}/collections/${collectionInfo.slug}?tab=Bugs` ?? '#';    \r\n    }\r\n  }  \r\n\r\n  const hide = React.useCallback(() => {\r\n    // hide dialog by setting it's state value to undefined\r\n    dispatch(healthDownvoteDialog(undefined));\r\n  }, []);\r\n\r\n  const downvote = () => {\r\n    sendRating(false);\r\n    hide();\r\n  }\r\n\r\n  const onChecked = (evt: React.FormEvent<any>) => {\r\n    setConfirmationCheck(evt.currentTarget.checked);\r\n  }\r\n\r\n  const sendRating = async (success: boolean) => {\r\n    const revisionId = collection?.attributes?.revisionId ?? undefined;\r\n    const vote = success ? 'positive' : 'negative';\r\n    const voted: { success: boolean, averageRating?: nexus.IRating } = (await context.api.emitAndAwait('rate-nexus-collection-revision', parseInt(revisionId, 10), vote))[0];    \r\n    if (voted.success) {\r\n      dispatch(updateSuccessRate(revisionId, vote, voted.averageRating.average, voted.averageRating.total));\r\n    }\r\n  };\r\n\r\n  return (   \r\n    <Modal\r\n      id='collection-health-downvote-dialog'\r\n      className='collection-health-downvote-dialog'\r\n      show={collection !== undefined}\r\n      onHide={hide}\r\n    >\r\n      <Modal.Header>\r\n        <Modal.Title>{t('Downvote Success Rating')}</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <p>{t(`Sorry to hear that the collection \\\"${util.renderModName(collection)}\\\" isn't working for you. Here are some steps that could help:`)}</p>\r\n        <ol>\r\n          <li>Make sure your game version matches the game version the collection was created for.</li>\r\n          <li>Read the collection instructions and check if you've missed any steps.</li>\r\n          <li><a href={commentLink}>Check comments on Nexus Mods</a> for advice and to reach out to the collection curator.</li>\r\n          <li><a href={bugLink}>View bug reports on Nexus Mods</a> or report a new bug to help the curator fix the issue.</li>\r\n        </ol>  \r\n        <h5>{t(`Success ratings help others know if a collection installs and runs correctly. They are not a vote on whether you liked the collection or not.`)}</h5>      \r\n        <FormGroup>\r\n          <Checkbox onChange={onChecked}>{t('I have tried the above steps and confirm this collection does not work.')}</Checkbox>\r\n        </FormGroup>\r\n      </Modal.Body>\r\n      <Modal.Footer>      \r\n        <Button onClick={hide}>{t('Cancel')}</Button>\r\n        <Button onClick={downvote} disabled={!confirmationCheck}>{t('Submit')}</Button>\r\n      </Modal.Footer>\r\n    </Modal>  \r\n  );\r\n}\r\n\r\nexport default HealthDownvoteDialog;","import { IGameVersion, RatingOptions } from '@nexusmods/nexus-api';\r\nimport I18next from 'i18next';\r\nimport * as React from 'react';\r\nimport {\r\n  FlexLayout,\r\n  Icon,\r\n  RadialProgress,\r\n  tooltip,\r\n  MainContext,\r\n  More,\r\n} from 'vortex-api';\r\n\r\nexport interface IHealthIndicatorProps {\r\n  t: I18next.TFunction;\r\n  value: { average: number; total: number };\r\n  ownSuccess: RatingOptions;\r\n  revisionNumber: number;\r\n  onVoteSuccess: (success: boolean) => void;\r\n  voteAllowed: boolean;\r\n  gameVersion: string;\r\n  collectionGameVersion: string;\r\n}\r\n\r\nfunction HealthIndicator(props: IHealthIndicatorProps) {\r\n\r\n  const context = React.useContext(MainContext);\r\n\r\n  const { t, onVoteSuccess, ownSuccess, revisionNumber, value, voteAllowed, gameVersion, collectionGameVersion } =\r\n    props;\r\n\r\n  const voteSuccess = React.useCallback((evt: React.MouseEvent<any>) => {\r\n    \r\n    const { success } = evt.currentTarget.dataset;\r\n    const isUpvote = success === 'true';\r\n\r\n    // are we trying to reclick the already clicked button?\r\n    if(ownSuccess) {\r\n      if(ownSuccess === 'positive' && isUpvote) {\r\n        return;\r\n      }\r\n      if(ownSuccess === 'negative' && !isUpvote) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    onVoteSuccess(isUpvote);\r\n\r\n    context.api.events.emit(\r\n      'analytics-track-click-event',\r\n      'Collections',\r\n      isUpvote ? 'Upvote Collection' : 'Downvote Collection',\r\n    );\r\n  }, [ownSuccess]);\r\n\r\n  if (value === undefined) {\r\n    return null;\r\n  }\r\n\r\n  const RadialProgressT: any = RadialProgress;\r\n\r\n  const rating = value.average;\r\n  let cssClass = 'success-rating-good';\r\n  if (rating === undefined) {\r\n    cssClass = 'success-rating-insufficient';\r\n  } else if (rating < 50) {\r\n    cssClass = 'success-rating-bad';\r\n  } else if (rating < 75) {\r\n    cssClass = 'success-rating-dubious';\r\n  }\r\n\r\n  const versionMismatch = gameVersion !== collectionGameVersion;\r\n  const gameVersionClassName = versionMismatch ? 'dialog-danger-text' : '';\r\n\r\n  return (\r\n    <FlexLayout type='column' className='collection-health-indicator'>\r\n      <div className='collection-health-header'>        \r\n        <div className='collection-health-header-title'>\r\n          <Icon name='revision' />\r\n        {t('Revision {{number}}', { replace: { number: revisionNumber } })}\r\n        </div>\r\n        <div className='collection-health-header-gameversion'>{t('Game Version: ')}\r\n          <span className={gameVersionClassName}>{collectionGameVersion}</span>  \r\n          {(versionMismatch) ? (\r\n            <More id='collection-health-version-mismatch' name={t('Version Mismatch')}>\r\n              {t('This collection was created using a different version of the game than you have and is the most common reason why a collection doesn\\'t work correctly.\\n\\n'\r\n              + 'Your version: {{gameVersion}}\\n\\n'\r\n              + 'Collection version: {{collectionGameVersion}}', { replace: { collectionGameVersion: collectionGameVersion, gameVersion: gameVersion } })}\r\n            </More>\r\n          ) : null}         \r\n          </div>\r\n      </div>\r\n      <FlexLayout type='row' className='collection-health-body'>\r\n        <FlexLayout.Fixed className='collection-revition-rating-parent'>\r\n          <div className='collection-revision-rating-container'>\r\n            <RadialProgressT\r\n              data={[\r\n                { class: cssClass, min: 0, max: 100, value: value.average },\r\n              ]}\r\n              totalRadius={32}\r\n              innerGap={10}\r\n              restOverlap={false}\r\n            />\r\n            <div className='centered-overlay'>{value.average}%</div>\r\n          </div>\r\n          <div className='collection-revision-rating-numvotes'>\r\n            {t('{{numVotes}} votes', { replace: { numVotes: value.total } })}\r\n          </div>\r\n        </FlexLayout.Fixed>\r\n        <FlexLayout.Flex>\r\n          <FlexLayout type='column'>\r\n            {(!voteAllowed) ? (\r\n            <FlexLayout.Fixed className='collection-health-rating-text'>\r\n              {t('Collection Success Rating')}\r\n            </FlexLayout.Fixed>\r\n            ) : (\r\n            <>\r\n            <FlexLayout.Fixed className='collection-health-rating-text'>\r\n              {t('Did this collection work successfully?')}\r\n            </FlexLayout.Fixed>\r\n            <FlexLayout.Fixed>\r\n              <FlexLayout type='row' className='collection-voting-pill'>\r\n                <FlexLayout.Fixed>\r\n                  <tooltip.Button\r\n                    className={\r\n                      'collection-ghost-button ' +\r\n                      (ownSuccess === 'positive' ? 'voted' : '')\r\n                    }\r\n                    tooltip={\r\n                      voteAllowed\r\n                        ? t('Collection worked (mostly)')\r\n                        : t(\r\n                            'You must wait for 12 hours between downloading a collection revision and rating it',\r\n                          )\r\n                    }\r\n                    data-success={true}\r\n                    onClick={voteSuccess}\r\n                    disabled={!voteAllowed}\r\n                  >\r\n                    {t('Yes')}\r\n                  </tooltip.Button>\r\n                </FlexLayout.Fixed>\r\n                <FlexLayout.Fixed>\r\n                  <tooltip.Button\r\n                    className={\r\n                      'collection-ghost-button ' +\r\n                      (ownSuccess === 'negative' ? 'voted' : '')\r\n                    }\r\n                    tooltip={\r\n                      voteAllowed\r\n                        ? t(\"Collection didn't work (in a significant way)\")\r\n                        : t('You must wait for 12 hours between downloading a collection revision and rating it')\r\n                    }\r\n                    data-success={false}\r\n                    onClick={voteSuccess}\r\n                    disabled={!voteAllowed}\r\n                  >\r\n                    {t('No')}\r\n                  </tooltip.Button>\r\n                </FlexLayout.Fixed>\r\n              </FlexLayout>\r\n            </FlexLayout.Fixed>\r\n            </>)}\r\n          </FlexLayout>\r\n        </FlexLayout.Flex>\r\n      </FlexLayout>\r\n    </FlexLayout>\r\n  );\r\n}\r\n\r\nexport default HealthIndicator;\r\n","import * as React from 'react';\nimport { tooltip, types } from 'vortex-api';\nimport Timer from './Timer';\n\nexport interface ISlideshowControlsProps {\n  t: types.TFunction;\n  numItems: number;\n  autoProgressTimeMS?: number;\n\n  onChangeItem: (item: number) => void;\n}\n\nfunction SlideshowControls(props: ISlideshowControlsProps) {\n  const { t, autoProgressTimeMS, numItems, onChangeItem } = props;\n\n  const [paused, setPaused] = React.useState(false);\n  const [idx, setIdx] = React.useState(0);\n  const [lastChange, setLastChange] = React.useState(0);\n  const isMounted = React.useRef(false);\n\n  React.useEffect(() => {\n    isMounted.current = true;\n    return () => { isMounted.current = false; };\n  }, []);\n\n  // the callbacks support wrap-around even though the ui does not\n  const next = React.useCallback(() => {\n    if (!isMounted.current) {\n      // next may be called asynchronously and there is no good way of canceling it on unmount\n      return;\n    }\n\n    let value: number;\n    setIdx(oldValue => {\n      value = (oldValue + 1) % numItems;\n      return value;\n    });\n    setLastChange(Date.now());\n    onChangeItem(value);\n  }, [numItems, onChangeItem, setIdx, setLastChange]);\n\n  const prev = React.useCallback(() => {\n    let value: number;\n    setIdx(oldValue => {\n      value = oldValue > 0 ? (oldValue - 1) : (numItems - 1);\n      return value;\n    });\n    setLastChange(Date.now());\n    onChangeItem(value);\n  }, [numItems, onChangeItem, setIdx, setLastChange]);\n\n  const togglePause = React.useCallback(() => {\n    setPaused(old => !old);\n    // setLastChange(Date.now());\n  }, [setPaused]);\n\n  return (\n    <div className='slideshow-controls'>\n      <tooltip.IconButton\n        icon='collection-previous'\n        tooltip={t('Show previous mod')}\n        disabled={idx === 0}\n        onClick={prev}\n      />\n      {t('{{pos}} of {{count}}',\n        { replace: { pos: idx + 1, count: numItems } })}\n      <tooltip.IconButton\n        icon='collection-next'\n        tooltip={t('Show next mod')}\n        disabled={idx === numItems - 1}\n        onClick={next}\n      />\n\n      {(autoProgressTimeMS !== undefined) ? (\n        <tooltip.IconButton\n          className='button-with-timer'\n          icon={paused ? 'resume' : 'pause'}\n          tooltip={t('Start/Pause automatic advancement')}\n          onClick={togglePause}\n        >\n          <Timer\n            className='slideshow-timer'\n            started={lastChange}\n            paused={paused}\n            duration={autoProgressTimeMS}\n            onTrigger={next}\n          />\n        </tooltip.IconButton>\n      ) : null}\n    </div>\n  );\n}\n\nexport default SlideshowControls;\n","import * as React from 'react';\n\nexport interface ITimerProps {\n  className?: string;\n  started: number;\n  paused: boolean;\n  duration: number;\n  onTrigger: () => void;\n}\n\n// to make the keyframes simpler, I want the circumference (in svg units) to be 100\n// so the animation goes from 0 to 100\nconst circumference = 100;\n\n// everything else gets deduced from that, circumference = 2 * pi * radius\n// so radius = circumference / (2 * pi)\nconst radius = circumference / (2 * Math.PI);\nconst stroke = Math.ceil(radius / 6);\n\nconst width = radius * 2 + stroke;\nconst center = width / 2;\n\nfunction Timer(props: ITimerProps) {\n  const { className, duration, onTrigger, paused, started } = props;\n\n  const [timer, setTimer] = React.useState(null);\n  const [active, setActive] = React.useState(true);\n  const [elapsed, setElapsed] = React.useState(null);\n\n  React.useEffect(() => {\n    return () => {\n      if (timer !== null) {\n        clearTimeout(timer);\n      }\n    };\n  }, []);\n\n  React.useEffect(() => {\n    // reset the animation if a new started time is set\n    setActive(false);\n    setElapsed(null);\n    setTimeout(() => {\n      setActive(true);\n    }, 10);\n  }, [setActive, setElapsed, started]);\n\n  React.useEffect(() => {\n    // if pausing, unpausing or restarting the timer we have to (re-)queue the\n    // trigger\n    if (timer !== null) {\n      clearTimeout(timer);\n    }\n    if (paused) {\n      setElapsed(Date.now() - started);\n    } else {\n      let remaining = duration;\n      if (elapsed !== null) {\n        // after resume from pause\n        remaining = duration - elapsed;\n        setElapsed(null);\n      } else {\n        remaining = (started + duration) - Date.now();\n      }\n\n      if (remaining < 0) {\n        remaining = duration;\n      }\n      setTimer(setTimeout(() => {\n        onTrigger();\n      }, remaining));\n    }\n  }, [setTimer, setElapsed, paused, started]);\n\n  return (\n    <svg\n      className={className}\n      viewBox={`0 0 ${width} ${width}`}\n      style={{ strokeWidth: stroke }}\n    >\n      <circle\n        className='timer-background'\n        fill='none'\n        cx={center}\n        cy={center}\n        r={radius}\n      />\n      <circle\n        className='timer-circle'\n        style={{\n          animationDuration: duration.toString() + 'ms',\n          animationDirection: 'reverse',\n          animationIterationCount: 'infinite',\n          animationTimingFunction: 'linear',\n          animationPlayState: paused ? 'paused' : 'running',\n          transform: 'rotate(-90deg)',\n          transformOrigin: 'center',\n          display: active ? undefined : 'none',\n        }}\n        strokeDasharray={`${circumference},${circumference}`}\n        strokeLinecap='round'\n        fill='none'\n        cx={center}\n        cy={center}\n        r={radius}\n      />\n    </svg>\n  );\n}\n\nexport default Timer;\n","/* eslint-disable */\nimport { AUTHOR_UNKNOWN, AVATAR_FALLBACK, INSTALLING_NOTIFICATION_ID } from '../../constants';\nimport { testDownloadReference } from '../../util/findModByRef';\nimport InstallDriver from '../../util/InstallDriver';\n\nimport { IModEx } from '../../types/IModEx';\nimport { IStateEx } from '../../types/IStateEx';\nimport { modRuleId } from '../../util/util';\n\nimport CollectionInstructions from './CollectionInstructions';\nimport CollectionItemStatus from './CollectionItemStatus';\nimport CollectionOverview from './CollectionOverview';\nimport CollectionOverviewSelection from './CollectionOverviewSelection';\nimport CollectionProgress from './CollectionProgress';\n\nimport { ICollection, ICollectionRevisionMod, IModFile, IRevision, RatingOptions } from '@nexusmods/nexus-api';\nimport * as Promise from 'bluebird';\nimport i18next from 'i18next';\nimport * as _ from 'lodash';\nimport memoizeOne from 'memoize-one';\nimport * as React from 'react';\nimport { Image, Panel, Tab, Tabs } from 'react-bootstrap';\nimport ReactDOM = require('react-dom');\nimport { connect } from 'react-redux';\nimport * as Redux from 'redux';\nimport * as semver from 'semver';\nimport { actions, ComponentEx, FlexLayout, ITableRowAction, log, OptionsFilter, Table,\n         TableTextFilter, tooltip, types, util } from 'vortex-api';\n\nexport interface ICollectionPageProps {\n  t: i18next.TFunction;\n  className: string;\n  profile: types.IProfile;\n  collection: types.IMod;\n  driver: InstallDriver;\n  mods: { [modId: string]: types.IMod };\n  downloads: { [dlId: string]: types.IDownload };\n  notifications: types.INotification[];\n  onAddCallback: (cbName: string, cb: (...args: any[]) => void) => void;\n  onView: (modId: string) => void;\n  onPause: (collectionId: string) => void;\n  onCancel: (collectionId: string) => void;\n  onClone: (collectionId: string) => void;\n  onResume: (collectionId: string) => void;\n  onInstallManually: (collectionId: string, rules: types.IModRule[]) => void;\n  onVoteSuccess: (collectionId: string, success: boolean) => void;\n}\n\ninterface IConnectedProps {\n  userInfo: any;\n  votedSuccess: RatingOptions;\n  activity: { [id: string]: string };\n  language: string;\n  overlays: { [id: string]: types.IOverlay };\n  collectionInfo: ICollection;\n  revisionInfo: IRevision;\n  showUpvoteResponse: boolean;\n  showDownvoteResponse: boolean;\n}\n\ninterface IActionProps {\n  onSetModEnabled: (profileId: string, modId: string, enable: boolean) => void;\n  onSetAttributeFilter: (tableId: string, filterId: string, filterValue: any) => void;\n  onRemoveRule: (gameId: string, modId: string, rule: types.IModRule) => void;\n  onShowError: (message: string, details?: string | Error | any, allowReport?: boolean) => void;\n  onSuppressVoteResponse: (response: 'upvote' | 'downvote') => void;\n}\n\ninterface IComponentState {\n  modsEx: { [modId: string]: IModEx };\n  modSelection: Array<{ local: IModEx, remote: ICollectionRevisionMod }>;\n  currentTab: string;\n}\n\nconst getCollator = (() => {\n  let collator: Intl.Collator;\n  let language: string;\n\n  return (locale: string): Intl.Collator => {\n    if ((collator === undefined) || (locale !== language)) {\n      language = locale;\n      collator = new Intl.Collator(locale, { sensitivity: 'base' });\n    }\n    return collator;\n  };\n})();\n\nconst STATUS_ORDER: string[] =\n  [ 'Installing', 'Downloading',\n    'Install Pending', 'Download Pending',\n    'Enabled', 'Disabled', 'Recommended', 'Ignored'];\n\ntype IProps = ICollectionPageProps & IConnectedProps & IActionProps;\n\nfunction arr(input: string | string[]): string[] {\n  return Array.isArray(input) ? input : [input];\n}\n\nfunction matchRepo(mod: IModEx, ref: IModFile) {\n  if (ref === null) {\n    return false;\n  }\n\n  const modId = mod.attributes?.modId || mod.collectionRule?.reference?.repo?.modId;\n  const fileId = mod.attributes?.fileId || mod.collectionRule?.reference?.repo?.fileId;\n\n  if ((modId === undefined) || (fileId === undefined)\n      || (ref.modId === undefined) || (ref.fileId === undefined)) {\n    return false;\n  }\n\n  return modId.toString() === ref.modId.toString()\n    && fileId.toString() === ref.fileId.toString();\n}\n\nclass CollectionPage extends ComponentEx<IProps, IComponentState> {\n  private mAttributes: Array<types.ITableAttribute<IModEx>>;\n  private mUpdateDebouncer: util.Debouncer;\n  private mModActions: ITableRowAction[];\n  private mTableContainerRef: Element;\n  private mLastModsFinal: { [ruleId: string]: IModEx };\n  private mInstalling: boolean = false;\n\n  private revisionMerged = memoizeOne((collection: ICollection, revision: IRevision) => ({\n    ...revision,\n    collection,\n  } as any as IRevision));\n\n  constructor(props: IProps) {\n    super(props);\n    this.initState({\n      modsEx: {},\n      modSelection: [],\n      currentTab: 'instructions',\n    });\n\n    this.mModActions = [\n      {\n        icon: 'install',\n        title: 'Install',\n        action: this.installManually,\n        condition: instanceIds => {\n          const instanceId: string = Array.isArray(instanceIds) ? instanceIds[0] : instanceIds;\n          const mod = this.state.modsEx[instanceId];\n          return [null, 'downloaded'].includes(mod.state);\n        },\n      },\n      {\n        icon: 'delete',\n        title: 'Remove',\n        action: this.removeSelected,\n        condition: instanceId => (typeof(instanceId) === 'string')\n          ? (['downloaded', 'installed'].includes(this.state.modsEx[instanceId].state))\n          : true,\n        hotKey: { code: 46 },\n      },\n      {\n        icon: 'show',\n        title: 'Show in Mods',\n        action: this.showInMods,\n        condition: instanceId => this.modAtLeastDownloaded(instanceId),\n        singleRowAction: true,\n        multiRowAction: false,\n      },\n      {\n        icon: 'toggle-disabled',\n        title: 'Ignore',\n        action: this.ignoreSelected,\n        condition: instanceIds => arr(instanceIds).find(id =>\n          this.state.modsEx[id].collectionRule['ignored'] !== true) !== undefined,\n      },\n      {\n        icon: 'toggle-enabled',\n        title: 'Stop Ignoring',\n        action: this.unignoreSelected,\n        condition: instanceIds => arr(instanceIds).find(id =>\n          this.state.modsEx[id].collectionRule['ignored'] === true) !== undefined,\n      },\n    ];\n\n    this.mAttributes = [\n      {\n        id: 'collection_status',\n        name: 'Status',\n        description: 'Is mod enabled in current profile',\n        icon: 'check-o',\n        customRenderer: (mod: IModEx) => {\n          const download = (mod.archiveId !== undefined)\n            ? this.props.downloads[mod.archiveId]\n            : undefined;\n\n          return (\n            <CollectionItemStatus\n              t={this.props.t}\n              mod={mod}\n              download={download}\n              notifications={this.props.notifications}\n              container={this.mTableContainerRef}\n              installing={this.mInstalling}\n            />\n          );\n        },\n        calc: (mod: IModEx) => {\n          if (mod.collectionRule['ignored']) {\n            return ['Ignored'];\n          } else if (mod.state === 'installing') {\n            return ['Installing', Math.floor(mod.progress * 100.0) / 100.0];\n          } else if (mod.state === 'downloading') {\n            return ['Downloading', Math.floor(mod.progress * 100.0) / 100.0];\n          } else if (mod.state === null) {\n            if (mod.collectionRule.type === 'recommends') {\n              return ['Recommended'];\n            } else {\n              return ['Download Pending', 'Pending'];\n            }\n          } else if (mod.state === 'downloaded') {\n            if (mod.collectionRule.type === 'recommends') {\n              return ['Recommended'];\n            } else {\n              return ['Install Pending', 'Pending'];\n            }\n          }\n          return [mod.enabled === true ? 'Enabled' : 'Disabled'];\n        },\n        placement: 'table',\n        isToggleable: false,\n        edit: {},\n        isSortable: true,\n        sortFunc: (lhs: string[], rhs: string[]): number => {\n          return STATUS_ORDER.indexOf(lhs[0]) - STATUS_ORDER.indexOf(rhs[0]);\n        },\n        filter: new OptionsFilter([\n          { value: 'Enabled', label: 'Enabled' },\n          { value: 'Disabled', label: 'Disabled' },\n          { value: 'Installing', label: 'Installing' },\n          { value: 'Downloading', label: 'Downloading' },\n          { value: 'Pending', label: 'Pending' },\n          { value: 'Recommended', label: 'Not installed' },\n          { value: 'Ignored', label: 'Ignored' },\n        ], true, false),\n      },\n      {\n        id: 'required',\n        name: 'Required',\n        description: 'Is the mod required for this collection',\n        placement: 'table',\n        calc: (mod: IModEx) => mod.collectionRule.type === 'requires',\n        edit: {},\n        filter: new OptionsFilter([\n          { value: false, label: 'Recommended'},\n          { value: true, label: 'Required' },\n        ], false, false),\n      },\n      {\n        id: 'name',\n        name: 'Name',\n        calc: mod => (mod.state !== null)\n          ? util.renderModReference(mod.collectionRule.reference, mod, { version: false })\n          : util.renderModReference(mod.collectionRule.reference,\n                                    undefined, { version: false }),\n        placement: 'table',\n        edit: {},\n        isToggleable: false,\n        isDefaultSort: true,\n        isSortable: true,\n        filter: new TableTextFilter(true),\n        sortFunc: (lhs: string, rhs: string, locale: string): number =>\n          getCollator(locale).compare(lhs, rhs),\n      },\n      {\n        id: 'version',\n        name: 'Version',\n        calc: mod => {\n          const prefer = '+prefer';\n          let verString = ((mod.state !== null)\n            ? mod.attributes.version ?? mod.collectionRule.reference.versionMatch\n            : mod.collectionRule.reference.versionMatch) ?? '0.0.0';\n          if (verString.endsWith(prefer)) {\n            let sv: { version: string };\n            try {\n              sv = semver.minVersion(verString);\n            } catch (e) {\n              const { version, comparator } = this.extractAndRemoveComparators(verString);\n              const coerced = util.coerceToSemver(version.slice(0, -(prefer.length)));\n              const range = (comparator ?? '') + coerced + prefer;\n              try {\n                sv = semver.minVersion(range);\n              } catch (e2) {\n                sv = { version: coerced }\n              }\n            }\n\n            verString = sv.version;\n          }\n          return verString;\n        },\n        placement: 'table',\n        edit: {},\n      },\n      {\n        id: 'uploader',\n        name: 'Uploader',\n        customRenderer: (mod: IModEx) => {\n          const { t } = this.props;\n\n          let name: string;\n          let avatar: string;\n          if (this.props.revisionInfo !== undefined) {\n            const revMods: ICollectionRevisionMod[] = this.props.revisionInfo?.modFiles || [];\n            const revMod = revMods.find(iter => matchRepo(mod, iter.file));\n\n            name = mod.attributes?.uploader || revMod?.file?.owner?.name;\n            avatar = mod.attributes?.uploaderAvatar\n                  || revMod?.file?.owner?.avatar;\n          } else if (mod.attributes !== undefined) {\n            name = mod.attributes?.uploader;\n            avatar = mod.attributes?.uploaderAvatar;\n          }\n\n          return (\n            <div>\n              <Image circle src={avatar || AVATAR_FALLBACK} />\n              {name || t(AUTHOR_UNKNOWN)}\n            </div>\n          );\n        },\n        calc: mod => mod?.attributes?.author || this.props.t(AUTHOR_UNKNOWN),\n        placement: 'table',\n        edit: {},\n        isToggleable: false,\n        isSortable: true,\n      },\n      {\n        id: 'instructions',\n        name: 'Instructions',\n        customRenderer: (mod: IModEx) => {\n          const instructions = this.getModInstructions(mod.id);\n          if (instructions === undefined) {\n            return null;\n          }\n\n          return (\n            <tooltip.IconButton\n              icon='details'\n              tooltip={instructions}\n              data-modid={mod.id}\n              onClick={this.toggleInstructions}\n            />\n          );\n        },\n        calc: mod => {\n          return this.getModInstructions(mod.id);\n        },\n        placement: 'table',\n        edit: {},\n      },\n    ];\n\n    props.onAddCallback('viewCollectionTab', (tab: string) => {\n      if (['instructions', 'mods'].includes(tab)) {\n        this.nextState.currentTab = tab;\n      }\n    });\n  }\n\n  public async componentDidMount() {\n    const { collection, userInfo } = this.props;\n\n    const { attributes } = collection ?? {};\n    const { revisionId, collectionSlug, revisionNumber } = attributes ?? {};\n    if (((revisionId !== undefined) || (collectionSlug !== undefined))\n        && (userInfo !== undefined)) {\n      const { infoCache } = this.props.driver;\n      try {\n        await infoCache.getRevisionInfo(revisionId, collectionSlug, revisionNumber);\n      } catch (err) {\n        log('error', 'failed to get remote info for revision', {\n          revisionId, collectionSlug, revisionNumber,\n          error: err.message,\n        });\n      }\n    }\n\n    const modsEx = this.initModsEx(this.props);\n    this.nextState.modsEx = modsEx;\n  }\n\n  public async UNSAFE_componentWillReceiveProps(newProps: ICollectionPageProps) {\n    if ((this.props.mods !== newProps.mods)\n        || (this.props.profile !== newProps.profile)\n        || (this.props.collection !== newProps.collection)\n        || (this.props.downloads !== newProps.downloads)\n        || this.installingNotificationsChanged(this.props, newProps)) {\n      this.nextState.modsEx = this.updateModsEx(this.props, newProps);\n      const { collection } = this.props;\n      const { attributes } = collection;\n      const { revisionId, collectionSlug, revisionNumber } = attributes ?? {};\n      if ((revisionId !== undefined) || (collectionSlug !== undefined)) {\n        try {\n          await this.props.driver.infoCache.getRevisionInfo(\n            revisionId, collectionSlug, revisionNumber);\n        } catch (err) {\n          log('error', 'failed to get remote info for revision', {\n            revisionId, collectionSlug, revisionNumber,\n            error: err.message,\n          });\n        }\n      }\n    }\n  }\n\n  public shouldComponentUpdate(newProps: ICollectionPageProps & IConnectedProps,\n                               newState: IComponentState) {\n    if ((this.props.mods !== newProps.mods)\n        || (this.props.profile !== newProps.profile)\n        || (this.props.downloads !== newProps.downloads)\n        || (this.props.collection !== newProps.collection)\n        || this.installingNotificationsChanged(this.props, newProps)\n        || (this.props.activity.mods !== newProps.activity.mods)\n        || (this.props.revisionInfo !== newProps.revisionInfo)\n        || (this.props.showUpvoteResponse !== newProps.showUpvoteResponse)\n        || (this.props.showDownvoteResponse !== newProps.showDownvoteResponse)\n        || (this.state.currentTab !== newState.currentTab)\n        || (this.state.modSelection !== newState.modSelection)\n        || (this.state.modsEx !== newState.modsEx)) {\n      return true;\n    }\n    return false;\n  }\n\n  public render(): JSX.Element {\n    const { t, activity, className, collection, collectionInfo, driver, downloads, language,\n      mods, onSuppressVoteResponse, onVoteSuccess, profile, revisionInfo,\n      showUpvoteResponse, showDownvoteResponse, userInfo, votedSuccess } = this.props;\n    const { currentTab, modSelection, modsEx } = this.state;\n\n    if (collection === undefined) {\n      return null;\n    }\n\n    const incomplete = Object.values(modsEx)\n      .find(mod => (mod.state !== 'installed')\n                && !mod.collectionRule['ignored']\n                && (mod.collectionRule.type === 'requires')) !== undefined;\n\n    const totalSize = Object.values(modsEx).reduce((prev, mod) => {\n      const size = util.getSafe(mod, ['attributes', 'fileSize'], 0);\n      return prev + size;\n    }, 0);\n\n    if (collection !== undefined) {\n      // during installation we display only the remote information in the header area,\n      // that's why we require driver.collectionInfo to be set\n      this.mInstalling = incomplete\n              && !driver.installDone\n              && (driver.collection?.id === collection?.id);\n    } else {\n      this.mInstalling = undefined;\n    }\n\n    const selection = ((this.mInstalling && (driver.collectionInfo !== undefined))\n      ? revisionInfo?.modFiles?.map?.(file => ({ local: undefined, remote: file }))\n      : modSelection) ?? [];\n\n    return (\n      <FlexLayout type='column' className={className}>\n        <FlexLayout.Fixed className='collection-overview-panel'>\n          {(selection.length > 0)\n            ? (\n              <CollectionOverviewSelection\n                t={t}\n                profile={profile}\n                collection={collection}\n                onDeselectMods={this.unselectMods}\n                incomplete={incomplete}\n                modSelection={selection}\n              />\n            )\n            : (\n              <CollectionOverview\n                t={t}\n                language={language}\n                profile={profile}\n                collection={collection}\n                totalSize={totalSize}\n                showUpvoteResponse={showUpvoteResponse}\n                showDownvoteResponse={showDownvoteResponse}\n                revision={this.revisionMerged(collectionInfo, revisionInfo)}\n                votedSuccess={votedSuccess}\n                onSetEnabled={this.setEnabled}\n                onShowMods={this.showMods}\n                onClose={this.close}\n                onClone={this.clone}\n                onRemove={this.remove}\n                onVoteSuccess={onVoteSuccess}\n                onSuppressVoteResponse={onSuppressVoteResponse}\n                incomplete={incomplete}\n              />\n            )}\n        </FlexLayout.Fixed>\n        <FlexLayout.Flex className='collection-mods-panel'>\n          <Tabs id='collection-view-tabs'\n            activeKey={currentTab}\n            onSelect={this.selectTab}\n            unmountOnExit={true}\n            mountOnEnter={true}\n          >\n            <Tab\n              key='instructions'\n              eventKey='instructions'\n              title={t('Instructions')}\n            >\n              <Panel>\n                <Panel.Body>\n                  <CollectionInstructions\n                    t={t}\n                    collection={collection}\n                    mods={mods}\n                    onToggleInstructions={this.toggleInstructions}\n                  />\n                </Panel.Body>\n              </Panel>\n            </Tab>\n            <Tab\n              key='mods'\n              eventKey='mods'\n              title={t('Mods')}\n            >\n              <Panel ref={this.setTableContainerRef}>\n                <Panel.Body>\n                  <Table\n                    tableId='collection-mods'\n                    showDetails={false}\n                    data={modsEx}\n                    staticElements={this.mAttributes}\n                    actions={this.mModActions}\n                    onChangeSelection={this.changeModSelection}\n                  />\n                </Panel.Body>\n              </Panel>\n            </Tab>\n          </Tabs>\n        </FlexLayout.Flex>\n        <FlexLayout.Fixed>\n          <CollectionProgress\n            t={t}\n            isPremium={userInfo?.isPremium}\n            mods={modsEx}\n            profile={profile}\n            downloads={downloads}\n            totalSize={totalSize}\n            activity={activity}\n            onCancel={this.cancel}\n            onPause={this.mInstalling ? this.pause : undefined}\n            onResume={this.mInstalling\n              ? undefined\n              : (driver.collection !== undefined) && !driver.installDone\n                ? null // installing something else\n                : this.resume}\n          />\n        </FlexLayout.Fixed>\n      </FlexLayout>\n    );\n  }\n\n  private selectTab = (tab: any) => {\n    this.context.api.events.emit('analytics-track-navigation', `collections/view/collection/${tab}`);\n    this.nextState.currentTab = tab;\n  }\n\n  private extractAndRemoveComparators = (versionString: string): { version: string, comparator: string | null } => {\n    const comparatorPattern = /[\\~\\^><=]+/;\n    const match = versionString.match(comparatorPattern);\n    const comparator = match ? match[0] : null;\n    const cleanedVersion = versionString.replace(comparatorPattern, '').trim();\n    return { version: cleanedVersion, comparator: comparator };\n}\n\n\n  private progress(props: ICollectionPageProps, mod: IModEx) {\n    const { downloads, notifications } = props;\n\n    if (mod.state === 'downloading') {\n      const { received, size } = downloads[mod.archiveId];\n      if (!!size) {\n        return received / size;\n      }\n    } else if (mod.state === 'installing') {\n      const notification = notifications.find(noti => noti.id === 'install_' + mod.id);\n      if (notification !== undefined) {\n        return (notification.progress ?? 100) / 100;\n      } else {\n        return 1;\n      }\n    }\n\n    return 0;\n  }\n\n  private pause = () => {\n    this.props.onPause(this.props.collection.id);\n  }\n\n  private cancel = () => {\n    this.props.onCancel(this.props.collection.id);\n  }\n\n  private resume = () => {\n    this.props.onResume(this.props.collection.id);\n  }\n\n  private setEnabled = (enable: boolean) => {\n    const { collection, profile } = this.props;\n    actions.setModsEnabled(this.context.api, profile.id, [collection.id], enable);\n  }\n\n  private showMods = () => {\n    const { collection } = this.props;\n    const { api } = this.context;\n\n    const batch = [];\n    batch.push(actions.setAttributeFilter('mods', undefined, undefined));\n    batch.push(actions.setAttributeFilter('mods', 'dependencies',\n      ['depends', collection.id, util.renderModName(collection)]));\n    batch.push(actions.setAttributeSort('mods', 'dependencies', 'asc'));\n    util.batchDispatch(api.store, batch);\n\n    api.events.emit('show-main-page', 'Mods');\n  }\n\n  private close = () => {\n    this.props.onView(undefined);\n  }\n\n  private unselectMods = () => {\n    this.nextState.modSelection = [];\n  }\n\n  private clone = (collectionId: string) => {\n    const { modsEx } = this.state;\n\n    const incomplete = Object.values(modsEx)\n      .filter(mod => (mod.state !== 'installed'));\n\n    if (incomplete.length > 0) {\n      return this.context.api.showDialog('info', 'Cloning incomplete', {\n        text: 'The collection you\\'re trying to clone is incomplete. Vortex can '\n            + 'not include a mod in a collection that isn\\'t installed so if you continue, '\n            + 'the clone will not include these missing mods..',\n        message: incomplete.map(mod => util.renderModName(mod)).join('\\n'),\n      }, [\n        { label: 'Cancel' },\n        { label: 'Clone anyway', action: () => { this.props.onClone(collectionId); } },\n      ]);\n    } else {\n      this.props.onClone(collectionId);\n    }\n  }\n\n  private remove = (collectionId: string) => {\n    this.props.onCancel(collectionId);\n  }\n\n  private changeModSelection = (modIds: string[]) => {\n    const { revisionInfo } = this.props;\n    const { modsEx } = this.state;\n\n    this.nextState.modSelection = modIds.map(modId => {\n      const mod = modsEx[modId];\n      return {\n        local: mod,\n        remote: revisionInfo?.modFiles?.find?.(file => matchRepo(mod, file.file)),\n      };\n    });\n  }\n\n  private setTableContainerRef = (ref: any) => {\n    this.mTableContainerRef = (ref !== null)\n      ? ReactDOM.findDOMNode(ref) as Element\n      : null;\n  }\n\n  private toggleInstructions = (evt: React.MouseEvent<any>) => {\n    const modId = evt.currentTarget.getAttribute('data-modid');\n    const { mods, onShowError, overlays } = this.props;\n    const instructions = this.getModInstructions(modId);\n    if (instructions === undefined) {\n      // This shouldn't be possible\n      const err = new util.ProcessCanceled('No instructions found', modId);\n      err['attachLogOnReport'] = true;\n      err['Collection'] = this.props.collection?.attributes?.collectionSlug;\n      err['Revision'] = this.props.collection?.attributes?.revisionNumber;\n      onShowError('Failed to display instructions', err, true);\n      return;\n    }\n\n    const mod = mods[modId];\n    const modName = util.renderModName(mod);\n    if (overlays[modId]?.content !== undefined) {\n      this.context.api.ext.dismissOverlay?.(modId);\n    } else {\n      this.context.api.ext.showOverlay?.(modId, modName, instructions, {\n        x: evt.pageX, y: evt.pageY });\n    }\n  }\n\n  private getModInstructions = (modId: string) => {\n    const { collection, mods } = this.props;\n    const mod = mods[modId];\n    const modRule = collection.rules?.find(rule => util.testModReference(mod, rule.reference));\n    return modRule?.['extra']?.['instructions'];\n  }\n\n  private installingNotificationsChanged(oldProps: ICollectionPageProps,\n                                         newProps: ICollectionPageProps): boolean {\n    if (oldProps.notifications !== newProps.notifications) {\n      const oldInstalling = oldProps.notifications\n        .filter(noti => noti.id.startsWith(INSTALLING_NOTIFICATION_ID));\n      const newInstalling = newProps.notifications\n        .filter(noti => noti.id.startsWith(INSTALLING_NOTIFICATION_ID));\n\n      return !_.isEqual(oldInstalling, newInstalling);\n    } else {\n      return false;\n    }\n  }\n\n  private modAtLeastDownloaded = (instanceIds: string | string[]) => {\n    const instanceId: string = Array.isArray(instanceIds) ? instanceIds[0] : instanceIds;\n    const mod = this.state.modsEx[instanceId];\n    return mod.state !== null;\n  }\n\n  private ignoreSelected = (modIds: string[]) => {\n    const { collection, profile } = this.props;\n    const { modsEx } = this.state;\n\n    util.batchDispatch(\n      this.context.api.store,\n      modIds.reduce((prev: Redux.Action[], modId: string) => {\n        prev.push(actions.addModRule(profile.gameId, collection.id, {\n          ...modsEx[modId].collectionRule,\n          ignored: true,\n        } as any));\n        return prev;\n      }, []),\n    );\n  }\n\n  private unignoreSelected = (modIds: string[]) => {\n    const { collection, profile } = this.props;\n    const { modsEx } = this.state;\n\n    util.batchDispatch(\n      this.context.api.store,\n      modIds.reduce((prev: Redux.Action[], modId: string) => {\n        prev.push(actions.addModRule(profile.gameId, collection.id, {\n          ...modsEx[modId].collectionRule,\n          ignored: false,\n        } as any));\n        return prev;\n      }, []),\n    );\n  }\n\n  private installManually = (modIds: string[]) => {\n    const { collection } = this.props;\n    const { modsEx } = this.state;\n    const rules = modIds.map(modId => modsEx[modId].collectionRule);\n    this.props.onInstallManually(collection.id, rules);\n  }\n\n  private removeSelected = (modIds: string[]) => {\n    const { t, collection, profile, onRemoveRule } = this.props;\n    const { modsEx } = this.state;\n\n    const filteredIds = modIds\n      .filter(modId => modsEx[modId] !== undefined)\n      .filter(modId =>\n        ['downloaded', 'installed', null].indexOf(modsEx[modId].state) !== -1);\n\n    if (filteredIds.length === 0) {\n      return;\n    }\n\n    const modNames = filteredIds\n      .map(modId => (modsEx[modId].state !== null)\n        ? util.renderModName(modsEx[modId], { version: true })\n        : util.renderModReference(modsEx[modId].collectionRule.reference, undefined));\n\n    const checkboxes = [\n      { id: 'mod', text: t('Remove Mod'), value: true },\n      { id: 'archive', text: t('Delete Archive'), value: false },\n    ];\n\n    if (collection.attributes?.editable === true) {\n      checkboxes.push({ id: 'collection', text: t('Remove from Collection'), value: false });\n    }\n\n    this.context.api.showDialog('question', 'Confirm removal', {\n      text: t('Do you really want to remove this mod?', {\n        count: filteredIds.length,\n        replace: { count: filteredIds.length },\n      }),\n      message: modNames.join('\\n'),\n      checkboxes,\n    }, [ { label: 'Cancel' }, { label: 'Remove' } ])\n      .then((result: types.IDialogResult) => {\n        const removeMods = result.action === 'Remove' && result.input.mod;\n        const removeArchive = result.action === 'Remove' && result.input.archive;\n        const removeRule = result.action === 'Remove' && result.input.collection;\n\n        const wereInstalled = filteredIds\n          .filter(key => (modsEx[key] !== undefined) && (modsEx[key].state === 'installed'))\n          .map(key => modsEx[key].id);\n\n        const archiveIds = filteredIds\n          .filter(key => (modsEx[key] !== undefined)\n                      && (['downloaded', 'installed'].includes(modsEx[key].state))\n                      && (modsEx[key].archiveId !== undefined))\n          .map(key => modsEx[key].archiveId);\n\n        const rulesToRemove = filteredIds.filter(key => modsEx[key] !== undefined);\n\n        return (removeMods\n            ? util.removeMods(this.context.api, profile.gameId, wereInstalled)\n            : Promise.resolve())\n          .then(() => {\n            if (removeArchive) {\n              archiveIds.forEach(archiveId => {\n                this.context.api.events.emit('remove-download', archiveId);\n              });\n            }\n            return Promise.resolve();\n          })\n          .then(() => {\n            if (removeRule) {\n              rulesToRemove.forEach(key => {\n                onRemoveRule(profile.gameId, collection.id, modsEx[key].collectionRule);\n              });\n            }\n          });\n      })\n      .catch(util.ProcessCanceled, err => {\n        this.context.api.sendNotification({\n          id: 'cant-remove-mod',\n          type: 'warning',\n          title: 'Failed to remove mods',\n          message: err.message,\n        });\n      })\n      .catch(util.UserCanceled, () => null)\n      .catch(err => {\n        this.context.api.showErrorNotification('Failed to remove selected mods', err);\n      });\n  }\n\n  private showInMods = (modIds: string[]) => {\n    const { modsEx } = this.state;\n\n    this.showMods();\n\n    const modId = modsEx[modIds[0]].id;\n    setTimeout(() => {\n      this.context.api.events.emit('mods-scroll-to', modId);\n      this.context.api.highlightControl('.' + util.sanitizeCSSId(modId), 5000);\n    }, 2000);\n  }\n\n  private updateModsEx(oldProps: ICollectionPageProps,\n                       newProps: ICollectionPageProps)\n                       : { [modId: string]: IModEx } {\n    // keep our cache updated\n    const result = { ...this.state.modsEx };\n\n    const modifiedDownloads: { [dlId: string]: types.IDownload }\n      = util.objDiff(oldProps.downloads, newProps.downloads);\n\n    const modifiedMods: { [modId: string]: types.IMod }\n      = util.objDiff(oldProps.mods, newProps.mods);\n\n    const modifiedState: { [modId: string]: { enabled: boolean } }\n      = util.objDiff(oldProps.profile.modState ?? {}, newProps.profile.modState ?? {});\n\n    const genRuleMap = (rules: types.IModRule[]) => {\n      return (rules || []).reduce((prev, rule) => {\n        prev[modRuleId(rule)] = rule;\n        return prev;\n      }, {});\n    };\n\n    const modifiedRules: { [ruleId: string]: types.IModRule }\n      = util.objDiff(genRuleMap(oldProps.collection.rules), genRuleMap(newProps.collection.rules));\n\n    // remove any cache entry where the download or the mod has been\n    // removed or changed\n    Object.keys(modifiedDownloads)\n      .filter(dlId => dlId.startsWith('-'))\n      .forEach(dlId => {\n        const refId = Object.keys(result).find(iter => result[iter]?.archiveId === dlId.slice(1));\n        delete result[refId];\n      });\n\n    const invalidateMod = modId => {\n      const realId = modId.slice(1);\n      const refId = Object.keys(result).find(iter => result[iter]?.id === realId);\n      delete result[refId];\n    };\n\n    Object.keys(modifiedMods)\n      .filter(modId => modId.startsWith('-'))\n      .forEach(invalidateMod);\n\n    Object.keys(modifiedState)\n      .filter(modId => modId.startsWith('-')\n                    || modifiedState[modId]?.['-enabled'] !== undefined)\n      .forEach(invalidateMod);\n\n    // refresh for any rule that doesn't currently have an entry or that was modified\n    const { collection } = newProps;\n\n    (collection.rules || [])\n      .filter(rule => ['requires', 'recommends'].includes(rule.type))\n      .forEach(rule => {\n        const id = modRuleId(rule);\n        if ((result[id] === undefined) || (modifiedRules[id] !== undefined)) {\n          result[id] = this.modFromRule(newProps, rule);\n        }\n      });\n\n    // also remove and add entries if a rule was added/removed\n    Object.keys(modifiedRules)\n      .forEach(ruleId => {\n        if (ruleId.startsWith('-')) {\n          delete result[ruleId.slice(1)];\n        } else if (ruleId.startsWith('+')) {\n          result[ruleId.slice(1)] = this.modFromRule(newProps, modifiedRules[ruleId]);\n        }\n      });\n\n    const { profile } = newProps;\n    const { modsEx } = this.state;\n    const pendingDL = Object.keys(modsEx).filter(modId => modsEx[modId]?.state === null);\n    const pendingInstall = Object.keys(modsEx)\n      .filter(modId => ['downloading', 'downloaded', null].includes(modsEx[modId]?.state));\n    const pendingFinish = Object.keys(modsEx)\n      .filter(modId => ['installing', 'installed'].includes(modsEx[modId]?.state));\n\n    // now, also check every added download or mod whether they may be relevant for any unfulfilled\n    // rule\n    Object.keys(modifiedDownloads)\n      .filter(dlId => dlId.startsWith('+'))\n      .forEach(dlId => {\n        const download = newProps.downloads[dlId.slice(1)];\n        const match = pendingDL.find(modId =>\n          testDownloadReference(download, modsEx[modId].collectionRule.reference));\n        if (match !== undefined) {\n          result[match] = this.modFromDownload(dlId.slice(1),\n                                               download,\n                                               modsEx[match].collectionRule);\n        }\n      });\n\n    // this will get called for each mod that has been enabled, its state changed\n    // or an attribute changed (since attribute changes might affect how rules get resolved to\n    // actual mods)\n    const updateMod = modId => {\n      const realId = modId.startsWith('+') ? modId.slice(1) : modId;\n      const mod = newProps.mods[realId];\n      if (mod === undefined) {\n        return;\n      }\n      if (mod.state === 'installing') {\n        // in this state the mod doesn't contain enough information to match a reference, go\n        // through the download instead\n        const dlId = mod.archiveId;\n        const download = newProps.downloads[dlId];\n        const match = pendingInstall.find(iter =>\n          testDownloadReference(download, modsEx[iter].collectionRule.reference));\n        if (match !== undefined) {\n          result[match] = {\n            ...this.modFromDownload(dlId, download, modsEx[match].collectionRule),\n            id: modId.slice(1),\n            state: 'installing',\n          };\n        }\n      } else {\n        const match = pendingFinish.find(iter =>\n          util.testModReference(mod, modsEx[iter].collectionRule.reference));\n        if (match !== undefined) {\n          result[match] = {\n            ...mod,\n            ...(profile.modState || {})[mod.id],\n            collectionRule: modsEx[match].collectionRule,\n          };\n        }\n      }\n    };\n\n    Object.keys(modifiedMods)\n      .filter(modId => !modId.startsWith('-')\n                    && (modId.startsWith('+')\n                        || (modifiedMods[modId]['+state'] !== undefined)\n                        || (modifiedMods[modId]['attributes'] !== undefined)\n                        ))\n      .forEach(updateMod);\n\n    Object.keys(modifiedState)\n      .filter(modId => modifiedState[modId]?.['+enabled'] !== undefined)\n      .forEach(updateMod);\n\n    // finally, update any rule that had progress\n    Object.keys(modifiedDownloads)\n      .filter(dlId => !dlId.startsWith('-') && !dlId.startsWith('+'))\n      .forEach(dlId => {\n        let ruleId = Object.keys(result).find(modId => result[modId]?.archiveId === dlId);\n        if ((ruleId === undefined)\n            && (newProps.downloads[dlId]?.modInfo?.referenceTag !== undefined)) {\n          ruleId = Object.keys(result).find(id =>\n            (result[id]?.archiveId === undefined)\n            && testDownloadReference(newProps.downloads[dlId],\n                                     result[id]?.collectionRule.reference));\n          if (ruleId !== undefined) {\n            result[ruleId] = {\n              ...result[ruleId],\n              archiveId: dlId,\n              state: 'downloading',\n            };\n          }\n        }\n\n        if (ruleId !== undefined) {\n          result[ruleId] = {\n            ...result[ruleId],\n            progress: this.progress(newProps, result[ruleId]),\n          };\n\n          const dl = newProps.downloads[result[ruleId]?.archiveId];\n          if (['finished', 'failed'].includes(dl.state) && !pendingFinish.includes(ruleId)) {\n            result[ruleId].state = 'downloaded';\n          }\n        }\n      });\n\n    newProps.notifications.forEach(noti => {\n      if ((noti.id !== undefined) && (noti.id.startsWith('install_'))) {\n        const modId = noti.id.slice(8);\n        const ruleId = Object.keys(result).find(iter => result[iter]?.id === modId);\n        if (ruleId !== undefined) {\n          result[ruleId] = {\n            ...result[ruleId],\n            progress: this.progress(newProps, result[ruleId]),\n          };\n        }\n      }\n    });\n\n    return result;\n  }\n\n  private modFromDownload(dlId: string, download: types.IDownload, rule: types.IModRule): IModEx {\n    const modId = download.modInfo?.meta?.details?.modId\n                ?? download.modInfo?.nexus?.ids?.modId;\n\n    return {\n      id: dlId,\n      type: '',\n      installationPath: undefined,\n      archiveId: dlId,\n      enabledTime: 0,\n      state: download.state === 'finished' ? 'downloaded' : 'downloading',\n      enabled: false,\n      collectionRule: rule,\n      attributes: {\n        customFileName: download?.modInfo?.name,\n        fileName: download.modInfo?.nexus?.fileInfo?.name\n              ?? util.renderModReference(rule.reference),\n        fileSize: download.size ?? rule.reference.fileSize,\n        name: dlId,\n        version: download.modInfo?.nexus?.fileInfo?.mod_version,\n        author: download.modInfo?.nexus?.modInfo?.author,\n        uploader: download.modInfo?.nexus?.modInfo?.user?.name,\n        uploaderId: download.modInfo?.nexus?.modInfo?.user?.id,\n        category: download.modInfo?.nexus?.modInfo?.category_id,\n        source: download.modInfo?.nexus !== undefined ? 'nexus' : undefined,\n        modId,\n        downloadGame: Array.isArray(download.game) ? download.game[0] : download.game,\n      },\n    };\n  }\n\n  private modFromRule(props: ICollectionPageProps, rule: types.IModRule): IModEx {\n    const { downloads, mods, profile } = props;\n\n    const mod: types.IMod = util.findModByRef(rule.reference, mods);\n\n    if (mod !== undefined) {\n      return {\n        ...mods[mod.id],\n        ...profile.modState?.[mod.id],\n        collectionRule: rule,\n      };\n    } else {\n      const dlId: string = util.findDownloadByRef(rule.reference, downloads);\n\n      if (dlId !== undefined) {\n        return this.modFromDownload(dlId, downloads[dlId], rule);\n      } else {\n        // not downloaded and not installed yet\n        const name = util.renderModReference(rule.reference, undefined);\n        return {\n          id: name,\n          state: null,\n          type: '',\n          installationPath: undefined,\n          enabledTime: 0,\n          attributes: {\n            fileSize: rule.reference.fileSize,\n            ...(rule.extra || {}),\n            // rule.extra.fileName is an actual file name, in the mod attributes we expect\n            // it to be the name specified by the author\n            fileName: rule.extra?.name,\n          },\n          enabled: false,\n          collectionRule: rule,\n        };\n      }\n    }\n  }\n\n  private initModsEx(props: ICollectionPageProps): { [modId: string]: IModEx } {\n    const { collection } = props;\n\n    return (collection?.rules ?? [])\n      .filter(rule => ['requires', 'recommends'].includes(rule.type))\n      .reduce<{ [modId: string]: IModEx }> ((prev, rule) => {\n        const id = modRuleId(rule);\n        prev[id] = this.modFromRule(props, rule);\n        return prev;\n      }, {});\n  }\n}\n\nfunction mapStateToProps(state: IStateEx, ownProps: ICollectionPageProps): IConnectedProps {\n  const { nexus } = state.persistent as any;\n  const { collection } = ownProps;\n\n  let votedSuccess;\n\n  let revisionInfo: IRevision;\n  let collectionInfo: ICollection;\n\n  if (collection?.attributes?.revisionId !== undefined) {\n    revisionInfo =\n      state.persistent.collections.revisions?.[collection.attributes.revisionId]?.info;\n    if (revisionInfo?.collection !== undefined) {\n      collectionInfo =\n        state.persistent.collections.collections?.[revisionInfo.collection.id]?.info;\n    }\n    votedSuccess = revisionInfo?.metadata?.ratingValue ?? 'abstained';\n  }\n\n  return {\n    userInfo: nexus.userInfo,\n    votedSuccess,\n    activity: state.session.base.activity,\n    language: state.settings.interface.language,\n    overlays: state.session.overlays.overlays,\n    collectionInfo,\n    revisionInfo,\n    showUpvoteResponse: state.settings.interface.usage['collection-upvote-response-dialog'] ?? true,\n    showDownvoteResponse: state.settings.interface.usage['collection-downvote-response-dialog'] ?? true,\n  };\n}\n\nfunction mapDispatchToProps(dispatch: Redux.Dispatch): IActionProps {\n  return {\n    onSetModEnabled: (profileId: string, modId: string, enable: boolean) =>\n      dispatch(actions.setModEnabled(profileId, modId, enable)),\n    onSetAttributeFilter: (tableId: string, filterId: string, filterValue: any) =>\n      dispatch(actions.setAttributeFilter(tableId, filterId, filterValue)),\n    onRemoveRule: (gameId: string, modId: string, rule: types.IModRule) =>\n      dispatch(actions.removeModRule(gameId, modId, rule)),\n    onShowError: (message: string, details?: string | Error | any, allowReport?: boolean) =>\n      util.showError(dispatch, message, details, { allowReport }),\n    onSuppressVoteResponse: (response: 'upvote' | 'downvote') =>\n      dispatch(actions.showUsageInstruction(`collection-${response}-response-dialog`, false)),\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(\n  CollectionPage) as any as React.ComponentType<ICollectionPageProps>;\n","import i18next from 'i18next';\nimport * as React from 'react';\nimport { types, util } from 'vortex-api';\n\nexport interface ICollectionReleaseStatusProps {\n  t: i18next.TFunction;\n  collection: types.IMod;\n  active: boolean;\n  enabled: boolean;\n  incomplete: boolean;\n}\n\nfunction CollectionReleaseStatus(props: ICollectionReleaseStatusProps) {\n  const { t, active, collection, enabled, incomplete } = props;\n  if (active) {\n    if (incomplete) {\n      return <div className='collection-status incomplete'>{t('Incomplete')}</div>;\n    } else if ((util.getSafe(collection.attributes, ['collectionId'], undefined) !== undefined)\n               && util.getSafe(collection.attributes, ['editable'], false)) {\n      return <div className='collection-status published'>{t('Published')}</div>;\n    } else if (enabled) {\n      return <div className='collection-status enabled'>{t('Enabled')}</div>;\n    } else {\n      return <div className='collection-status disabled'>{t('Disabled')}</div>;\n    }\n  } else {\n    return null;\n  }\n}\n\nexport default CollectionReleaseStatus;\n","import * as React from 'react';\nimport { Icon, types } from 'vortex-api';\n\ninterface INewRevisionMarkerProps {\n  t: types.TFunction;\n  collection: types.IMod;\n  updating: boolean;\n}\n\nfunction NewRevisionMarker(props: INewRevisionMarkerProps) {\n  const { t, collection, updating } = props;\n\n  if ((collection.attributes?.['newestVersion'] === undefined)\n      || (parseInt(collection.attributes?.['newestVersion'], 10)\n          <= parseInt(collection.attributes?.['version'], 10))) {\n    return null;\n  }\n\n  return (\n    <div className='collections-new-revision'>\n      <Icon name={updating ? 'spinner_new' : 'details'} />\n      {t('Update')}\n    </div>\n  );\n}\n\nexport default NewRevisionMarker;\n","import { IRevision } from '@nexusmods/nexus-api';\nimport * as path from 'path';\nimport * as React from 'react';\nimport { Panel } from 'react-bootstrap';\nimport { Icon, IconBar, Image, types } from 'vortex-api';\n\nexport interface IRemoteTileProps {\n  t: types.TFunction;\n  added?: types.IMod;\n  incomplete: boolean;\n  revision: IRevision;\n  onCloneCollection: (modId: string) => Promise<void>;\n  onResumeCollection: (modId: string) => void;\n  onInstallCollection: (revision: IRevision) => Promise<void>;\n}\n\nfunction HoverMenu(props: IRemoteTileProps) {\n  const {\n    t, added, incomplete, revision,\n    onCloneCollection, onInstallCollection, onResumeCollection,\n  } = props;\n\n  const installOwnCollection = React.useCallback(() => {\n    if (added !== undefined) {\n      onResumeCollection(added.id);\n    } else {\n      onInstallCollection(revision);\n    }\n  }, [added, revision, onInstallCollection, onResumeCollection]);\n\n  const cloneOwnCollection = React.useCallback(() => {\n    onCloneCollection(added.id);\n  }, [onCloneCollection, added]);\n\n  const staticElements = [];\n\n  if ((added !== undefined) && !incomplete) {\n    staticElements.push({\n      title: 'Edit (Requires clone)',\n      icon: 'edit',\n      action: () => cloneOwnCollection(),\n    });\n  } else {\n    staticElements.push({\n      title: 'Install',\n      icon: 'install',\n      action: () => installOwnCollection(),\n    }, {\n      title: 'Edit',\n      icon: 'edit',\n      condition: (instanceId: string | string[], data?: any) =>\n        t('Your collection must be installed first and then cloned to make edits.'),\n      action: () => {\n        // nop\n      },\n    });\n  }\n\n  staticElements.push();\n\n  return (\n    <div className='thumbnail-hover-menu'>\n      <div key='primary-buttons' className='hover-content'>\n        <IconBar\n          t={t}\n          id={`collection-thumbnail-${revision.collection.slug}`}\n          className='buttons'\n          group='collection-actions'\n          instanceId={revision.collection.slug}\n          staticElements={staticElements}\n          collapse={false}\n          buttonType='both'\n          orientation='vertical'\n          clickAnywhere={true}\n        />\n      </div>\n    </div>\n  );\n}\n\nfunction RemoteTile(props: IRemoteTileProps) {\n  const {t, revision, onCloneCollection, onInstallCollection, onResumeCollection} = props;\n\n  const classes = ['collection-thumbnail', 'collection-remote'];\n  const images: string[] = [];\n  if (!!revision.collection.tileImage?.url) {\n    images.push(revision.collection.tileImage.url);\n  }\n  images.push(path.join(__dirname, 'fallback_tile.png'));\n\n  return (\n    <Panel className={classes.join(' ')}>\n      <Panel.Body className='collection-thumbnail-body'>\n        <Image\n          className='thumbnail-img'\n          srcs={images}\n          circle={false}\n        />\n        <div className='bottom'>\n          <div className='collection-revision-and-rating'>\n            <div className='revision-number'>\n              {t('Revision {{number}}', {\n                replace: {\n                  number: revision.revisionNumber,\n                }\n              })}\n            </div>\n            <div className={classes.join(' ')}>\n              <Icon name='health' />\n              {t('{{rating}}%', { replace: { rating: revision.rating.average } })}\n            </div>\n          </div>\n          <div className='name no-hover'>\n            {revision.collection.name}\n          </div>\n          <div className='details'>\n            <div className='author'>\n              {t('By {{uploader}}', {\n                replace: {\n                  uploader: revision.collection.user.name,\n                },\n              })}\n            </div>\n            <div><Icon name='mods' />{revision.modFiles.length}</div>\n          </div>\n        </div>\n        <HoverMenu\n          t={t}\n          revision={revision}\n          added={props.added}\n          incomplete={props.incomplete}\n          onInstallCollection={onInstallCollection}\n          onCloneCollection={onCloneCollection}\n          onResumeCollection={onResumeCollection}\n        />\n      </Panel.Body>\n    </Panel>\n  );\n}\n\nexport default RemoteTile;\n","import * as React from 'react';\nimport { TFunction } from 'react-i18next';\nimport { Icon, log } from 'vortex-api';\nimport InfoCache from '../../util/InfoCache';\n\nexport interface ISuccessRatingProps {\n  t: TFunction;\n  infoCache: InfoCache;\n  collectionSlug: string;\n  revisionNumber: number;\n  revisionId: string;\n}\n\nexport function SuccessRating(props: ISuccessRatingProps) {\n  const { t, collectionSlug, infoCache, revisionNumber, revisionId } = props;\n\n  const [rating, setRating] = React.useState(undefined);\n\n  React.useEffect(() => {\n    (async () => {\n      try {\n        const rev = await infoCache.getRevisionInfo(revisionId, collectionSlug, revisionNumber);\n        if ((rev?.rating?.total ?? 0) < 3) {\n          setRating(undefined);\n        } else {\n          setRating(rev.rating.average);\n        }\n      } catch (err) {\n        log('error', 'failed to get remote info for revision', {\n          revisionId, collectionSlug, revisionNumber,\n          error: err.message,\n        });\n      }\n    })();\n  }, [revisionId]);\n\n  const classes = [\n    'collection-success-indicator',\n  ];\n\n  if (rating === undefined) {\n    classes.push('success-rating-insufficient');\n  } else if (rating < 50) {\n    classes.push('success-rating-bad');\n  } else if (rating < 75) {\n    classes.push('success-rating-dubious');\n  } else {\n    classes.push('success-rating-good');\n  }\n\n  return (\n    <div className={classes.join(' ')}>\n      <Icon name='health' />\n      {(rating === undefined)\n        ? t('Awaiting')\n        : t('{{rating}}%', { replace: { rating } })}\n    </div>\n  );\n}\n","import I18next from 'i18next';\r\nimport memoizeOne from 'memoize-one';\r\nimport * as path from 'path';\r\nimport * as React from 'react';\r\nimport { FormControl, FormGroup, Panel } from 'react-bootstrap';\r\nimport { connect } from 'react-redux';\r\nimport * as Redux from 'redux';\r\nimport { actions, ComponentEx, Icon, IconBar, Image, selectors, tooltip, types, util } from 'vortex-api';\r\nimport { AUTHOR_UNKNOWN, MAX_COLLECTION_NAME_LENGTH, MIN_COLLECTION_NAME_LENGTH } from '../../constants';\r\nimport InfoCache from '../../util/InfoCache';\r\nimport CollectionReleaseStatus from '../CollectionReleaseStatus';\r\nimport NewRevisionMarker from './NewRevisionMarker';\r\nimport { SuccessRating } from './SuccessRating';\r\n\r\nexport interface IBaseProps {\r\n  t: I18next.TFunction;\r\n  className?: string;\r\n  gameId: string;\r\n  installing?: types.IMod;\r\n  collection: types.IMod;\r\n  infoCache?: InfoCache;\r\n  mods?: { [modId: string]: types.IMod };\r\n  incomplete?: boolean;\r\n  details: boolean | 'some';\r\n  forceRevisionDisplay?: number;\r\n  imageTime: number;\r\n  onResume?: (modId: string) => void;\r\n  onPause?: (modId: string) => void;\r\n  onEdit?: (modId: string) => void;\r\n  onView?: (modId: string) => void;\r\n  onRemove?: (modId: string) => void;\r\n  onUpload?: (modId: string) => void;\r\n  onUpdate?: (moidId: string) => Promise<void>;\r\n}\r\n\r\ninterface IConnectedProps {\r\n  profile: types.IProfile;\r\n}\r\n\r\ninterface IActionProps {\r\n  onSetModAttribute: (gameId: string, modId: string, key: string, value: any) => void;\r\n}\r\n\r\ntype IProps = IBaseProps & IConnectedProps & IActionProps;\r\n\r\ninterface IModNameFieldProps {\r\n  t: types.TFunction;\r\n  name: string;\r\n  onChange: (name: string) => void;\r\n}\r\n\r\nfunction ModNameField(props: IModNameFieldProps) {\r\n  const { t, name, onChange } = props;\r\n\r\n  const [editing, setEditing] = React.useState(false);\r\n  const [tempName, setTempName] = React.useState(name);\r\n\r\n  const changeInput = React.useCallback((evt: React.FormEvent<any>) => {\r\n    setTempName(evt.currentTarget.value.slice(0, MAX_COLLECTION_NAME_LENGTH));\r\n  }, [setTempName]);\r\n\r\n  const validationState = React.useCallback(() => {\r\n    if ((tempName.length < MIN_COLLECTION_NAME_LENGTH)\r\n        || (tempName.length > MAX_COLLECTION_NAME_LENGTH)) {\r\n      return 'error';\r\n    } else {\r\n      return 'success';\r\n    }\r\n  }, [tempName]);\r\n\r\n  const apply = React.useCallback(() => {\r\n    if (validationState() === 'success') {\r\n      onChange(tempName);\r\n      setEditing(false);\r\n    }\r\n  }, [setEditing, tempName]);\r\n\r\n  const keyPress = React.useCallback((evt: React.KeyboardEvent<any>) => {\r\n    if (evt.key === 'Enter') {\r\n      apply();\r\n    }\r\n  }, [apply]);\r\n\r\n  const startEdit = React.useCallback(() => {\r\n    setEditing(true);\r\n  }, [setEditing]);\r\n\r\n  return (\r\n    <div className={`collection-name ${editing ? 'editing' : 'displaying'}`}>\r\n      {editing ? (\r\n        <>\r\n          <FormGroup\r\n            controlId='formBasicText'\r\n            validationState={validationState()}\r\n          >\r\n            <FormControl\r\n              type='text'\r\n              value={tempName}\r\n              placeholder={t('Collection Name')}\r\n              onChange={changeInput}\r\n              autoFocus={true}\r\n              onKeyPress={keyPress}\r\n            />\r\n          </FormGroup>\r\n          <tooltip.IconButton icon='input-confirm' tooltip={t('Save name')} onClick={apply} />\r\n        </>\r\n      ) : (\r\n        <>\r\n          <div className='name'>{tempName}</div>\r\n          <tooltip.IconButton icon='edit' tooltip={t('Change name')} onClick={startEdit} />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nclass CollectionThumbnail extends ComponentEx<IProps, { updating: boolean }> {\r\n  private imageURLs = memoizeOne((collection: types.IMod) =>\r\n    [collection.attributes?.pictureUrl, path.join(__dirname, 'fallback_tile.png')]\r\n      .filter(iter => iter !== undefined));\r\n\r\n  public constructor(props: IProps) {\r\n    super(props);\r\n  \r\n    this.initState({ \r\n      updating: false\r\n    });\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    const { t, collection, details, infoCache,\r\n            incomplete, mods, onEdit, profile, forceRevisionDisplay } = this.props;\r\n\r\n    if (collection === undefined) {\r\n      return null;\r\n    }\r\n\r\n    const active = util.getSafe(profile, ['modState', collection.id, 'enabled'], false);\r\n\r\n    const refMods: types.IModRule[] = (collection.rules ?? [])\r\n      .filter(rule => ['requires', 'recommends'].includes(rule.type));\r\n\r\n    const totalSize: number = Object.values(collection.rules ?? []).reduce((prev, rule) => {\r\n      if (rule.reference.fileSize !== undefined) {\r\n        return prev + rule.reference.fileSize;\r\n      } else if ((rule.reference.id !== undefined) && (mods !== undefined)) {\r\n        return prev + (mods[rule.reference.id]?.attributes?.fileSize ?? 0);\r\n      } else {\r\n        return prev;\r\n      }\r\n    }, 0);\r\n\r\n    const classes = ['collection-thumbnail'];\r\n\r\n    const hasMenu = (this.actions.length > 0);\r\n\r\n    if (this.props.className !== undefined) {\r\n      classes.push(this.props.className);\r\n    }\r\n\r\n    if (hasMenu) {\r\n      classes.push('has-menu');\r\n    }\r\n\r\n    const { revisionId, collectionSlug, revisionNumber } = collection.attributes ?? {};\r\n\r\n    const validRemote = (revisionId !== undefined)\r\n                     && (collectionSlug !== undefined)\r\n                     && (revisionNumber !== undefined);\r\n\r\n    return (\r\n      <Panel className={classes.join(' ')} bsStyle={active ? 'primary' : 'default'}>\r\n        <Panel.Body className='collection-thumbnail-body'>\r\n          {(details === true)\r\n            ? <NewRevisionMarker t={t} collection={collection} updating={this.state.updating} />\r\n            : null}\r\n          <Image\r\n            className='thumbnail-img'\r\n            srcs={this.imageURLs(collection)}\r\n            circle={false}\r\n          />\r\n          {(details !== false) ? <div className='gradient' /> : null}\r\n          \r\n          {(details !== false) ? (\r\n            <div className={`bottom ${onEdit !== undefined ? 'editable' : ''}`}>\r\n              <CollectionReleaseStatus\r\n              t={t}\r\n              active={active}\r\n              enabled={profile?.modState?.[collection.id]?.enabled ?? false}\r\n              collection={collection}\r\n              incomplete={incomplete}\r\n            />\r\n              <div className='collection-revision-and-rating'>\r\n                <div className='revision-number'>\r\n                  {t('Revision {{number}}{{forceRevision}}', { replace: {\r\n                    number: collection.attributes?.version ?? '0',\r\n                    forceRevision: forceRevisionDisplay === undefined ? '' : ' ➔ ' + forceRevisionDisplay,\r\n                  }})}\r\n                </div>\r\n                {(infoCache !== undefined) && validRemote\r\n                  ? <SuccessRating\r\n                      t={t}\r\n                      infoCache={infoCache}\r\n                      collectionSlug={collectionSlug}\r\n                      revisionNumber={revisionNumber}\r\n                      revisionId={revisionId}\r\n                  />\r\n                  : null}\r\n              </div>\r\n              <div className='name no-hover'>\r\n                {util.renderModName(collection, { version: false })}\r\n              </div>\r\n              {onEdit !== undefined ? (\r\n                <div className='hover'>\r\n                  <ModNameField\r\n                    t={t}\r\n                    name={util.renderModName(collection, { version: false })}\r\n                    onChange={this.changeName}\r\n                  />\r\n                </div>\r\n                ) : null}\r\n              <div className='details'>\r\n                <div className='author'>\r\n                  {/*\r\n                  <BSImage\r\n                    src={collection.attributes?.uploaderAvatar ?? 'assets/images/noavatar.png'}\r\n                    circle\r\n                  />\r\n                  */}\r\n                  {t('By {{uploader}}', { replace: {\r\n                    uploader: collection.attributes?.uploader ?? t(AUTHOR_UNKNOWN)},\r\n                    })}\r\n                </div>\r\n                <div><Icon name='mods' />{refMods.length}</div>\r\n                {/*<div><Icon name='archive' />{util.bytesToString(totalSize)}</div>*/}\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n          {hasMenu ? (\r\n            <div className='thumbnail-hover-menu'>\r\n              {this.renderMenu(refMods, totalSize)}\r\n            </div>\r\n          ) : null}\r\n        </Panel.Body>\r\n      </Panel>\r\n    );\r\n  }\r\n\r\n  private invoke<T>(action: (inst: string) => T, inst: string[]): T {\r\n    if ((action !== undefined) && (inst !== undefined) && (inst.length > 0)) {\r\n      return action(inst[0]);\r\n    }\r\n  }\r\n\r\n  private get actions() {\r\n    const { t, collection, incomplete, installing, onEdit, onPause, onUpload,\r\n            onRemove, onResume, onUpdate, onView } = this.props;\r\n\r\n    const result: types.IActionDefinition[] = [];\r\n\r\n    if (onUpdate) {\r\n      result.push({\r\n        title: 'Update',\r\n        icon: 'auto-update',\r\n        group: 'optional',\r\n        condition: () => {\r\n          const { attributes } = this.props.collection;\r\n          if (this.state.updating) {\r\n            return t('Already updating');\r\n          }\r\n          return (attributes?.newestVersion !== undefined)\r\n              && (parseInt(attributes.newestVersion, 10) > parseInt(attributes.version, 10));\r\n        },\r\n        action: (instanceIds: string[]) => {\r\n          const prom = this.invoke(onUpdate, instanceIds);\r\n          if (prom !== undefined) {\r\n            this.nextState.updating = true;\r\n            prom\r\n              .catch(err => {\r\n                if (!(err instanceof util.UserCanceled)) {\r\n                  this.context.api.showErrorNotification('Failed to update collection', err);\r\n                }\r\n              })\r\n              .finally(() => {\r\n                this.nextState.updating = false;\r\n              });\r\n          }\r\n        },\r\n      } as any);\r\n    }\r\n    if (onView) {\r\n      result.push({\r\n        title: 'View',\r\n        icon: 'show',\r\n        action: (instanceIds: string[]) => {\r\n          this.invoke(onView, instanceIds);\r\n        },\r\n      });\r\n      if (incomplete && (onResume !== undefined)) {\r\n        result.push({\r\n          title: 'Resume',\r\n          icon: 'resume',\r\n          condition: () => {\r\n            if (installing === undefined) {\r\n              return true;\r\n            }\r\n            return (installing.id === collection.id)\r\n              ? false\r\n              : t('Another collection is being installed') as string;\r\n          },\r\n          action: (instanceIds: string[]) => {\r\n            if (onResume !== undefined) {\r\n              this.invoke(onResume, instanceIds);\r\n            }\r\n            this.invoke(onView, instanceIds);\r\n          },\r\n        });\r\n      }\r\n      if (incomplete && (onPause !== undefined)) {\r\n        result.push({\r\n          title: 'Pause',\r\n          icon: 'pause',\r\n          condition: () => installing?.id === collection.id,\r\n          action: (instanceIds: string[]) => {\r\n            this.invoke(onPause, instanceIds);\r\n            this.invoke(onView, instanceIds);\r\n          },\r\n        });\r\n      }\r\n    }\r\n    if (onEdit) {\r\n      result.push({\r\n        title: 'Edit',\r\n        icon: 'edit',\r\n        action: (instanceIds: string[]) => this.invoke(onEdit, instanceIds),\r\n      });\r\n    }\r\n    if (onRemove) {\r\n      result.push({\r\n        title: 'Remove',\r\n        icon: 'remove',\r\n        action: (instanceIds: string[]) => this.invoke(onRemove, instanceIds),\r\n      });\r\n    }\r\n\r\n    if (onUpload) {\r\n      const nextRev = collection.attributes?.revisionNumber;\r\n\r\n      result.push({\r\n        title: t(nextRev !== undefined ? 'Upload Update' : 'Upload New'),\r\n        icon: 'upload',\r\n        action: (instanceIds: string[]) => this.invoke(onUpload, instanceIds),\r\n        condition: () => {\r\n          const refMods: types.IModRule[] = (collection.rules ?? [])\r\n            .filter(rule => ['requires', 'recommends'].includes(rule.type));\r\n          if (refMods.length === 0) {\r\n            return (this.props.t('Can\\'t upload an empty collection')) as string;\r\n          } else {\r\n            return true;\r\n          }\r\n        },\r\n      });\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  private renderMenu(refMods: types.IModRule[], totalSize: number): JSX.Element[] {\r\n    const { t, collection } = this.props;\r\n\r\n    return [(\r\n      <div key='primary-buttons' className='hover-content'>\r\n        <IconBar\r\n          id={`collection-thumbnail-${collection.id}`}\r\n          className='buttons'\r\n          group='collection-actions'\r\n          instanceId={collection.id}\r\n          staticElements={this.actions}\r\n          collapse={false}\r\n          buttonType='both'\r\n          orientation='vertical'\r\n          clickAnywhere={true}\r\n          t={t}\r\n        />\r\n      </div>\r\n    )];\r\n  }\r\n\r\n  private changeName = (name: string) => {\r\n    const { collection, onSetModAttribute, profile } = this.props;\r\n\r\n    onSetModAttribute(profile.gameId, collection.id, 'customFileName', name);\r\n  }\r\n}\r\n\r\nconst emptyObj = {};\r\n\r\nfunction mapStateToProps(state: types.IState, ownProps: IBaseProps): IConnectedProps {\r\n  return {\r\n    profile: selectors.activeProfile(state),\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Redux.Dispatch): IActionProps {\r\n  return {\r\n    onSetModAttribute: (gameId: string, modId: string, key: string, value: any) =>\r\n      dispatch(actions.setModAttribute(gameId, modId, key, value)),\r\n  };\r\n}\r\n\r\nexport default\r\n  connect(mapStateToProps, mapDispatchToProps)(\r\n    CollectionThumbnail) as any as React.ComponentType<IBaseProps>;\r\n","import { INI_TWEAKS_PATH, NAMESPACE, OPTIONAL_TWEAK_PREFIX } from '../constants';\nimport { IExtendedInterfaceProps } from '../types/IExtendedInterfaceProps';\n\nimport I18next from 'i18next';\nimport * as path from 'path';\nimport * as React from 'react';\nimport { Button, ControlLabel, Table } from 'react-bootstrap';\nimport { withTranslation } from 'react-i18next';\nimport { connect } from 'react-redux';\nimport Select from 'react-select';\nimport * as Redux from 'redux';\nimport { ThunkDispatch } from 'redux-thunk';\nimport { ActionDropdown, actions, ComponentEx, FlexLayout, Icon, PureComponentEx, selectors,\n         More, types, Usage, util } from 'vortex-api';\n\nimport { IINITweak, TweakArray } from '../types/IINITweak';\n\nexport interface IBaseProps extends IExtendedInterfaceProps {\n  settingsFiles: string[];\n  onRefreshTweaks: (modPath: string) => Promise<TweakArray>;\n  onAddIniTweak: (modPath: string, settingsFiles: string[]) => Promise<void>;\n  onRemoveIniTweak: (modPath: string, tweak: IINITweak) => Promise<void>;\n}\n\ninterface IConnectedProps {\n  modsPath: string;\n}\n\ninterface IActionProps {\n  onSetINITweakEnabled: (gameId: string, modId: string, tweak: string, enabled: boolean) => void;\n}\n\ntype IProps = IBaseProps & IConnectedProps & IActionProps;\n\ninterface IComponentState {\n  tweaks: TweakArray;\n}\n\ninterface ITweakProps {\n  t: I18next.TFunction;\n  tweaksPath: string;\n  fileName: string;\n  enabled: boolean;\n  onToggle: (fileName: string, enabled: boolean) => void;\n  onRemoveTweak: (tweak: IINITweak) => void;\n}\n\nclass Tweak extends PureComponentEx<ITweakProps, {}> {\n  private mStatusActions: types.IActionDefinition[] = [\n    {\n      icon: 'toggle-enabled',\n      title: 'Enabled',\n      action: () => this.disable(),\n      condition: () => this.props.enabled,\n    },\n    {\n      icon: 'toggle-disabled',\n      title: 'Disabled',\n      action: () => this.enable(),\n      condition: () => !this.props.enabled,\n    },\n    {\n      icon: 'delete',\n      title: 'Remove',\n      action: () => this.remove(),\n    },\n  ];\n\n  public render(): JSX.Element {\n    const { t, fileName } = this.props;\n    const match = fileName.match(/(.*)\\[(.*)\\]\\.ini/);\n\n    if (!match || (match.length < 3)) {\n      return null;\n    }\n\n    return (\n      <tr>\n        <td className='cell-status'>{this.renderStatusActions()}</td>\n        <td className='cell-tweak-name'>{match[1]}</td>\n        <td className='cell-filename'>{`${match[2]}.ini`}</td>\n        <td className='cell-edit'><a onClick={this.edit}><Icon name='edit' /></a></td>\n      </tr>\n    );\n  }\n\n  private renderStatusActions(): JSX.Element {\n    const { t } = this.props;\n    return (\n      <ActionDropdown\n        t={t}\n        buttonType='text'\n        staticElements={this.mStatusActions}\n        className='collections-ini-tweaks-actions'\n      />\n    );\n  }\n\n  private edit = () => {\n    const { tweaksPath, fileName } = this.props;\n    util.opn(path.join(tweaksPath, fileName)).catch(() => null)\n  }\n\n  private enable = () => {\n    this.toggle(true);\n  }\n\n  private disable = () => {\n    this.toggle(false);\n  }\n\n  private remove = () => {\n    const { fileName, onRemoveTweak } = this.props;\n    onRemoveTweak({ fileName });\n  }\n\n  private toggle = (enabled: boolean) => {\n    const { fileName, onToggle } = this.props;\n    onToggle(fileName, enabled);\n  }\n}\n\nclass TweakList extends ComponentEx<IProps, IComponentState> {\n  constructor(props: IProps) {\n    super(props);\n    this.initState({\n      tweaks: [],\n    });\n  }\n\n  public componentDidMount() {\n    this.refreshTweaks();\n  }\n\n  public render(): JSX.Element {\n    const { t, collection } = this.props;\n    const { tweaks } = this.state;\n\n    if (collection === undefined) {\n      return null;\n    }\n\n    return (\n      <FlexLayout type='column' className='ini-tweaks-container'>\n        <ControlLabel>\n          <p>\n            {t('This screen lets you set up tweaks for the game ini file that will be applied '\n              + 'to a user\\'s setup when they use your collection.')}\n          </p>\n          <p>\n            {t('Users can toggle these ini tweaks individually so you may want to set up '\n              + 'multiple tweaks to give users granular control.')}\n          </p>\n        </ControlLabel>\n        <FlexLayout.Flex>\n          <div id='collection-initweaks-table-panel'>\n            <Table id='collection-initweaks-table'>\n              <thead>\n                <tr>\n                  <th className='header-status'>{t('Status')}</th>\n                  <th className='header-tweak-name'>{t('Tweak Name')}</th>\n                  <th className='header-filename'>{t('Ini File')}</th>\n                  <th className='header-edit'>\n                      {t('Edit')}\n                      <More id='edit-ini-file' name={t('Edit Ini File')}>\n                      {t('\"Edit\" allows you to input the ini tweak you want to '\n                       + 'apply to the target ini file. Please provide the section as '\n                       + 'well as your tweak(s). e.g.:\\n\\n[General]\\nsIntroSequence=0')}\n                      </More>\n                  </th>\n                </tr>\n              </thead>\n              <tbody>\n                {tweaks.map(tweak => this.renderTweak(tweak))}\n              </tbody>\n            </Table>\n            <Button onClick={this.addIniTweak}>\n              {t('Add')}\n            </Button>\n          </div>\n        </FlexLayout.Flex>\n        <Usage infoId='ini-tweaks'>\n          <p>\n            {t('To assist in the testing of INI configuration application - any enabled INI modification '\n             + 'on this page will be applied to your own environment in the next deployment event; IF '\n             + 'the collection mod is enabled.')}\n          </p>\n          <p>\n            {t('To disable/enable an INI tweak, simply click on the button itself (in the status column). '\n             + 'If needed, INI tweak can be removed by clicking the arrow next to the button and selecting \"Remove\"')}\n          </p>\n        </Usage>\n      </FlexLayout>\n    );\n  }\n\n  private addIniTweak = () => {\n    const { collection, modsPath, onAddIniTweak, settingsFiles } = this.props;\n    if (collection?.installationPath && modsPath) {\n      const modPath = path.join(modsPath, collection.installationPath);\n      onAddIniTweak(modPath, settingsFiles)\n        .then(() => this.refreshTweaks());\n    }\n  }\n\n  private refreshTweaks = () => {\n    const { collection, modsPath, onRefreshTweaks } = this.props;\n    if (collection?.installationPath && modsPath) {\n      const modPath = path.join(modsPath, collection.installationPath);\n      onRefreshTweaks(modPath).then((newTweaks) => this.nextState.tweaks = newTweaks);\n    }\n  }\n\n  private renderTweak = (tweak: IINITweak): JSX.Element => {\n    const { t, collection, modsPath } = this.props;\n    const { fileName } = tweak;\n    const isEnabled = util.getSafe(collection, ['enabledINITweaks'], []).indexOf(fileName) !== -1;\n    return (\n      <Tweak\n        t={t}\n        key={`tweak-${fileName}`}\n        tweaksPath={path.join(modsPath, collection.installationPath, INI_TWEAKS_PATH)}\n        fileName={fileName}\n        enabled={isEnabled}\n        onToggle={this.toggle}\n        onRemoveTweak={this.removeTweak}\n      />);\n  }\n\n  private removeTweak = (tweak: IINITweak) => {\n    const { collection, modsPath, onRemoveIniTweak } = this.props;\n    if (collection?.installationPath && modsPath) {\n      const modPath = path.join(modsPath, collection.installationPath);\n      onRemoveIniTweak(modPath, tweak)\n        .then(() => this.refreshTweaks());\n    }\n  }\n\n  private toggle = (fileName: string, enabled: boolean) => {\n    const { collection, gameId, onSetINITweakEnabled } = this.props;\n    onSetINITweakEnabled(gameId, collection.id, fileName, enabled);\n  }\n}\n\nfunction mapStateToProps(state: types.IState, ownProps: IExtendedInterfaceProps): IConnectedProps {\n  return {\n    modsPath: selectors.installPath(state),\n  };\n}\n\nfunction mapDispatchToProps(dispatch: ThunkDispatch<types.IState, null, Redux.Action>)\n    : IActionProps {\n  return {\n    onSetINITweakEnabled:\n    (gameId: string, modId: string, tweak: string, enabled: boolean) => {\n      dispatch(actions.setINITweakEnabled(gameId, modId, tweak, enabled));\n    },\n  };\n}\n\nconst TweakListConnected = withTranslation([NAMESPACE, 'common'])(\n  connect(mapStateToProps, mapDispatchToProps)(\n    TweakList) as any) as React.ComponentType<IBaseProps>;\n\nexport default TweakListConnected;\n","import CollectionThumbnail from '../CollectionTile';\r\n\r\nimport React = require('react');\r\nimport { Button, Media, Modal } from 'react-bootstrap';\r\nimport { useTranslation } from 'react-i18next';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport { FlexLayout, MainContext, tooltip, types, util } from 'vortex-api';\r\n\r\nimport { IRevision } from '@nexusmods/nexus-api';\r\nimport { useSelector } from 'react-redux';\r\n\r\nexport interface IInstallChangelogDialogProps {\r\n  gameId: string;\r\n  collection: types.IMod;\r\n  revisionInfo: IRevision;\r\n  onContinue: () => void;\r\n  onCancel: () => void;\r\n}\r\n\r\nfunction nop() {\r\n  // nop\r\n}\r\n\r\nfunction InstallChangelogDialogImpl(props: IInstallChangelogDialogProps) {\r\n  const { collection, gameId, onCancel, onContinue, revisionInfo  } = props;\r\n\r\n  const { t } = useTranslation();\r\n  const lang: string = useSelector<types.IState, string>(state =>\r\n    state.settings.interface.language);\r\n\r\n  const context = React.useContext(MainContext);\r\n\r\n  const openUrl = React.useCallback(() => {\r\n    context.api.events.emit('analytics-track-click-event', 'Collections', 'View on site Updated Collection');\r\n    util.opn(util.nexusModsURL(\r\n      [revisionInfo.collection.game.domainName, 'collections', revisionInfo.collection.slug], {\r\n        campaign: util.Campaign.ViewCollection,\r\n        section: util.Section.Collections,\r\n      }));\r\n  }, [collection]);\r\n\r\n  if (collection === undefined) {\r\n    return null;\r\n  }\r\n\r\n  const changelog = revisionInfo.collectionChangelog;\r\n  const changelogDate = new Date(changelog.createdAt);\r\n\r\n  return (\r\n    <Modal\r\n      id='install-changelog-dialog'\r\n      show={collection !== undefined}\r\n      onHide={nop}\r\n    >\r\n      <Modal.Header>\r\n        <Modal.Title>\r\n          {t('{{collectionName}} update',\r\n             { replace: { collectionName: util.renderModName(collection) } })}\r\n        </Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <Media.Left>\r\n          <CollectionThumbnail\r\n            t={t}\r\n            gameId={gameId}\r\n            collection={collection}\r\n            details='some'\r\n            imageTime={42}\r\n            forceRevisionDisplay={revisionInfo.revisionNumber}\r\n          />\r\n        </Media.Left>\r\n        <Media.Right>\r\n          <FlexLayout type='row'>\r\n            <h4>{t('Revision {{revNum}} Changelog',\r\n                   { replace: { revNum: revisionInfo.revisionNumber } })}</h4>\r\n            <div className='changelog-time'>{changelogDate.toLocaleDateString(lang)}</div>\r\n          </FlexLayout>\r\n          <div className='changelog-scroll'>\r\n            <ReactMarkdown>{changelog.description}</ReactMarkdown>\r\n          </div>\r\n        </Media.Right>\r\n        <tooltip.IconButton\r\n          className='collection-open-button'\r\n          icon='open-in-browser'\r\n          tooltip={t('Open Page')}\r\n          onClick={openUrl}\r\n        >\r\n          {t('View Collection')}\r\n        </tooltip.IconButton>\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button onClick={onCancel}>{t('Later')}</Button>\r\n        <Button onClick={onContinue}>{t('Download Update')}</Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nconst localState = util.makeReactive<{ job: IInstallChangelogDialogProps }>({\r\n  job: {\r\n    collection: undefined,\r\n    gameId: undefined,\r\n    onCancel: () => {\r\n      // nop\r\n    },\r\n    onContinue: () => {\r\n      // nop\r\n    },\r\n    revisionInfo: undefined,\r\n  },\r\n});\r\n\r\nexport class InstallChangelogDialog extends React.Component<{}> {\r\n  public componentDidMount(): void {\r\n    localState['attach']?.(this);\r\n  }\r\n\r\n  public componentWillUnmount(): void {\r\n    localState['detach']?.(this);\r\n  }\r\n\r\n  public render() {\r\n    const { job } = localState;\r\n\r\n    return (\r\n      <InstallChangelogDialogImpl\r\n        collection={job?.collection}\r\n        gameId={job?.gameId}\r\n        revisionInfo={job?.revisionInfo}\r\n        onContinue={job?.onContinue}\r\n        onCancel={job?.onCancel}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nfunction showChangelog(collection: types.IMod, gameId: string, revisionInfo: IRevision)\r\n  : Promise<void> {\r\n\r\n  return new Promise((resolve: () => void, reject: (err: Error) => void) => {\r\n    localState.job = {\r\n      collection,\r\n      gameId,\r\n      revisionInfo,\r\n      onContinue: () => {\r\n        localState.job = undefined;\r\n        resolve();\r\n      },\r\n      onCancel: () => {\r\n        localState.job = undefined;\r\n        reject(new util.UserCanceled());\r\n      },\r\n    };\r\n  });\r\n}\r\n\r\nexport default showChangelog;\r\n","import * as React from 'react';\nimport { Button, Media, Panel } from 'react-bootstrap';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\nimport { actions, log, Modal, tooltip, types, util } from 'vortex-api';\nimport { NAMESPACE } from '../../constants';\n\nimport YouCuratedTag from './YouCuratedThisTag';\n\nimport InstallDriver from '../../util/InstallDriver';\nimport CollectionThumbnail from '../CollectionTile';\n\nexport interface IInstallFinishedDialogProps {\n  api: types.IExtensionApi;\n  driver: InstallDriver;\n  onClone: (collectionId: string) => Promise<string>;\n  editCollection: (id: string) => void;\n}\n\nfunction nop() {\n  // nop\n}\n\nconst emptyObject = {};\n\nfunction InstallFinishedDialog(props: IInstallFinishedDialogProps) {\n  const { api, driver, onClone } = props;\n  const { t } = useTranslation(api.NAMESPACE);\n\n  const userInfo = useSelector<types.IState, { userId: number }>(state =>\n    state.persistent['nexus']?.userInfo ?? emptyObject);\n\n  const forceUpdate = React.useState(0)[1];\n\n  React.useEffect(() => {\n    driver.onUpdate(() => {\n      if ((driver?.collection !== undefined) && (driver?.step === 'review')) {\n        forceUpdate(i => i + 1);\n      }\n    });\n  }, [driver, forceUpdate]);\n\n  const skip = React.useCallback(async () => {\n    if (driver.collection !== undefined) {\n      await driver.continue();\n    }\n    forceUpdate(i => i + 1);\n  }, [driver]);\n\n  const showOptionals = React.useCallback(async () => {\n    if (driver.collection !== undefined) {\n      api.events.emit('view-collection', driver.collection.id, 'mods');\n      api.store.dispatch(actions.setAttributeFilter('collection-mods', undefined, undefined));\n      api.store.dispatch(actions.setAttributeFilter('collection-mods', 'required', false));\n      await driver.continue();\n    }\n    forceUpdate(i => i + 1);\n  }, [driver]);\n\n  const installAllOptionals = React.useCallback(() => {\n    // double check we're not triggering this multiple times.\n    if ((driver.step === 'review') && (driver.collection !== undefined)) {\n      driver.installRecommended();\n    }\n    forceUpdate(i => i + 1);\n  }, []);\n\n  const clone = React.useCallback(async () => {\n    if (driver.collection === undefined) {\n      return;\n    }\n    const id: string = await onClone(driver.collection.id);\n    if (id !== undefined) {\n      props.editCollection(id);\n      driver.continue();\n    }\n  }, [driver, onClone]);\n\n  const collection = driver.collection;\n\n  const mods = useSelector<types.IState, { [modId: string]: types.IMod }>(state =>\n    (driver.profile !== undefined)\n      ? state.persistent.mods[driver.profile?.gameId]\n      : emptyObject);\n\n  const optionals = React.useMemo(() => {\n    return (collection?.rules ?? [])\n      .filter(rule => (rule.type === 'recommends')\n                   && (util.findModByRef(rule.reference, mods) === undefined));\n  }, [collection?.rules, mods]);\n\n  const game = driver.profile !== undefined ? util.getGame(driver.profile.gameId) : undefined;\n\n  const ownCollection: boolean = driver.collectionInfo?.user?.memberId === userInfo?.userId;\n\n  return (\n    <Modal\n      id='install-finished-dialog'\n      show={(driver.collection !== undefined) && (driver.step === 'review')}\n      onHide={nop}\n    >\n      <Modal.Header>\n        <Modal.Title>{t('Collection installation complete')}</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <div className='collection-finished-body'>\n          <Media.Left>\n            <CollectionThumbnail\n              t={t}\n              gameId={driver.profile?.gameId}\n              collection={driver.collection}\n              details={true}\n              imageTime={42}\n            />\n          </Media.Left>\n          <Media.Right>\n            <h5>{game?.name}</h5>\n            <h3>{util.renderModName(driver.collection)}</h3>\n            {driver.collection?.attributes?.shortDescription ?? t('No description')}\n            {ownCollection && (optionals.length > 0) ? (\n              <div>\n                <YouCuratedTag t={t} />\n                {t('To edit this collection you must install all of the optional mods')}\n              </div>\n            ) : null}\n          </Media.Right>\n        </div>\n        {(optionals.length > 0) ? (\n          <div className='collection-finished-optionals'>\n            <div className='collection-finished-optionals-text'>\n              {t('{{numOptionals}} optional mods available',\n                { replace: { numOptionals: optionals.length }})}\n            </div>\n            <p>\n              {t('This collection has {{count}} optional mods which are not required to '\n                 + 'complete the installation but may provide additional features or options. '\n                 + 'You can view these mods before installing as they may change the default '\n                 + 'behavior of the collection or have additional requirements.', {\n                count: optionals.length,\n                ns: NAMESPACE,\n              })}\n            </p>\n            <div className='collection-finished-optional-buttons'>\n            </div>\n          </div>\n        ) : ownCollection ? (\n          <div className='collection-can-clone-container'>\n            <YouCuratedTag t={t} />\n            {t('You now have the whole collection installed, you can start editing '\n               + 'your collection by cloning it.')}\n            <tooltip.IconButton\n              icon='clone'\n              tooltip={t('Clone the collection to the workshop for editing')}\n              onClick={clone}\n            >\n              {t('Edit')}\n            </tooltip.IconButton>\n          </div>\n        ) : null}\n      </Modal.Body>\n      {(optionals.length > 0) ? (\n        <Modal.Footer>\n          <Button onClick={skip}>\n            {t('No Thanks')}\n          </Button>\n          <Button onClick={showOptionals}>{t('View optional mods')}</Button>\n          <Button onClick={installAllOptionals}>{t('Install optional mods')}</Button>\n        </Modal.Footer>\n      ) : (\n        <Modal.Footer>\n          <Button onClick={skip}>\n            {t('Done')}\n          </Button>\n        </Modal.Footer>\n      )}\n    </Modal>\n  );\n}\n\nexport default React.memo(InstallFinishedDialog);\n","import { DEFAULT_INSTRUCTIONS, NAMESPACE } from '../../constants';\nimport InstallDriver from '../../util/InstallDriver';\n\nimport CollectionThumbnail from '../CollectionTile';\n\nimport YouCuratedTag from './YouCuratedThisTag';\n\nimport * as React from 'react';\nimport { Button, Media } from 'react-bootstrap';\nimport { withTranslation } from 'react-i18next';\nimport { connect } from 'react-redux';\nimport Select from 'react-select';\nimport * as Redux from 'redux';\nimport { generate as shortid } from 'shortid';\nimport { actions, ComponentEx, FlexLayout, Modal, More, Toggle, types, util } from 'vortex-api';\nimport ReactMarkdown from 'react-markdown';\n\ninterface IInstallDialogProps {\n  onHide: () => void;\n  visible: boolean;\n  driver: InstallDriver;\n  onSwitchProfile: (profileId: string) => Promise<void>;\n}\n\ninterface IConnectedProps {\n  allProfiles: { [profileId: string]: types.IProfile };\n  mods: { [modId: string]: types.IMod };\n  isPremium: boolean;\n  userInfo: { userId: number };\n  nextProfileId: string;\n  collectionsInstallWhileDownloading: boolean;\n}\n\ninterface IActionProps {\n  onAddProfile: (profile: types.IProfile) => void;\n  onSetCollectionConcurrency: (enabled: boolean) => void;\n  onSetModAttribute: (gameId: string, modId: string, key: string, value: any) => void;\n  onSetModAttributes: (gameId: string, modId: string, attributes: { [key: string]: any }) => void;\n  onAddRule: (gameId: string, modId: string, rule: types.IModRule) => void;\n  onRemoveRule: (gameId: string, modId: string, rule: types.IModRule) => void;\n  onSetProfilesVisible: () => void;\n}\n\ntype IProps = IInstallDialogProps & IConnectedProps & IActionProps;\n\ninterface IInstallDialogState {\n  selectedProfile: string;\n  confirmProfile: boolean;\n  recommendedNewProfile: boolean;\n}\n\nfunction nop() {\n  // nop\n}\n\ninterface IInstallDialogSelectProfileProps {\n  t: types.TFunction;\n  profile: types.IProfile;\n  selectedProfile: string;\n  recommendedNewProfile: boolean;\n  allProfiles: { [profileId: string]: types.IProfile };\n  onSelectProfile: (value: { value: string, label: string }) => void;\n}\n\nfunction InstallDialogSelectProfile(props: IInstallDialogSelectProfileProps) {\n  const { t, allProfiles, onSelectProfile, profile, selectedProfile, recommendedNewProfile } = props;\n\n  const profileOptions = Object.keys(allProfiles)\n    .filter(profId => allProfiles[profId].gameId === profile.gameId)\n    .map(profId => ({\n      value: profId,\n      label: profId === profile.id\n        ? t('{{name}} (Current)', { replace: { name: profile.name } })\n        : allProfiles[profId].name,\n    }))\n    .concat({\n      value: '__new', label: t('Create new profile{{recommended}}',\n                               { replace: { recommended: recommendedNewProfile ? t(' (Recommended by curator)') : '' } })\n    });\n\n  return (\n    <FlexLayout type='row' id='collections-profile-select'>\n      <FlexLayout.Fixed>\n        {t('Install this collection to profile') + ':'}\n      </FlexLayout.Fixed>\n      <FlexLayout.Flex>\n        <Select\n          options={profileOptions}\n          value={selectedProfile ?? profile.id}\n          onChange={onSelectProfile}\n          clearable={false}\n        />\n      </FlexLayout.Flex>\n    </FlexLayout>\n  );\n}\n\ninterface IInstallDialogConfirmProfileProps {\n  t: types.TFunction;\n  collectionName: string;\n  selectedProfile: types.IProfile;\n}\n\nfunction InstallDialogConfirmProfile(props: IInstallDialogConfirmProfileProps) {\n  const { t, collectionName, selectedProfile } = props;\n\n  const profileName = selectedProfile?.name\n    ?? collectionName;\n\n  return (\n    <>\n      <p>{t('Currently installing to profile: {{profileName}}', {\n        replace: {\n          profileName,\n        },\n      })}</p>\n      <p>{t('Do you want to switch to this profile?')}</p>\n    </>\n  );\n}\n\n\n/**\n * Installation prompt that shows up when the user imports a collection\n */\nclass InstallDialog extends ComponentEx<IProps, IInstallDialogState> {\n  private mLastCollection: types.IMod;\n  constructor(props: IProps) {\n    super(props);\n\n    this.initState({\n      selectedProfile: undefined,\n      confirmProfile: false,\n      recommendedNewProfile: false,\n    });\n\n    if (props.driver !== undefined) {\n      this.props.driver.onUpdate(() => this.forceUpdate());\n    }\n  }\n\n  static getDerivedStateFromProps(props: IProps, state: IInstallDialogState) {\n    if (!state.selectedProfile && !!props.driver?.collection?.attributes?.recommendNewProfile) {\n      return {\n        recommendedNewProfile: true,\n        selectedProfile: '__new',\n      };\n    }\n    return null;\n  }\n\n  public componentDidUpdate(prevProps: IProps) {\n    const { driver } = this.props;\n    if (driver !== undefined) {\n      if (driver !== prevProps.driver) {\n        driver.onUpdate(() => this.forceUpdate());\n      }\n\n      if (driver.collection !== this.mLastCollection) {\n        this.nextState.confirmProfile = false;\n        this.nextState.selectedProfile = undefined;\n        this.mLastCollection = driver.collection;\n      }\n    }\n  }\n\n  public render(): React.ReactNode {\n    const { t, driver, allProfiles, nextProfileId, userInfo } = this.props;\n    const { selectedProfile, recommendedNewProfile } = this.state;\n\n    if (driver?.profile === undefined) {\n      return null;\n    }\n\n    const { profile } = driver;\n\n    if (nextProfileId !== profile.id) {\n      return null;\n    }\n\n    let installInstructions = driver.collection?.attributes?.installInstructions || t(DEFAULT_INSTRUCTIONS)\n\n    // used to convert a \\n into something that react-markdown can use to detect paragraphs properly\n    installInstructions = installInstructions.replace(/\\r?\\n/g, \"  \\r\\n\");\n\n    const game = util.getGame(profile.gameId);\n\n    const ownCollection: boolean = (userInfo?.userId !== undefined)\n      && (driver.collectionInfo?.user?.memberId === userInfo?.userId);\n    const collectionName = util.renderModName(driver.collection);\n    return (\n      <Modal show={(driver.collection !== undefined) && (driver.step === 'query')} onHide={nop}>\n        <Modal.Header>\n          <Modal.Title>\n            {t('{{gameName}} collection added', { replace: { gameName: game.name } })}\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <Media>\n            <Media.Left>\n              <CollectionThumbnail\n                t={t}\n                gameId={profile.gameId}\n                collection={driver.collection}\n                details={true}\n                imageTime={42}\n              />\n            </Media.Left>\n            <Media.Right style={{ width: '100%', display: 'flex' }}>\n              <Media.Body>\n                <Media.Heading>Collection instructions</Media.Heading>\n                <p className='collections-instructions-canbereviewed'>Instructions can be reviewed during installation.</p>\n                {ownCollection ? <YouCuratedTag t={t} /> : null}\n                <ReactMarkdown className='textarea-install-collection-instructions' allowedElements={['p', 'br', 'a', 'em', 'strong']} unwrapDisallowed={true}>\n                  {installInstructions}\n                </ReactMarkdown>\n              </Media.Body>\n            </Media.Right>\n          </Media>\n          <FlexLayout type='row'>\n            <p>\n              {t('Profiles allow you to have multiple mod set-ups for a game at once and quickly switch between them.')}\n              <More id='more-profile-instcollection' name={t('Profiles')} wikiId='profiles'>\n                {util.getText('profile' as any, 'profiles', t)}\n              </More>\n            </p>\n\n          </FlexLayout>\n          {(this.state.confirmProfile && (selectedProfile !== undefined)) ? (\n            <InstallDialogConfirmProfile\n              t={t}\n              collectionName={collectionName}\n              selectedProfile={selectedProfile === '__new' ? undefined : allProfiles[selectedProfile]}\n            />\n          ) : (\n            <InstallDialogSelectProfile\n              t={t}\n              allProfiles={allProfiles}\n              profile={profile}\n              selectedProfile={selectedProfile}\n              onSelectProfile={this.changeProfile}\n              recommendedNewProfile={recommendedNewProfile}\n            />\n          )}\n          <Toggle\n            checked={this.props.collectionsInstallWhileDownloading}\n            onToggle={this.props.onSetCollectionConcurrency}\n          >\n            {t('Install mods during collection downloads')}\n          </Toggle>\n        </Modal.Body>\n        <Modal.Footer>\n          {this.state.confirmProfile ? (\n            <>\n              <Button onClick={this.next}>{t('No')}</Button>\n              <Button onClick={this.switchProfile}>{t('Yes')}</Button>\n            </>\n          ) : (\n            <>\n              <Button onClick={this.cancel}>{t('Later')}</Button>\n              <Button onClick={this.next}>{t('Install Now')}</Button>\n            </>\n          )}\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n\n  private changeProfile = (value: { value: string, label: string }) => {\n    if (!!value) {\n      this.nextState.selectedProfile = value.value;\n    }\n  }\n\n  private cancel = () => {\n    this.props.driver.cancel();\n  }\n\n  private next = () => {\n    if (!this.state.confirmProfile\n      && (this.state.selectedProfile !== undefined)\n      && (this.state.selectedProfile !== this.props.driver?.profile?.id)) {\n      if (this.state.selectedProfile === '__new') {\n        const { driver, onAddProfile, onSetProfilesVisible } = this.props;\n        const { profile } = driver;\n\n        const profileId = shortid();\n        const name = util.renderModName(driver.collection);\n        const newProfile = {\n          id: profileId,\n          gameId: profile.gameId,\n          name,\n          modState: {},\n          lastActivated: 0,\n        };\n        onAddProfile(newProfile);\n        onSetProfilesVisible();\n        this.nextState.selectedProfile = profileId;\n      }\n      this.nextState.confirmProfile = true;\n    } else {\n      this.startInstall();\n    }\n  }\n\n  private switchProfile = async () => {\n    const { selectedProfile } = this.state;\n    await this.props.onSwitchProfile(selectedProfile);\n\n    // Make sure the profiles are visible.\n    this.props.onSetProfilesVisible();\n    this.startInstall();\n  }\n\n  private startInstall() {\n    const { allProfiles, driver } = this.props;\n    const { selectedProfile } = this.state;\n\n    const { profile } = driver;\n\n    if ((selectedProfile !== undefined) && (selectedProfile !== profile.id)) {\n      driver.profile = allProfiles[selectedProfile];\n    }\n\n    driver.continue();\n  }\n}\n\nconst emptyObject = {};\n\nfunction mapStateToProps(state: types.IState, ownProps: IInstallDialogProps): IConnectedProps {\n  const { editCollectionId } = (state.session as any).collections;\n  const gameMode = ownProps.driver?.profile?.gameId;\n\n  const isPremium = util.getSafe(state, ['persistent', 'nexus', 'userInfo', 'isPremium'], false);\n  const collectionsInstallWhileDownloading = util.getSafe(state, ['settings', 'downloads', 'collectionsInstallWhileDownloading'], true);\n  const { userInfo } = state.persistent['nexus'] ?? {};\n  return {\n    allProfiles: state.persistent.profiles,\n    mods: editCollectionId !== undefined ? state.persistent.mods[gameMode] : emptyObject,\n    isPremium,\n    userInfo,\n    nextProfileId: state.settings.profiles.nextProfileId,\n    collectionsInstallWhileDownloading,\n  };\n}\n\nfunction mapDispatchToProps(dispatch: Redux.Dispatch): IActionProps {\n  return {\n    onSetModAttribute: (gameId: string, modId: string, key: string, value: any) =>\n      dispatch(actions.setModAttribute(gameId, modId, key, value)),\n    onSetModAttributes: (gameId: string, modId: string, attributes: { [key: string]: any }) =>\n      dispatch(actions.setModAttributes(gameId, modId, attributes)),\n    onAddRule: (gameId: string, modId: string, rule: types.IModRule) =>\n      dispatch(actions.addModRule(gameId, modId, rule)),\n    onRemoveRule: (gameId: string, modId: string, rule: types.IModRule) =>\n      dispatch(actions.removeModRule(gameId, modId, rule)),\n    onAddProfile: (profile: types.IProfile) =>\n      dispatch(actions.setProfile(profile)),\n    onSetProfilesVisible: () =>\n      dispatch(actions.setProfilesVisible(true)),\n    onSetCollectionConcurrency: (enabled: boolean) =>\n      dispatch(actions.setCollectionConcurrency(enabled)),\n  };\n}\n\nexport default\n  withTranslation(['common', NAMESPACE])(\n    connect(mapStateToProps, mapDispatchToProps)(\n      React.memo(InstallDialog)) as any) as React.ComponentClass<IInstallDialogProps>;\n","import * as React from 'react';\nimport { Icon, types } from 'vortex-api';\n\nfunction Tag(props: { t: types.TFunction }) {\n  const { t } = props;\n\n  return (\n    <div className='collections-you-curated-tag'>\n      <Icon name='completed' />\n      {t('You curated this collection')}\n    </div>\n  );\n}\n\nexport default Tag;\n","import { InstallChangelogDialog } from './InstallChangelogDialog';\nimport InstallFinishDialog from './InstallFinishedDialog';\nimport InstallStartDialog from './InstallStartDialog';\n\nexport { InstallChangelogDialog, InstallFinishDialog, InstallStartDialog };\n","import I18next from 'i18next';\nimport * as path from 'path';\nimport * as React from 'react';\nimport { ControlLabel, Image, Table } from 'react-bootstrap';\nimport { useSelector, useStore } from 'react-redux';\nimport { pathToFileURL } from 'url';\nimport { actions, Icon, selectors, Toggle, types, util } from 'vortex-api';\n\nfunction ToolIcon(props: { gameId: string, imageUrl: string }) {\n  const { gameId, imageUrl } = props;\n  if (imageUrl !== undefined) {\n    const src = pathToFileURL(path.join(\n      util.getVortexPath('userData'), gameId, 'icons', imageUrl)).href;\n    return (\n      <Image\n        src={src}\n        className={'tool-icon valid'}\n      />\n    );\n  } else {\n    return (\n      <Icon\n        name='executable'\n        className={'tool-icon valid'}\n      />\n    );\n  }\n}\n\ninterface IToolItemProps {\n  t: I18next.TFunction;\n  gameId: string;\n  tool: types.IDiscoveredTool;\n  enabled: boolean;\n  onToggle: (newValue: boolean, dataId: string) => void;\n}\n\nfunction ToolItem(props: IToolItemProps) {\n  const { enabled, gameId, onToggle, tool } = props;\n\n  return (\n    <tr>\n      <td><Toggle dataId={tool.id} checked={enabled} onToggle={onToggle} /></td>\n      <td><ToolIcon gameId={gameId} imageUrl={tool.logo}/></td>\n      <td>{tool.name}</td>\n      <td>{tool.path}</td>\n      <td>{(tool.parameters ?? []).join(' ')}</td>\n      <td>{Object.keys(tool.environment ?? {})\n        .map(key => `${key}=${tool.environment[key]}`).join(', ')}</td>\n    </tr>\n  );\n}\n\ninterface IToolsProps {\n  t: I18next.TFunction;\n  collection: types.IMod;\n  onSetCollectionAttribute: (attrPath: string[], value: any) => void;\n}\n\nconst emptyArray = [];\n\nfunction Tools(props: IToolsProps) {\n  const { t, collection, onSetCollectionAttribute } = props;\n\n  const gameMode: string = useSelector(selectors.activeGameId);\n\n  const includedTools: string[] = useSelector<types.IState, string[]>(state =>\n    state.persistent.mods[gameMode][collection.id].attributes?.collection?.includedTools\n    ?? emptyArray);\n\n  const toggleCB = React.useCallback((newValue: boolean, toolId: string) => {\n    onSetCollectionAttribute(['includedTools'], newValue\n      ? [].concat(includedTools, [toolId])\n      : includedTools.filter(id => id !== toolId));\n  }, [includedTools, onSetCollectionAttribute]);\n\n  const tools = useSelector((state: types.IState) =>\n    state.settings.gameMode.discovered[gameMode].tools);\n\n  const custom = Object.values(tools ?? {})\n    .filter(tool => tool.custom && !tool.hidden);\n\n  return (\n    <div className='collection-scrollable'>\n      <ControlLabel>\n        <p>\n          {t('This screen lets you include tools you manually configured to be run from Vortex.')}\n        </p>\n        <p>\n          {t('Obviously users will need to have these tools installed. If they aren\\'t '\n            + 'included in the game and not installed as a mod through this collection, '\n            + 'you should include instructions for the user on how to get the tool.')}\n        </p>\n      </ControlLabel>\n      <Table id='collection-tools-table'>\n        <thead>\n          <tr>\n            <th className='header-status'>{t('Status')}</th>\n            <th className='header-icon'>{t('Icon')}</th>\n            <th className='header-name'>{t('Name')}</th>\n            <th className='header-path'>{t('Path')}</th>\n            <th className='header-args'>{t('Args')}</th>\n            <th className='header-env'>{t('Environment')}</th>\n          </tr>\n        </thead>\n        <tbody>\n          {custom.map(item => (\n            <ToolItem\n              key={item.id}\n              t={t}\n              tool={item}\n              gameId={gameMode}\n              enabled={includedTools.includes(item.id)}\n              onToggle={toggleCB}\n            />))}\n        </tbody>\n      </Table>\n    </div>\n  );\n}\n\nexport default Tools;\n","module.exports = require(\"bluebird\");","module.exports = require(\"crypto\");","module.exports = require(\"fs\");","module.exports = require(\"lodash\");","module.exports = require(\"node-7z\");","module.exports = require(\"os\");","module.exports = require(\"path\");","module.exports = require(\"react\");","module.exports = require(\"react-bootstrap\");","module.exports = require(\"react-dom\");","module.exports = require(\"react-i18next\");","module.exports = require(\"react-redux\");","module.exports = require(\"react-select\");","module.exports = require(\"redux-act\");","module.exports = require(\"semver\");","module.exports = require(\"turbowalk\");","module.exports = require(\"url\");","module.exports = require(\"util\");","module.exports = require(\"vortex-api\");","module.exports = require(\"vortexmt\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/* eslint-disable */\r\nimport { clearPendingVote, updateSuccessRate } from './actions/persistent';\r\nimport persistentReducer from './reducers/persistent';\r\nimport sessionReducer from './reducers/session';\r\nimport settingsReducer from './reducers/settings';\r\nimport { ICollection } from './types/ICollection';\r\nimport { IExtendedInterfaceProps } from './types/IExtendedInterfaceProps';\r\nimport { genDefaultsAction } from './util/defaults';\r\nimport { addExtension } from './util/extension';\r\nimport InstallDriver from './util/InstallDriver';\r\nimport { cloneCollection, createCollection, makeCollectionId } from './util/transformCollection';\r\nimport { bbProm, getUnfulfilledNotificationId } from './util/util';\r\nimport AddModsDialog from './views/AddModsDialog';\r\nimport HealthDownvoteDialog from './views/CollectionPageView/HealthDownvoteDialog';\r\nimport CollectionsMainPage from './views/CollectionList';\r\nimport { InstallChangelogDialog, InstallFinishDialog, InstallStartDialog } from './views/InstallDialog';\r\n\r\nimport { IPathTools } from './views/CollectionPageEdit/FileOverrides';\r\n\r\nimport CollectionAttributeRenderer from './views/CollectionModsPageAttributeRenderer';\r\n\r\nimport {\r\n  addCollectionAction, addCollectionCondition,\r\n  alreadyIncluded,\r\n  initFromProfile,\r\n  removeCollectionAction, removeCollectionCondition,\r\n} from './collectionCreate';\r\nimport { makeInstall, testSupported } from './collectionInstall';\r\nimport { DELAY_FIRST_VOTE_REQUEST, INSTALLING_NOTIFICATION_ID, MOD_TYPE, TIME_BEFORE_VOTE } from './constants';\r\nimport { onCollectionUpdate } from './eventHandlers';\r\nimport initIniTweaks from './initweaks';\r\nimport initTools from './tools';\r\n\r\nimport * as nexusApi from '@nexusmods/nexus-api';\r\nimport * as PromiseBB from 'bluebird';\r\nimport * as _ from 'lodash';\r\nimport memoize from 'memoize-one';\r\nimport * as path from 'path';\r\nimport * as React from 'react';\r\nimport * as Redux from 'redux';\r\nimport { generate as shortid } from 'shortid';\r\nimport { pathToFileURL } from 'url';\r\nimport { actions, log, OptionsFilter, selectors, types, util } from 'vortex-api';\r\nimport { IRevision } from '@nexusmods/nexus-api';\r\n\r\nfunction isEditableCollection(state: types.IState, modIds: string[]): boolean {\r\n  const gameMode = selectors.activeGameId(state);\r\n  const mod = state.persistent.mods[gameMode][modIds[0]];\r\n  if (mod === undefined) {\r\n    return false;\r\n  }\r\n  return util.getSafe(mod.attributes, ['editable'], false);\r\n}\r\n\r\nfunction profileCollectionExists(api: types.IExtensionApi, profileId: string) {\r\n  const state = api.store.getState();\r\n  const gameMode = selectors.activeGameId(state);\r\n  const mods = state.persistent.mods[gameMode];\r\n  return mods[makeCollectionId(profileId)] !== undefined;\r\n}\r\n\r\nfunction onlyLocalRules(rule: types.IModRule) {\r\n  return ['requires', 'recommends'].includes(rule.type)\r\n    && (rule.reference.fileExpression === undefined)\r\n    && (rule.reference.fileMD5 === undefined)\r\n    && (rule.reference.logicalFileName === undefined)\r\n    && (rule.reference.repo === undefined);\r\n}\r\n\r\nconst modsBeingRemoved = new Set<string>();\r\n\r\nfunction makeModKey(gameId: string, modId: string): string {\r\n  return `${gameId}_${modId}`;\r\n}\r\n\r\nfunction makeWillRemoveMods() {\r\n  return (gameId: string, modIds: string[]) => {\r\n    modIds.forEach(modId => modsBeingRemoved.add(makeModKey(gameId, modId)));\r\n    return Promise.resolve();\r\n  };\r\n}\r\n\r\nfunction makeDidRemoveMods() {\r\n  return (gameId: string, modIds: string[]) => {\r\n    modIds.forEach(modId => modsBeingRemoved.delete(makeModKey(gameId, modId)));\r\n    return Promise.resolve();\r\n  };\r\n}\r\n\r\nfunction makeOnUnfulfilledRules(api: types.IExtensionApi) {\r\n  const reported = new Set<string>();\r\n\r\n  return (profileId: string, modId: string, rules: types.IModRule[]): PromiseBB<boolean> => {\r\n    const state: types.IState = api.store.getState();\r\n\r\n    const profile = selectors.profileById(state, profileId);\r\n    const gameId = profile.gameId;\r\n\r\n    if (modsBeingRemoved.has(makeModKey(gameId, modId))) {\r\n      return PromiseBB.resolve(false);\r\n    }\r\n\r\n    const collection: types.IMod =\r\n      util.getSafe(state.persistent.mods, [gameId, modId], undefined);\r\n\r\n    if ((collection !== undefined)\r\n        && !reported.has(modId)\r\n        && (state.persistent.mods[gameId][modId].type === MOD_TYPE)\r\n        && !collection.attributes?.editable) {\r\n\r\n      const collectionProfile = Object.keys(state.persistent.profiles)\r\n        .find(iter => makeCollectionId(iter) === modId);\r\n\r\n      const notiActions = [{\r\n        title: 'Disable',\r\n        action: dismiss => {\r\n          dismiss();\r\n          if (profile !== undefined) {\r\n            api.store.dispatch(actions.setModEnabled(profile.id, modId, false));\r\n          }\r\n        },\r\n      }];\r\n\r\n      if (collectionProfile !== undefined) {\r\n        // with local collections that we sync with a profile, we wouldn't be able to\r\n        // installing the missing dependencies because the dependencies are referenced via\r\n        // their local id.\r\n        notiActions.unshift({\r\n          title: 'Update',\r\n          action: dismiss => {\r\n            initFromProfile(api, collectionProfile)\r\n              .then(dismiss)\r\n              .catch(err => api.showErrorNotification('Failed to update collection', err));\r\n          },\r\n        });\r\n      } else if (profile !== undefined) {\r\n        notiActions.unshift({\r\n          title: 'Resume',\r\n          action: dismiss => {\r\n            driver.start(profile, collection);\r\n            dismiss();\r\n          },\r\n        });\r\n      }\r\n\r\n      reported.add(modId);\r\n\r\n      api.sendNotification({\r\n        id: getUnfulfilledNotificationId(collection.id),\r\n        type: 'info',\r\n        title: 'Collection incomplete',\r\n        message: util.renderModName(collection),\r\n        actions: notiActions,\r\n      });\r\n      return PromiseBB.resolve(true);\r\n    } else {\r\n      return PromiseBB.resolve(false);\r\n    }\r\n  };\r\n}\r\n\r\nlet driver: InstallDriver;\r\n\r\nasync function cloneInstalledCollection(api: types.IExtensionApi,\r\n                                        collectionId: string)\r\n                                        : Promise<string> {\r\n  const state = api.getState();\r\n  const gameMode = selectors.activeGameId(state);\r\n  const mods = state.persistent.mods[gameMode];\r\n\r\n  const result: types.IDialogResult = await api.showDialog(\r\n    'question',\r\n    'Clone collection \"{{collectionName}}\"?', {\r\n    text: 'Cloning a collection means you can make edits to the collection in the workshop '\r\n      + 'and share your changes with the community.\\n'\r\n      + 'If this collection is your own, your uploads will be revisions of that existing '\r\n      + 'collection, otherwise you will create a new collection associated with your own '\r\n      + 'account.',\r\n    parameters: {\r\n      collectionName: util.renderModName(mods[collectionId]),\r\n    },\r\n  }, [\r\n    { label: 'Cancel' },\r\n    { label: 'Clone' },\r\n  ]);\r\n\r\n  if (result.action === 'Clone') {\r\n    const id = makeCollectionId(shortid());\r\n    return cloneCollection(api, gameMode, id, collectionId);\r\n  } else {\r\n    return Promise.resolve(undefined);\r\n  }\r\n}\r\n\r\nasync function createNewCollection(\r\n  api: types.IExtensionApi, profile: types.IProfile, name: string) {\r\n\r\n  const id = makeCollectionId(shortid());\r\n  await createCollection(api, profile.gameId, id, name, []);\r\n  api.sendNotification({\r\n    type: 'success',\r\n    id: 'collection-created',\r\n    title: 'Collection created',\r\n    message: name,\r\n    actions: [\r\n      {\r\n        title: 'Edit',\r\n        action: dismiss => {\r\n          api.events.emit('edit-collection', id);\r\n          dismiss();\r\n        },\r\n      },\r\n    ],\r\n  });\r\n}\r\n\r\nasync function installCollection(api: types.IExtensionApi, revision: IRevision) {\r\n  return api.showDialog('question', 'Collection not installed', {\r\n    text: 'You can only edit collections that are fully installed in this '\r\n      + 'setup. Please ensure you install the collection with all '\r\n      + 'optional items, then clone the collection into the Workshop.'\r\n  }, [\r\n    { label: 'Cancel' },\r\n    { label: 'Install' },\r\n  ])\r\n    .then(result => {\r\n      if (result.action === 'Install') {\r\n        const gameId = revision.collection.game.domainName;\r\n        api.events.emit(\r\n          'start-download', [`nxm://${gameId}/collections/${revision.collection.slug}/revisions/${revision.revisionNumber}`],\r\n          {}, undefined, (err) => {\r\n            if ((err !== null) && !(err instanceof util.UserCanceled)) {\r\n              api.showErrorNotification('Failed to download collection', err);\r\n            }\r\n          }, undefined, { allowInstall: 'force' });\r\n      }\r\n    });\r\n}\r\n\r\nasync function pauseCollection(api: types.IExtensionApi,\r\n                               gameId: string,\r\n                               modId: string,\r\n                               silent?: boolean) {\r\n  const state = api.getState();\r\n  const mods = state.persistent.mods[gameId];\r\n  const downloads = state.persistent.downloads.files;\r\n\r\n  const collection = mods[modId];\r\n  if (collection === undefined) {\r\n    return;\r\n  }\r\n\r\n  (collection?.rules ?? []).forEach(rule => {\r\n    const dlId = util.findDownloadByRef(rule.reference, downloads);\r\n    if (dlId !== undefined) {\r\n      api.events.emit('pause-download', dlId);\r\n    }\r\n  });\r\n  await api.emitAndAwait('cancel-dependency-install', modId);\r\n\r\n  driver.cancel();\r\n\r\n  api.dismissNotification(INSTALLING_NOTIFICATION_ID + modId);\r\n  if (silent !== true) {\r\n    api.sendNotification({\r\n      id: 'collection-pausing',\r\n      type: 'success',\r\n      title: 'Collection pausing',\r\n      message: 'Already queued mod installations will still finish',\r\n    });\r\n  }\r\n}\r\n\r\nasync function removeCollection(api: types.IExtensionApi,\r\n                                gameId: string,\r\n                                modId: string,\r\n                                cancel: boolean) {\r\n  const state = api.getState();\r\n  const mods = state.persistent.mods[gameId];\r\n\r\n  const t = api.translate;\r\n\r\n  const collection = mods[modId];\r\n  if (collection === undefined) {\r\n    return;\r\n  }\r\n\r\n  const filter = rule =>\r\n    (rule.type === 'requires')\r\n    && (rule['ignored'] !== true)\r\n    && (util.findModByRef(rule.reference, mods) === undefined);\r\n\r\n  const incomplete = (collection.rules ?? []).find(filter);\r\n\r\n  const message: string = cancel && incomplete\r\n    ? 'Are you sure you want to cancel the installation?'\r\n    : 'Are you sure you want to remove the collection?';\r\n\r\n  const result = await api.showDialog(\r\n    'question',\r\n    message, {\r\n      text: 'This collection will be removed from Vortex and unlinked from any associated mods. '\r\n        + 'You can also choose to uninstall mods related to this collection and delete the '\r\n        + 'downloaded archives.\\n'\r\n        + '\\nPlease note, some mods may be required by multiple collections.\\n'\r\n        + '\\nAre you sure you want to remove \"{{collectionName}}\" from your collections?',\r\n      parameters: {\r\n        collectionName: util.renderModName(collection),\r\n      },\r\n      checkboxes: [\r\n        { id: 'delete_mods', text: t('Remove mods'), value: false },\r\n        { id: 'delete_archives', text: t('Delete mod archives'), value: false },\r\n      ],\r\n    }, [\r\n      { label: 'Cancel' },\r\n      { label: 'Remove Collection' },\r\n    ]);\r\n\r\n  // apparently one can't cancel out of the cancellation...\r\n  if (result.action === 'Cancel') {\r\n    return;\r\n  }\r\n\r\n  const deleteArchives = result.input.delete_archives;\r\n  const deleteMods = result.input.delete_mods;\r\n\r\n  modsBeingRemoved.add(makeModKey(gameId, modId));\r\n\r\n  await pauseCollection(api, gameId, modId, true);\r\n\r\n  let progress = 0;\r\n  const notiId = shortid();\r\n  const modName = util.renderModName(collection);\r\n  const doProgress = (step: string, value: number) => {\r\n    if (value <= progress) {\r\n      return;\r\n    }\r\n    progress = value;\r\n    api.sendNotification({\r\n      id: notiId,\r\n      type: 'activity',\r\n      title: 'Removing {{name}}',\r\n      message: step,\r\n      progress,\r\n      replace: {\r\n        name: modName,\r\n      },\r\n    });\r\n  };\r\n\r\n  try {\r\n    doProgress('Removing downloads', 0);\r\n    const downloads = state.persistent.downloads.files;\r\n\r\n    // either way, all running downloads are canceled. If selected, so are finished downloads\r\n    let completed = 0;\r\n    await Promise.all((collection.rules ?? []).map(async rule => {\r\n      const dlId = util.findDownloadByRef(rule.reference, downloads);\r\n\r\n      if (dlId !== undefined) {\r\n        const download = state.persistent.downloads.files[dlId];\r\n        if ((download !== undefined)\r\n          && (deleteArchives || (download.state !== 'finished'))) {\r\n          await util.toPromise(cb => api.events.emit('remove-download', dlId, cb));\r\n        }\r\n      }\r\n      doProgress('Removing downloads', 50 * ((completed++) / collection.rules.length));\r\n    }));\r\n\r\n    doProgress('Removing mods', 50);\r\n    completed = 0;\r\n    // if selected, remove mods\r\n    if (deleteMods) {\r\n      const removeMods: string[] = (collection.rules ?? [])\r\n        .map(rule => util.findModByRef(rule.reference, mods))\r\n        .filter(mod => mod !== undefined)\r\n        .map(mod => mod.id);\r\n\r\n      await util.toPromise(cb =>\r\n        api.events.emit('remove-mods', gameId, removeMods, cb, {\r\n          progressCB: (idx: number, length: number, name: string) => {\r\n            doProgress(name, 50 + (50 * idx) / length);\r\n          },\r\n        }));\r\n    }\r\n\r\n    { // finally remove the collection itself\r\n      doProgress('Removing collection', 0.99);\r\n      const download = state.persistent.downloads.files[collection.archiveId];\r\n      if (download !== undefined) {\r\n        await util.toPromise(cb => api.events.emit('remove-download', collection.archiveId, cb));\r\n      }\r\n      await util.toPromise(cb => api.events.emit('remove-mod', gameId, modId, cb, {\r\n        incomplete: true,\r\n      }));\r\n    }\r\n  } catch (err) {\r\n    if (!(err instanceof util.UserCanceled)) {\r\n      // possible reason for ProcessCanceled is that (un-)deployment may\r\n      // not be possible atm, we definitively should report that\r\n      api.showErrorNotification('Failed to remove mods', err, {\r\n        message: modName,\r\n        allowReport: !(err instanceof util.ProcessCanceled),\r\n        warning: (err instanceof util.ProcessCanceled),\r\n      } as any);\r\n    }\r\n  } finally {\r\n    modsBeingRemoved.delete(makeModKey(gameId, modId));\r\n    api.dismissNotification(notiId);\r\n  }\r\n}\r\n\r\nfunction genAttributeExtractor(api: types.IExtensionApi) {\r\n  // tslint:disable-next-line:no-shadowed-variable\r\n  return (modInfo: any, modPath: string): PromiseBB<{ [key: string]: any }> => {\r\n    const collectionId = modInfo.download?.modInfo?.nexus?.ids?.collectionId;\r\n    const revisionId = modInfo.download?.modInfo?.nexus?.ids?.revisionId;\r\n    const collectionSlug = modInfo.download?.modInfo?.nexus?.ids?.collectionSlug;\r\n    const revisionNumber = modInfo.download?.modInfo?.nexus?.ids?.revisionNumber;\r\n    const referenceTag = modInfo.download?.modInfo?.referenceTag;\r\n\r\n    const result: { [key: string]: any } = {\r\n      collectionId,\r\n      revisionId,\r\n      collectionSlug,\r\n      revisionNumber,\r\n      referenceTag,\r\n    };\r\n\r\n    return PromiseBB.resolve(result);\r\n  };\r\n}\r\n\r\nfunction generateCollectionMap(mods: { [modId: string]: types.IMod })\r\n    : { [modId: string]: types.IMod[] } {\r\n\r\n  const collections = Object.values(mods).filter(mod => mod.type === MOD_TYPE);\r\n\r\n  const result: { [modId: string]: types.IMod[] } = {};\r\n\r\n  collections.forEach(coll => (coll.rules ?? []).forEach(rule => {\r\n    if (rule.reference.id !== undefined) {\r\n      util.setdefault(result, rule.reference.id, []).push(coll);\r\n    } else {\r\n      const installed = util.findModByRef(rule.reference, mods);\r\n      if (installed !== undefined) {\r\n        util.setdefault(result, installed.id, []).push(coll);\r\n      }\r\n    }\r\n  }));\r\n\r\n  return result;\r\n}\r\n\r\ninterface IModTable { [modId: string]: types.IMod; }\r\n\r\nfunction collectionListEqual(lArgs: IModTable[], rArgs: IModTable[]): boolean {\r\n  const lhs = lArgs[0];\r\n  const rhs = rArgs[0];\r\n\r\n  if (lhs === rhs) {\r\n    return true;\r\n  }\r\n\r\n  const keys = Object.keys(lhs);\r\n\r\n  if (!_.isEqual(keys, Object.keys(rhs))) {\r\n    return false;\r\n  }\r\n\r\n  const ruleDiff = keys.find(modId =>\r\n    (lhs[modId].state !== rhs[modId].state) || (lhs[modId].rules !== rhs[modId].rules));\r\n\r\n  return ruleDiff === undefined;\r\n}\r\n\r\nfunction generateCollectionOptions(mods: { [modId: string]: types.IMod })\r\n    : Array<{ label: string, value: string }> {\r\n  return Object.values(mods)\r\n    .filter(mod => mod.type === MOD_TYPE)\r\n    .map(mod => ({ label: util.renderModName(mod), value: mod.id }));\r\n}\r\n\r\nasync function updateMeta(api: types.IExtensionApi) {\r\n  const state = api.getState();\r\n  const gameMode = selectors.activeGameId(state);\r\n  const mods = state.persistent.mods[gameMode] ?? {};\r\n  const collections = Object.keys(mods)\r\n    .filter(modId => mods[modId].type === MOD_TYPE);\r\n\r\n  const notiId = shortid();\r\n\r\n  const progress = (name: string, idx: number) => {\r\n    api.sendNotification({\r\n      id: notiId,\r\n      type: 'activity',\r\n      title: 'Updating Collection Information',\r\n      message: name,\r\n      progress: (idx * 100) / collections.length,\r\n    });\r\n  };\r\n\r\n  // tslint:disable-next-line:prefer-for-of\r\n  for (let i = 0; i < collections.length; ++i) {\r\n    const modId = collections[i];\r\n    const { revisionId, collectionSlug, revisionNumber } = mods[modId].attributes ?? {};\r\n    try {\r\n      if ((revisionId !== undefined) || (collectionSlug !== undefined)) {\r\n        progress(util.renderModName(mods[modId]), i);\r\n\r\n        const info: nexusApi.IRevision = await driver.infoCache.getRevisionInfo(\r\n          revisionId, collectionSlug, revisionNumber, 'force');\r\n        if (!!info) {\r\n          const currentRevision = info.collection.revisions\r\n            .filter(rev => rev.revisionStatus === 'published')\r\n            .sort((lhs, rhs) => rhs.revisionNumber - lhs.revisionNumber)\r\n            [0];\r\n          // currentRevision can be undefined if this collection has no published\r\n          // revision (i.e. the users own draft revision)\r\n\r\n          api.store.dispatch(actions.setModAttributes(gameMode, modId, {\r\n            collectionSlug: info.collection.slug,\r\n            revisionNumber: info.revisionNumber,\r\n            author: info.collection.user?.name,\r\n            uploader: info.collection.user?.name,\r\n            uploaderAvatar: info.collection.user?.avatar,\r\n            uploaderId: info.collection.user?.memberId,\r\n            pictureUrl: info.collection.tileImage?.url,\r\n            description: info.collection.description,\r\n            shortDescription: info.collection.summary,\r\n            newestFileId: currentRevision?.revisionNumber,\r\n            newestVersion: currentRevision?.revisionNumber?.toString?.(),\r\n            metadata: info.metadata,\r\n            rating: info.rating,\r\n          }));\r\n        }\r\n      }\r\n    } catch (err) {\r\n      api.showErrorNotification('Failed to check collection for update', err);\r\n    }\r\n  }\r\n\r\n  localState.ownCollections = (await api.emitAndAwait('get-my-collections', gameMode))[0] || [];\r\n\r\n  api.dismissNotification(notiId);\r\n}\r\n\r\ninterface ICallbackMap { [cbName: string]: (...args: any[]) => void; }\r\n\r\nlet collectionChangedCB: () => void;\r\n\r\nfunction onAddSelectionImpl(api: types.IExtensionApi, collectionId: string, modIds: string[]) {\r\n  const state = api.getState();\r\n  const gameId = selectors.activeGameId(state);\r\n  const collection = state.persistent.mods[gameId][collectionId];\r\n\r\n  if (collection !== undefined) {\r\n    modIds.forEach(modId => {\r\n      if (!alreadyIncluded(collection.rules, modId)) {\r\n        api.store.dispatch(actions.addModRule(gameId, collectionId, {\r\n          type: 'requires',\r\n          reference: {\r\n            id: modId,\r\n          },\r\n        }));\r\n      }\r\n    });\r\n  } else {\r\n    log('warn', 'failed to add mods to collection, collection no longer found',\r\n        { gameId, collectionId, modIds });\r\n  }\r\n}\r\n\r\nconst localState = util.makeReactive<{\r\n  ownCollections: IRevision[],\r\n}>({\r\n  ownCollections: [],\r\n});\r\n\r\nfunction register(context: types.IExtensionContext,\r\n                  collectionsCB: ICallbackMap) {\r\n  context.registerReducer(['session', 'collections'], sessionReducer);\r\n  context.registerReducer(['settings', 'collections'], settingsReducer);\r\n  context.registerReducer(['persistent', 'collections'], persistentReducer);\r\n\r\n  const onSwitchProfile = (profileId: string) => {\r\n    return new Promise<void>((resolve, reject) => {\r\n      context.api.events.once('profile-did-change', (newProfileId: string) => {\r\n        if (newProfileId === profileId) {\r\n          resolve();\r\n        } else {\r\n          log('warn', `Failed to switch to profile ${profileId}; got ${newProfileId}`);\r\n          const profile = selectors.profileById(context.api.getState(), profileId);\r\n          if (profile === undefined) {\r\n            reject(new Error(`Failed to switch to profile ${profileId}; got ${newProfileId}`));\r\n          }\r\n\r\n          // The profile exists - this is a memoization issue, lets just switch to\r\n          //  it rather crashing the app. The installDriver has a fallback mechanism\r\n          //  to ensure it uses the correct profile anyway.\r\n          //\r\n          // P.S. previously the fallback mechanism was being executed in the background\r\n          //  for each switch anyway. (so even if we crash the app, the profile was still\r\n          //  being activated)\r\n          context.api.store.dispatch(actions.setNextProfile(profileId));\r\n          resolve();\r\n        }\r\n      });\r\n      context.api.store.dispatch(actions.setNextProfile(profileId));\r\n    });\r\n  };\r\n\r\n  context.registerDialog('collection-install', InstallStartDialog, () => ({\r\n    driver,\r\n    onSwitchProfile,\r\n  }));\r\n\r\n  const onClone = (collectionId: string) => cloneInstalledCollection(context.api, collectionId);\r\n  const onCreateCollection = (profile: types.IProfile, name: string) =>\r\n    createNewCollection(context.api, profile, name);\r\n  const onRemoveCollection = (gameId: string, modId: string, cancel: boolean) => \r\n    removeCollection(context.api, gameId, modId, cancel);\r\n  const onUpdateMeta = () => updateMeta(context.api);\r\n  const editCollection = (id: string) => collectionsCB.editCollection(id);\r\n  const onInstallCollection = (revision: IRevision) => installCollection(context.api, revision);\r\n\r\n  context.registerDialog('collection-finish', InstallFinishDialog, () => ({\r\n    api: context.api,\r\n    driver,\r\n    onClone,\r\n    editCollection,\r\n  }));\r\n\r\n  context.registerDialog('collection-changelog', InstallChangelogDialog, () => ({}));\r\n\r\n  const onAddSelection = (collectionId: string, modIds: string[]) =>\r\n    onAddSelectionImpl(context.api, collectionId, modIds);\r\n\r\n  context.registerDialog('add-mod-to-collection', AddModsDialog, () => ({\r\n    onAddSelection,\r\n  }));\r\n\r\n  context.registerDialog('collection-health-downvote', HealthDownvoteDialog, () => ({}));\r\n\r\n  let resetPageCB: () => void;\r\n  const resetCB = (cb) => resetPageCB = cb;\r\n  const onAddCallback = (cbName: string, cb: (...args: any[]) => void) => {\r\n    collectionsCB[cbName] = cb;\r\n  };\r\n\r\n  context.registerMainPage('collection', 'Collections', CollectionsMainPage, {\r\n    hotkey: 'C',\r\n    group: 'per-game',\r\n    visible: () => selectors.activeGameId(context.api.store.getState()) !== undefined,\r\n    props: () => ({\r\n      driver,\r\n      localState,\r\n      onInstallCollection,\r\n      onAddCallback,\r\n      onRemoveCollection,\r\n      onCloneCollection: onClone,\r\n      onCreateCollection,\r\n      onUpdateMeta,\r\n      resetCB,\r\n      pathTool,\r\n    }),\r\n    onReset: () => resetPageCB?.(),\r\n    priority: 90,\r\n  });\r\n\r\n  context.registerModType(MOD_TYPE, 200, () => true,\r\n    () => undefined, () => PromiseBB.resolve(false), {\r\n    name: 'Collection',\r\n    customDependencyManagement: true,\r\n    noConflicts: true,\r\n  } as any);\r\n\r\n  const stateFunc: () => types.IState = () => context.api.store.getState();\r\n\r\n  const emptyArray = [];\r\n  const emptyObj = {};\r\n\r\n  const collectionsMapFunc = memoize(generateCollectionMap, collectionListEqual);\r\n\r\n  const collectionsMap = () =>\r\n    collectionsMapFunc(\r\n      stateFunc().persistent.mods[selectors.activeGameId(stateFunc())] ?? emptyObj);\r\n  const collectionOptions = memoize(generateCollectionOptions);\r\n\r\n  const collectionChanged = new util.Debouncer(() => {\r\n    collectionChangedCB?.();\r\n    return null;\r\n  }, 500);\r\n\r\n  const collectionAttribute: types.ITableAttribute<types.IMod> = {\r\n    id: 'collection',\r\n    name: 'Collection',\r\n    description: 'Collection(s) this mod was installed from (if any)',\r\n    icon: 'collection',\r\n    placement: 'both',\r\n    customRenderer: (mod: types.IMod, detailCell: boolean) => {\r\n      const collections = collectionsMap()[mod.id] || emptyArray;\r\n      return React.createElement(CollectionAttributeRenderer,\r\n                                 { modId: mod.id, collections, detailCell }, []);\r\n    },\r\n    calc: (mod: types.IMod) => {\r\n      const collections = collectionsMap()[mod.id];\r\n      return (collections === undefined)\r\n        ? '' : collections.map(iter => iter.id);\r\n    },\r\n    externalData: (onChanged: () => void) => {\r\n      collectionChangedCB = onChanged;\r\n    },\r\n    isToggleable: true,\r\n    edit: {},\r\n    filter: new OptionsFilter((() => {\r\n      const mods = stateFunc().persistent.mods[selectors.activeGameId(stateFunc())] ?? {};\r\n      return [\r\n        { label: `<${context.api.translate('None')}>`, value: OptionsFilter.EMPTY },\r\n        ...collectionOptions(mods),\r\n      ];\r\n    }),\r\n      false, false),\r\n    isGroupable: true,\r\n    groupName: (modId: string) =>\r\n      util.renderModName(stateFunc().persistent.mods[selectors.activeGameId(stateFunc())]?.[modId]),\r\n    isDefaultVisible: false,\r\n  };\r\n  context.registerTableAttribute('mods', collectionAttribute);\r\n\r\n  context.registerAction('mods-action-icons', 25, 'collection-edit', {}, 'Edit Collection',\r\n    (modIds: string[]) => {\r\n      context.api.events.emit('show-main-page', 'Collections');\r\n      // have to delay this a bit because the callbacks are only set up once the page\r\n      // is first opened\r\n      setTimeout(() => {\r\n        if ((collectionsCB !== undefined) && (collectionsCB.editCollection !== undefined)) {\r\n          collectionsCB.editCollection(modIds[0]);\r\n        }\r\n      }, 100);\r\n    }, (modIds: string[]) => isEditableCollection(context.api.getState(), modIds));\r\n\r\n  context.registerAction('mods-action-icons', 50, 'conflict', {}, 'Apply Collection Rules',\r\n    (modIds: string[]) => {\r\n      const state = context.api.getState();\r\n      const gameId = selectors.activeGameId(state);\r\n      context.api.events.emit('did-install-dependencies', gameId, modIds[0], false);\r\n    }, (modIds: string[]) => {\r\n      const state = context.api.getState();\r\n      const gameId = selectors.activeGameId(state);\r\n      const mod = state.persistent.mods[gameId][modIds[0]];\r\n      if (mod === undefined) {\r\n        return false;\r\n      }\r\n      return (mod.type === MOD_TYPE);\r\n    });\r\n  /*\r\n  context.registerAction('mods-action-icons', 75, 'start-install', {}, 'Install Optional Mods...',\r\n    (modIds: string[]) => {\r\n      const profile: types.IProfile = selectors.activeProfile(stateFunc());\r\n      context.api.events.emit('install-recommendations', profile.id, profile.gameId, modIds);\r\n    }, (modIds: string[]) => {\r\n      const gameMode = selectors.activeGameId(stateFunc());\r\n      const mod = stateFunc().persistent.mods[gameMode][modIds[0]];\r\n      if (mod === undefined) {\r\n        return false;\r\n      }\r\n      if ((mod.rules ?? []).find(rule => rule.type === 'recommends') === undefined) {\r\n        return context.api.translate('No optional mods') as string;\r\n      }\r\n      return (mod.type === MOD_TYPE);\r\n    });\r\n  */\r\n\r\n  // context.registerAction('global-icons', 100, 'highlight-lab', {}, 'Quick Collection', () => {\r\n  //   initFromProfile(context.api)\r\n  //     .catch(err => context.api.showErrorNotification('Failed to init collection', err));\r\n  // }, () => {\r\n  //   const state = context.api.getState();\r\n  //   const activeProfile = selectors.activeProfile(state);\r\n  //   return activeProfile !== undefined;\r\n  // });\r\n\r\n  context.registerAction('profile-actions', 150, 'highlight-lab', {}, 'Init Collection',\r\n    (profileIds: string[]) => {\r\n      initFromProfile(context.api, profileIds[0])\r\n        .catch(err => context.api.showErrorNotification('Failed to init collection', err));\r\n    }, (profileIds: string[]) => !profileCollectionExists(context.api, profileIds[0]));\r\n\r\n  context.registerAction('profile-actions', 150, 'highlight-lab', {}, 'Update Collection',\r\n    (profileIds: string[]) => {\r\n      initFromProfile(context.api, profileIds[0])\r\n        .catch(err => context.api.showErrorNotification('Failed to update collection', err));\r\n    }, (profileIds: string[]) => profileCollectionExists(context.api, profileIds[0]));\r\n\r\n  context.registerAction('mods-action-icons', 300, 'collection', {}, 'Add to Collection...',\r\n    (instanceIds: string[]) => addCollectionAction(context.api, instanceIds)\r\n        .then(() => collectionChanged.schedule())\r\n        .catch(err => context.api.showErrorNotification('failed to add mod to collection', err)),\r\n    (instanceIds: string[]) => addCollectionCondition(context.api, instanceIds));\r\n\r\n  context.registerAction('mods-multirow-actions', 300, 'collection', {}, 'Add to Collection...',\r\n    (instanceIds: string[]) => addCollectionAction(context.api, instanceIds)\r\n        .then(() => collectionChanged.schedule())\r\n        .catch(err => context.api.showErrorNotification('failed to add mod to collection', err)),\r\n    (instanceIds: string[]) => addCollectionCondition(context.api, instanceIds));\r\n\r\n  context.registerAction('mods-action-icons', 300, 'collection', {}, 'Remove from Collection...',\r\n    (instanceIds: string[]) => removeCollectionAction(context.api, instanceIds)\r\n        .then(() => collectionChanged.schedule())\r\n        .catch(err => context.api.showErrorNotification('failed to remove mod from collection', err)),\r\n    (instanceIds: string[]) => removeCollectionCondition(context.api, instanceIds));\r\n\r\n  context.registerAction('mods-multirow-actions', 300, 'collection', {},\r\n                         'Remove from Collection...',\r\n    (instanceIds: string[]) => removeCollectionAction(context.api, instanceIds)\r\n        .then(() => collectionChanged.schedule())\r\n        .catch(err => context.api.showErrorNotification('failed to remove mod from collection', err)),\r\n    (instanceIds: string[]) => removeCollectionCondition(context.api, instanceIds));\r\n\r\n  context.registerAttributeExtractor(100, genAttributeExtractor(context.api));\r\n\r\n  context.registerInstaller('collection', 5,\r\n                            bbProm(testSupported), bbProm(makeInstall(context.api)));\r\n\r\n  context['registerCollectionFeature'] =\r\n    (id: string,\r\n     generate: (gameId: string, includedMods: string[]) => Promise<any>,\r\n     parse: (gameId: string, collection: ICollection) => Promise<void>,\r\n     clone: (gameId: string, collection: ICollection,\r\n             from: types.IMod, to: types.IMod) => Promise<void>,\r\n     title: (t: types.TFunction) => string,\r\n     condition?: (state: types.IState, gameId: string) => boolean,\r\n     editComponent?: React.ComponentType<IExtendedInterfaceProps>) => {\r\n      addExtension({ id, generate, parse, clone, condition, title, editComponent });\r\n    };\r\n\r\n  context.registerActionCheck('ADD_NOTIFICATION', (state: types.IState, action: Redux.Action) => {\r\n    const notification: types.INotification = action['payload'];\r\n    const ruleMatches = rule => rule.reference.tag === notification.replace?.tag;\r\n\r\n    let collection: types.IMod;\r\n    if ((driver?.collection !== undefined) && notification.id.startsWith('multiple-plugins-')) {\r\n      // reference tags may be updated during installation, so we need to get the\r\n      // updated collection if necessary\r\n      if (driver.profile !== undefined) {\r\n        collection = state.persistent.mods[driver.profile.gameId]?.[driver.collection.id]\r\n                  ?? driver.collection;\r\n      } else {\r\n        collection = driver.collection;\r\n      }\r\n    }\r\n\r\n    if ((collection?.rules ?? []).find(ruleMatches) !== undefined) {\r\n      return false as any;\r\n    }\r\n    return undefined;\r\n  });\r\n}\r\n\r\nasync function triggerVoteNotification(api: types.IExtensionApi,\r\n                                       revisionId: string,\r\n                                       collectionSlug: string, revisionNumber: number)\r\n                                       : Promise<void> {\r\n  if ((collectionSlug === undefined) || (revisionNumber === undefined)) {\r\n    return Promise.resolve();\r\n  }\r\n\r\n  const revInfo =\r\n    await driver.infoCache.getRevisionInfo(revisionId, collectionSlug, revisionNumber);\r\n\r\n  if (!revInfo) {\r\n    // no info about that revision? This might be a temporary network issue but if we don't\r\n    // resolve here and the revision actually doesn't exist any more we'd never get rid of\r\n    // the vote request\r\n    \r\n    return Promise.resolve();\r\n  }\r\n\r\n  const sendRating = async (success: boolean) => {\r\n    const vote = success ? 'positive' : 'negative';\r\n    const voted: { success: boolean, averageRating?: nexusApi.IRating } =\r\n      (await api.emitAndAwait('rate-nexus-collection-revision', parseInt(revisionId, 10), vote))[0];\r\n    if (voted.success) {\r\n      api.store.dispatch(\r\n        updateSuccessRate(revisionId, vote,\r\n                          voted.averageRating.average, voted.averageRating.total));\r\n    }\r\n  };\r\n\r\n  return new Promise((resolve, reject) => {\r\n    api.sendNotification({\r\n      type: 'info',\r\n      message: revInfo.collection.name,\r\n      title: 'Did the Collection work for you?',\r\n      noDismiss: true,\r\n      actions: [\r\n        {\r\n          title: 'Yes',\r\n          action: dismiss => {\r\n            api.events.emit('analytics-track-click-event', 'Notifications', 'Success rating - Yes');\r\n            sendRating(true);\r\n            resolve();\r\n            dismiss();\r\n          },\r\n        },\r\n        {\r\n          title: 'No',\r\n          action: dismiss => {\r\n            api.events.emit('analytics-track-click-event', 'Notifications', 'Success rating - No');\r\n            sendRating(false);\r\n            resolve();\r\n            dismiss();\r\n          },\r\n        },\r\n        {\r\n          icon: 'close',\r\n          action: dismiss => {\r\n            api.events.emit(\r\n              'analytics-track-click-event', 'Notifications', 'Success rating - Dismiss');\r\n            resolve();\r\n            dismiss();\r\n          },\r\n        } as any,\r\n      ],\r\n    });\r\n  });\r\n}\r\n\r\nasync function checkVoteRequest(api: types.IExtensionApi): Promise<number> {\r\n  let elapsed = 0;\r\n  const state = api.getState();\r\n  const pendingVotes = state.persistent['collections'].pendingVotes ?? {};\r\n  const now = Date.now();\r\n\r\n  for (const revisionId of Object.keys(pendingVotes)) {\r\n    const pendingInfo = pendingVotes[revisionId];\r\n    if (now - pendingInfo.time >= TIME_BEFORE_VOTE) {\r\n      await triggerVoteNotification(api, revisionId,\r\n        pendingInfo.collectionSlug, pendingInfo.revisionNumber);\r\n      api.store.dispatch(clearPendingVote(revisionId));\r\n    } else {\r\n      elapsed = Math.max(elapsed, now - pendingInfo.time);\r\n    }\r\n  }\r\n\r\n  // this doesn't account for the delay caused by the user reacting to the notification so\r\n  // the next check and thereby next notification can take that much longer but I think\r\n  // that's so irrelevant\r\n  return TIME_BEFORE_VOTE - elapsed;\r\n}\r\n\r\nfunction once(api: types.IExtensionApi, collectionsCB: () => ICallbackMap) {\r\n  const { store } = api;\r\n\r\n  const applyCollectionModDefaults = new util.Debouncer(() => {\r\n    const gameMode = selectors.activeGameId(state());\r\n    const mods = util.getSafe(state(), ['persistent', 'mods', gameMode], {});\r\n    const collectionIds = Object.keys(mods).filter(id => (mods[id]?.type === MOD_TYPE));\r\n    const redActions: Redux.Action[] = collectionIds.reduce((accum, id) => {\r\n      const collection: types.IMod = mods[id];\r\n      if ((collection === undefined) || (collection.attributes['editable'] !== true)) {\r\n        return accum;\r\n      }\r\n      const collMods = (collection.rules ?? [])\r\n        .map(rule => util.findModByRef(rule.reference, mods))\r\n        .filter(rule => rule !== undefined);\r\n      const action = genDefaultsAction(api, id, collMods, gameMode);\r\n      if (action !== undefined) {\r\n        accum.push(action);\r\n      }\r\n      return accum;\r\n    }, []);\r\n\r\n    if (redActions.length > 0) {\r\n      util.batchDispatch(api.store, redActions);\r\n    }\r\n    return null;\r\n  }, 1000);\r\n\r\n  driver = new InstallDriver(api);\r\n\r\n  driver.onUpdate(() => {\r\n    // currently no UI associated with the start step\r\n    if (driver.step === 'start') {\r\n      driver.continue();\r\n    }\r\n\r\n    if (driver.step === 'review') {  \r\n\r\n      // this is called a few times so we need to check if collection is undefined or not so we only write timestamp once \r\n      if(driver.collection === undefined) return;\r\n\r\n      const gameId = driver.profile.gameId;\r\n      const modId = driver.collection.id;\r\n\r\n      api.store.dispatch(actions.setModAttribute(gameId, modId, 'installCompleted', Date.now()));\r\n    }\r\n  });\r\n\r\n  const doCheckVoteRequest = () => {\r\n    checkVoteRequest(api)\r\n      .then((nextCheck: number) => {\r\n        setTimeout(doCheckVoteRequest, nextCheck);\r\n      });\r\n  };\r\n\r\n  setTimeout(doCheckVoteRequest, DELAY_FIRST_VOTE_REQUEST);\r\n\r\n  api.setStylesheet('collections', path.join(__dirname, 'style.scss'));\r\n\r\n  const state: () => types.IState = () => store.getState();\r\n\r\n  interface IModsDict { [gameId: string]: { [modId: string]: types.IMod }; }\r\n\r\n  api.onStateChange(['persistent', 'mods'], (prev: IModsDict, cur: IModsDict) => {\r\n    const gameMode = selectors.activeGameId(api.getState());\r\n    const prevG = prev[gameMode] ?? {};\r\n    const curG = cur[gameMode] ?? {};\r\n    const allIds =\r\n      Array.from(new Set([].concat(Object.keys(prevG), Object.keys(curG))));\r\n    const collections = allIds.filter(id =>\r\n      (prevG[id]?.type === MOD_TYPE) || (curG[id]?.type === MOD_TYPE));\r\n    const changed = collections.find(modId =>\r\n      (prevG[modId]?.attributes?.customFileName !== curG[modId]?.attributes?.customFileName));\r\n    if (changed !== undefined) {\r\n      collectionChangedCB?.();\r\n    }\r\n\r\n    const foundRuleChanges: boolean = collections.find((id) => {\r\n      if (prevG[id]?.rules === curG[id]?.rules) {\r\n        return false;\r\n      }\r\n      const added = _.difference(curG[id]?.rules, prevG[id]?.rules);\r\n      const removed = _.difference(prevG[id]?.rules, curG[id]?.rules);\r\n      return (removed.length > 0) || (added.find(rule =>\r\n          ['requires', 'recommends'].includes(rule.type)) !== undefined);\r\n    }) !== undefined;\r\n\r\n    if (foundRuleChanges) {\r\n      applyCollectionModDefaults.schedule();\r\n      if (changed === undefined) {\r\n        // The collectionChanged callback hasn't been called; yet\r\n        //  the mod entries had been changed - we need to call the CB\r\n        //  in order for the collection column on the mods page to rerender\r\n        collectionChangedCB?.();\r\n      }\r\n    }\r\n  });\r\n\r\n  api.events.on('did-dismiss-overlay', (overlayId: string, itemId: string) => {\r\n    const OVERLAY_ID = 'collection-instructions-overlay';\r\n    const state = api.getState();\r\n    const { gameId } = driver.profile ?? {};\r\n    const mods = state.persistent.mods[gameId] ?? {};\r\n    // the itemId will be a reference tag if this was from a collection or an archiveId otherwise\r\n    if ((driver.lastCollection !== undefined)\r\n        && (mods[driver.lastCollection.id] !== undefined)\r\n        && (itemId !== undefined)\r\n        && (state.settings.notifications.suppress[OVERLAY_ID] !== true)) {\r\n      // have to update here because the reference tags may have been updated during installation\r\n      const collections = mods[driver.lastCollection.id];\r\n      const match = (collections.rules ?? [])\r\n        .find(rule => (rule.type === 'requires') && (rule.reference.tag === itemId));\r\n\r\n      if (match !== undefined) {\r\n        api.showDialog('info', 'Mod instructions', {\r\n          text: 'You can refer back to closed mod instructions at any time in the Instructions tab on '\r\n              + 'the Collections page.',\r\n          checkboxes: [\r\n            { id: 'dont_show_again', value: false, text: 'Don\\'t show again' },\r\n          ],\r\n        }, [\r\n          { label: 'Take me to instructions' },\r\n          { label: 'Close' },\r\n        ], OVERLAY_ID)\r\n          .then((result: types.IDialogResult) => {\r\n            if (result.input['dont_show_again']) {\r\n              api.store.dispatch(actions.suppressNotification(OVERLAY_ID, true))\r\n            }\r\n\r\n            if (result.action === 'Take me to instructions') {\r\n              api.events.emit('show-main-page', 'Collections');\r\n              // have to delay this a bit because the callbacks are only set up once the page\r\n              // is first opened\r\n              setTimeout(() => {\r\n                collectionsCB().viewCollection?.(driver.lastCollection.id);\r\n              }, 100);\r\n            }\r\n          })\r\n          .catch(err => {\r\n            log('warn', 'failed to show mod instructions suppress dialog', { error: err.message });\r\n          });\r\n      }\r\n    }\r\n  });\r\n\r\n  api.events.on('did-install-mod', async (gameId: string, archiveId: string, modId: string) => {\r\n    // automatically enable collections once they're installed\r\n    const profileId = selectors.lastActiveProfileForGame(state(), gameId);\r\n    const profile = selectors.profileById(state(), profileId);\r\n    if (profile === undefined) {\r\n      return;\r\n    }\r\n    const mod = util.getSafe(state().persistent.mods, [gameId, modId], undefined);\r\n    if (mod === undefined) {\r\n      // how ?\r\n      return;\r\n    }\r\n    if (mod.type === MOD_TYPE) {\r\n      if (driver.collection === undefined) {\r\n        const awaitProfileSwitch = api.ext?.awaitProfileSwitch ?? (() => Promise.resolve());\r\n        await awaitProfileSwitch();\r\n        driver.query(profile, mod);\r\n      } else {\r\n        api.sendNotification({\r\n          type: 'info',\r\n          message: 'Collection can\\'t be installed as another one is being installed already',\r\n        });\r\n      }\r\n    } else if (driver.collection !== undefined) {\r\n      const { collection, revisionId } = driver;\r\n\r\n      const isDependency = (collection?.rules ?? []).find(rule => {\r\n        const validType = ['requires', 'recommends'].includes(rule.type);\r\n        if (!validType) {\r\n          return false;\r\n        }\r\n        const matchedRule = util.testModReference(mod, rule.reference);\r\n        return matchedRule;\r\n      }) !== undefined;\r\n      if (isDependency) {\r\n        const modRules =\r\n          await driver.infoCache.getCollectionModRules(\r\n            revisionId, collection, gameId);\r\n        util.batchDispatch(api.store, (modRules ?? []).reduce((prev, rule) => {\r\n          if (util.testModReference(mod, rule.source)) {\r\n            prev.push(actions.addModRule(gameId, modId, {\r\n              type: rule.type,\r\n              reference: rule.reference,\r\n              extra: {\r\n                fromCollection: collection.id,\r\n              },\r\n            }));\r\n          }\r\n          return prev;\r\n        }, []));\r\n      }\r\n    }\r\n  });\r\n\r\n  api.onAsync('will-remove-mods', makeWillRemoveMods());\r\n  api.onAsync('did-remove-mods', makeDidRemoveMods());\r\n\r\n  api.onAsync('unfulfilled-rules', makeOnUnfulfilledRules(api));\r\n  api.events.on('collection-update', onCollectionUpdate(api, driver));\r\n\r\n  api.events.on('did-finish-download', (dlId: string, outcome: string) => {\r\n    if (outcome === 'finished') {\r\n      const download: types.IDownload = state().persistent.downloads.files[dlId];\r\n      if (download === undefined) {\r\n        return;\r\n      }\r\n    }\r\n  });\r\n\r\n  api.events.on('did-download-collection', async (dlId: string) => {\r\n    try {\r\n      const dlInfo: types.IDownload =\r\n        util.getSafe(state().persistent.downloads.files, [dlId], undefined);\r\n      const profile = selectors.activeProfile(state());\r\n      if ((profile === undefined) || (dlInfo === undefined)) {\r\n        return;\r\n      }\r\n      if (!dlInfo.game.includes(profile.gameId)) {\r\n        log('info', 'Collection downloaded for a different game than is being managed',\r\n            { gameMode: profile.gameId, game: dlInfo.game });\r\n        const expectedGame = util.getGame(dlInfo.game[0]);\r\n        const actualGame = util.getGame(profile.gameId);\r\n        api.sendNotification({\r\n          message: '\"{{collectionName}}\" - This collection is intended for {{expectedGame}} '\r\n                  + 'and cannot be installed to {{actualGame}}',\r\n          type: 'info',\r\n          replace: {\r\n            collectionName: dlInfo.modInfo?.name ?? dlInfo.localPath,\r\n            expectedGame: expectedGame?.name ?? api.translate('an unsupported game'),\r\n            actualGame: actualGame.name,\r\n          },\r\n        });\r\n\r\n        // the collection was for a different game, can't install it now\r\n        return;\r\n      } else {\r\n        // once this is complete it will automatically trigger did-install-mod\r\n        // which will then start the ui for the installation process\r\n        await util.toPromise<string>(cb => api.events.emit('start-install-download', dlId, {\r\n          allowAutoEnable: false,\r\n        }, cb));\r\n      }\r\n    } catch (err) {\r\n      if (!(err instanceof util.UserCanceled)) {\r\n        api.showErrorNotification('Failed to add collection', err, {\r\n          allowReport: !(err instanceof util.ProcessCanceled),\r\n        });\r\n      }\r\n    }\r\n  });\r\n\r\n  api.events.on('view-collection', (modId: string, tabId?: string) => {\r\n    api.events.emit('show-main-page', 'Collections');\r\n    // have to delay this a bit because the callbacks are only set up once the page\r\n    // is first opened\r\n    setTimeout(() => {\r\n      collectionsCB().viewCollection?.(modId);\r\n      collectionsCB().viewCollectionTab?.(tabId);\r\n    }, 100);\r\n  });\r\n\r\n  api.events.on('edit-collection', (modId: string) => {\r\n    api.events.emit('show-main-page', 'Collections');\r\n    // have to delay this a bit because the callbacks are only set up once the page\r\n    // is first opened\r\n    setTimeout(() => {\r\n      collectionsCB().editCollection?.(modId);\r\n    }, 100);\r\n  });\r\n\r\n  api.events.on('resume-collection', (gameId: string, modId: string) => {\r\n    const state = api.getState();\r\n    const profileId = selectors.lastActiveProfileForGame(state, gameId);\r\n    const profile = state.persistent.profiles[profileId];\r\n    const mod = state.persistent.mods[gameId]?.[modId];\r\n    log('info', 'resume collection', { gameId, modId, archiveId: mod?.archiveId });\r\n    driver.start(profile, mod);\r\n  });\r\n\r\n  api.onStateChange(['persistent', 'collections', 'collections'], (prev, cur) => {\r\n    // tslint:disable-next-line:no-shadowed-variable\r\n    const state = api.getState();\r\n    const changedIds = Object.keys(cur).filter(id => cur[id].info !== prev[id]?.info);\r\n\r\n    const knownGames = selectors.knownGames(state);\r\n\r\n    const { mods } = state.persistent;\r\n\r\n    changedIds.forEach(collId => {\r\n      const coll: nexusApi.ICollection = cur[collId].info;\r\n      const gameId = util.convertGameIdReverse(knownGames, coll.game.domainName);\r\n      const collModId = Object.keys(mods[gameId])\r\n        .find(modId => mods[gameId][modId].attributes['collectionId'] === coll.id);\r\n      // don't set a \"newestVersion\" on own collections because we don't allow an update on those\r\n      // anyway\r\n      if ((collModId !== undefined) && !mods[gameId][collModId].attributes.editable) {\r\n        const newestVersion = coll.revisions\r\n          .filter(rev => rev.revisionStatus === 'published')\r\n          .sort((lhs, rhs) => rhs.revisionNumber - lhs.revisionNumber);\r\n\r\n        if (newestVersion.length > 0) {\r\n          api.store.dispatch(actions.setModAttribute(gameId, collModId,\r\n            'newestVersion', newestVersion[0].revisionNumber.toString()));\r\n        }\r\n      }\r\n    });\r\n  });\r\n\r\n  util.installIconSet('collections', path.join(__dirname, 'icons.svg'))\r\n    .catch(err => api.showErrorNotification('failed to install icon set', err));\r\n\r\n  const iconPath = path.join(__dirname, 'collectionicon.svg');\r\n  document.getElementById('content').style\r\n    .setProperty('--collection-icon', `url(${pathToFileURL(iconPath).href})`);\r\n\r\n  const updateOwnCollectionsCB = (gameId: string) =>\r\n    api.emitAndAwait('get-my-collections', gameId)\r\n      .then(result => {\r\n        localState.ownCollections = result[0] ?? [];\r\n      });\r\n\r\n  api.events.on('gamemode-activated', updateOwnCollectionsCB);\r\n  api.onStateChange(['persistent', 'nexus', 'userInfo'], (prev, cur) => {\r\n    const gameMode = selectors.activeGameId(api.getState());\r\n    updateOwnCollectionsCB(gameMode);\r\n  });\r\n\r\n  driver.infoCache.clearCache();\r\n}\r\n\r\nconst pathTool: IPathTools = {\r\n  relative: path.relative,\r\n}\r\n\r\nfunction init(context: types.IExtensionContext): boolean {\r\n  const collectionsCB: ICallbackMap = {};\r\n\r\n  register(context, collectionsCB);\r\n\r\n  initIniTweaks(context);\r\n  initTools(context);\r\n\r\n  context.once(() => {\r\n    once(context.api, () => collectionsCB);\r\n  });\r\n  return true;\r\n}\r\n\r\nexport default init;\r\n"],"names":[],"sourceRoot":""}