{"version":3,"file":"index.js","mappings":";;;;;;;;;;AAAa;AACb,8FAAuC;;;;;;;;;;;ACD1B;;AAEb,qBAAqB,mBAAO,CAAC,wFAA2B;;AAExD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACjGa;;AAEb,aAAa,mBAAO,CAAC,sDAAU;AAC/B,eAAe,mBAAO,CAAC,0DAAY;;AAEnC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;;AC/Ca;AACb,eAAe,mBAAO,CAAC,0DAAY;;AAEnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;AChBa;;AAEb,iBAAiB,mBAAO,CAAC,sFAAsB;;AAE/C;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;AClBa;;AAEb,eAAe,mBAAO,CAAC,0DAAY;AACnC,aAAa,mBAAO,CAAC,sDAAU;AAC/B,aAAa,mBAAO,CAAC,sDAAU;AAC/B,YAAY,mBAAO,CAAC,oDAAS;AAC7B,cAAc,mBAAO,CAAC,0DAAY;;AAElC;AACA;AACA;AACA;AACA,sBAAsB,mBAAO,CAAC,8FAA0B;;AAExD;AACA;AACA;AACA;A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","sources":["webpack://mtframework-arc-support/./node_modules/shortid/index.js","webpack://mtframework-arc-support/./node_modules/shortid/lib/alphabet.js","webpack://mtframework-arc-support/./node_modules/shortid/lib/build.js","webpack://mtframework-arc-support/./node_modules/shortid/lib/decode.js","webpack://mtframework-arc-support/./node_modules/shortid/lib/encode.js","webpack://mtframework-arc-support/./node_modules/shortid/lib/index.js","webpack://mtframework-arc-support/./node_modules/shortid/lib/is-valid.js","webpack://mtframework-arc-support/./node_modules/shortid/lib/random/random-byte-browser.js","webpack://mtframework-arc-support/./node_modules/shortid/lib/random/random-from-seed.js","webpack://mtframework-arc-support/./node_modules/shortid/lib/util/cluster-worker-id-browser.js","webpack://mtframework-arc-support/./src/ARCWrapper.ts","webpack://mtframework-arc-support/./src/AttribDashlet.tsx","webpack://mtframework-arc-support/./src/gameSupport.ts","webpack://mtframework-arc-support/./src/index.ts","webpack://mtframework-arc-support/external commonjs2 \"bluebird\"","webpack://mtframework-arc-support/external node-commonjs \"child_process\"","webpack://mtframework-arc-support/external commonjs2 \"fs\"","webpack://mtframework-arc-support/external commonjs2 \"path\"","webpack://mtframework-arc-support/external commonjs2 \"react\"","webpack://mtframework-arc-support/external commonjs2 \"react-i18next\"","webpack://mtframework-arc-support/external commonjs2 \"vortex-api\"","webpack://mtframework-arc-support/webpack/bootstrap","webpack://mtframework-arc-support/webpack/before-startup","webpack://mtframework-arc-support/webpack/startup","webpack://mtframework-arc-support/webpack/after-startup"],"sourcesContent":["'use strict';\nmodule.exports = require('./lib/index');\n","'use strict';\n\nvar randomFromSeed = require('./random/random-from-seed');\n\nvar ORIGINAL = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-';\nvar alphabet;\nvar previousSeed;\n\nvar shuffled;\n\nfunction reset() {\n    shuffled = false;\n}\n\nfunction setCharacters(_alphabet_) {\n    if (!_alphabet_) {\n        if (alphabet !== ORIGINAL) {\n            alphabet = ORIGINAL;\n            reset();\n        }\n        return;\n    }\n\n    if (_alphabet_ === alphabet) {\n        return;\n    }\n\n    if (_alphabet_.length !== ORIGINAL.length) {\n        throw new Error('Custom alphabet for shortid must be ' + ORIGINAL.length + ' unique characters. You submitted ' + _alphabet_.length + ' characters: ' + _alphabet_);\n    }\n\n    var unique = _alphabet_.split('').filter(function(item, ind, arr){\n       return ind !== arr.lastIndexOf(item);\n    });\n\n    if (unique.length) {\n        throw new Error('Custom alphabet for shortid must be ' + ORIGINAL.length + ' unique characters. These characters were not unique: ' + unique.join(', '));\n    }\n\n    alphabet = _alphabet_;\n    reset();\n}\n\nfunction characters(_alphabet_) {\n    setCharacters(_alphabet_);\n    return alphabet;\n}\n\nfunction setSeed(seed) {\n    randomFromSeed.seed(seed);\n    if (previousSeed !== seed) {\n        reset();\n        previousSeed = seed;\n    }\n}\n\nfunction shuffle() {\n    if (!alphabet) {\n        setCharacters(ORIGINAL);\n    }\n\n    var sourceArray = alphabet.split('');\n    var targetArray = [];\n    var r = randomFromSeed.nextValue();\n    var characterIndex;\n\n    while (sourceArray.length > 0) {\n        r = randomFromSeed.nextValue();\n        characterIndex = Math.floor(r * sourceArray.length);\n        targetArray.push(sourceArray.splice(characterIndex, 1)[0]);\n    }\n    return targetArray.join('');\n}\n\nfunction getShuffled() {\n    if (shuffled) {\n        return shuffled;\n    }\n    shuffled = shuffle();\n    return shuffled;\n}\n\n/**\n * lookup shuffled letter\n * @param index\n * @returns {string}\n */\nfunction lookup(index) {\n    var alphabetShuffled = getShuffled();\n    return alphabetShuffled[index];\n}\n\nmodule.exports = {\n    characters: characters,\n    seed: setSeed,\n    lookup: lookup,\n    shuffled: getShuffled\n};\n","'use strict';\n\nvar encode = require('./encode');\nvar alphabet = require('./alphabet');\n\n// Ignore all milliseconds before a certain time to reduce the size of the date entropy without sacrificing uniqueness.\n// This number should be updated every year or so to keep the generated id short.\n// To regenerate `new Date() - 0` and bump the version. Always bump the version!\nvar REDUCE_TIME = 1459707606518;\n\n// don't change unless we change the algos or REDUCE_TIME\n// must be an integer and less than 16\nvar version = 6;\n\n// Counter is used when shortid is called multiple times in one second.\nvar counter;\n\n// Remember the last time shortid was called in case counter is needed.\nvar previousSeconds;\n\n/**\n * Generate unique id\n * Returns string id\n */\nfunction build(clusterWorkerId) {\n\n    var str = '';\n\n    var seconds = Math.floor((Date.now() - REDUCE_TIME) * 0.001);\n\n    if (seconds === previousSeconds) {\n        counter++;\n    } else {\n        counter = 0;\n        previousSeconds = seconds;\n    }\n\n    str = str + encode(alphabet.lookup, version);\n    str = str + encode(alphabet.lookup, clusterWorkerId);\n    if (counter > 0) {\n        str = str + encode(alphabet.lookup, counter);\n    }\n    str = str + encode(alphabet.lookup, seconds);\n\n    return str;\n}\n\nmodule.exports = build;\n","'use strict';\nvar alphabet = require('./alphabet');\n\n/**\n * Decode the id to get the version and worker\n * Mainly for debugging and testing.\n * @param id - the shortid-generated id.\n */\nfunction decode(id) {\n    var characters = alphabet.shuffled();\n    return {\n        version: characters.indexOf(id.substr(0, 1)) & 0x0f,\n        worker: characters.indexOf(id.substr(1, 1)) & 0x0f\n    };\n}\n\nmodule.exports = decode;\n","'use strict';\n\nvar randomByte = require('./random/random-byte');\n\nfunction encode(lookup, number) {\n    var loopCounter = 0;\n    var done;\n\n    var str = '';\n\n    while (!done) {\n        str = str + lookup( ( (number >> (4 * loopCounter)) & 0x0f ) | randomByte() );\n        done = number < (Math.pow(16, loopCounter + 1 ) );\n        loopCounter++;\n    }\n    return str;\n}\n\nmodule.exports = encode;\n","'use strict';\n\nvar alphabet = require('./alphabet');\nvar encode = require('./encode');\nvar decode = require('./decode');\nvar build = require('./build');\nvar isValid = require('./is-valid');\n\n// if you are using cluster or multiple servers use this to make each instance\n// has a unique value for worker\n// Note: I don't know if this is automatically set when using third\n// party cluster solutions such as pm2.\nvar clusterWorkerId = require('./util/cluster-worker-id') || 0;\n\n/**\n * Set the seed.\n * Highly recommended if you don't want people to try to figure out your id schema.\n * exposed as shortid.seed(int)\n * @param seed Integer value to seed the random alphabet.  ALWAYS USE THE SAME SEED or you might get overlaps.\n */\nfunction seed(seedValue) {\n    alphabet.seed(seedValue);\n    return module.exports;\n}\n\n/**\n * Set the cluster worker or machine id\n * exposed as shortid.worker(int)\n * @param workerId worker must be positive integer.  Number less than 16 is recommended.\n * returns shortid module so it can be chained.\n */\nfunction worker(workerId) {\n    clusterWorkerId = workerId;\n    return module.exports;\n}\n\n/**\n *\n * sets new characters to use in the alphabet\n * returns the shuffled alphabet\n */\nfunction characters(newCharacters) {\n    if (newCharacters !== undefined) {\n        alphabet.characters(newCharacters);\n    }\n\n    return alphabet.shuffled();\n}\n\n/**\n * Generate unique id\n * Returns string id\n */\nfunction generate() {\n  return build(clusterWorkerId);\n}\n\n// Export all other functions as properties of the generate function\nmodule.exports = generate;\nmodule.exports.generate = generate;\nmodule.exports.seed = seed;\nmodule.exports.worker = worker;\nmodule.exports.characters = characters;\nmodule.exports.decode = decode;\nmodule.exports.isValid = isValid;\n","'use strict';\nvar alphabet = require('./alphabet');\n\nfunction isShortId(id) {\n    if (!id || typeof id !== 'string' || id.length < 6 ) {\n        return false;\n    }\n\n    var characters = alphabet.characters();\n    var len = id.length;\n    for(var i = 0; i < len;i++) {\n        if (characters.indexOf(id[i]) === -1) {\n            return false;\n        }\n    }\n    return true;\n}\n\nmodule.exports = isShortId;\n","'use strict';\n\nvar crypto = typeof window === 'object' && (window.crypto || window.msCrypto); // IE 11 uses window.msCrypto\n\nfunction randomByte() {\n    if (!crypto || !crypto.getRandomValues) {\n        return Math.floor(Math.random() * 256) & 0x30;\n    }\n    var dest = new Uint8Array(1);\n    crypto.getRandomValues(dest);\n    return dest[0] & 0x30;\n}\n\nmodule.exports = randomByte;\n","'use strict';\n\n// Found this seed-based random generator somewhere\n// Based on The Central Randomizer 1.3 (C) 1997 by Paul Houle (houle@msc.cornell.edu)\n\nvar seed = 1;\n\n/**\n * return a random number based on a seed\n * @param seed\n * @returns {number}\n */\nfunction getNextValue() {\n    seed = (seed * 9301 + 49297) % 233280;\n    return seed/(233280.0);\n}\n\nfunction setSeed(_seed_) {\n    seed = _seed_;\n}\n\nmodule.exports = {\n    nextValue: getNextValue,\n    seed: setSeed\n};\n","'use strict';\n\nmodule.exports = 0;\n","import {ArcGame} from './types';\r\n\r\nimport Promise from 'bluebird';\r\nimport { spawn } from 'child_process';\r\nimport * as path from 'path';\r\nimport { generate as shortid } from 'shortid';\r\nimport { fs, log, types, util } from 'vortex-api';\r\n\r\nexport interface IARCOptions {\r\n  compression?: boolean;\r\n  forceCompression?: boolean;\r\n  game?: ArcGame;\r\n  version?: number;\r\n}\r\n\r\ninterface IListEntry {\r\n  path: string;\r\n  filenameHash?: number;\r\n  correctExt?: string;\r\n  flags?: number;\r\n  compressedSize?: number;\r\n  realSize?: number;\r\n}\r\n\r\nfunction quote(input: string): string {\r\n  return '\"' + input + '\"';\r\n}\r\n\r\nconst winPathRE = /([a-zA-Z]:\\\\(?:[\\w ]+\\\\)*[\\w ]+(?:\\.\\w+)*)/;\r\n\r\nclass ARCWrapper {\r\n\r\n  private mApi: types.IExtensionApi;\r\n\r\n  constructor(api: types.IExtensionApi) {   \r\n    console.log(\"ARCWrapper constructor\", api); \r\n    this.mApi = api;\r\n  }\r\n\r\n  public list(archivePath: string, options?: IARCOptions): Promise<string[]> {\r\n    const outputFile = archivePath + '.verbose.txt';\r\n    let output: string[] = [];\r\n    return this.run('l', [ quote(archivePath) ], options || {})\r\n      .then(() => fs.readFileAsync(outputFile))\r\n      .then(data => {\r\n        output = this.parseList(data.toString()).map(entry => entry.path);\r\n        return fs.unlinkAsync(outputFile);\r\n      })\r\n      .then(() => output);\r\n  }\r\n\r\n  public extract(archivePath: string, outputPath: string, options?: IARCOptions): Promise<void> {\r\n    const ext = path.extname(archivePath);\r\n    const baseName = path.basename(archivePath, ext);\r\n    const id = shortid();\r\n    const tempPath = path.join(path.dirname(archivePath), id + '_' + baseName);\r\n\r\n    // have to temporarily move the archive because arctool will use the file name as the name\r\n    // for the output directory and we want to avoid name conflicts\r\n    return fs.moveAsync(archivePath, tempPath + ext)\r\n      .then(() => this.run('x', [ '-txt', quote(tempPath + ext) ], options || {}))\r\n      .then(() => fs.moveAsync(tempPath + ext, archivePath))\r\n      .then(() => fs.moveAsync(tempPath, outputPath, { overwrite: true }))\r\n      // extracting generates a file order file we need to repackage correctly (in Dragon's Dogma at least).\r\n      // Note that _ext_ may contain .vortex_backup if we're not deploying clean, the file list should not\r\n      // contain that extension though\r\n      .then(() => fs.moveAsync(tempPath + ext + '.txt', outputPath + '.arc.txt', { overwrite: true }).catch(() => null));\r\n  }\r\n\r\n  public create(archivePath: string, source: string, options?: IARCOptions): Promise<void> {\r\n    const args: string[] = [];\r\n\r\n    return fs.statAsync(source + '.arc.txt')\r\n      .then(() => {\r\n        args.push('-txt');\r\n      })\r\n      .catch(err => {\r\n        // this very likely means the mod isn't going to work because it indicates\r\n        // the \"original\" file doesn't exist, at least not in the same folder, so this\r\n        // arc file will not get loaded by the game.\r\n        log('warn', 'file order file missing', { source, error: err.message });\r\n      })\r\n      .then(() => this.run('c', [ ...args, quote(source) ], options || {}))\r\n      .then(() => fs.moveAsync(source + '.arc', archivePath, { overwrite: true }));\r\n  }\r\n\r\n  private parseList(input: string): IListEntry[] {\r\n    const res = [];\r\n    let current: IListEntry;\r\n    input.split('\\n').forEach(line => {\r\n      const arr = line.trim().split('=');\r\n      if (arr.length !== 2) {\r\n        return;\r\n      }\r\n      const [ key, value ] = arr;\r\n\r\n      if (key === 'Path') {\r\n        if (current !== undefined) {\r\n          res.push(current);\r\n        }\r\n        current = {\r\n          path: value,\r\n        };\r\n      } else if (current !== undefined) {\r\n        current[key] = value;\r\n      }\r\n    });\r\n    return res;\r\n  }\r\n\r\n  private run(command: string, parameters: string[], options: IARCOptions): Promise<void> {\r\n    return new Promise<void>((resolve, reject) => {\r\n      let args = [\r\n        '-' + command,\r\n        options.game !== undefined ? '-' + options.game : '-DD',\r\n        '-pc',\r\n        // this should be ok but if we ever support merging in loose files, we'd probably\r\n        // want the extensions to be \"corrected\"\r\n        // '-noextcorrect',\r\n        // texRE6 is the default anyway\r\n        '-texRE6',\r\n        // this is set by guides around Dragon's Dogma. Not sure if/why this is necessary\r\n        '-alwayscomp',\r\n      ];\r\n\r\n      if (options.version !== undefined) {\r\n        args.push('-v');\r\n        args.push(options.version.toFixed());\r\n      } else {\r\n        // correct default for Dragon's Dogma? We don't currently have a way\r\n        // to set options from the game extension so not entirely sure how to correctly\r\n        // set this if/when this extension is used for other games\r\n        args.push('-v', '7');\r\n      }\r\n      args = args.concat(parameters);\r\n\r\n      const process = spawn(quote(path.join(__dirname, 'ARCtool.exe')), args, {\r\n        shell: true,\r\n      });\r\n\r\n      const errorLines = [];\r\n\r\n      process.on('error', (err) => reject(err));\r\n\r\n      process.on('close', (code) => {\r\n\r\n        if (code !== 0) {\r\n          log('error', 'ARCtool.exe failed with status code ' + code);\r\n          \r\n          this.mApi.showErrorNotification('ARCtool has failed.', 'ARCtool.exe failed with status code ' + code, {\r\n            allowReport:false\r\n          });\r\n          return reject(new util.ProcessCanceled('ARCtool.exe failed with status code ' + code));\r\n        }\r\n\r\n        // unfortunately ARCtool returns 0 even in error cases\r\n        if (errorLines.length !== 0) {\r\n          const err = new Error(errorLines.join('\\n'));\r\n          err['attachLogOnReport'] = true;\r\n          return reject(err);\r\n        }\r\n        return resolve();\r\n      });\r\n\r\n      process.stdout.on('data', data => {\r\n        const lines = data.toString().split('\\n');\r\n        lines.forEach(line => {\r\n          if (line.startsWith('Error')) {\r\n            errorLines.push(line.replace(winPathRE, '\"$1\"'));\r\n          }\r\n        });\r\n      });\r\n      process.stderr.on('data', data => {\r\n        // ARCTool doesn't use stderr\r\n        data.toString().split('\\n').forEach(line => errorLines.push(line));\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\nexport default ARCWrapper;\r\n","import * as React from 'react';\nimport { withTranslation } from 'react-i18next';\nimport { PureComponentEx, util } from 'vortex-api';\n\nimport * as api from 'vortex-api';\nconst { Dashlet } = api as any;\n\nconst ARCTOOL_THREAD = 'http://residentevilmodding.boards.net/thread/5774/arctool';\nconst DOWNLOAD_PAGE = 'http://www.fluffyquack.com/tools';\n\nclass AttribDashlet extends PureComponentEx<{}, {}> {\n  public render() {\n    const { t } = this.props;\n    return (\n      <Dashlet\n        title={t('Support for this game is made possible using ARCtool')}\n        className='dashlet-arcsupport'\n      >\n        <div>{t('Shared with kind permission by {{author}}',\n              { replace: { author: 'FluffyQuack' }})}</div>\n        <hr/>\n        <div>\n          {t('Official Release Thread: ')}\n          <a onClick={this.openThread}>{ARCTOOL_THREAD}</a>\n        </div>\n        <div>\n          {t('Newest version is always available at: ')}\n          <a onClick={this.openDLPage}>{DOWNLOAD_PAGE}</a>/ARCtool.rar\n        </div>\n      </Dashlet>\n    );\n  }\n\n  private openThread = () => {\n    (util as any).opn(ARCTOOL_THREAD);\n  }\n\n  private openDLPage = () => {\n    (util as any).opn(DOWNLOAD_PAGE);\n  }\n}\n\nexport default withTranslation(['common', 'arc-support'])(\n  AttribDashlet as any) as React.ComponentClass<{}>;\n","import { ArcGame } from './types';\r\n\r\nconst gameSupport = {\r\n  dragonsdogma: {\r\n    arcId: 'DD',\r\n    arcVersion: 7,\r\n  },\r\n};\r\n\r\nexport function gameSupported(gameMode: string): boolean {\r\n  return gameSupport[gameMode] !== undefined;\r\n}\r\n\r\nexport function arcGameId(gameMode: string): ArcGame {\r\n  return (gameMode !== undefined)\r\n    ? gameSupport[gameMode].arcId\r\n    : undefined;\r\n}\r\n\r\nexport function arcVersion(gameMode: string): number {\r\n  return (gameMode !== undefined)\r\n    ? gameSupport[gameMode].arcVersion\r\n    : undefined;\r\n}\r\n","import ARCWrapper from './ARCWrapper';\r\nimport AttribDashlet from './AttribDashlet';\r\nimport { arcGameId, arcVersion } from './gameSupport';\r\nimport {ArcGame} from './types';\r\n\r\nimport Promise from 'bluebird';\r\nimport * as fs from 'fs';\r\nimport * as path from 'path';\r\nimport { log, selectors, types } from 'vortex-api';\r\n\r\nclass ARCHandler implements types.IArchiveHandler {\r\n  private mArc: ARCWrapper;\r\n  private mArchivePath: string;\r\n  private mGame: ArcGame;\r\n  private mVersion: number;\r\n\r\n  constructor(api: types.IExtensionApi, fileName: string, options: types.IArchiveOptions) {\r\n    this.mArchivePath = fileName;\r\n    this.mGame = arcGameId(options.gameId);\r\n    this.mVersion = arcVersion(options.gameId);\r\n    this.mArc = new ARCWrapper(api);\r\n  }\r\n\r\n  public readDir(dirPath: string): Promise<string[]> {\r\n    return this.mArc.list(this.mArchivePath,\r\n                          { game: this.mGame, version: this.mVersion })\r\n      .then(list => list\r\n        .filter(entry => entry.startsWith(dirPath))\r\n        .map(entry => entry.substr(dirPath.length)));\r\n  }\r\n\r\n  public extractAll(outputPath: string): Promise<void> {\r\n    return this.mArc.extract(this.mArchivePath, outputPath,\r\n                             { game: this.mGame, version: this.mVersion });\r\n  }\r\n\r\n  public create(sourcePath: string): Promise<void> {\r\n    return this.mArc.create(this.mArchivePath, sourcePath,\r\n                            { game: this.mGame, version: this.mVersion });\r\n  }\r\n}\r\n\r\nfunction createARCHandler(api: types.IExtensionApi, fileName: string,\r\n                          options: types.IArchiveOptions): Promise<types.IArchiveHandler> {\r\n                            log('info', 'createARCHandler');\r\n  return Promise.resolve(new ARCHandler(api, fileName, options));\r\n}\r\n\r\nfunction isSupported(state: types.IState) {\r\n  const gameMode = selectors.activeGameId(state);\r\n\r\n  return ['dragonsdogma'].indexOf(gameMode) !== -1;\r\n}\r\n\r\nfunction init(context: types.IExtensionContext) {\r\n\r\n  try {\r\n    fs.statSync(path.join(__dirname, 'ARCtool.exe'));\r\n  } catch (err) {\r\n    log('warn', 'To use MT Framework games (Dragon\\'s Dogma) you need to download ARCtool.rar '\r\n      + `from http://www.fluffyquack.com/tools/ and unpack it to ${__dirname}`);\r\n    return false;\r\n  }\r\n\r\n  context.registerArchiveType('arc', (fileName, options) => createARCHandler(context.api, fileName, options));\r\n\r\n  context.registerDashlet('ARC Support', 1, 2, 250, AttribDashlet, isSupported, () => ({}), undefined);\r\n\r\n  return true;\r\n}\r\n\r\nexport default init;\r\n","module.exports = require(\"bluebird\");","module.exports = require(\"child_process\");","module.exports = require(\"fs\");","module.exports = require(\"path\");","module.exports = require(\"react\");","module.exports = require(\"react-i18next\");","module.exports = require(\"vortex-api\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/index.ts\");\n",""],"names":[],"sourceRoot":""}