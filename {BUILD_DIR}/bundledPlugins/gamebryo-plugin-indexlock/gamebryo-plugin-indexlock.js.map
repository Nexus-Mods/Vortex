{"version":3,"file":"index.js","mappings":"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","sources":["webpack://gamebryo-plugin-indexlock/./src/LockIndex.tsx","webpack://gamebryo-plugin-indexlock/./src/actions.ts","webpack://gamebryo-plugin-indexlock/./src/index.tsx","webpack://gamebryo-plugin-indexlock/./src/reducers.ts","webpack://gamebryo-plugin-indexlock/external commonjs2 \"bluebird\"","webpack://gamebryo-plugin-indexlock/external commonjs2 \"react\"","webpack://gamebryo-plugin-indexlock/external commonjs2 \"react-bootstrap\"","webpack://gamebryo-plugin-indexlock/external commonjs2 \"react-i18next\"","webpack://gamebryo-plugin-indexlock/external commonjs2 \"react-redux\"","webpack://gamebryo-plugin-indexlock/external commonjs2 \"redux-act\"","webpack://gamebryo-plugin-indexlock/external commonjs2 \"vortex-api\"","webpack://gamebryo-plugin-indexlock/webpack/bootstrap","webpack://gamebryo-plugin-indexlock/webpack/before-startup","webpack://gamebryo-plugin-indexlock/webpack/startup","webpack://gamebryo-plugin-indexlock/webpack/after-startup"],"sourcesContent":["import { lockPluginIndex } from './actions';\r\nimport { IPlugin } from './types';\r\n\r\nimport * as React from 'react';\r\nimport { ControlLabel, FormControl, FormGroup, Radio } from 'react-bootstrap';\r\nimport { withTranslation } from 'react-i18next';\r\nimport { connect } from 'react-redux';\r\nimport * as Redux from 'redux';\r\nimport { ComponentEx, FlexLayout, Toggle, types, util } from 'vortex-api';\r\n\r\nfunction toHex(input: number) {\r\n  if (input === undefined) {\r\n    return 'FF';\r\n  }\r\n  let res = input.toString(16).toUpperCase();\r\n  if (res.length < 2) {\r\n    res = '0' + res;\r\n  }\r\n  return res;\r\n}\r\n\r\nexport interface IBaseProps {\r\n  gameMode: string;\r\n  plugin: IPlugin;\r\n}\r\n\r\ninterface IConnectedProps {\r\n  lockedIndex: number;\r\n}\r\n\r\ninterface IActionProps {\r\n  onLockPluginIndex: (gameId: string, pluginName: string, modIndex: number) => void;\r\n}\r\n\r\ntype IProps = IBaseProps & IConnectedProps & IActionProps;\r\n\r\nclass LockIndex extends ComponentEx<IProps, {}> {\r\n  public render(): JSX.Element {\r\n    const { t, lockedIndex } = this.props;\r\n    const title = (lockedIndex !== undefined)\r\n      ? t('Locked to index', { replace: { lockedIndex: toHex(lockedIndex) } })\r\n      : t('Sorted automatically');\r\n    return (\r\n      <FlexLayout type='column'>\r\n        <Radio\r\n          name='lockedGroup'\r\n          checked={lockedIndex === undefined}\r\n          data-value='automatic'\r\n          onChange={this.onToggleEvt}\r\n        >\r\n          {t('Sorted automatically')}\r\n        </Radio>\r\n        <Radio\r\n          name='lockedGroup'\r\n          checked={lockedIndex !== undefined}\r\n          data-value='locked'\r\n          onChange={this.onToggleEvt}\r\n        >\r\n          {t('Locked to index')}\r\n        </Radio>\r\n        {this.renderIndex()}\r\n      </FlexLayout>\r\n    );\r\n  }\r\n\r\n  private renderIndex(): JSX.Element {\r\n    const { t, lockedIndex, plugin } = this.props;\r\n\r\n    const matched = (lockedIndex === undefined) || (plugin.modIndex === lockedIndex);\r\n\r\n    return (\r\n      <FormGroup validationState={matched ? 'success' : 'error'}>\r\n        <FormControl\r\n          type='text'\r\n          value={(lockedIndex !== undefined) ? toHex(lockedIndex) : ''}\r\n          placeholder={t('Automatic')}\r\n          onChange={this.setIndex}\r\n          disabled={lockedIndex === undefined}\r\n        />\r\n        {matched ? null : (\r\n          <ControlLabel style={{ maxWidth: 250 }}>\r\n            {t('Actual index differs. If this is the case after sorting it may be '\r\n               + 'this index isn\\'t possible.')}\r\n          </ControlLabel>\r\n        )}\r\n      </FormGroup>\r\n    );\r\n  }\r\n\r\n  private onToggle = (newValue: boolean, dataId?: string) => {\r\n    const { gameMode, onLockPluginIndex, plugin } = this.props;\r\n    onLockPluginIndex(gameMode, plugin.name.toLowerCase(), newValue ? plugin.modIndex : undefined);\r\n    this.forceUpdate();\r\n  }\r\n\r\n  private onToggleEvt = (evt: React.FormEvent<any>) => {\r\n    const value = evt.currentTarget.getAttribute('data-value');\r\n    this.onToggle(value === 'locked');\r\n  }\r\n\r\n  private setIndex = (evt) => {\r\n    const { gameMode, onLockPluginIndex, plugin } = this.props;\r\n    const newValue = Number.parseInt(evt.currentTarget.value, 16);\r\n    if (!isNaN(newValue) && (newValue <= 0xFF)) {\r\n      onLockPluginIndex(gameMode, plugin.name.toLowerCase(), newValue);\r\n    }\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state: types.IState, ownProps: IBaseProps): IConnectedProps {\r\n  const statePath = ['persistent', 'plugins', 'lockedIndices',\r\n                     ownProps.gameMode, ownProps.plugin.name.toLowerCase()];\r\n  return {\r\n    lockedIndex: util.getSafe(state, statePath, undefined),\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Redux.Dispatch<any, any>): IActionProps {\r\n  return {\r\n    onLockPluginIndex: (gameId: string, pluginId: string, modIndex: number) =>\r\n      dispatch(lockPluginIndex(gameId, pluginId, modIndex)),\r\n  };\r\n}\r\n\r\nexport default withTranslation(['common', 'gamebryo-lockindex'])(\r\n  connect(mapStateToProps, mapDispatchToProps)(\r\n    LockIndex) as any) as React.ComponentClass<IBaseProps>;\r\n","import { createAction } from 'redux-act';\r\n\r\nexport const lockPluginIndex = createAction('SET_PLUGIN_LOCKED_INDEX',\r\n  (gameId: string, plugin: string, index: number) => ({gameId, plugin, index}));\r\n","import LockIndex from './LockIndex';\r\nimport { indexReducer } from './reducers';\r\nimport { IPlugin } from './types';\r\n\r\nimport Promise from 'bluebird';\r\nimport * as React from 'react';\r\nimport { selectors, types, util } from 'vortex-api';\r\n\r\nfunction genAttribute(api: types.IExtensionApi): types.ITableAttribute<IPlugin> {\r\n  return {\r\n    id: 'lockIndex',\r\n    name: 'Lock Mod Index',\r\n    icon: 'locked',\r\n    help: api.translate('Use this to directly control the mod index of a plugin.\\n'\r\n      + 'This will completely override the order generated automatically and is '\r\n      + 'only intended as a temporary measure or during mod development.\\n\\n'\r\n      + 'Please note that if the index you choose is not possible because it\\'s too low '\r\n      + 'or too high, the plugin is prepended/appended to the list and will not have the expected '\r\n      + 'mod index.\\n\\n'\r\n      + 'Further note: This lets you place non-master esps before masters but the game '\r\n      + 'will not load them in this order.'),\r\n    customRenderer:\r\n        (plugin: IPlugin) => (\r\n          <LockIndex\r\n            plugin={plugin}\r\n            gameMode={selectors.activeGameId(api.store.getState())}\r\n          />\r\n        ),\r\n    calc: (plugin: IPlugin) => {\r\n      const state: types.IState = api.store.getState();\r\n      const gameMode = selectors.activeGameId(state);\r\n      const statePath = ['persistent', 'plugins', 'lockedIndices', gameMode, plugin.name];\r\n      return util.getSafe(state, statePath, undefined);\r\n    },\r\n    placement: 'detail',\r\n    isVolatile: true,\r\n    edit: {},\r\n  };\r\n}\r\n\r\ninterface ILoadOrderEntry {\r\n  name: string;\r\n  enabled: boolean;\r\n  loadOrder: number;\r\n}\r\n\r\nfunction genApplyIndexlock(api: types.IExtensionApi) {\r\n  let updating: boolean = false;\r\n  return (newLoadOrder: { [key: string]: ILoadOrderEntry }) => {\r\n    if (updating) {\r\n      return;\r\n    }\r\n\r\n    const state: types.IState = api.store.getState();\r\n    const gameMode = selectors.activeGameId(state);\r\n    const fixed = util.getSafe(state, ['persistent', 'plugins', 'lockedIndices', gameMode], {});\r\n    if (Object.keys(fixed).length === 0) {\r\n      // hopefully the default case: nothing locked\r\n      return;\r\n    }\r\n\r\n    const pluginInfo: { [id: string]: any } =\r\n      util.getSafe(state, ['session', 'plugins', 'pluginInfo'], {});\r\n\r\n    // create sorted order without any locked plugins\r\n    const sorted = Object.keys(newLoadOrder)\r\n      .filter(key => fixed[key] === undefined)\r\n      .sort((lhs, rhs) => newLoadOrder[lhs].loadOrder - newLoadOrder[rhs].loadOrder);\r\n\r\n    // locked index -> locked plugin\r\n    const toInsert: { [idx: number]: string } = Object.keys(fixed).reduce((prev, key) => {\r\n      if (newLoadOrder[key] !== undefined) {\r\n        prev[fixed[key]] = key;\r\n      }\r\n      return prev;\r\n    }, {});\r\n\r\n    let currentIndex: number = 0;\r\n\r\n    // insert the plugins where the locked index is too low at the beginning\r\n    // TODO: This is rather inefficient but it should also not run too often\r\n    // TODO: This code does nothing. It was originally written to insert those\r\n    //   fixed plugins where the fixed idx was so low it would have had to be inserted before\r\n    //   native plugins. How is this prevented now?\r\n    const prependOffset = 0;\r\n    while (true) {\r\n      const lowIdx =\r\n        Object.keys(toInsert)\r\n          .map(idx => parseInt(idx, 10))\r\n          .sort()\r\n          .find(idx => (idx <= currentIndex));\r\n      if (lowIdx === undefined) {\r\n        break;\r\n      }\r\n      sorted.splice(prependOffset, 0, toInsert[lowIdx]);\r\n      delete toInsert[lowIdx];\r\n      ++currentIndex;\r\n    }\r\n\r\n    const isNative = (id: string) =>\r\n      util.getSafe(state.session, ['plugins', 'pluginList', id, 'isNative'], false);\r\n\r\n    const isEnabled = (id: string, entry: ILoadOrderEntry) => entry.enabled || isNative(id);\r\n\r\n    // this inserts all fixed-index plugins in the middle of the list\r\n    // tslint:disable-next-line:prefer-for-of\r\n    for (let idx = 0; (idx < sorted.length) && (Object.keys(toInsert).length > 0); ++idx) {\r\n      if ((newLoadOrder[sorted[idx]] === undefined)\r\n          || !isEnabled(sorted[idx], newLoadOrder[sorted[idx]])\r\n          || util.getSafe(pluginInfo, [sorted[idx], 'isLight'], false)) {\r\n        continue;\r\n      }\r\n\r\n      ++currentIndex;\r\n      if (toInsert[currentIndex] !== undefined) {\r\n        sorted.splice(idx + 1, 0, toInsert[currentIndex]);\r\n        delete toInsert[currentIndex];\r\n      }\r\n    }\r\n    // finally, append everything that has an index higher than the last regularly sorted one\r\n    Object.keys(toInsert).forEach(idx => {\r\n      sorted.push(toInsert[idx]);\r\n    });\r\n    try {\r\n      updating = true;\r\n      api.events.emit('set-plugin-list', sorted.map(id => (newLoadOrder[id] !== undefined)\r\n        ? (newLoadOrder[id].name || id)\r\n        : id), false);\r\n    } finally {\r\n      updating = false;\r\n    }\r\n  };\r\n}\r\n\r\nfunction init(context: types.IExtensionContext) {\r\n  context.requireExtension('gamebryo-plugin-management');\r\n  context.registerReducer(['persistent', 'plugins', 'lockedIndices'], indexReducer);\r\n\r\n  context.registerTableAttribute('gamebryo-plugins', genAttribute(context.api));\r\n\r\n  context.once(() => {\r\n    const { store } = context.api;\r\n    const liDebouncer = new util.Debouncer(() => {\r\n      applyIndexlock(util.getSafe(store.getState(), ['loadOrder'], {}));\r\n      return Promise.resolve();\r\n    }, 2000);\r\n    const applyIndexlock = genApplyIndexlock(context.api);\r\n\r\n    let deploying = false;\r\n\r\n    context.api.onAsync('will-deploy', () => { deploying = true; return Promise.resolve(); });\r\n    context.api.onAsync('did-deploy', () => { deploying = false; return Promise.resolve(); });\r\n\r\n    context.api.onStateChange(['loadOrder'], (oldState, newState) => {\r\n      if (!deploying) {\r\n        return applyIndexlock(newState);\r\n      }\r\n    });\r\n    context.api.onStateChange(['session', 'plugins', 'pluginInfo'], () => {\r\n      const state = store.getState();\r\n      applyIndexlock(state.loadOrder);\r\n    });\r\n    context.api.onStateChange(['persistent', 'plugins', 'lockedIndices'], () => {\r\n      liDebouncer.schedule();\r\n    });\r\n  });\r\n  return true;\r\n}\r\n\r\nexport default init;\r\n","import { types, util } from 'vortex-api';\r\n\r\nimport * as actions from './actions';\r\n\r\n/**\r\n * reducer for changes to the plugin list\r\n */\r\nexport const indexReducer: types.IReducerSpec = {\r\n  reducers: {\r\n    [actions.lockPluginIndex as any]: (state, payload) => (payload.index !== undefined)\r\n      ? util.setSafe(state, [payload.gameId, payload.plugin], payload.index)\r\n      : util.deleteOrNop(state, [payload.gameId, payload.plugin]),\r\n  },\r\n  defaults: {\r\n  },\r\n};\r\n","module.exports = require(\"bluebird\");","module.exports = require(\"react\");","module.exports = require(\"react-bootstrap\");","module.exports = require(\"react-i18next\");","module.exports = require(\"react-redux\");","module.exports = require(\"redux-act\");","module.exports = require(\"vortex-api\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/index.tsx\");\n",""],"names":[],"sourceRoot":""}